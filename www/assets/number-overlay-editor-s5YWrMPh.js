import{B as Ee,W as J,r as B}from"./index-CHFZAUhc.js";const Re=Ee("div")({name:"NumberOverlayEditorStyle",class:"gdg-n15fjm3e",propsAsIs:!1});function se(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a}var Y;(function(e){e.event="event",e.props="prop"})(Y||(Y={}));function G(){}function ee(e){return!!(e||"").match(/\d/)}function Q(e){return e==null}function Ae(e){return typeof e=="number"&&isNaN(e)}function ve(e){return Q(e)||Ae(e)||typeof e=="number"&&!isFinite(e)}function ce(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Oe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Te(e,t,a){var n=Oe(a),r=e.search(/[1-9]/);return r=r===-1?e.length:r,e.substring(0,r)+e.substring(r,e.length).replace(n,"$1"+t)}function Be(e){var t=B.useRef(e);t.current=e;var a=B.useRef(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t.current.apply(t,n)});return a.current}function ne(e,t){t===void 0&&(t=!0);var a=e[0]==="-",n=a&&t;e=e.replace("-","");var r=e.split("."),i=r[0],f=r[1]||"";return{beforeDecimal:i,afterDecimal:f,hasNegation:a,addNegation:n}}function Fe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var a=e.split("."),n=a[0].replace(/^0+/,"")||"0",r=a[1]||"";return(t?"-":"")+n+(r?"."+r:"")}function de(e,t,a){for(var n="",r=a?"0":"",i=0;i<=t-1;i++)n+=e[i]||r;return n}function oe(e,t){return Array(t+1).join(e)}function ge(e){var t=e+"",a=t[0]==="-"?"-":"";a&&(t=t.substring(1));var n=t.split(/[eE]/g),r=n[0],i=n[1];if(i=Number(i),!i)return a+r;r=r.replace(".","");var f=1+i,g=r.length;return f<0?r="0."+oe("0",Math.abs(f))+r:f>=g?r=r+oe("0",f-g):r=(r.substring(0,f)||"0")+"."+r.substring(f),a+r}function ue(e,t,a){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||a)&&t,r=ne(e),i=r.beforeDecimal,f=r.afterDecimal,g=r.hasNegation,p=parseFloat("0."+(f||"0")),N=f.length<=t?"0."+f:p.toFixed(t),d=N.split("."),v=i.split("").reverse().reduce(function(y,w,E){return y.length>E?(Number(y[0])+Number(w)).toString()+y.substring(1,y.length):w+y},d[0]),h=de(d[1]||"",t,a),m=g?"-":"",l=n?".":"";return""+m+v+l+h}function q(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",t),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}function me(e,t){for(var a=0,n=0,r=e.length,i=t.length;e[a]===t[a]&&a<r;)a++;for(;e[r-1-n]===t[i-1-n]&&i-n>a&&r-n>a;)n++;return{from:{start:a,end:r-n},to:{start:a,end:i-n}}}function _e(e,t,a){return Math.min(Math.max(e,t),a)}function re(e){return Math.max(e.selectionStart,e.selectionEnd)}function Le(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function je(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Me(e,t,a,n,r,i){var f=me(a,e),g=f.from,p=f.to;if(g.end-g.start===1&&g.end===p.end&&p.end===n)return n;var N=r.findIndex(function(K){return K}),d=e.slice(0,N);!t&&!a.startsWith(d)&&(a=d+a,n=n+d.length);for(var v=a.length,h=e.length,m={},l=new Array(v),y=0;y<v;y++){l[y]=-1;for(var w=0,E=h;w<E;w++)if(a[y]===e[w]&&m[w]!==!0){l[y]=w,m[w]=!0;break}}for(var x=n;x<v&&(l[x]===-1||!i(a[x]));)x++;var A=x===v||l[x]===-1?h:l[x];for(x=n-1;x>0&&l[x]===-1;)x--;var L=x===-1||l[x]===-1?0:l[x]+1;return L>A?A:n-L<A-n?L:A}function fe(e,t,a,n){var r=e.length;if(t=_e(t,0,r),n==="left"){for(;t>=0&&!a[t];)t--;t===-1&&(t=a.indexOf(!0))}else{for(;t<=r&&!a[t];)t++;t>r&&(t=a.lastIndexOf(!0))}return t===-1&&(t=r),t}function ke(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),a=0,n=t.length;a<n;a++)t[a]=!!(ee(e[a])||ee(e[a-1]));return t}function he(e,t,a,n,r,i){i===void 0&&(i=G);var f=Be(function(l,y){var w,E;return ve(l)?(E="",w=""):typeof l=="number"||y?(E=typeof l=="number"?ge(l):l,w=n(E)):(E=r(l,void 0),w=n(E)),{formattedValue:w,numAsString:E}}),g=B.useState(function(){return f(Q(e)?t:e,a)}),p=g[0],N=g[1],d=function(l,y){l.formattedValue!==p.formattedValue&&N({formattedValue:l.formattedValue,numAsString:l.value}),i(l,y)},v=e,h=a;Q(e)&&(v=p.numAsString,h=!0);var m=f(v,h);return B.useMemo(function(){N(m)},[m.formattedValue]),[p,d]}function Pe(e){return e.replace(/[^0-9]/g,"")}function We(e){return e}function Ke(e){var t=e.type;t===void 0&&(t="text");var a=e.displayType;a===void 0&&(a="input");var n=e.customInput,r=e.renderText,i=e.getInputRef,f=e.format;f===void 0&&(f=We);var g=e.removeFormatting;g===void 0&&(g=Pe);var p=e.defaultValue,N=e.valueIsNumericString,d=e.onValueChange,v=e.isAllowed,h=e.onChange;h===void 0&&(h=G);var m=e.onKeyDown;m===void 0&&(m=G);var l=e.onMouseUp;l===void 0&&(l=G);var y=e.onFocus;y===void 0&&(y=G);var w=e.onBlur;w===void 0&&(w=G);var E=e.value,x=e.getCaretBoundary;x===void 0&&(x=ke);var A=e.isValidInputCharacter;A===void 0&&(A=ee);var L=se(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter"]),K=he(E,p,!!N,f,g,d),Z=K[0],S=Z.formattedValue,U=Z.numAsString,$=K[1],M=B.useRef({formattedValue:S,numAsString:U}),H=function(o,u){M.current={formattedValue:o.formattedValue,numAsString:o.value},$(o,u)},z=B.useState(!1),c=z[0],b=z[1],F=B.useRef(null),I=B.useRef({setCaretTimeout:null,focusTimeout:null});B.useEffect(function(){return b(!0),function(){clearTimeout(I.current.setCaretTimeout),clearTimeout(I.current.focusTimeout)}},[]);var k=f,O=function(o,u){var s=parseFloat(u);return{formattedValue:o,value:u,floatValue:isNaN(s)?void 0:s}},j=function(o,u,s){o.selectionStart===0&&o.selectionEnd===o.value.length||(q(o,u),I.current.setCaretTimeout=setTimeout(function(){o.value===s&&o.selectionStart!==o.selectionEnd&&q(o,u)},0))},_=function(o,u,s){return fe(o,u,x(o),s)},P=function(o,u,s){var V=x(u),C=Me(u,S,o,s,V,A);return C=fe(u,C,V),C},W=function(o){var u=o.formattedValue;u===void 0&&(u="");var s=o.input,V=o.setCaretPosition;V===void 0&&(V=!0);var C=o.source,D=o.event,R=o.numAsString,T=o.caretPos;if(s){if(T===void 0&&V){var X=o.inputValue||s.value,ae=re(s);s.value=u,T=P(X,u,ae)}s.value=u,V&&T!==void 0&&j(s,T,u)}u!==S&&H(O(u,R),{event:D,source:C})};B.useEffect(function(){var o=M.current,u=o.formattedValue,s=o.numAsString;S!==u&&(S!==U||u!==s)&&H(O(S,U),{event:void 0,source:Y.props})},[S,U]);var pe=F.current?re(F.current):void 0,ye=typeof window<"u"?B.useLayoutEffect:B.useEffect;ye(function(){var o=F.current;if(S!==M.current.formattedValue&&o){var u=P(M.current.formattedValue,S,pe);o.value=S,j(o,u,S)}},[S]);var be=function(o,u,s){var V=me(S,o),C=Object.assign(Object.assign({},V),{lastValue:S}),D=g(o,C),R=k(D);if(D=g(R,void 0),v&&!v(O(R,D))){var T=u.target,X=re(T),ae=P(o,S,X);return T.value=S,j(T,ae,S),!1}return W({formattedValue:R,numAsString:D,inputValue:o,event:u,source:s,setCaretPosition:!0,input:u.target}),!0},xe=function(o){var u=o.target,s=u.value,V=be(s,o,Y.event);V&&h(o)},Ne=function(o){var u=o.target,s=o.key,V=u.selectionStart,C=u.selectionEnd,D=u.value;D===void 0&&(D="");var R;if(s==="ArrowLeft"||s==="Backspace"?R=Math.max(V-1,0):s==="ArrowRight"?R=Math.min(V+1,D.length):s==="Delete"&&(R=V),R===void 0||V!==C){m(o);return}var T=R;if(s==="ArrowLeft"||s==="ArrowRight"){var X=s==="ArrowLeft"?"left":"right";T=_(D,R,X),T!==R&&o.preventDefault()}else s==="Delete"&&!A(D[R])?T=_(D,R,"right"):s==="Backspace"&&!A(D[R])&&(T=_(D,R,"left"));T!==R&&j(u,T,D),o.isUnitTestRun&&j(u,T,D),m(o)},we=function(o){var u=o.target,s=u.selectionStart,V=u.selectionEnd,C=u.value;if(C===void 0&&(C=""),s===V){var D=_(C,s);D!==s&&j(u,D,C)}l(o)},De=function(o){o.persist&&o.persist();var u=o.target;F.current=u,I.current.focusTimeout=setTimeout(function(){var s=u.selectionStart,V=u.selectionEnd,C=u.value;C===void 0&&(C="");var D=_(C,s);D!==s&&!(s===0&&V===C.length)&&j(u,D,C),y(o)},0)},Ve=function(o){F.current=null,clearTimeout(I.current.focusTimeout),clearTimeout(I.current.setCaretTimeout),w(o)},Ce=c&&Le()?"numeric":void 0,ie=Object.assign({inputMode:Ce},L,{type:t,value:S,onChange:xe,onKeyDown:Ne,onMouseUp:we,onFocus:De,onBlur:Ve});if(a==="text")return r?J.createElement(J.Fragment,null,r(S,L)||null):J.createElement("span",Object.assign({},L,{ref:i}),S);if(n){var Ie=n;return J.createElement(Ie,Object.assign({},ie,{ref:i}))}return J.createElement("input",Object.assign({},ie,{ref:i}))}function le(e,t){var a=t.decimalScale,n=t.fixedDecimalScale,r=t.prefix;r===void 0&&(r="");var i=t.suffix;i===void 0&&(i="");var f=t.allowNegative,g=t.thousandsGroupStyle;if(g===void 0&&(g="thousand"),e===""||e==="-")return e;var p=te(t),N=p.thousandSeparator,d=p.decimalSeparator,v=a!==0&&e.indexOf(".")!==-1||a&&n,h=ne(e,f),m=h.beforeDecimal,l=h.afterDecimal,y=h.addNegation;return a!==void 0&&(l=de(l,a,!!n)),N&&(m=Te(m,N,g)),r&&(m=r+m),i&&(l=l+i),y&&(m="-"+m),e=m+(v&&d||"")+l,e}function te(e){var t=e.decimalSeparator;t===void 0&&(t=".");var a=e.thousandSeparator,n=e.allowedDecimalSeparators;return a===!0&&(a=","),n||(n=[t,"."]),{decimalSeparator:t,thousandSeparator:a,allowedDecimalSeparators:n}}function Ue(e,t){e===void 0&&(e="");var a=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),r=a.test(e),i=n.test(e);return e=e.replace(/-/g,""),r&&!i&&t&&(e="-"+e),e}function $e(e,t){return new RegExp("(^-)|[0-9]|"+ce(e),"g")}function Ge(e,t,a){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(a!=null&&a.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Ze(e,t,a){var n;t===void 0&&(t=je(e));var r=a.allowNegative,i=a.prefix;i===void 0&&(i="");var f=a.suffix;f===void 0&&(f="");var g=a.decimalScale,p=t.from,N=t.to,d=N.start,v=N.end,h=te(a),m=h.allowedDecimalSeparators,l=h.decimalSeparator,y=e[v]===l;if(ee(e)&&(e===i||e===f)&&t.lastValue==="")return e;if(v-d===1&&m.indexOf(e[d])!==-1){var w=g===0?"":l;e=e.substring(0,d)+w+e.substring(d+1,e.length)}var E=function(k,O,j){var _=!1,P=!1;i.startsWith("-")?_=!1:k.startsWith("--")?(_=!1,P=!0):f.startsWith("-")&&k.length===f.length?_=!1:k[0]==="-"&&(_=!0);var W=_?1:0;return P&&(W=2),W&&(k=k.substring(W),O-=W,j-=W),{value:k,start:O,end:j,hasNegation:_}},x=E(e,d,v),A=x.hasNegation;n=x,e=n.value,d=n.start,v=n.end;var L=E(t.lastValue,p.start,p.end),K=L.start,Z=L.end,S=L.value,U=e.substring(d,v);e.length&&S.length&&(K>S.length-f.length||Z<i.length)&&!(U&&f.startsWith(U))&&(e=S);var $=0;e.startsWith(i)?$+=i.length:d<i.length&&($=d),e=e.substring($),v-=$;var M=e.length,H=e.length-f.length;e.endsWith(f)?M=H:(v>H||v>e.length-f.length)&&(M=v),e=e.substring(0,M),e=Ue(A?"-"+e:e,r),e=(e.match($e(l))||[]).join("");var z=e.indexOf(l);e=e.replace(new RegExp(ce(l),"g"),function(k,O){return O===z?".":""});var c=ne(e,r),b=c.beforeDecimal,F=c.afterDecimal,I=c.addNegation;return N.end-N.start<p.end-p.start&&b===""&&y&&!parseFloat(F)&&(e=I?"-":""),e}function He(e,t){var a=t.prefix;a===void 0&&(a="");var n=t.suffix;n===void 0&&(n="");var r=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";r.fill(!1,0,a.length+(i?1:0));var f=e.length;return r.fill(!1,f-n.length+1,f+1),r}function qe(e){var t=te(e),a=t.thousandSeparator,n=t.decimalSeparator,r=e.prefix;r===void 0&&(r="");var i=e.allowNegative;if(i===void 0&&(i=!0),a===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+a+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return r.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+r+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function ze(e){e=qe(e);var t=e.decimalSeparator;t===void 0&&(t="."),e.allowedDecimalSeparators,e.thousandsGroupStyle;var a=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=G);var f=e.onBlur;f===void 0&&(f=G);var g=e.thousandSeparator,p=e.decimalScale,N=e.fixedDecimalScale,d=e.prefix;d===void 0&&(d="");var v=e.defaultValue,h=e.value,m=e.valueIsNumericString,l=e.onValueChange,y=se(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),w=function(c){return le(c,e)},E=function(c,b){return Ze(c,b,e)},x=Q(h)?v:h,A=m??Ge(x,d,a);Q(h)?Q(v)||(A=m||typeof v=="number"):A=m||typeof h=="number";var L=function(c){return ve(c)?c:(typeof c=="number"&&(c=ge(c)),A&&typeof p=="number"?ue(c,p,!!N):c)},K=he(L(h),L(v),!!A,w,E,l),Z=K[0],S=Z.numAsString,U=Z.formattedValue,$=K[1],M=function(c){var b=c.target,F=c.key,I=b.selectionStart,k=b.selectionEnd,O=b.value;if(O===void 0&&(O=""),I!==k){i(c);return}F==="Backspace"&&O[0]==="-"&&I===d.length+1&&n&&q(b,1);var j=te(e),_=j.decimalSeparator,P=j.allowedDecimalSeparators;F==="Backspace"&&O[I-1]===_&&p&&N&&(q(b,I-1),c.preventDefault()),P!=null&&P.includes(F)&&O[I]===_&&q(b,I+1);var W=g===!0?",":g;F==="Backspace"&&O[I-1]===W&&q(b,I-1),F==="Delete"&&O[I]===W&&q(b,I+1),i(c)},H=function(c){var b=S;if(b.match(/\d/g)||(b=""),r||(b=Fe(b)),N&&p&&(b=ue(b,p,N)),b!==S){var F=le(b,e);$({formattedValue:F,value:b,floatValue:parseFloat(b)},{event:c,source:Y.event})}f(c)},z=function(c){return c===t?!0:ee(c)};return Object.assign(Object.assign({},y),{value:U,valueIsNumericString:!1,isValidInputCharacter:z,onValueChange:$,format:w,removeFormatting:E,getCaretBoundary:function(c){return He(c,e)},onKeyDown:M,onBlur:H})}function Je(e){var t=ze(e);return J.createElement(Ke,Object.assign({},t))}function Se(){var a,n,r;return((r=(n=(a=Intl.NumberFormat())==null?void 0:a.formatToParts(1.1))==null?void 0:n.find(i=>i.type==="decimal"))==null?void 0:r.value)??"."}function Qe(){return Se()==="."?",":"."}const Ye=e=>{const{value:t,onChange:a,disabled:n,highlight:r,validatedSelection:i,fixedDecimals:f,allowNegative:g,thousandSeparator:p,decimalSeparator:N}=e,d=B.useRef();return B.useLayoutEffect(()=>{var v;if(i!==void 0){const h=typeof i=="number"?[i,null]:i;(v=d.current)==null||v.setSelectionRange(h[0],h[1])}},[i]),B.createElement(Re,null,B.createElement(Je,{autoFocus:!0,getInputRef:d,className:"gdg-input",onFocus:v=>v.target.setSelectionRange(r?0:v.target.value.length,v.target.value.length),disabled:n===!0,decimalScale:f,allowNegative:g,thousandSeparator:p??Qe(),decimalSeparator:N??Se(),value:Object.is(t,-0)?"-":t??"",onValueChange:a}))};export{Ye as default};
