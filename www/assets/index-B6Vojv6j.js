var av=Object.defineProperty;var zf=s=>{throw TypeError(s)};var iv=(s,e,t)=>e in s?av(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ye=(s,e,t)=>iv(s,typeof e!="symbol"?e+"":e,t),Uu=(s,e,t)=>e.has(s)||zf("Cannot "+t);var rt=(s,e,t)=>(Uu(s,e,"read from private field"),t?t.call(s):e.get(s)),Xn=(s,e,t)=>e.has(s)?zf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Ns=(s,e,t,n)=>(Uu(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),wl=(s,e,t)=>(Uu(s,e,"access private method"),t);function ov(s,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in s)){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(s)}var _n=(s=>(s.SetConfig="SetConfig",s.CallFunction="CallFunction",s.SwitchDatabase="SwitchDatabase",s.CreateSpace="CreateSpace",s.Syscall="Syscall",s.Error="Error",s.QueryResp="QueryResp",s.Notify="Notify",s.BlockUIMsg="BlockUIMsg",s.DataUpdateSignal="DataUpdateSignal",s.WebSocketConnected="WebSocketConnected",s.WebSocketDisconnected="WebSocketDisconnected",s.ConvertMarkdown2State="ConvertMarkdown2State",s.ConvertHtml2State="ConvertHtml2State",s.ConvertEmail2State="ConvertEmail2State",s.GetDocMarkdown="GetDocMarkdown",s.HighlightRow="HighlightRow",s))(_n||{}),Wn=(s=>(s.DataUpdateSignalType="DataUpdateSignalType",s.MetaTableUpdateSignalType="MetaTableUpdateSignalType",s))(Wn||{}),xn=(s=>(s.Update="update",s.Insert="insert",s.Delete="delete",s.AddColumn="addColumn",s.UpdateColumn="updateColumn",s))(xn||{});const Tp="eidos-data-event",ms=console,lv="0.14.0";function Td(s){return new Promise((e,t)=>{s.oncomplete=s.onsuccess=()=>e(s.result),s.onabort=s.onerror=()=>t(s.error)})}function cv(s,e){const t=indexedDB.open(s);t.onupgradeneeded=()=>t.result.createObjectStore(e);const n=Td(t);return(a,r)=>n.then(o=>r(o.transaction(e,a).objectStore(e)))}let Bu;function uv(){return Bu||(Bu=cv("keyval-store","keyval")),Bu}function pv(s,e=uv()){return e("readonly",t=>Td(t.get(s)))}const Sd=async s=>{const e=await pv(s);return JSON.parse(e).state},mv="eidos";async function Sp(s,e){return new Promise((t,n)=>{const a=indexedDB.open(mv,1);a.onupgradeneeded=function(){let r=a.result;r.objectStoreNames.contains(s)||r.createObjectStore(s)},a.onsuccess=function(){const h=a.result.transaction(s,"readonly").objectStore(s).get(e);h.onsuccess=function(){t(h.result)},h.onerror=function(){n(h.error)}},a.onerror=function(){n(a.error)}})}var Vt;(function(s){s.assertEqual=a=>a;function e(a){}s.assertIs=e;function t(a){throw new Error}s.assertNever=t,s.arrayToEnum=a=>{const r={};for(const o of a)r[o]=o;return r},s.getValidEnumValues=a=>{const r=s.objectKeys(a).filter(m=>typeof a[a[m]]!="number"),o={};for(const m of r)o[m]=a[m];return s.objectValues(o)},s.objectValues=a=>s.objectKeys(a).map(function(r){return a[r]}),s.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const r=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&r.push(o);return r},s.find=(a,r)=>{for(const o of a)if(r(o))return o},s.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,r=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}s.joinValues=n,s.jsonStringifyReplacer=(a,r)=>typeof r=="bigint"?r.toString():r})(Vt||(Vt={}));var cp;(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(cp||(cp={}));const at=Vt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fr=s=>{switch(typeof s){case"undefined":return at.undefined;case"string":return at.string;case"number":return isNaN(s)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(s)?at.array:s===null?at.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?at.promise:typeof Map<"u"&&s instanceof Map?at.map:typeof Set<"u"&&s instanceof Set?at.set:typeof Date<"u"&&s instanceof Date?at.date:at.object;default:return at.unknown}},Qe=Vt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fv=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class fs extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(r){return r.message},n={_errors:[]},a=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let m=n,h=0;for(;h<o.path.length;){const g=o.path[h];h===o.path.length-1?(m[g]=m[g]||{_errors:[]},m[g]._errors.push(t(o))):m[g]=m[g]||{_errors:[]},m=m[g],h++}}};return a(this),n}static assert(e){if(!(e instanceof fs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Vt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}fs.create=s=>new fs(s);const ai=(s,e)=>{let t;switch(s.code){case Qe.invalid_type:s.received===at.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case Qe.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,Vt.jsonStringifyReplacer)}`;break;case Qe.unrecognized_keys:t=`Unrecognized key(s) in object: ${Vt.joinValues(s.keys,", ")}`;break;case Qe.invalid_union:t="Invalid input";break;case Qe.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Vt.joinValues(s.options)}`;break;case Qe.invalid_enum_value:t=`Invalid enum value. Expected ${Vt.joinValues(s.options)}, received '${s.received}'`;break;case Qe.invalid_arguments:t="Invalid function arguments";break;case Qe.invalid_return_type:t="Invalid function return type";break;case Qe.invalid_date:t="Invalid date";break;case Qe.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:Vt.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case Qe.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case Qe.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case Qe.custom:t="Invalid input";break;case Qe.invalid_intersection_types:t="Intersection results could not be merged";break;case Qe.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case Qe.not_finite:t="Number must be finite";break;default:t=e.defaultError,Vt.assertNever(s)}return{message:t}};let Id=ai;function dv(s){Id=s}function Cl(){return Id}const Nl=s=>{const{data:e,path:t,errorMaps:n,issueData:a}=s,r=[...t,...a.path||[]],o={...a,path:r};if(a.message!==void 0)return{...a,path:r,message:a.message};let m="";const h=n.filter(g=>!!g).slice().reverse();for(const g of h)m=g(o,{data:e,defaultError:m}).message;return{...a,path:r,message:m}},_v=[];function st(s,e){const t=Cl(),n=Nl({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===ai?void 0:ai].filter(a=>!!a)});s.common.issues.push(n)}class Mn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if(a.status==="aborted")return Tt;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const r=await a.key,o=await a.value;n.push({key:r,value:o})}return Mn.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:r,value:o}=a;if(r.status==="aborted"||o.status==="aborted")return Tt;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[r.value]=o.value)}return{status:e.value,value:n}}}const Tt=Object.freeze({status:"aborted"}),ei=s=>({status:"dirty",value:s}),Hn=s=>({status:"valid",value:s}),up=s=>s.status==="aborted",pp=s=>s.status==="dirty",Yi=s=>s.status==="valid",Ji=s=>typeof Promise<"u"&&s instanceof Promise;function Ll(s,e,t,n){if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(s)}function qd(s,e,t,n,a){if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t}var dt;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(dt||(dt={}));var Wi,Hi;class Ys{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Wf=(s,e)=>{if(Yi(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new fs(s.common.issues);return this._error=t,this._error}}};function Ct(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:a}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,m)=>{var h,g;const{message:u}=s;return o.code==="invalid_enum_value"?{message:u??m.defaultError}:typeof m.data>"u"?{message:(h=u??n)!==null&&h!==void 0?h:m.defaultError}:o.code!=="invalid_type"?{message:m.defaultError}:{message:(g=u??t)!==null&&g!==void 0?g:m.defaultError}},description:a}}class Dt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Fr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Fr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Mn,ctx:{common:e.parent.common,data:e.data,parsedType:Fr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ji(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fr(e)},r=this._parseSync({data:e,path:a.path,parent:a});return Wf(a,r)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fr(e)},a=this._parse({data:e,path:n.path,parent:n}),r=await(Ji(a)?a:Promise.resolve(a));return Wf(n,r)}refine(e,t){const n=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,r)=>{const o=e(a),m=()=>r.addIssue({code:Qe.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(h=>h?!0:(m(),!1)):o?!0:(m(),!1)})}refinement(e,t){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof t=="function"?t(n,a):t),!1))}_refinement(e){return new Fs({schema:this,typeName:kt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Qs.create(this,this._def)}nullable(){return Yr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ds.create(this,this._def)}promise(){return oi.create(this,this._def)}or(e){return eo.create([this,e],this._def)}and(e){return to.create(this,e,this._def)}transform(e){return new Fs({...Ct(this._def),schema:this,typeName:kt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new io({...Ct(this._def),innerType:this,defaultValue:t,typeName:kt.ZodDefault})}brand(){return new Ip({typeName:kt.ZodBranded,type:this,...Ct(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new oo({...Ct(this._def),innerType:this,catchValue:t,typeName:kt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ho.create(this,e)}readonly(){return lo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const hv=/^c[^\s-]{8,}$/i,bv=/^[0-9a-z]+$/,yv=/^[0-9A-HJKMNP-TV-Z]{26}$/,gv=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wv=/^[a-z0-9_-]{21}$/i,xv=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$v=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vv="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zu;const kv=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ev=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Av=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Rd="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Tv=new RegExp(`^${Rd}$`);function Od(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Sv(s){return new RegExp(`^${Od(s)}$`)}function Cd(s){let e=`${Rd}T${Od(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Iv(s,e){return!!((e==="v4"||!e)&&kv.test(s)||(e==="v6"||!e)&&Ev.test(s))}class Ms extends Dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==at.string){const r=this._getOrReturnCtx(e);return st(r,{code:Qe.invalid_type,expected:at.string,received:r.parsedType}),Tt}const n=new Mn;let a;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="max")e.data.length>r.value&&(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="length"){const o=e.data.length>r.value,m=e.data.length<r.value;(o||m)&&(a=this._getOrReturnCtx(e,a),o?st(a,{code:Qe.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):m&&st(a,{code:Qe.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if(r.kind==="email")$v.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"email",code:Qe.invalid_string,message:r.message}),n.dirty());else if(r.kind==="emoji")zu||(zu=new RegExp(vv,"u")),zu.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"emoji",code:Qe.invalid_string,message:r.message}),n.dirty());else if(r.kind==="uuid")gv.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"uuid",code:Qe.invalid_string,message:r.message}),n.dirty());else if(r.kind==="nanoid")wv.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"nanoid",code:Qe.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid")hv.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"cuid",code:Qe.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid2")bv.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"cuid2",code:Qe.invalid_string,message:r.message}),n.dirty());else if(r.kind==="ulid")yv.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"ulid",code:Qe.invalid_string,message:r.message}),n.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),st(a,{validation:"url",code:Qe.invalid_string,message:r.message}),n.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"regex",code:Qe.invalid_string,message:r.message}),n.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty()):r.kind==="datetime"?Cd(r).test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.invalid_string,validation:"datetime",message:r.message}),n.dirty()):r.kind==="date"?Tv.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.invalid_string,validation:"date",message:r.message}),n.dirty()):r.kind==="time"?Sv(r).test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.invalid_string,validation:"time",message:r.message}),n.dirty()):r.kind==="duration"?xv.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"duration",code:Qe.invalid_string,message:r.message}),n.dirty()):r.kind==="ip"?Iv(e.data,r.version)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"ip",code:Qe.invalid_string,message:r.message}),n.dirty()):r.kind==="base64"?Av.test(e.data)||(a=this._getOrReturnCtx(e,a),st(a,{validation:"base64",code:Qe.invalid_string,message:r.message}),n.dirty()):Vt.assertNever(r);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(a=>e.test(a),{validation:t,code:Qe.invalid_string,...dt.errToObj(n)})}_addCheck(e){return new Ms({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...dt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...dt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...dt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...dt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...dt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...dt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...dt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...dt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...dt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...dt.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...dt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...dt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...dt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...dt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...dt.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...dt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...dt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...dt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...dt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...dt.errToObj(t)})}nonempty(e){return this.min(1,dt.errToObj(e))}trim(){return new Ms({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ms({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ms({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ms.create=s=>{var e;return new Ms({checks:[],typeName:kt.ZodString,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...Ct(s)})};function qv(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=t>n?t:n,r=parseInt(s.toFixed(a).replace(".","")),o=parseInt(e.toFixed(a).replace(".",""));return r%o/Math.pow(10,a)}class Vr extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==at.number){const r=this._getOrReturnCtx(e);return st(r,{code:Qe.invalid_type,expected:at.number,received:r.parsedType}),Tt}let n;const a=new Mn;for(const r of this._def.checks)r.kind==="int"?Vt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),st(n,{code:Qe.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),st(n,{code:Qe.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),st(n,{code:Qe.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="multipleOf"?qv(e.data,r.value)!==0&&(n=this._getOrReturnCtx(e,n),st(n,{code:Qe.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),st(n,{code:Qe.not_finite,message:r.message}),a.dirty()):Vt.assertNever(r);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,dt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,dt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,dt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,dt.toString(t))}setLimit(e,t,n,a){return new Vr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:dt.toString(a)}]})}_addCheck(e){return new Vr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:dt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:dt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:dt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:dt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:dt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:dt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:dt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:dt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:dt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Vt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Vr.create=s=>new Vr({checks:[],typeName:kt.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...Ct(s)});class Gr extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==at.bigint){const r=this._getOrReturnCtx(e);return st(r,{code:Qe.invalid_type,expected:at.bigint,received:r.parsedType}),Tt}let n;const a=new Mn;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),st(n,{code:Qe.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),st(n,{code:Qe.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),st(n,{code:Qe.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):Vt.assertNever(r);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,dt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,dt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,dt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,dt.toString(t))}setLimit(e,t,n,a){return new Gr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:dt.toString(a)}]})}_addCheck(e){return new Gr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:dt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:dt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:dt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:dt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:dt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Gr.create=s=>{var e;return new Gr({checks:[],typeName:kt.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...Ct(s)})};class Zi extends Dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==at.boolean){const n=this._getOrReturnCtx(e);return st(n,{code:Qe.invalid_type,expected:at.boolean,received:n.parsedType}),Tt}return Hn(e.data)}}Zi.create=s=>new Zi({typeName:kt.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...Ct(s)});class $a extends Dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==at.date){const r=this._getOrReturnCtx(e);return st(r,{code:Qe.invalid_type,expected:at.date,received:r.parsedType}),Tt}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return st(r,{code:Qe.invalid_date}),Tt}const n=new Mn;let a;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(a=this._getOrReturnCtx(e,a),st(a,{code:Qe.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):Vt.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $a({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:dt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:dt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}$a.create=s=>new $a({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:kt.ZodDate,...Ct(s)});class Ml extends Dt{_parse(e){if(this._getType(e)!==at.symbol){const n=this._getOrReturnCtx(e);return st(n,{code:Qe.invalid_type,expected:at.symbol,received:n.parsedType}),Tt}return Hn(e.data)}}Ml.create=s=>new Ml({typeName:kt.ZodSymbol,...Ct(s)});class Xi extends Dt{_parse(e){if(this._getType(e)!==at.undefined){const n=this._getOrReturnCtx(e);return st(n,{code:Qe.invalid_type,expected:at.undefined,received:n.parsedType}),Tt}return Hn(e.data)}}Xi.create=s=>new Xi({typeName:kt.ZodUndefined,...Ct(s)});class Ki extends Dt{_parse(e){if(this._getType(e)!==at.null){const n=this._getOrReturnCtx(e);return st(n,{code:Qe.invalid_type,expected:at.null,received:n.parsedType}),Tt}return Hn(e.data)}}Ki.create=s=>new Ki({typeName:kt.ZodNull,...Ct(s)});class ii extends Dt{constructor(){super(...arguments),this._any=!0}_parse(e){return Hn(e.data)}}ii.create=s=>new ii({typeName:kt.ZodAny,...Ct(s)});class wa extends Dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Hn(e.data)}}wa.create=s=>new wa({typeName:kt.ZodUnknown,...Ct(s)});class yr extends Dt{_parse(e){const t=this._getOrReturnCtx(e);return st(t,{code:Qe.invalid_type,expected:at.never,received:t.parsedType}),Tt}}yr.create=s=>new yr({typeName:kt.ZodNever,...Ct(s)});class Dl extends Dt{_parse(e){if(this._getType(e)!==at.undefined){const n=this._getOrReturnCtx(e);return st(n,{code:Qe.invalid_type,expected:at.void,received:n.parsedType}),Tt}return Hn(e.data)}}Dl.create=s=>new Dl({typeName:kt.ZodVoid,...Ct(s)});class Ds extends Dt{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==at.array)return st(t,{code:Qe.invalid_type,expected:at.array,received:t.parsedType}),Tt;if(a.exactLength!==null){const o=t.data.length>a.exactLength.value,m=t.data.length<a.exactLength.value;(o||m)&&(st(t,{code:o?Qe.too_big:Qe.too_small,minimum:m?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(st(t,{code:Qe.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(st(t,{code:Qe.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,m)=>a.type._parseAsync(new Ys(t,o,t.path,m)))).then(o=>Mn.mergeArray(n,o));const r=[...t.data].map((o,m)=>a.type._parseSync(new Ys(t,o,t.path,m)));return Mn.mergeArray(n,r)}get element(){return this._def.type}min(e,t){return new Ds({...this._def,minLength:{value:e,message:dt.toString(t)}})}max(e,t){return new Ds({...this._def,maxLength:{value:e,message:dt.toString(t)}})}length(e,t){return new Ds({...this._def,exactLength:{value:e,message:dt.toString(t)}})}nonempty(e){return this.min(1,e)}}Ds.create=(s,e)=>new Ds({type:s,minLength:null,maxLength:null,exactLength:null,typeName:kt.ZodArray,...Ct(e)});function Ja(s){if(s instanceof on){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=Qs.create(Ja(n))}return new on({...s._def,shape:()=>e})}else return s instanceof Ds?new Ds({...s._def,type:Ja(s.element)}):s instanceof Qs?Qs.create(Ja(s.unwrap())):s instanceof Yr?Yr.create(Ja(s.unwrap())):s instanceof Js?Js.create(s.items.map(e=>Ja(e))):s}class on extends Dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Vt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==at.object){const g=this._getOrReturnCtx(e);return st(g,{code:Qe.invalid_type,expected:at.object,received:g.parsedType}),Tt}const{status:n,ctx:a}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),m=[];if(!(this._def.catchall instanceof yr&&this._def.unknownKeys==="strip"))for(const g in a.data)o.includes(g)||m.push(g);const h=[];for(const g of o){const u=r[g],k=a.data[g];h.push({key:{status:"valid",value:g},value:u._parse(new Ys(a,k,a.path,g)),alwaysSet:g in a.data})}if(this._def.catchall instanceof yr){const g=this._def.unknownKeys;if(g==="passthrough")for(const u of m)h.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(g==="strict")m.length>0&&(st(a,{code:Qe.unrecognized_keys,keys:m}),n.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const u of m){const k=a.data[u];h.push({key:{status:"valid",value:u},value:g._parse(new Ys(a,k,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const g=[];for(const u of h){const k=await u.key,O=await u.value;g.push({key:k,value:O,alwaysSet:u.alwaysSet})}return g}).then(g=>Mn.mergeObjectSync(n,g)):Mn.mergeObjectSync(n,h)}get shape(){return this._def.shape()}strict(e){return dt.errToObj,new on({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,r,o,m;const h=(o=(r=(a=this._def).errorMap)===null||r===void 0?void 0:r.call(a,t,n).message)!==null&&o!==void 0?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(m=dt.errToObj(e).message)!==null&&m!==void 0?m:h}:{message:h}}}:{}})}strip(){return new on({...this._def,unknownKeys:"strip"})}passthrough(){return new on({...this._def,unknownKeys:"passthrough"})}extend(e){return new on({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new on({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:kt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new on({...this._def,catchall:e})}pick(e){const t={};return Vt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new on({...this._def,shape:()=>t})}omit(e){const t={};return Vt.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new on({...this._def,shape:()=>t})}deepPartial(){return Ja(this)}partial(e){const t={};return Vt.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}),new on({...this._def,shape:()=>t})}required(e){const t={};return Vt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let r=this.shape[n];for(;r instanceof Qs;)r=r._def.innerType;t[n]=r}}),new on({...this._def,shape:()=>t})}keyof(){return Nd(Vt.objectKeys(this.shape))}}on.create=(s,e)=>new on({shape:()=>s,unknownKeys:"strip",catchall:yr.create(),typeName:kt.ZodObject,...Ct(e)});on.strictCreate=(s,e)=>new on({shape:()=>s,unknownKeys:"strict",catchall:yr.create(),typeName:kt.ZodObject,...Ct(e)});on.lazycreate=(s,e)=>new on({shape:s,unknownKeys:"strip",catchall:yr.create(),typeName:kt.ZodObject,...Ct(e)});class eo extends Dt{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function a(r){for(const m of r)if(m.result.status==="valid")return m.result;for(const m of r)if(m.result.status==="dirty")return t.common.issues.push(...m.ctx.common.issues),m.result;const o=r.map(m=>new fs(m.ctx.common.issues));return st(t,{code:Qe.invalid_union,unionErrors:o}),Tt}if(t.common.async)return Promise.all(n.map(async r=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(a);{let r;const o=[];for(const h of n){const g={...t,common:{...t.common,issues:[]},parent:null},u=h._parseSync({data:t.data,path:t.path,parent:g});if(u.status==="valid")return u;u.status==="dirty"&&!r&&(r={result:u,ctx:g}),g.common.issues.length&&o.push(g.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const m=o.map(h=>new fs(h));return st(t,{code:Qe.invalid_union,unionErrors:m}),Tt}}get options(){return this._def.options}}eo.create=(s,e)=>new eo({options:s,typeName:kt.ZodUnion,...Ct(e)});const pr=s=>s instanceof so?pr(s.schema):s instanceof Fs?pr(s.innerType()):s instanceof ro?[s.value]:s instanceof Qr?s.options:s instanceof ao?Vt.objectValues(s.enum):s instanceof io?pr(s._def.innerType):s instanceof Xi?[void 0]:s instanceof Ki?[null]:s instanceof Qs?[void 0,...pr(s.unwrap())]:s instanceof Yr?[null,...pr(s.unwrap())]:s instanceof Ip||s instanceof lo?pr(s.unwrap()):s instanceof oo?pr(s._def.innerType):[];class Kl extends Dt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.object)return st(t,{code:Qe.invalid_type,expected:at.object,received:t.parsedType}),Tt;const n=this.discriminator,a=t.data[n],r=this.optionsMap.get(a);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(st(t,{code:Qe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Tt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const r of t){const o=pr(r.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const m of o){if(a.has(m))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(m)}`);a.set(m,r)}}return new Kl({typeName:kt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...Ct(n)})}}function mp(s,e){const t=Fr(s),n=Fr(e);if(s===e)return{valid:!0,data:s};if(t===at.object&&n===at.object){const a=Vt.objectKeys(e),r=Vt.objectKeys(s).filter(m=>a.indexOf(m)!==-1),o={...s,...e};for(const m of r){const h=mp(s[m],e[m]);if(!h.valid)return{valid:!1};o[m]=h.data}return{valid:!0,data:o}}else if(t===at.array&&n===at.array){if(s.length!==e.length)return{valid:!1};const a=[];for(let r=0;r<s.length;r++){const o=s[r],m=e[r],h=mp(o,m);if(!h.valid)return{valid:!1};a.push(h.data)}return{valid:!0,data:a}}else return t===at.date&&n===at.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class to extends Dt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(r,o)=>{if(up(r)||up(o))return Tt;const m=mp(r.value,o.value);return m.valid?((pp(r)||pp(o))&&t.dirty(),{status:t.value,value:m.data}):(st(n,{code:Qe.invalid_intersection_types}),Tt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([r,o])=>a(r,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}to.create=(s,e,t)=>new to({left:s,right:e,typeName:kt.ZodIntersection,...Ct(t)});class Js extends Dt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.array)return st(n,{code:Qe.invalid_type,expected:at.array,received:n.parsedType}),Tt;if(n.data.length<this._def.items.length)return st(n,{code:Qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Tt;!this._def.rest&&n.data.length>this._def.items.length&&(st(n,{code:Qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((o,m)=>{const h=this._def.items[m]||this._def.rest;return h?h._parse(new Ys(n,o,n.path,m)):null}).filter(o=>!!o);return n.common.async?Promise.all(r).then(o=>Mn.mergeArray(t,o)):Mn.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Js({...this._def,rest:e})}}Js.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Js({items:s,typeName:kt.ZodTuple,rest:null,...Ct(e)})};class no extends Dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.object)return st(n,{code:Qe.invalid_type,expected:at.object,received:n.parsedType}),Tt;const a=[],r=this._def.keyType,o=this._def.valueType;for(const m in n.data)a.push({key:r._parse(new Ys(n,m,n.path,m)),value:o._parse(new Ys(n,n.data[m],n.path,m)),alwaysSet:m in n.data});return n.common.async?Mn.mergeObjectAsync(t,a):Mn.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Dt?new no({keyType:e,valueType:t,typeName:kt.ZodRecord,...Ct(n)}):new no({keyType:Ms.create(),valueType:e,typeName:kt.ZodRecord,...Ct(t)})}}class Fl extends Dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.map)return st(n,{code:Qe.invalid_type,expected:at.map,received:n.parsedType}),Tt;const a=this._def.keyType,r=this._def.valueType,o=[...n.data.entries()].map(([m,h],g)=>({key:a._parse(new Ys(n,m,n.path,[g,"key"])),value:r._parse(new Ys(n,h,n.path,[g,"value"]))}));if(n.common.async){const m=new Map;return Promise.resolve().then(async()=>{for(const h of o){const g=await h.key,u=await h.value;if(g.status==="aborted"||u.status==="aborted")return Tt;(g.status==="dirty"||u.status==="dirty")&&t.dirty(),m.set(g.value,u.value)}return{status:t.value,value:m}})}else{const m=new Map;for(const h of o){const g=h.key,u=h.value;if(g.status==="aborted"||u.status==="aborted")return Tt;(g.status==="dirty"||u.status==="dirty")&&t.dirty(),m.set(g.value,u.value)}return{status:t.value,value:m}}}}Fl.create=(s,e,t)=>new Fl({valueType:e,keyType:s,typeName:kt.ZodMap,...Ct(t)});class va extends Dt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.set)return st(n,{code:Qe.invalid_type,expected:at.set,received:n.parsedType}),Tt;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(st(n,{code:Qe.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(st(n,{code:Qe.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const r=this._def.valueType;function o(h){const g=new Set;for(const u of h){if(u.status==="aborted")return Tt;u.status==="dirty"&&t.dirty(),g.add(u.value)}return{status:t.value,value:g}}const m=[...n.data.values()].map((h,g)=>r._parse(new Ys(n,h,n.path,g)));return n.common.async?Promise.all(m).then(h=>o(h)):o(m)}min(e,t){return new va({...this._def,minSize:{value:e,message:dt.toString(t)}})}max(e,t){return new va({...this._def,maxSize:{value:e,message:dt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}va.create=(s,e)=>new va({valueType:s,minSize:null,maxSize:null,typeName:kt.ZodSet,...Ct(e)});class ti extends Dt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.function)return st(t,{code:Qe.invalid_type,expected:at.function,received:t.parsedType}),Tt;function n(m,h){return Nl({data:m,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Cl(),ai].filter(g=>!!g),issueData:{code:Qe.invalid_arguments,argumentsError:h}})}function a(m,h){return Nl({data:m,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Cl(),ai].filter(g=>!!g),issueData:{code:Qe.invalid_return_type,returnTypeError:h}})}const r={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof oi){const m=this;return Hn(async function(...h){const g=new fs([]),u=await m._def.args.parseAsync(h,r).catch(w=>{throw g.addIssue(n(h,w)),g}),k=await Reflect.apply(o,this,u);return await m._def.returns._def.type.parseAsync(k,r).catch(w=>{throw g.addIssue(a(k,w)),g})})}else{const m=this;return Hn(function(...h){const g=m._def.args.safeParse(h,r);if(!g.success)throw new fs([n(h,g.error)]);const u=Reflect.apply(o,this,g.data),k=m._def.returns.safeParse(u,r);if(!k.success)throw new fs([a(u,k.error)]);return k.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ti({...this._def,args:Js.create(e).rest(wa.create())})}returns(e){return new ti({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ti({args:e||Js.create([]).rest(wa.create()),returns:t||wa.create(),typeName:kt.ZodFunction,...Ct(n)})}}class so extends Dt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}so.create=(s,e)=>new so({getter:s,typeName:kt.ZodLazy,...Ct(e)});class ro extends Dt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return st(t,{received:t.data,code:Qe.invalid_literal,expected:this._def.value}),Tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}ro.create=(s,e)=>new ro({value:s,typeName:kt.ZodLiteral,...Ct(e)});function Nd(s,e){return new Qr({values:s,typeName:kt.ZodEnum,...Ct(e)})}class Qr extends Dt{constructor(){super(...arguments),Wi.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return st(t,{expected:Vt.joinValues(n),received:t.parsedType,code:Qe.invalid_type}),Tt}if(Ll(this,Wi)||qd(this,Wi,new Set(this._def.values)),!Ll(this,Wi).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return st(t,{received:t.data,code:Qe.invalid_enum_value,options:n}),Tt}return Hn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qr.create(e,{...this._def,...t})}exclude(e,t=this._def){return Qr.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Wi=new WeakMap;Qr.create=Nd;class ao extends Dt{constructor(){super(...arguments),Hi.set(this,void 0)}_parse(e){const t=Vt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==at.string&&n.parsedType!==at.number){const a=Vt.objectValues(t);return st(n,{expected:Vt.joinValues(a),received:n.parsedType,code:Qe.invalid_type}),Tt}if(Ll(this,Hi)||qd(this,Hi,new Set(Vt.getValidEnumValues(this._def.values))),!Ll(this,Hi).has(e.data)){const a=Vt.objectValues(t);return st(n,{received:n.data,code:Qe.invalid_enum_value,options:a}),Tt}return Hn(e.data)}get enum(){return this._def.values}}Hi=new WeakMap;ao.create=(s,e)=>new ao({values:s,typeName:kt.ZodNativeEnum,...Ct(e)});class oi extends Dt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.promise&&t.common.async===!1)return st(t,{code:Qe.invalid_type,expected:at.promise,received:t.parsedType}),Tt;const n=t.parsedType===at.promise?t.data:Promise.resolve(t.data);return Hn(n.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}oi.create=(s,e)=>new oi({type:s,typeName:kt.ZodPromise,...Ct(e)});class Fs extends Dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===kt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:o=>{st(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),a.type==="preprocess"){const o=a.transform(n.data,r);if(n.common.async)return Promise.resolve(o).then(async m=>{if(t.value==="aborted")return Tt;const h=await this._def.schema._parseAsync({data:m,path:n.path,parent:n});return h.status==="aborted"?Tt:h.status==="dirty"||t.value==="dirty"?ei(h.value):h});{if(t.value==="aborted")return Tt;const m=this._def.schema._parseSync({data:o,path:n.path,parent:n});return m.status==="aborted"?Tt:m.status==="dirty"||t.value==="dirty"?ei(m.value):m}}if(a.type==="refinement"){const o=m=>{const h=a.refinement(m,r);if(n.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return m};if(n.common.async===!1){const m=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return m.status==="aborted"?Tt:(m.status==="dirty"&&t.dirty(),o(m.value),{status:t.value,value:m.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(m=>m.status==="aborted"?Tt:(m.status==="dirty"&&t.dirty(),o(m.value).then(()=>({status:t.value,value:m.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Yi(o))return o;const m=a.transform(o.value,r);if(m instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:m}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Yi(o)?Promise.resolve(a.transform(o.value,r)).then(m=>({status:t.value,value:m})):o);Vt.assertNever(a)}}Fs.create=(s,e,t)=>new Fs({schema:s,typeName:kt.ZodEffects,effect:e,...Ct(t)});Fs.createWithPreprocess=(s,e,t)=>new Fs({schema:e,effect:{type:"preprocess",transform:s},typeName:kt.ZodEffects,...Ct(t)});class Qs extends Dt{_parse(e){return this._getType(e)===at.undefined?Hn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qs.create=(s,e)=>new Qs({innerType:s,typeName:kt.ZodOptional,...Ct(e)});class Yr extends Dt{_parse(e){return this._getType(e)===at.null?Hn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yr.create=(s,e)=>new Yr({innerType:s,typeName:kt.ZodNullable,...Ct(e)});class io extends Dt{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===at.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}io.create=(s,e)=>new io({innerType:s,typeName:kt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ct(e)});class oo extends Dt{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ji(a)?a.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new fs(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new fs(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}oo.create=(s,e)=>new oo({innerType:s,typeName:kt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ct(e)});class Pl extends Dt{_parse(e){if(this._getType(e)!==at.nan){const n=this._getOrReturnCtx(e);return st(n,{code:Qe.invalid_type,expected:at.nan,received:n.parsedType}),Tt}return{status:"valid",value:e.data}}}Pl.create=s=>new Pl({typeName:kt.ZodNaN,...Ct(s)});const Rv=Symbol("zod_brand");class Ip extends Dt{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ho extends Dt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?Tt:r.status==="dirty"?(t.dirty(),ei(r.value)):this._def.out._parseAsync({data:r.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Tt:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,t){return new ho({in:e,out:t,typeName:kt.ZodPipeline})}}class lo extends Dt{_parse(e){const t=this._def.innerType._parse(e),n=a=>(Yi(a)&&(a.value=Object.freeze(a.value)),a);return Ji(t)?t.then(a=>n(a)):n(t)}unwrap(){return this._def.innerType}}lo.create=(s,e)=>new lo({innerType:s,typeName:kt.ZodReadonly,...Ct(e)});function Ld(s,e={},t){return s?ii.create().superRefine((n,a)=>{var r,o;if(!s(n)){const m=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,h=(o=(r=m.fatal)!==null&&r!==void 0?r:t)!==null&&o!==void 0?o:!0,g=typeof m=="string"?{message:m}:m;a.addIssue({code:"custom",...g,fatal:h})}}):ii.create()}const Ov={object:on.lazycreate};var kt;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(kt||(kt={}));const Cv=(s,e={message:`Input not instance of ${s.name}`})=>Ld(t=>t instanceof s,e),Md=Ms.create,Dd=Vr.create,Nv=Pl.create,Lv=Gr.create,Fd=Zi.create,Mv=$a.create,Dv=Ml.create,Fv=Xi.create,Pv=Ki.create,jv=ii.create,Uv=wa.create,Bv=yr.create,zv=Dl.create,Wv=Ds.create,Hv=on.create,Vv=on.strictCreate,Gv=eo.create,Qv=Kl.create,Yv=to.create,Jv=Js.create,Zv=no.create,Xv=Fl.create,Kv=va.create,e1=ti.create,t1=so.create,n1=ro.create,s1=Qr.create,r1=ao.create,a1=oi.create,Hf=Fs.create,i1=Qs.create,o1=Yr.create,l1=Fs.createWithPreprocess,c1=ho.create,u1=()=>Md().optional(),p1=()=>Dd().optional(),m1=()=>Fd().optional(),f1={string:s=>Ms.create({...s,coerce:!0}),number:s=>Vr.create({...s,coerce:!0}),boolean:s=>Zi.create({...s,coerce:!0}),bigint:s=>Gr.create({...s,coerce:!0}),date:s=>$a.create({...s,coerce:!0})},d1=Tt;var Cr=Object.freeze({__proto__:null,defaultErrorMap:ai,setErrorMap:dv,getErrorMap:Cl,makeIssue:Nl,EMPTY_PATH:_v,addIssueToContext:st,ParseStatus:Mn,INVALID:Tt,DIRTY:ei,OK:Hn,isAborted:up,isDirty:pp,isValid:Yi,isAsync:Ji,get util(){return Vt},get objectUtil(){return cp},ZodParsedType:at,getParsedType:Fr,ZodType:Dt,datetimeRegex:Cd,ZodString:Ms,ZodNumber:Vr,ZodBigInt:Gr,ZodBoolean:Zi,ZodDate:$a,ZodSymbol:Ml,ZodUndefined:Xi,ZodNull:Ki,ZodAny:ii,ZodUnknown:wa,ZodNever:yr,ZodVoid:Dl,ZodArray:Ds,ZodObject:on,ZodUnion:eo,ZodDiscriminatedUnion:Kl,ZodIntersection:to,ZodTuple:Js,ZodRecord:no,ZodMap:Fl,ZodSet:va,ZodFunction:ti,ZodLazy:so,ZodLiteral:ro,ZodEnum:Qr,ZodNativeEnum:ao,ZodPromise:oi,ZodEffects:Fs,ZodTransformer:Fs,ZodOptional:Qs,ZodNullable:Yr,ZodDefault:io,ZodCatch:oo,ZodNaN:Pl,BRAND:Rv,ZodBranded:Ip,ZodPipeline:ho,ZodReadonly:lo,custom:Ld,Schema:Dt,ZodSchema:Dt,late:Ov,get ZodFirstPartyTypeKind(){return kt},coerce:f1,any:jv,array:Wv,bigint:Lv,boolean:Fd,date:Mv,discriminatedUnion:Qv,effect:Hf,enum:s1,function:e1,instanceof:Cv,intersection:Yv,lazy:t1,literal:n1,map:Xv,nan:Nv,nativeEnum:r1,never:Bv,null:Pv,nullable:o1,number:Dd,object:Hv,oboolean:m1,onumber:p1,optional:i1,ostring:u1,pipeline:c1,preprocess:l1,promise:a1,record:Zv,set:Kv,strictObject:Vv,string:Md,symbol:Dv,transformer:Hf,tuple:Jv,undefined:Fv,union:Gv,unknown:Uv,void:zv,NEVER:d1,ZodIssueCode:Qe,quotelessJson:fv,ZodError:fs});/**
 * uuidv7: A JavaScript implementation of UUID version 7
 *
 * @license Apache-2.0
 * @copyright 2021-2024 LiosK
 * @packageDocumentation
 */const xl="0123456789abcdef";class fa{constructor(e){this.bytes=e}static ofInner(e){if(e.length!==16)throw new TypeError("not 128-bit length");return new fa(e)}static fromFieldsV7(e,t,n,a){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(a)||e<0||t<0||n<0||a<0||e>0xffffffffffff||t>4095||n>1073741823||a>4294967295)throw new RangeError("invalid field value");const r=new Uint8Array(16);return r[0]=e/2**40,r[1]=e/2**32,r[2]=e/2**24,r[3]=e/2**16,r[4]=e/2**8,r[5]=e,r[6]=112|t>>>8,r[7]=t,r[8]=128|n>>>24,r[9]=n>>>16,r[10]=n>>>8,r[11]=n,r[12]=a>>>24,r[13]=a>>>16,r[14]=a>>>8,r[15]=a,new fa(r)}static parse(e){var t,n,a,r;let o;switch(e.length){case 32:o=(t=/^[0-9a-f]{32}$/i.exec(e))===null||t===void 0?void 0:t[0];break;case 36:o=(n=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))===null||n===void 0?void 0:n.slice(1,6).join("");break;case 38:o=(a=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(e))===null||a===void 0?void 0:a.slice(1,6).join("");break;case 45:o=(r=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))===null||r===void 0?void 0:r.slice(1,6).join("");break}if(o){const m=new Uint8Array(16);for(let h=0;h<16;h+=4){const g=parseInt(o.substring(2*h,2*h+8),16);m[h+0]=g>>>24,m[h+1]=g>>>16,m[h+2]=g>>>8,m[h+3]=g}return new fa(m)}else throw new SyntaxError("could not parse UUID string")}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e+=xl.charAt(this.bytes[t]>>>4),e+=xl.charAt(this.bytes[t]&15),(t===3||t===5||t===7||t===9)&&(e+="-");return e}toHex(){let e="";for(let t=0;t<this.bytes.length;t++)e+=xl.charAt(this.bytes[t]>>>4),e+=xl.charAt(this.bytes[t]&15);return e}toJSON(){return this.toString()}getVariant(){const e=this.bytes[8]>>>4;if(e<0)throw new Error("unreachable");if(e<=7)return this.bytes.every(t=>t===0)?"NIL":"VAR_0";if(e<=11)return"VAR_10";if(e<=13)return"VAR_110";if(e<=15)return this.bytes.every(t=>t===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new fa(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(let t=0;t<16;t++){const n=this.bytes[t]-e.bytes[t];if(n!==0)return Math.sign(n)}return 0}}class _1{constructor(e){this.timestamp=0,this.counter=0,this.random=e??h1()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(e,t){let n=this.generateOrAbortCore(e,t);return n===void 0&&(this.timestamp=0,n=this.generateOrAbortCore(e,t)),n}generateOrAbortCore(e,t){if(!Number.isInteger(e)||e<1||e>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(t<0||t>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(e>this.timestamp)this.timestamp=e,this.resetCounter();else if(e+t>=this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return fa.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const e=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return e[6]=64|e[6]>>>4,e[8]=128|e[8]>>>2,fa.ofInner(e)}}const h1=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new b1;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class b1{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let Vf;const co=()=>y1().toString(),y1=()=>(Vf||(Vf=new _1)).generate();function g1(s){return s!=null}const br=s=>`tb_${s}`,Tn=s=>s.replace("tb_",""),Pd=(s,e)=>`idx__${s}__${e}`,jd=()=>`cl_${Math.random().toString(36).substring(2,6)}`,w1=s=>s.replace(/-/g,"").replace(/_/g,""),jl=s=>`${s.slice(0,8)}-${s.slice(8,12)}-${s.slice(12,16)}-${s.slice(16,20)}-${s.slice(20)}`,xa=()=>w1(co()),x1=s=>/^\d{4}-\d{2}-\d{2}$/g.test(s);Cr.object({id:Cr.string(),data:Cr.object({space:Cr.string(),method:Cr.string(),params:Cr.array(Cr.any()),userId:Cr.string()})});const $1=s=>{try{return JSON.parse(s)}catch{throw new Error("invalid msg")}},Ud=(s,e,t)=>{const n=new WebSocket(e);n.onopen=()=>{console.log("Connected to server"),postMessage("msg:Connected to server"),postMessage({id:xa(),data:null,type:_n.WebSocketConnected})},n.onmessage=a=>{const r=new MessageChannel,o=$1(a.data);s(o.data,o.id,r.port1),r.port2.onmessage=m=>{n.send(JSON.stringify(m.data))}},n.onclose=()=>{console.log("Disconnected from server"),postMessage({id:xa(),data:null,type:_n.WebSocketDisconnected}),setTimeout(()=>{Ud(s,e,t)},1e3)},t(n)};var qp=(()=>{var s=import.meta.url;return function(e){var t=e||{},n=typeof t<"u"?t:{},a,r;n.ready=new Promise(function(_,f){a=_,r=f});const o=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,o.debugModule("globalThis.location =",globalThis.location);const m="emscripten-bug-17951";n[m]=function _(f,y){f.env.foo=function(){};const b=n.locateFile(_.uri,typeof O>"u"?"":O);o.debugModule("instantiateWasm() uri =",b);const x=()=>fetch(b,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(x(),f).then(J=>y(J.instance,J.module)):async()=>x().then(J=>J.arrayBuffer()).then(J=>WebAssembly.instantiate(J,f)).then(J=>y(J.instance,J.module)))(),{}},n[m].uri="sqlite3.wasm";var h=Object.assign({},n),g="./this.program",u=typeof window=="object",k=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var O="";function w(_){return n.locateFile?n.locateFile(_,O):O+_}var N,Z,ae;(u||k)&&(k?O=self.location.href:typeof document<"u"&&document.currentScript&&(O=document.currentScript.src),s&&(O=s),O.indexOf("blob:")!==0?O=O.substr(0,O.replace(/[?#].*/,"").lastIndexOf("/")+1):O="",N=_=>{var f=new XMLHttpRequest;return f.open("GET",_,!1),f.send(null),f.responseText},k&&(ae=_=>{var f=new XMLHttpRequest;return f.open("GET",_,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),Z=(_,f,y)=>{var b=new XMLHttpRequest;b.open("GET",_,!0),b.responseType="arraybuffer",b.onload=()=>{if(b.status==200||b.status==0&&b.response){f(b.response);return}y()},b.onerror=y,b.send(null)});var Ae=n.print||console.log.bind(console),Pe=n.printErr||console.warn.bind(console);Object.assign(n,h),h=null,n.arguments&&n.arguments,n.thisProgram&&(g=n.thisProgram),n.quit&&n.quit;var ze;n.wasmBinary&&(ze=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&kn("no native wasm support detected");var pe,he=!1;function Le(_,f){_||kn(f)}var Ye=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ut(_,f,y){for(var b=f+y,x=f;_[x]&&!(x>=b);)++x;if(x-f>16&&_.buffer&&Ye)return Ye.decode(_.subarray(f,x));for(var A="";f<x;){var J=_[f++];if(!(J&128)){A+=String.fromCharCode(J);continue}var ie=_[f++]&63;if((J&224)==192){A+=String.fromCharCode((J&31)<<6|ie);continue}var $e=_[f++]&63;if((J&240)==224?J=(J&15)<<12|ie<<6|$e:J=(J&7)<<18|ie<<12|$e<<6|_[f++]&63,J<65536)A+=String.fromCharCode(J);else{var Ue=J-65536;A+=String.fromCharCode(55296|Ue>>10,56320|Ue&1023)}}return A}function c(_,f){return _?ut(ve,_,f):""}function I(_,f,y,b){if(!(b>0))return 0;for(var x=y,A=y+b-1,J=0;J<_.length;++J){var ie=_.charCodeAt(J);if(ie>=55296&&ie<=57343){var $e=_.charCodeAt(++J);ie=65536+((ie&1023)<<10)|$e&1023}if(ie<=127){if(y>=A)break;f[y++]=ie}else if(ie<=2047){if(y+1>=A)break;f[y++]=192|ie>>6,f[y++]=128|ie&63}else if(ie<=65535){if(y+2>=A)break;f[y++]=224|ie>>12,f[y++]=128|ie>>6&63,f[y++]=128|ie&63}else{if(y+3>=A)break;f[y++]=240|ie>>18,f[y++]=128|ie>>12&63,f[y++]=128|ie>>6&63,f[y++]=128|ie&63}}return f[y]=0,y-x}function d(_,f,y){return I(_,ve,f,y)}function j(_){for(var f=0,y=0;y<_.length;++y){var b=_.charCodeAt(y);b<=127?f++:b<=2047?f+=2:b>=55296&&b<=57343?(f+=4,++y):f+=3}return f}var X,ve,Je,Be,Oe;function ht(){var _=pe.buffer;n.HEAP8=X=new Int8Array(_),n.HEAP16=Je=new Int16Array(_),n.HEAP32=Be=new Int32Array(_),n.HEAPU8=ve=new Uint8Array(_),n.HEAPU16=new Uint16Array(_),n.HEAPU32=Oe=new Uint32Array(_),n.HEAPF32=new Float32Array(_),n.HEAPF64=new Float64Array(_),n.HEAP64=new BigInt64Array(_),n.HEAPU64=new BigUint64Array(_)}var yt=n.INITIAL_MEMORY||16777216;n.wasmMemory?pe=n.wasmMemory:pe=new WebAssembly.Memory({initial:yt/65536,maximum:2147483648/65536}),ht(),yt=pe.buffer.byteLength;var ct=[],Bt=[],Pn=[];function Ts(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)vn(n.preRun.shift());vr(ct)}function Ss(){!n.noFSInit&&!E.init.initialized&&E.init(),E.ignorePermissions=!1,vr(Bt)}function jn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Vn(n.postRun.shift());vr(Pn)}function vn(_){ct.unshift(_)}function er(_){Bt.unshift(_)}function Vn(_){Pn.unshift(_)}var yn=0,hs=null;function Zr(_){return _}function $r(_){yn++,n.monitorRunDependencies&&n.monitorRunDependencies(yn)}function Xr(_){if(yn--,n.monitorRunDependencies&&n.monitorRunDependencies(yn),yn==0&&hs){var f=hs;hs=null,f()}}function kn(_){n.onAbort&&n.onAbort(_),_="Aborted("+_+")",Pe(_),he=!0,_+=". Build with -sASSERTIONS for more info.";var f=new WebAssembly.RuntimeError(_);throw r(f),f}var Kr="data:application/octet-stream;base64,";function vo(_){return _.startsWith(Kr)}var ln;n.locateFile?(ln="sqlite3.wasm",vo(ln)||(ln=w(ln))):ln=new URL("/assets/sqlite3-CChiS154.wasm",import.meta.url).href;function di(_){try{if(_==ln&&ze)return new Uint8Array(ze);if(ae)return ae(_);throw"both async and sync fetching of the wasm failed"}catch(f){kn(f)}}function uc(){return!ze&&(u||k)&&typeof fetch=="function"?fetch(ln,{credentials:"same-origin"}).then(function(_){if(!_.ok)throw"failed to load wasm binary file at '"+ln+"'";return _.arrayBuffer()}).catch(function(){return di(ln)}):Promise.resolve().then(function(){return di(ln)})}function ea(){var _={env:Ei,wasi_snapshot_preview1:Ei};function f(J,ie){var $e=J.exports;n.asm=$e,n.asm.__indirect_function_table,er(n.asm.__wasm_call_ctors),Xr()}$r();function y(J){f(J.instance)}function b(J){return uc().then(function(ie){return WebAssembly.instantiate(ie,_)}).then(function(ie){return ie}).then(J,function(ie){Pe("failed to asynchronously prepare wasm: "+ie),kn(ie)})}function x(){return!ze&&typeof WebAssembly.instantiateStreaming=="function"&&!vo(ln)&&typeof fetch=="function"?fetch(ln,{credentials:"same-origin"}).then(function(J){var ie=WebAssembly.instantiateStreaming(J,_);return ie.then(y,function($e){return Pe("wasm streaming compile failed: "+$e),Pe("falling back to ArrayBuffer instantiation"),b(y)})}):b(y)}if(n.instantiateWasm)try{var A=n.instantiateWasm(_,f);return A}catch(J){Pe("Module.instantiateWasm callback failed with error: "+J),r(J)}return x().catch(r),{}}var Et,rn;function vr(_){for(;_.length>0;)_.shift()(n)}var Ht={isAbs:_=>_.charAt(0)==="/",splitPath:_=>{var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return f.exec(_).slice(1)},normalizeArray:(_,f)=>{for(var y=0,b=_.length-1;b>=0;b--){var x=_[b];x==="."?_.splice(b,1):x===".."?(_.splice(b,1),y++):y&&(_.splice(b,1),y--)}if(f)for(;y;y--)_.unshift("..");return _},normalize:_=>{var f=Ht.isAbs(_),y=_.substr(-1)==="/";return _=Ht.normalizeArray(_.split("/").filter(b=>!!b),!f).join("/"),!_&&!f&&(_="."),_&&y&&(_+="/"),(f?"/":"")+_},dirname:_=>{var f=Ht.splitPath(_),y=f[0],b=f[1];return!y&&!b?".":(b&&(b=b.substr(0,b.length-1)),y+b)},basename:_=>{if(_==="/")return"/";_=Ht.normalize(_),_=_.replace(/\/$/,"");var f=_.lastIndexOf("/");return f===-1?_:_.substr(f+1)},join:function(){var _=Array.prototype.slice.call(arguments);return Ht.normalize(_.join("/"))},join2:(_,f)=>Ht.normalize(_+"/"+f)};function ta(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var _=new Uint8Array(1);return()=>(crypto.getRandomValues(_),_[0])}else return()=>kn("randomDevice")}var Is={resolve:function(){for(var _="",f=!1,y=arguments.length-1;y>=-1&&!f;y--){var b=y>=0?arguments[y]:E.cwd();if(typeof b!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!b)return"";_=b+"/"+_,f=Ht.isAbs(b)}return _=Ht.normalizeArray(_.split("/").filter(x=>!!x),!f).join("/"),(f?"/":"")+_||"."},relative:(_,f)=>{_=Is.resolve(_).substr(1),f=Is.resolve(f).substr(1);function y(Ue){for(var Ze=0;Ze<Ue.length&&Ue[Ze]==="";Ze++);for(var ft=Ue.length-1;ft>=0&&Ue[ft]==="";ft--);return Ze>ft?[]:Ue.slice(Ze,ft-Ze+1)}for(var b=y(_.split("/")),x=y(f.split("/")),A=Math.min(b.length,x.length),J=A,ie=0;ie<A;ie++)if(b[ie]!==x[ie]){J=ie;break}for(var $e=[],ie=J;ie<b.length;ie++)$e.push("..");return $e=$e.concat(x.slice(J)),$e.join("/")}};function tr(_,f,y){var b=j(_)+1,x=new Array(b),A=I(_,x,0,x.length);return x.length=A,x}var Gn={ttys:[],init:function(){},shutdown:function(){},register:function(_,f){Gn.ttys[_]={input:[],output:[],ops:f},E.registerDevice(_,Gn.stream_ops)},stream_ops:{open:function(_){var f=Gn.ttys[_.node.rdev];if(!f)throw new E.ErrnoError(43);_.tty=f,_.seekable=!1},close:function(_){_.tty.ops.fsync(_.tty)},fsync:function(_){_.tty.ops.fsync(_.tty)},read:function(_,f,y,b,x){if(!_.tty||!_.tty.ops.get_char)throw new E.ErrnoError(60);for(var A=0,J=0;J<b;J++){var ie;try{ie=_.tty.ops.get_char(_.tty)}catch{throw new E.ErrnoError(29)}if(ie===void 0&&A===0)throw new E.ErrnoError(6);if(ie==null)break;A++,f[y+J]=ie}return A&&(_.node.timestamp=Date.now()),A},write:function(_,f,y,b,x){if(!_.tty||!_.tty.ops.put_char)throw new E.ErrnoError(60);try{for(var A=0;A<b;A++)_.tty.ops.put_char(_.tty,f[y+A])}catch{throw new E.ErrnoError(29)}return b&&(_.node.timestamp=Date.now()),A}},default_tty_ops:{get_char:function(_){if(!_.input.length){var f=null;if(typeof window<"u"&&typeof window.prompt=="function"?(f=window.prompt("Input: "),f!==null&&(f+=`
`)):typeof readline=="function"&&(f=readline(),f!==null&&(f+=`
`)),!f)return null;_.input=tr(f)}return _.input.shift()},put_char:function(_,f){f===null||f===10?(Ae(ut(_.output,0)),_.output=[]):f!=0&&_.output.push(f)},fsync:function(_){_.output&&_.output.length>0&&(Ae(ut(_.output,0)),_.output=[])}},default_tty1_ops:{put_char:function(_,f){f===null||f===10?(Pe(ut(_.output,0)),_.output=[]):f!=0&&_.output.push(f)},fsync:function(_){_.output&&_.output.length>0&&(Pe(ut(_.output,0)),_.output=[])}}};function _i(_,f){return ve.fill(0,_,_+f),_}function hi(_,f){return Math.ceil(_/f)*f}function Sa(_){_=hi(_,65536);var f=Ai(65536,_);return f?_i(f,_):0}var St={ops_table:null,mount:function(_){return St.createNode(null,"/",16895,0)},createNode:function(_,f,y,b){if(E.isBlkdev(y)||E.isFIFO(y))throw new E.ErrnoError(63);St.ops_table||(St.ops_table={dir:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr,lookup:St.node_ops.lookup,mknod:St.node_ops.mknod,rename:St.node_ops.rename,unlink:St.node_ops.unlink,rmdir:St.node_ops.rmdir,readdir:St.node_ops.readdir,symlink:St.node_ops.symlink},stream:{llseek:St.stream_ops.llseek}},file:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr},stream:{llseek:St.stream_ops.llseek,read:St.stream_ops.read,write:St.stream_ops.write,allocate:St.stream_ops.allocate,mmap:St.stream_ops.mmap,msync:St.stream_ops.msync}},link:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr,readlink:St.node_ops.readlink},stream:{}},chrdev:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr},stream:E.chrdev_stream_ops}});var x=E.createNode(_,f,y,b);return E.isDir(x.mode)?(x.node_ops=St.ops_table.dir.node,x.stream_ops=St.ops_table.dir.stream,x.contents={}):E.isFile(x.mode)?(x.node_ops=St.ops_table.file.node,x.stream_ops=St.ops_table.file.stream,x.usedBytes=0,x.contents=null):E.isLink(x.mode)?(x.node_ops=St.ops_table.link.node,x.stream_ops=St.ops_table.link.stream):E.isChrdev(x.mode)&&(x.node_ops=St.ops_table.chrdev.node,x.stream_ops=St.ops_table.chrdev.stream),x.timestamp=Date.now(),_&&(_.contents[f]=x,_.timestamp=x.timestamp),x},getFileDataAsTypedArray:function(_){return _.contents?_.contents.subarray?_.contents.subarray(0,_.usedBytes):new Uint8Array(_.contents):new Uint8Array(0)},expandFileStorage:function(_,f){var y=_.contents?_.contents.length:0;if(!(y>=f)){var b=1024*1024;f=Math.max(f,y*(y<b?2:1.125)>>>0),y!=0&&(f=Math.max(f,256));var x=_.contents;_.contents=new Uint8Array(f),_.usedBytes>0&&_.contents.set(x.subarray(0,_.usedBytes),0)}},resizeFileStorage:function(_,f){if(_.usedBytes!=f)if(f==0)_.contents=null,_.usedBytes=0;else{var y=_.contents;_.contents=new Uint8Array(f),y&&_.contents.set(y.subarray(0,Math.min(f,_.usedBytes))),_.usedBytes=f}},node_ops:{getattr:function(_){var f={};return f.dev=E.isChrdev(_.mode)?_.id:1,f.ino=_.id,f.mode=_.mode,f.nlink=1,f.uid=0,f.gid=0,f.rdev=_.rdev,E.isDir(_.mode)?f.size=4096:E.isFile(_.mode)?f.size=_.usedBytes:E.isLink(_.mode)?f.size=_.link.length:f.size=0,f.atime=new Date(_.timestamp),f.mtime=new Date(_.timestamp),f.ctime=new Date(_.timestamp),f.blksize=4096,f.blocks=Math.ceil(f.size/f.blksize),f},setattr:function(_,f){f.mode!==void 0&&(_.mode=f.mode),f.timestamp!==void 0&&(_.timestamp=f.timestamp),f.size!==void 0&&St.resizeFileStorage(_,f.size)},lookup:function(_,f){throw E.genericErrors[44]},mknod:function(_,f,y,b){return St.createNode(_,f,y,b)},rename:function(_,f,y){if(E.isDir(_.mode)){var b;try{b=E.lookupNode(f,y)}catch{}if(b)for(var x in b.contents)throw new E.ErrnoError(55)}delete _.parent.contents[_.name],_.parent.timestamp=Date.now(),_.name=y,f.contents[y]=_,f.timestamp=_.parent.timestamp,_.parent=f},unlink:function(_,f){delete _.contents[f],_.timestamp=Date.now()},rmdir:function(_,f){var y=E.lookupNode(_,f);for(var b in y.contents)throw new E.ErrnoError(55);delete _.contents[f],_.timestamp=Date.now()},readdir:function(_){var f=[".",".."];for(var y in _.contents)_.contents.hasOwnProperty(y)&&f.push(y);return f},symlink:function(_,f,y){var b=St.createNode(_,f,41471,0);return b.link=y,b},readlink:function(_){if(!E.isLink(_.mode))throw new E.ErrnoError(28);return _.link}},stream_ops:{read:function(_,f,y,b,x){var A=_.node.contents;if(x>=_.node.usedBytes)return 0;var J=Math.min(_.node.usedBytes-x,b);if(J>8&&A.subarray)f.set(A.subarray(x,x+J),y);else for(var ie=0;ie<J;ie++)f[y+ie]=A[x+ie];return J},write:function(_,f,y,b,x,A){if(f.buffer===X.buffer&&(A=!1),!b)return 0;var J=_.node;if(J.timestamp=Date.now(),f.subarray&&(!J.contents||J.contents.subarray)){if(A)return J.contents=f.subarray(y,y+b),J.usedBytes=b,b;if(J.usedBytes===0&&x===0)return J.contents=f.slice(y,y+b),J.usedBytes=b,b;if(x+b<=J.usedBytes)return J.contents.set(f.subarray(y,y+b),x),b}if(St.expandFileStorage(J,x+b),J.contents.subarray&&f.subarray)J.contents.set(f.subarray(y,y+b),x);else for(var ie=0;ie<b;ie++)J.contents[x+ie]=f[y+ie];return J.usedBytes=Math.max(J.usedBytes,x+b),b},llseek:function(_,f,y){var b=f;if(y===1?b+=_.position:y===2&&E.isFile(_.node.mode)&&(b+=_.node.usedBytes),b<0)throw new E.ErrnoError(28);return b},allocate:function(_,f,y){St.expandFileStorage(_.node,f+y),_.node.usedBytes=Math.max(_.node.usedBytes,f+y)},mmap:function(_,f,y,b,x){if(!E.isFile(_.node.mode))throw new E.ErrnoError(43);var A,J,ie=_.node.contents;if(!(x&2)&&ie.buffer===X.buffer)J=!1,A=ie.byteOffset;else{if((y>0||y+f<ie.length)&&(ie.subarray?ie=ie.subarray(y,y+f):ie=Array.prototype.slice.call(ie,y,y+f)),J=!0,A=Sa(f),!A)throw new E.ErrnoError(48);X.set(ie,A)}return{ptr:A,allocated:J}},msync:function(_,f,y,b,x){return St.stream_ops.write(_,f,0,b,y,!1),0}}};function bi(_,f,y,b){var x="al "+_;Z(_,A=>{Le(A,'Loading data file "'+_+'" failed (no arrayBuffer).'),f(new Uint8Array(A)),x&&Xr()},A=>{if(y)y();else throw'Loading data file "'+_+'" failed.'}),x&&$r()}var E={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(_,f={})=>{if(_=Is.resolve(_),!_)return{path:"",node:null};var y={follow_mount:!0,recurse_count:0};if(f=Object.assign(y,f),f.recurse_count>8)throw new E.ErrnoError(32);for(var b=_.split("/").filter(ft=>!!ft),x=E.root,A="/",J=0;J<b.length;J++){var ie=J===b.length-1;if(ie&&f.parent)break;if(x=E.lookupNode(x,b[J]),A=Ht.join2(A,b[J]),E.isMountpoint(x)&&(!ie||ie&&f.follow_mount)&&(x=x.mounted.root),!ie||f.follow)for(var $e=0;E.isLink(x.mode);){var Ue=E.readlink(A);A=Is.resolve(Ht.dirname(A),Ue);var Ze=E.lookupPath(A,{recurse_count:f.recurse_count+1});if(x=Ze.node,$e++>40)throw new E.ErrnoError(32)}}return{path:A,node:x}},getPath:_=>{for(var f;;){if(E.isRoot(_)){var y=_.mount.mountpoint;return f?y[y.length-1]!=="/"?y+"/"+f:y+f:y}f=f?_.name+"/"+f:_.name,_=_.parent}},hashName:(_,f)=>{for(var y=0,b=0;b<f.length;b++)y=(y<<5)-y+f.charCodeAt(b)|0;return(_+y>>>0)%E.nameTable.length},hashAddNode:_=>{var f=E.hashName(_.parent.id,_.name);_.name_next=E.nameTable[f],E.nameTable[f]=_},hashRemoveNode:_=>{var f=E.hashName(_.parent.id,_.name);if(E.nameTable[f]===_)E.nameTable[f]=_.name_next;else for(var y=E.nameTable[f];y;){if(y.name_next===_){y.name_next=_.name_next;break}y=y.name_next}},lookupNode:(_,f)=>{var y=E.mayLookup(_);if(y)throw new E.ErrnoError(y,_);for(var b=E.hashName(_.id,f),x=E.nameTable[b];x;x=x.name_next){var A=x.name;if(x.parent.id===_.id&&A===f)return x}return E.lookup(_,f)},createNode:(_,f,y,b)=>{var x=new E.FSNode(_,f,y,b);return E.hashAddNode(x),x},destroyNode:_=>{E.hashRemoveNode(_)},isRoot:_=>_===_.parent,isMountpoint:_=>!!_.mounted,isFile:_=>(_&61440)===32768,isDir:_=>(_&61440)===16384,isLink:_=>(_&61440)===40960,isChrdev:_=>(_&61440)===8192,isBlkdev:_=>(_&61440)===24576,isFIFO:_=>(_&61440)===4096,isSocket:_=>(_&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:_=>{var f=E.flagModes[_];if(typeof f>"u")throw new Error("Unknown file open mode: "+_);return f},flagsToPermissionString:_=>{var f=["r","w","rw"][_&3];return _&512&&(f+="w"),f},nodePermissions:(_,f)=>E.ignorePermissions?0:f.includes("r")&&!(_.mode&292)||f.includes("w")&&!(_.mode&146)||f.includes("x")&&!(_.mode&73)?2:0,mayLookup:_=>{var f=E.nodePermissions(_,"x");return f||(_.node_ops.lookup?0:2)},mayCreate:(_,f)=>{try{var y=E.lookupNode(_,f);return 20}catch{}return E.nodePermissions(_,"wx")},mayDelete:(_,f,y)=>{var b;try{b=E.lookupNode(_,f)}catch(A){return A.errno}var x=E.nodePermissions(_,"wx");if(x)return x;if(y){if(!E.isDir(b.mode))return 54;if(E.isRoot(b)||E.getPath(b)===E.cwd())return 10}else if(E.isDir(b.mode))return 31;return 0},mayOpen:(_,f)=>_?E.isLink(_.mode)?32:E.isDir(_.mode)&&(E.flagsToPermissionString(f)!=="r"||f&512)?31:E.nodePermissions(_,E.flagsToPermissionString(f)):44,MAX_OPEN_FDS:4096,nextfd:(_=0,f=E.MAX_OPEN_FDS)=>{for(var y=_;y<=f;y++)if(!E.streams[y])return y;throw new E.ErrnoError(33)},getStream:_=>E.streams[_],createStream:(_,f,y)=>{E.FSStream||(E.FSStream=function(){this.shared={}},E.FSStream.prototype={},Object.defineProperties(E.FSStream.prototype,{object:{get:function(){return this.node},set:function(x){this.node=x}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(x){this.shared.flags=x}},position:{get:function(){return this.shared.position},set:function(x){this.shared.position=x}}})),_=Object.assign(new E.FSStream,_);var b=E.nextfd(f,y);return _.fd=b,E.streams[b]=_,_},closeStream:_=>{E.streams[_]=null},chrdev_stream_ops:{open:_=>{var f=E.getDevice(_.node.rdev);_.stream_ops=f.stream_ops,_.stream_ops.open&&_.stream_ops.open(_)},llseek:()=>{throw new E.ErrnoError(70)}},major:_=>_>>8,minor:_=>_&255,makedev:(_,f)=>_<<8|f,registerDevice:(_,f)=>{E.devices[_]={stream_ops:f}},getDevice:_=>E.devices[_],getMounts:_=>{for(var f=[],y=[_];y.length;){var b=y.pop();f.push(b),y.push.apply(y,b.mounts)}return f},syncfs:(_,f)=>{typeof _=="function"&&(f=_,_=!1),E.syncFSRequests++,E.syncFSRequests>1&&Pe("warning: "+E.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var y=E.getMounts(E.root.mount),b=0;function x(J){return E.syncFSRequests--,f(J)}function A(J){if(J)return A.errored?void 0:(A.errored=!0,x(J));++b>=y.length&&x(null)}y.forEach(J=>{if(!J.type.syncfs)return A(null);J.type.syncfs(J,_,A)})},mount:(_,f,y)=>{var b=y==="/",x=!y,A;if(b&&E.root)throw new E.ErrnoError(10);if(!b&&!x){var J=E.lookupPath(y,{follow_mount:!1});if(y=J.path,A=J.node,E.isMountpoint(A))throw new E.ErrnoError(10);if(!E.isDir(A.mode))throw new E.ErrnoError(54)}var ie={type:_,opts:f,mountpoint:y,mounts:[]},$e=_.mount(ie);return $e.mount=ie,ie.root=$e,b?E.root=$e:A&&(A.mounted=ie,A.mount&&A.mount.mounts.push(ie)),$e},unmount:_=>{var f=E.lookupPath(_,{follow_mount:!1});if(!E.isMountpoint(f.node))throw new E.ErrnoError(28);var y=f.node,b=y.mounted,x=E.getMounts(b);Object.keys(E.nameTable).forEach(J=>{for(var ie=E.nameTable[J];ie;){var $e=ie.name_next;x.includes(ie.mount)&&E.destroyNode(ie),ie=$e}}),y.mounted=null;var A=y.mount.mounts.indexOf(b);y.mount.mounts.splice(A,1)},lookup:(_,f)=>_.node_ops.lookup(_,f),mknod:(_,f,y)=>{var b=E.lookupPath(_,{parent:!0}),x=b.node,A=Ht.basename(_);if(!A||A==="."||A==="..")throw new E.ErrnoError(28);var J=E.mayCreate(x,A);if(J)throw new E.ErrnoError(J);if(!x.node_ops.mknod)throw new E.ErrnoError(63);return x.node_ops.mknod(x,A,f,y)},create:(_,f)=>(f=f!==void 0?f:438,f&=4095,f|=32768,E.mknod(_,f,0)),mkdir:(_,f)=>(f=f!==void 0?f:511,f&=1023,f|=16384,E.mknod(_,f,0)),mkdirTree:(_,f)=>{for(var y=_.split("/"),b="",x=0;x<y.length;++x)if(y[x]){b+="/"+y[x];try{E.mkdir(b,f)}catch(A){if(A.errno!=20)throw A}}},mkdev:(_,f,y)=>(typeof y>"u"&&(y=f,f=438),f|=8192,E.mknod(_,f,y)),symlink:(_,f)=>{if(!Is.resolve(_))throw new E.ErrnoError(44);var y=E.lookupPath(f,{parent:!0}),b=y.node;if(!b)throw new E.ErrnoError(44);var x=Ht.basename(f),A=E.mayCreate(b,x);if(A)throw new E.ErrnoError(A);if(!b.node_ops.symlink)throw new E.ErrnoError(63);return b.node_ops.symlink(b,x,_)},rename:(_,f)=>{var y=Ht.dirname(_),b=Ht.dirname(f),x=Ht.basename(_),A=Ht.basename(f),J,ie,$e;if(J=E.lookupPath(_,{parent:!0}),ie=J.node,J=E.lookupPath(f,{parent:!0}),$e=J.node,!ie||!$e)throw new E.ErrnoError(44);if(ie.mount!==$e.mount)throw new E.ErrnoError(75);var Ue=E.lookupNode(ie,x),Ze=Is.relative(_,b);if(Ze.charAt(0)!==".")throw new E.ErrnoError(28);if(Ze=Is.relative(f,y),Ze.charAt(0)!==".")throw new E.ErrnoError(55);var ft;try{ft=E.lookupNode($e,A)}catch{}if(Ue!==ft){var fe=E.isDir(Ue.mode),B=E.mayDelete(ie,x,fe);if(B)throw new E.ErrnoError(B);if(B=ft?E.mayDelete($e,A,fe):E.mayCreate($e,A),B)throw new E.ErrnoError(B);if(!ie.node_ops.rename)throw new E.ErrnoError(63);if(E.isMountpoint(Ue)||ft&&E.isMountpoint(ft))throw new E.ErrnoError(10);if($e!==ie&&(B=E.nodePermissions(ie,"w"),B))throw new E.ErrnoError(B);E.hashRemoveNode(Ue);try{ie.node_ops.rename(Ue,$e,A)}catch(V){throw V}finally{E.hashAddNode(Ue)}}},rmdir:_=>{var f=E.lookupPath(_,{parent:!0}),y=f.node,b=Ht.basename(_),x=E.lookupNode(y,b),A=E.mayDelete(y,b,!0);if(A)throw new E.ErrnoError(A);if(!y.node_ops.rmdir)throw new E.ErrnoError(63);if(E.isMountpoint(x))throw new E.ErrnoError(10);y.node_ops.rmdir(y,b),E.destroyNode(x)},readdir:_=>{var f=E.lookupPath(_,{follow:!0}),y=f.node;if(!y.node_ops.readdir)throw new E.ErrnoError(54);return y.node_ops.readdir(y)},unlink:_=>{var f=E.lookupPath(_,{parent:!0}),y=f.node;if(!y)throw new E.ErrnoError(44);var b=Ht.basename(_),x=E.lookupNode(y,b),A=E.mayDelete(y,b,!1);if(A)throw new E.ErrnoError(A);if(!y.node_ops.unlink)throw new E.ErrnoError(63);if(E.isMountpoint(x))throw new E.ErrnoError(10);y.node_ops.unlink(y,b),E.destroyNode(x)},readlink:_=>{var f=E.lookupPath(_),y=f.node;if(!y)throw new E.ErrnoError(44);if(!y.node_ops.readlink)throw new E.ErrnoError(28);return Is.resolve(E.getPath(y.parent),y.node_ops.readlink(y))},stat:(_,f)=>{var y=E.lookupPath(_,{follow:!f}),b=y.node;if(!b)throw new E.ErrnoError(44);if(!b.node_ops.getattr)throw new E.ErrnoError(63);return b.node_ops.getattr(b)},lstat:_=>E.stat(_,!0),chmod:(_,f,y)=>{var b;if(typeof _=="string"){var x=E.lookupPath(_,{follow:!y});b=x.node}else b=_;if(!b.node_ops.setattr)throw new E.ErrnoError(63);b.node_ops.setattr(b,{mode:f&4095|b.mode&-4096,timestamp:Date.now()})},lchmod:(_,f)=>{E.chmod(_,f,!0)},fchmod:(_,f)=>{var y=E.getStream(_);if(!y)throw new E.ErrnoError(8);E.chmod(y.node,f)},chown:(_,f,y,b)=>{var x;if(typeof _=="string"){var A=E.lookupPath(_,{follow:!b});x=A.node}else x=_;if(!x.node_ops.setattr)throw new E.ErrnoError(63);x.node_ops.setattr(x,{timestamp:Date.now()})},lchown:(_,f,y)=>{E.chown(_,f,y,!0)},fchown:(_,f,y)=>{var b=E.getStream(_);if(!b)throw new E.ErrnoError(8);E.chown(b.node,f,y)},truncate:(_,f)=>{if(f<0)throw new E.ErrnoError(28);var y;if(typeof _=="string"){var b=E.lookupPath(_,{follow:!0});y=b.node}else y=_;if(!y.node_ops.setattr)throw new E.ErrnoError(63);if(E.isDir(y.mode))throw new E.ErrnoError(31);if(!E.isFile(y.mode))throw new E.ErrnoError(28);var x=E.nodePermissions(y,"w");if(x)throw new E.ErrnoError(x);y.node_ops.setattr(y,{size:f,timestamp:Date.now()})},ftruncate:(_,f)=>{var y=E.getStream(_);if(!y)throw new E.ErrnoError(8);if(!(y.flags&2097155))throw new E.ErrnoError(28);E.truncate(y.node,f)},utime:(_,f,y)=>{var b=E.lookupPath(_,{follow:!0}),x=b.node;x.node_ops.setattr(x,{timestamp:Math.max(f,y)})},open:(_,f,y)=>{if(_==="")throw new E.ErrnoError(44);f=typeof f=="string"?E.modeStringToFlags(f):f,y=typeof y>"u"?438:y,f&64?y=y&4095|32768:y=0;var b;if(typeof _=="object")b=_;else{_=Ht.normalize(_);try{var x=E.lookupPath(_,{follow:!(f&131072)});b=x.node}catch{}}var A=!1;if(f&64)if(b){if(f&128)throw new E.ErrnoError(20)}else b=E.mknod(_,y,0),A=!0;if(!b)throw new E.ErrnoError(44);if(E.isChrdev(b.mode)&&(f&=-513),f&65536&&!E.isDir(b.mode))throw new E.ErrnoError(54);if(!A){var J=E.mayOpen(b,f);if(J)throw new E.ErrnoError(J)}f&512&&!A&&E.truncate(b,0),f&=-131713;var ie=E.createStream({node:b,path:E.getPath(b),flags:f,seekable:!0,position:0,stream_ops:b.stream_ops,ungotten:[],error:!1});return ie.stream_ops.open&&ie.stream_ops.open(ie),n.logReadFiles&&!(f&1)&&(E.readFiles||(E.readFiles={}),_ in E.readFiles||(E.readFiles[_]=1)),ie},close:_=>{if(E.isClosed(_))throw new E.ErrnoError(8);_.getdents&&(_.getdents=null);try{_.stream_ops.close&&_.stream_ops.close(_)}catch(f){throw f}finally{E.closeStream(_.fd)}_.fd=null},isClosed:_=>_.fd===null,llseek:(_,f,y)=>{if(E.isClosed(_))throw new E.ErrnoError(8);if(!_.seekable||!_.stream_ops.llseek)throw new E.ErrnoError(70);if(y!=0&&y!=1&&y!=2)throw new E.ErrnoError(28);return _.position=_.stream_ops.llseek(_,f,y),_.ungotten=[],_.position},read:(_,f,y,b,x)=>{if(b<0||x<0)throw new E.ErrnoError(28);if(E.isClosed(_))throw new E.ErrnoError(8);if((_.flags&2097155)===1)throw new E.ErrnoError(8);if(E.isDir(_.node.mode))throw new E.ErrnoError(31);if(!_.stream_ops.read)throw new E.ErrnoError(28);var A=typeof x<"u";if(!A)x=_.position;else if(!_.seekable)throw new E.ErrnoError(70);var J=_.stream_ops.read(_,f,y,b,x);return A||(_.position+=J),J},write:(_,f,y,b,x,A)=>{if(b<0||x<0)throw new E.ErrnoError(28);if(E.isClosed(_))throw new E.ErrnoError(8);if(!(_.flags&2097155))throw new E.ErrnoError(8);if(E.isDir(_.node.mode))throw new E.ErrnoError(31);if(!_.stream_ops.write)throw new E.ErrnoError(28);_.seekable&&_.flags&1024&&E.llseek(_,0,2);var J=typeof x<"u";if(!J)x=_.position;else if(!_.seekable)throw new E.ErrnoError(70);var ie=_.stream_ops.write(_,f,y,b,x,A);return J||(_.position+=ie),ie},allocate:(_,f,y)=>{if(E.isClosed(_))throw new E.ErrnoError(8);if(f<0||y<=0)throw new E.ErrnoError(28);if(!(_.flags&2097155))throw new E.ErrnoError(8);if(!E.isFile(_.node.mode)&&!E.isDir(_.node.mode))throw new E.ErrnoError(43);if(!_.stream_ops.allocate)throw new E.ErrnoError(138);_.stream_ops.allocate(_,f,y)},mmap:(_,f,y,b,x)=>{if(b&2&&!(x&2)&&(_.flags&2097155)!==2)throw new E.ErrnoError(2);if((_.flags&2097155)===1)throw new E.ErrnoError(2);if(!_.stream_ops.mmap)throw new E.ErrnoError(43);return _.stream_ops.mmap(_,f,y,b,x)},msync:(_,f,y,b,x)=>_.stream_ops.msync?_.stream_ops.msync(_,f,y,b,x):0,munmap:_=>0,ioctl:(_,f,y)=>{if(!_.stream_ops.ioctl)throw new E.ErrnoError(59);return _.stream_ops.ioctl(_,f,y)},readFile:(_,f={})=>{if(f.flags=f.flags||0,f.encoding=f.encoding||"binary",f.encoding!=="utf8"&&f.encoding!=="binary")throw new Error('Invalid encoding type "'+f.encoding+'"');var y,b=E.open(_,f.flags),x=E.stat(_),A=x.size,J=new Uint8Array(A);return E.read(b,J,0,A,0),f.encoding==="utf8"?y=ut(J,0):f.encoding==="binary"&&(y=J),E.close(b),y},writeFile:(_,f,y={})=>{y.flags=y.flags||577;var b=E.open(_,y.flags,y.mode);if(typeof f=="string"){var x=new Uint8Array(j(f)+1),A=I(f,x,0,x.length);E.write(b,x,0,A,void 0,y.canOwn)}else if(ArrayBuffer.isView(f))E.write(b,f,0,f.byteLength,void 0,y.canOwn);else throw new Error("Unsupported data type");E.close(b)},cwd:()=>E.currentPath,chdir:_=>{var f=E.lookupPath(_,{follow:!0});if(f.node===null)throw new E.ErrnoError(44);if(!E.isDir(f.node.mode))throw new E.ErrnoError(54);var y=E.nodePermissions(f.node,"x");if(y)throw new E.ErrnoError(y);E.currentPath=f.path},createDefaultDirectories:()=>{E.mkdir("/tmp"),E.mkdir("/home"),E.mkdir("/home/web_user")},createDefaultDevices:()=>{E.mkdir("/dev"),E.registerDevice(E.makedev(1,3),{read:()=>0,write:(f,y,b,x,A)=>x}),E.mkdev("/dev/null",E.makedev(1,3)),Gn.register(E.makedev(5,0),Gn.default_tty_ops),Gn.register(E.makedev(6,0),Gn.default_tty1_ops),E.mkdev("/dev/tty",E.makedev(5,0)),E.mkdev("/dev/tty1",E.makedev(6,0));var _=ta();E.createDevice("/dev","random",_),E.createDevice("/dev","urandom",_),E.mkdir("/dev/shm"),E.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{E.mkdir("/proc");var _=E.mkdir("/proc/self");E.mkdir("/proc/self/fd"),E.mount({mount:()=>{var f=E.createNode(_,"fd",16895,73);return f.node_ops={lookup:(y,b)=>{var x=+b,A=E.getStream(x);if(!A)throw new E.ErrnoError(8);var J={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>A.path}};return J.parent=J,J}},f}},{},"/proc/self/fd")},createStandardStreams:()=>{n.stdin?E.createDevice("/dev","stdin",n.stdin):E.symlink("/dev/tty","/dev/stdin"),n.stdout?E.createDevice("/dev","stdout",null,n.stdout):E.symlink("/dev/tty","/dev/stdout"),n.stderr?E.createDevice("/dev","stderr",null,n.stderr):E.symlink("/dev/tty1","/dev/stderr"),E.open("/dev/stdin",0),E.open("/dev/stdout",1),E.open("/dev/stderr",1)},ensureErrnoError:()=>{E.ErrnoError||(E.ErrnoError=function(f,y){this.node=y,this.setErrno=function(b){this.errno=b},this.setErrno(f),this.message="FS error"},E.ErrnoError.prototype=new Error,E.ErrnoError.prototype.constructor=E.ErrnoError,[44].forEach(_=>{E.genericErrors[_]=new E.ErrnoError(_),E.genericErrors[_].stack="<generic error, no stack>"}))},staticInit:()=>{E.ensureErrnoError(),E.nameTable=new Array(4096),E.mount(St,{},"/"),E.createDefaultDirectories(),E.createDefaultDevices(),E.createSpecialDirectories(),E.filesystems={MEMFS:St}},init:(_,f,y)=>{E.init.initialized=!0,E.ensureErrnoError(),n.stdin=_||n.stdin,n.stdout=f||n.stdout,n.stderr=y||n.stderr,E.createStandardStreams()},quit:()=>{E.init.initialized=!1;for(var _=0;_<E.streams.length;_++){var f=E.streams[_];f&&E.close(f)}},getMode:(_,f)=>{var y=0;return _&&(y|=365),f&&(y|=146),y},findObject:(_,f)=>{var y=E.analyzePath(_,f);return y.exists?y.object:null},analyzePath:(_,f)=>{try{var y=E.lookupPath(_,{follow:!f});_=y.path}catch{}var b={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var y=E.lookupPath(_,{parent:!0});b.parentExists=!0,b.parentPath=y.path,b.parentObject=y.node,b.name=Ht.basename(_),y=E.lookupPath(_,{follow:!f}),b.exists=!0,b.path=y.path,b.object=y.node,b.name=y.node.name,b.isRoot=y.path==="/"}catch(x){b.error=x.errno}return b},createPath:(_,f,y,b)=>{_=typeof _=="string"?_:E.getPath(_);for(var x=f.split("/").reverse();x.length;){var A=x.pop();if(A){var J=Ht.join2(_,A);try{E.mkdir(J)}catch{}_=J}}return J},createFile:(_,f,y,b,x)=>{var A=Ht.join2(typeof _=="string"?_:E.getPath(_),f),J=E.getMode(b,x);return E.create(A,J)},createDataFile:(_,f,y,b,x,A)=>{var J=f;_&&(_=typeof _=="string"?_:E.getPath(_),J=f?Ht.join2(_,f):_);var ie=E.getMode(b,x),$e=E.create(J,ie);if(y){if(typeof y=="string"){for(var Ue=new Array(y.length),Ze=0,ft=y.length;Ze<ft;++Ze)Ue[Ze]=y.charCodeAt(Ze);y=Ue}E.chmod($e,ie|146);var fe=E.open($e,577);E.write(fe,y,0,y.length,0,A),E.close(fe),E.chmod($e,ie)}return $e},createDevice:(_,f,y,b)=>{var x=Ht.join2(typeof _=="string"?_:E.getPath(_),f),A=E.getMode(!!y,!!b);E.createDevice.major||(E.createDevice.major=64);var J=E.makedev(E.createDevice.major++,0);return E.registerDevice(J,{open:ie=>{ie.seekable=!1},close:ie=>{b&&b.buffer&&b.buffer.length&&b(10)},read:(ie,$e,Ue,Ze,ft)=>{for(var fe=0,B=0;B<Ze;B++){var V;try{V=y()}catch{throw new E.ErrnoError(29)}if(V===void 0&&fe===0)throw new E.ErrnoError(6);if(V==null)break;fe++,$e[Ue+B]=V}return fe&&(ie.node.timestamp=Date.now()),fe},write:(ie,$e,Ue,Ze,ft)=>{for(var fe=0;fe<Ze;fe++)try{b($e[Ue+fe])}catch{throw new E.ErrnoError(29)}return Ze&&(ie.node.timestamp=Date.now()),fe}}),E.mkdev(x,A,J)},forceLoadFile:_=>{if(_.isDevice||_.isFolder||_.link||_.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(N)try{_.contents=tr(N(_.url),!0),_.usedBytes=_.contents.length}catch{throw new E.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(_,f,y,b,x)=>{function A(){this.lengthKnown=!1,this.chunks=[]}if(A.prototype.get=function(B){if(!(B>this.length-1||B<0)){var V=B%this.chunkSize,ne=B/this.chunkSize|0;return this.getter(ne)[V]}},A.prototype.setDataGetter=function(B){this.getter=B},A.prototype.cacheLength=function(){var B=new XMLHttpRequest;if(B.open("HEAD",y,!1),B.send(null),!(B.status>=200&&B.status<300||B.status===304))throw new Error("Couldn't load "+y+". Status: "+B.status);var V=Number(B.getResponseHeader("Content-length")),ne,ce=(ne=B.getResponseHeader("Accept-Ranges"))&&ne==="bytes",ee=(ne=B.getResponseHeader("Content-Encoding"))&&ne==="gzip",we=1024*1024;ce||(we=V);var De=(Ve,We)=>{if(Ve>We)throw new Error("invalid range ("+Ve+", "+We+") or no bytes requested!");if(We>V-1)throw new Error("only "+V+" bytes available! programmer error!");var L=new XMLHttpRequest;if(L.open("GET",y,!1),V!==we&&L.setRequestHeader("Range","bytes="+Ve+"-"+We),L.responseType="arraybuffer",L.overrideMimeType&&L.overrideMimeType("text/plain; charset=x-user-defined"),L.send(null),!(L.status>=200&&L.status<300||L.status===304))throw new Error("Couldn't load "+y+". Status: "+L.status);return L.response!==void 0?new Uint8Array(L.response||[]):tr(L.responseText||"")},je=this;je.setDataGetter(Ve=>{var We=Ve*we,L=(Ve+1)*we-1;if(L=Math.min(L,V-1),typeof je.chunks[Ve]>"u"&&(je.chunks[Ve]=De(We,L)),typeof je.chunks[Ve]>"u")throw new Error("doXHR failed!");return je.chunks[Ve]}),(ee||!V)&&(we=V=1,V=this.getter(0).length,we=V,Ae("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=V,this._chunkSize=we,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!k)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var J=new A;Object.defineProperties(J,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var ie={isDevice:!1,contents:J}}else var ie={isDevice:!1,url:y};var $e=E.createFile(_,f,ie,b,x);ie.contents?$e.contents=ie.contents:ie.url&&($e.contents=null,$e.url=ie.url),Object.defineProperties($e,{usedBytes:{get:function(){return this.contents.length}}});var Ue={},Ze=Object.keys($e.stream_ops);Ze.forEach(fe=>{var B=$e.stream_ops[fe];Ue[fe]=function(){return E.forceLoadFile($e),B.apply(null,arguments)}});function ft(fe,B,V,ne,ce){var ee=fe.node.contents;if(ce>=ee.length)return 0;var we=Math.min(ee.length-ce,ne);if(ee.slice)for(var De=0;De<we;De++)B[V+De]=ee[ce+De];else for(var De=0;De<we;De++)B[V+De]=ee.get(ce+De);return we}return Ue.read=(fe,B,V,ne,ce)=>(E.forceLoadFile($e),ft(fe,B,V,ne,ce)),Ue.mmap=(fe,B,V,ne,ce)=>{E.forceLoadFile($e);var ee=Sa(B);if(!ee)throw new E.ErrnoError(48);return ft(fe,X,ee,B,V),{ptr:ee,allocated:!0}},$e.stream_ops=Ue,$e},createPreloadedFile:(_,f,y,b,x,A,J,ie,$e,Ue)=>{var Ze=f?Is.resolve(Ht.join2(_,f)):_;function ft(fe){function B(V){Ue&&Ue(),ie||E.createDataFile(_,f,V,b,x,$e),A&&A(),Xr()}Browser.handledByPreloadPlugin(fe,Ze,B,()=>{J&&J(),Xr()})||B(fe)}$r(),typeof y=="string"?bi(y,fe=>ft(fe),J):ft(y)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(_,f,y)=>{f=f||(()=>{}),y=y||(()=>{});var b=E.indexedDB();try{var x=b.open(E.DB_NAME(),E.DB_VERSION)}catch(A){return y(A)}x.onupgradeneeded=()=>{Ae("creating db");var A=x.result;A.createObjectStore(E.DB_STORE_NAME)},x.onsuccess=()=>{var A=x.result,J=A.transaction([E.DB_STORE_NAME],"readwrite"),ie=J.objectStore(E.DB_STORE_NAME),$e=0,Ue=0,Ze=_.length;function ft(){Ue==0?f():y()}_.forEach(fe=>{var B=ie.put(E.analyzePath(fe).object.contents,fe);B.onsuccess=()=>{$e++,$e+Ue==Ze&&ft()},B.onerror=()=>{Ue++,$e+Ue==Ze&&ft()}}),J.onerror=y},x.onerror=y},loadFilesFromDB:(_,f,y)=>{f=f||(()=>{}),y=y||(()=>{});var b=E.indexedDB();try{var x=b.open(E.DB_NAME(),E.DB_VERSION)}catch(A){return y(A)}x.onupgradeneeded=y,x.onsuccess=()=>{var A=x.result;try{var J=A.transaction([E.DB_STORE_NAME],"readonly")}catch(fe){y(fe);return}var ie=J.objectStore(E.DB_STORE_NAME),$e=0,Ue=0,Ze=_.length;function ft(){Ue==0?f():y()}_.forEach(fe=>{var B=ie.get(fe);B.onsuccess=()=>{E.analyzePath(fe).exists&&E.unlink(fe),E.createDataFile(Ht.dirname(fe),Ht.basename(fe),B.result,!0,!0,!0),$e++,$e+Ue==Ze&&ft()},B.onerror=()=>{Ue++,$e+Ue==Ze&&ft()}}),J.onerror=y},x.onerror=y}},xt={DEFAULT_POLLMASK:5,calculateAt:function(_,f,y){if(Ht.isAbs(f))return f;var b;if(_===-100)b=E.cwd();else{var x=xt.getStreamFromFD(_);b=x.path}if(f.length==0){if(!y)throw new E.ErrnoError(44);return b}return Ht.join2(b,f)},doStat:function(_,f,y){try{var b=_(f)}catch(ie){if(ie&&ie.node&&Ht.normalize(f)!==Ht.normalize(E.getPath(ie.node)))return-54;throw ie}Be[y>>2]=b.dev,Be[y+8>>2]=b.ino,Be[y+12>>2]=b.mode,Oe[y+16>>2]=b.nlink,Be[y+20>>2]=b.uid,Be[y+24>>2]=b.gid,Be[y+28>>2]=b.rdev,rn=[b.size>>>0,(Et=b.size,+Math.abs(Et)>=1?Et>0?(Math.min(+Math.floor(Et/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Et-+(~~Et>>>0))/4294967296)>>>0:0)],Be[y+40>>2]=rn[0],Be[y+44>>2]=rn[1],Be[y+48>>2]=4096,Be[y+52>>2]=b.blocks;var x=b.atime.getTime(),A=b.mtime.getTime(),J=b.ctime.getTime();return rn=[Math.floor(x/1e3)>>>0,(Et=Math.floor(x/1e3),+Math.abs(Et)>=1?Et>0?(Math.min(+Math.floor(Et/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Et-+(~~Et>>>0))/4294967296)>>>0:0)],Be[y+56>>2]=rn[0],Be[y+60>>2]=rn[1],Oe[y+64>>2]=x%1e3*1e3,rn=[Math.floor(A/1e3)>>>0,(Et=Math.floor(A/1e3),+Math.abs(Et)>=1?Et>0?(Math.min(+Math.floor(Et/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Et-+(~~Et>>>0))/4294967296)>>>0:0)],Be[y+72>>2]=rn[0],Be[y+76>>2]=rn[1],Oe[y+80>>2]=A%1e3*1e3,rn=[Math.floor(J/1e3)>>>0,(Et=Math.floor(J/1e3),+Math.abs(Et)>=1?Et>0?(Math.min(+Math.floor(Et/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Et-+(~~Et>>>0))/4294967296)>>>0:0)],Be[y+88>>2]=rn[0],Be[y+92>>2]=rn[1],Oe[y+96>>2]=J%1e3*1e3,rn=[b.ino>>>0,(Et=b.ino,+Math.abs(Et)>=1?Et>0?(Math.min(+Math.floor(Et/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Et-+(~~Et>>>0))/4294967296)>>>0:0)],Be[y+104>>2]=rn[0],Be[y+108>>2]=rn[1],0},doMsync:function(_,f,y,b,x){if(!E.isFile(f.node.mode))throw new E.ErrnoError(43);if(b&2)return 0;var A=ve.slice(_,_+y);E.msync(f,A,x,y,b)},varargs:void 0,get:function(){xt.varargs+=4;var _=Be[xt.varargs-4>>2];return _},getStr:function(_){var f=c(_);return f},getStreamFromFD:function(_){var f=E.getStream(_);if(!f)throw new E.ErrnoError(8);return f}};function yi(_,f){try{return _=xt.getStr(_),E.chmod(_,f),0}catch(y){if(typeof E>"u"||!(y instanceof E.ErrnoError))throw y;return-y.errno}}function gi(_,f,y,b){try{if(f=xt.getStr(f),f=xt.calculateAt(_,f),y&-8)return-28;var x=E.lookupPath(f,{follow:!0}),A=x.node;if(!A)return-44;var J="";return y&4&&(J+="r"),y&2&&(J+="w"),y&1&&(J+="x"),J&&E.nodePermissions(A,J)?-2:0}catch(ie){if(typeof E>"u"||!(ie instanceof E.ErrnoError))throw ie;return-ie.errno}}function pc(_,f){try{return E.fchmod(_,f),0}catch(y){if(typeof E>"u"||!(y instanceof E.ErrnoError))throw y;return-y.errno}}function mc(_,f,y){try{return E.fchown(_,f,y),0}catch(b){if(typeof E>"u"||!(b instanceof E.ErrnoError))throw b;return-b.errno}}function fc(_){return Be[Ca()>>2]=_,_}function ko(_,f,y){xt.varargs=y;try{var b=xt.getStreamFromFD(_);switch(f){case 0:{var x=xt.get();if(x<0)return-28;var A;return A=E.createStream(b,x),A.fd}case 1:case 2:return 0;case 3:return b.flags;case 4:{var x=xt.get();return b.flags|=x,0}case 5:{var x=xt.get(),J=0;return Je[x+J>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return fc(28),-1;default:return-28}}catch(ie){if(typeof E>"u"||!(ie instanceof E.ErrnoError))throw ie;return-ie.errno}}function Eo(_,f){try{var y=xt.getStreamFromFD(_);return xt.doStat(E.stat,y.path,f)}catch(b){if(typeof E>"u"||!(b instanceof E.ErrnoError))throw b;return-b.errno}}var dc=9007199254740992,_c=-9007199254740992;function Ao(_){return _<_c||_>dc?NaN:Number(_)}function hc(_,f){try{return f=Ao(f),isNaN(f)?-61:(E.ftruncate(_,f),0)}catch(y){if(typeof E>"u"||!(y instanceof E.ErrnoError))throw y;return-y.errno}}function To(_,f){try{if(f===0)return-28;var y=E.cwd(),b=j(y)+1;return f<b?-68:(d(y,_,f),b)}catch(x){if(typeof E>"u"||!(x instanceof E.ErrnoError))throw x;return-x.errno}}function bc(_,f,y){xt.varargs=y;try{var b=xt.getStreamFromFD(_);switch(f){case 21509:case 21505:return b.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return b.tty?0:-59;case 21519:{if(!b.tty)return-59;var x=xt.get();return Be[x>>2]=0,0}case 21520:return b.tty?-28:-59;case 21531:{var x=xt.get();return E.ioctl(b,f,x)}case 21523:return b.tty?0:-59;case 21524:return b.tty?0:-59;default:return-28}}catch(A){if(typeof E>"u"||!(A instanceof E.ErrnoError))throw A;return-A.errno}}function yc(_,f){try{return _=xt.getStr(_),xt.doStat(E.lstat,_,f)}catch(y){if(typeof E>"u"||!(y instanceof E.ErrnoError))throw y;return-y.errno}}function gc(_,f,y){try{return f=xt.getStr(f),f=xt.calculateAt(_,f),f=Ht.normalize(f),f[f.length-1]==="/"&&(f=f.substr(0,f.length-1)),E.mkdir(f,y,0),0}catch(b){if(typeof E>"u"||!(b instanceof E.ErrnoError))throw b;return-b.errno}}function wi(_,f,y,b){try{f=xt.getStr(f);var x=b&256,A=b&4096;return b=b&-6401,f=xt.calculateAt(_,f,A),xt.doStat(x?E.lstat:E.stat,f,y)}catch(J){if(typeof E>"u"||!(J instanceof E.ErrnoError))throw J;return-J.errno}}function wc(_,f,y,b){xt.varargs=b;try{f=xt.getStr(f),f=xt.calculateAt(_,f);var x=b?xt.get():0;return E.open(f,y,x).fd}catch(A){if(typeof E>"u"||!(A instanceof E.ErrnoError))throw A;return-A.errno}}function xi(_,f,y,b){try{if(f=xt.getStr(f),f=xt.calculateAt(_,f),b<=0)return-28;var x=E.readlink(f),A=Math.min(b,j(x)),J=X[y+A];return d(x,y,b+1),X[y+A]=J,A}catch(ie){if(typeof E>"u"||!(ie instanceof E.ErrnoError))throw ie;return-ie.errno}}function xc(_){try{return _=xt.getStr(_),E.rmdir(_),0}catch(f){if(typeof E>"u"||!(f instanceof E.ErrnoError))throw f;return-f.errno}}function $c(_,f){try{return _=xt.getStr(_),xt.doStat(E.stat,_,f)}catch(y){if(typeof E>"u"||!(y instanceof E.ErrnoError))throw y;return-y.errno}}function vc(_,f,y){try{return f=xt.getStr(f),f=xt.calculateAt(_,f),y===0?E.unlink(f):y===512?E.rmdir(f):kn("Invalid flags passed to unlinkat"),0}catch(b){if(typeof E>"u"||!(b instanceof E.ErrnoError))throw b;return-b.errno}}function $i(_){return Oe[_>>2]+Be[_+4>>2]*4294967296}function kc(_,f,y,b){try{if(f=xt.getStr(f),f=xt.calculateAt(_,f,!0),y){var J=$i(y),ie=Be[y+8>>2];x=J*1e3+ie/(1e3*1e3),y+=16,J=$i(y),ie=Be[y+8>>2],A=J*1e3+ie/(1e3*1e3)}else var x=Date.now(),A=x;return E.utime(f,x,A),0}catch($e){if(typeof E>"u"||!($e instanceof E.ErrnoError))throw $e;return-$e.errno}}var Ec=!0;function Ac(){return Ec}function Tc(_){return _%4===0&&(_%100!==0||_%400===0)}var So=[0,31,60,91,121,152,182,213,244,274,305,335],Sc=[0,31,59,90,120,151,181,212,243,273,304,334];function Ic(_){var f=Tc(_.getFullYear()),y=f?So:Sc,b=y[_.getMonth()]+_.getDate()-1;return b}function qc(_,f){var y=new Date($i(_)*1e3);Be[f>>2]=y.getSeconds(),Be[f+4>>2]=y.getMinutes(),Be[f+8>>2]=y.getHours(),Be[f+12>>2]=y.getDate(),Be[f+16>>2]=y.getMonth(),Be[f+20>>2]=y.getFullYear()-1900,Be[f+24>>2]=y.getDay();var b=Ic(y)|0;Be[f+28>>2]=b,Be[f+36>>2]=-(y.getTimezoneOffset()*60);var x=new Date(y.getFullYear(),0,1),A=new Date(y.getFullYear(),6,1).getTimezoneOffset(),J=x.getTimezoneOffset(),ie=(A!=J&&y.getTimezoneOffset()==Math.min(J,A))|0;Be[f+32>>2]=ie}function Rc(_,f,y,b,x,A,J){try{var ie=xt.getStreamFromFD(b),$e=E.mmap(ie,_,x,f,y),Ue=$e.ptr;return Be[A>>2]=$e.allocated,Oe[J>>2]=Ue,0}catch(Ze){if(typeof E>"u"||!(Ze instanceof E.ErrnoError))throw Ze;return-Ze.errno}}function Oc(_,f,y,b,x,A){try{var J=xt.getStreamFromFD(x);y&2&&xt.doMsync(_,J,f,b,A),E.munmap(J)}catch(ie){if(typeof E>"u"||!(ie instanceof E.ErrnoError))throw ie;return-ie.errno}}function Io(_){var f=j(_)+1,y=Lo(f);return y&&I(_,X,y,f),y}function Ia(_,f,y){var b=new Date().getFullYear(),x=new Date(b,0,1),A=new Date(b,6,1),J=x.getTimezoneOffset(),ie=A.getTimezoneOffset(),$e=Math.max(J,ie);Oe[_>>2]=$e*60,Be[f>>2]=+(J!=ie);function Ue(V){var ne=V.toTimeString().match(/\(([A-Za-z ]+)\)$/);return ne?ne[1]:"GMT"}var Ze=Ue(x),ft=Ue(A),fe=Io(Ze),B=Io(ft);ie<J?(Oe[y>>2]=fe,Oe[y+4>>2]=B):(Oe[y>>2]=B,Oe[y+4>>2]=fe)}function Cc(){return Date.now()}var na;na=()=>performance.now();function Nc(){return 2147483648}function Lc(_){var f=pe.buffer;try{return pe.grow(_-f.byteLength+65535>>>16),ht(),1}catch{}}function Mc(_){var f=ve.length;_=_>>>0;var y=Nc();if(_>y)return!1;let b=($e,Ue)=>$e+(Ue-$e%Ue)%Ue;for(var x=1;x<=4;x*=2){var A=f*(1+.2/x);A=Math.min(A,_+100663296);var J=Math.min(y,b(Math.max(_,A),65536)),ie=Lc(J);if(ie)return!0}return!1}var qa={};function qo(){return g||"./this.program"}function kr(){if(!kr.strings){var _=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",f={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:_,_:qo()};for(var y in qa)qa[y]===void 0?delete f[y]:f[y]=qa[y];var b=[];for(var y in f)b.push(y+"="+f[y]);kr.strings=b}return kr.strings}function Dc(_,f,y){for(var b=0;b<_.length;++b)X[f++>>0]=_.charCodeAt(b);X[f>>0]=0}function Fc(_,f){var y=0;return kr().forEach(function(b,x){var A=f+y;Oe[_+x*4>>2]=A,Dc(b,A),y+=b.length+1}),0}function Pc(_,f){var y=kr();Oe[_>>2]=y.length;var b=0;return y.forEach(function(x){b+=x.length+1}),Oe[f>>2]=b,0}function jc(_){try{var f=xt.getStreamFromFD(_);return E.close(f),0}catch(y){if(typeof E>"u"||!(y instanceof E.ErrnoError))throw y;return y.errno}}function Ro(_,f){try{var y=xt.getStreamFromFD(_),b=y.tty?2:E.isDir(y.mode)?3:E.isLink(y.mode)?7:4;return X[f>>0]=b,0}catch(x){if(typeof E>"u"||!(x instanceof E.ErrnoError))throw x;return x.errno}}function Oo(_,f,y,b){for(var x=0,A=0;A<y;A++){var J=Oe[f>>2],ie=Oe[f+4>>2];f+=8;var $e=E.read(_,X,J,ie,b);if($e<0)return-1;if(x+=$e,$e<ie)break}return x}function Co(_,f,y,b){try{var x=xt.getStreamFromFD(_),A=Oo(x,f,y);return Oe[b>>2]=A,0}catch(J){if(typeof E>"u"||!(J instanceof E.ErrnoError))throw J;return J.errno}}function vi(_,f,y,b){try{if(f=Ao(f),isNaN(f))return 61;var x=xt.getStreamFromFD(_);return E.llseek(x,f,y),rn=[x.position>>>0,(Et=x.position,+Math.abs(Et)>=1?Et>0?(Math.min(+Math.floor(Et/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Et-+(~~Et>>>0))/4294967296)>>>0:0)],Be[b>>2]=rn[0],Be[b+4>>2]=rn[1],x.getdents&&f===0&&y===0&&(x.getdents=null),0}catch(A){if(typeof E>"u"||!(A instanceof E.ErrnoError))throw A;return A.errno}}function Uc(_){try{var f=xt.getStreamFromFD(_);return f.stream_ops&&f.stream_ops.fsync?f.stream_ops.fsync(f):0}catch(y){if(typeof E>"u"||!(y instanceof E.ErrnoError))throw y;return y.errno}}function No(_,f,y,b){for(var x=0,A=0;A<y;A++){var J=Oe[f>>2],ie=Oe[f+4>>2];f+=8;var $e=E.write(_,X,J,ie,b);if($e<0)return-1;x+=$e}return x}function Ra(_,f,y,b){try{var x=xt.getStreamFromFD(_),A=No(x,f,y);return Oe[b>>2]=A,0}catch(J){if(typeof E>"u"||!(J instanceof E.ErrnoError))throw J;return J.errno}}var ki=function(_,f,y,b){_||(_=this),this.parent=_,this.mount=_.mount,this.mounted=null,this.id=E.nextInode++,this.name=f,this.mode=y,this.node_ops={},this.stream_ops={},this.rdev=b},Oa=365,sa=146;Object.defineProperties(ki.prototype,{read:{get:function(){return(this.mode&Oa)===Oa},set:function(_){_?this.mode|=Oa:this.mode&=~Oa}},write:{get:function(){return(this.mode&sa)===sa},set:function(_){_?this.mode|=sa:this.mode&=~sa}},isFolder:{get:function(){return E.isDir(this.mode)}},isDevice:{get:function(){return E.isChrdev(this.mode)}}}),E.FSNode=ki,E.staticInit();var Ei={__syscall_chmod:yi,__syscall_faccessat:gi,__syscall_fchmod:pc,__syscall_fchown32:mc,__syscall_fcntl64:ko,__syscall_fstat64:Eo,__syscall_ftruncate64:hc,__syscall_getcwd:To,__syscall_ioctl:bc,__syscall_lstat64:yc,__syscall_mkdirat:gc,__syscall_newfstatat:wi,__syscall_openat:wc,__syscall_readlinkat:xi,__syscall_rmdir:xc,__syscall_stat64:$c,__syscall_unlinkat:vc,__syscall_utimensat:kc,_emscripten_get_now_is_monotonic:Ac,_localtime_js:qc,_mmap_js:Rc,_munmap_js:Oc,_tzset_js:Ia,emscripten_date_now:Cc,emscripten_get_now:na,emscripten_resize_heap:Mc,environ_get:Fc,environ_sizes_get:Pc,fd_close:jc,fd_fdstat_get:Ro,fd_read:Co,fd_seek:vi,fd_sync:Uc,fd_write:Ra,memory:pe};ea(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)},n._sqlite3_status64=function(){return(n._sqlite3_status64=n.asm.sqlite3_status64).apply(null,arguments)},n._sqlite3_status=function(){return(n._sqlite3_status=n.asm.sqlite3_status).apply(null,arguments)},n._sqlite3_db_status=function(){return(n._sqlite3_db_status=n.asm.sqlite3_db_status).apply(null,arguments)},n._sqlite3_msize=function(){return(n._sqlite3_msize=n.asm.sqlite3_msize).apply(null,arguments)},n._sqlite3_vfs_find=function(){return(n._sqlite3_vfs_find=n.asm.sqlite3_vfs_find).apply(null,arguments)},n._sqlite3_initialize=function(){return(n._sqlite3_initialize=n.asm.sqlite3_initialize).apply(null,arguments)},n._sqlite3_malloc=function(){return(n._sqlite3_malloc=n.asm.sqlite3_malloc).apply(null,arguments)},n._sqlite3_free=function(){return(n._sqlite3_free=n.asm.sqlite3_free).apply(null,arguments)},n._sqlite3_vfs_register=function(){return(n._sqlite3_vfs_register=n.asm.sqlite3_vfs_register).apply(null,arguments)},n._sqlite3_vfs_unregister=function(){return(n._sqlite3_vfs_unregister=n.asm.sqlite3_vfs_unregister).apply(null,arguments)},n._sqlite3_malloc64=function(){return(n._sqlite3_malloc64=n.asm.sqlite3_malloc64).apply(null,arguments)},n._sqlite3_realloc=function(){return(n._sqlite3_realloc=n.asm.sqlite3_realloc).apply(null,arguments)},n._sqlite3_realloc64=function(){return(n._sqlite3_realloc64=n.asm.sqlite3_realloc64).apply(null,arguments)},n._sqlite3_value_text=function(){return(n._sqlite3_value_text=n.asm.sqlite3_value_text).apply(null,arguments)},n._sqlite3_randomness=function(){return(n._sqlite3_randomness=n.asm.sqlite3_randomness).apply(null,arguments)},n._sqlite3_stricmp=function(){return(n._sqlite3_stricmp=n.asm.sqlite3_stricmp).apply(null,arguments)},n._sqlite3_strnicmp=function(){return(n._sqlite3_strnicmp=n.asm.sqlite3_strnicmp).apply(null,arguments)},n._sqlite3_uri_parameter=function(){return(n._sqlite3_uri_parameter=n.asm.sqlite3_uri_parameter).apply(null,arguments)};var Ca=n.___errno_location=function(){return(Ca=n.___errno_location=n.asm.__errno_location).apply(null,arguments)};n._sqlite3_uri_boolean=function(){return(n._sqlite3_uri_boolean=n.asm.sqlite3_uri_boolean).apply(null,arguments)},n._sqlite3_serialize=function(){return(n._sqlite3_serialize=n.asm.sqlite3_serialize).apply(null,arguments)},n._sqlite3_prepare_v2=function(){return(n._sqlite3_prepare_v2=n.asm.sqlite3_prepare_v2).apply(null,arguments)},n._sqlite3_step=function(){return(n._sqlite3_step=n.asm.sqlite3_step).apply(null,arguments)},n._sqlite3_column_int64=function(){return(n._sqlite3_column_int64=n.asm.sqlite3_column_int64).apply(null,arguments)},n._sqlite3_reset=function(){return(n._sqlite3_reset=n.asm.sqlite3_reset).apply(null,arguments)},n._sqlite3_exec=function(){return(n._sqlite3_exec=n.asm.sqlite3_exec).apply(null,arguments)},n._sqlite3_column_int=function(){return(n._sqlite3_column_int=n.asm.sqlite3_column_int).apply(null,arguments)},n._sqlite3_finalize=function(){return(n._sqlite3_finalize=n.asm.sqlite3_finalize).apply(null,arguments)},n._sqlite3_file_control=function(){return(n._sqlite3_file_control=n.asm.sqlite3_file_control).apply(null,arguments)},n._sqlite3_column_name=function(){return(n._sqlite3_column_name=n.asm.sqlite3_column_name).apply(null,arguments)},n._sqlite3_column_text=function(){return(n._sqlite3_column_text=n.asm.sqlite3_column_text).apply(null,arguments)},n._sqlite3_column_type=function(){return(n._sqlite3_column_type=n.asm.sqlite3_column_type).apply(null,arguments)},n._sqlite3_errmsg=function(){return(n._sqlite3_errmsg=n.asm.sqlite3_errmsg).apply(null,arguments)},n._sqlite3_deserialize=function(){return(n._sqlite3_deserialize=n.asm.sqlite3_deserialize).apply(null,arguments)},n._sqlite3_clear_bindings=function(){return(n._sqlite3_clear_bindings=n.asm.sqlite3_clear_bindings).apply(null,arguments)},n._sqlite3_value_blob=function(){return(n._sqlite3_value_blob=n.asm.sqlite3_value_blob).apply(null,arguments)},n._sqlite3_value_bytes=function(){return(n._sqlite3_value_bytes=n.asm.sqlite3_value_bytes).apply(null,arguments)},n._sqlite3_value_double=function(){return(n._sqlite3_value_double=n.asm.sqlite3_value_double).apply(null,arguments)},n._sqlite3_value_int=function(){return(n._sqlite3_value_int=n.asm.sqlite3_value_int).apply(null,arguments)},n._sqlite3_value_int64=function(){return(n._sqlite3_value_int64=n.asm.sqlite3_value_int64).apply(null,arguments)},n._sqlite3_value_subtype=function(){return(n._sqlite3_value_subtype=n.asm.sqlite3_value_subtype).apply(null,arguments)},n._sqlite3_value_pointer=function(){return(n._sqlite3_value_pointer=n.asm.sqlite3_value_pointer).apply(null,arguments)},n._sqlite3_value_type=function(){return(n._sqlite3_value_type=n.asm.sqlite3_value_type).apply(null,arguments)},n._sqlite3_value_nochange=function(){return(n._sqlite3_value_nochange=n.asm.sqlite3_value_nochange).apply(null,arguments)},n._sqlite3_value_frombind=function(){return(n._sqlite3_value_frombind=n.asm.sqlite3_value_frombind).apply(null,arguments)},n._sqlite3_value_dup=function(){return(n._sqlite3_value_dup=n.asm.sqlite3_value_dup).apply(null,arguments)},n._sqlite3_value_free=function(){return(n._sqlite3_value_free=n.asm.sqlite3_value_free).apply(null,arguments)},n._sqlite3_result_blob=function(){return(n._sqlite3_result_blob=n.asm.sqlite3_result_blob).apply(null,arguments)},n._sqlite3_result_error_toobig=function(){return(n._sqlite3_result_error_toobig=n.asm.sqlite3_result_error_toobig).apply(null,arguments)},n._sqlite3_result_error_nomem=function(){return(n._sqlite3_result_error_nomem=n.asm.sqlite3_result_error_nomem).apply(null,arguments)},n._sqlite3_result_double=function(){return(n._sqlite3_result_double=n.asm.sqlite3_result_double).apply(null,arguments)},n._sqlite3_result_error=function(){return(n._sqlite3_result_error=n.asm.sqlite3_result_error).apply(null,arguments)},n._sqlite3_result_int=function(){return(n._sqlite3_result_int=n.asm.sqlite3_result_int).apply(null,arguments)},n._sqlite3_result_int64=function(){return(n._sqlite3_result_int64=n.asm.sqlite3_result_int64).apply(null,arguments)},n._sqlite3_result_null=function(){return(n._sqlite3_result_null=n.asm.sqlite3_result_null).apply(null,arguments)},n._sqlite3_result_pointer=function(){return(n._sqlite3_result_pointer=n.asm.sqlite3_result_pointer).apply(null,arguments)},n._sqlite3_result_subtype=function(){return(n._sqlite3_result_subtype=n.asm.sqlite3_result_subtype).apply(null,arguments)},n._sqlite3_result_text=function(){return(n._sqlite3_result_text=n.asm.sqlite3_result_text).apply(null,arguments)},n._sqlite3_result_zeroblob=function(){return(n._sqlite3_result_zeroblob=n.asm.sqlite3_result_zeroblob).apply(null,arguments)},n._sqlite3_result_zeroblob64=function(){return(n._sqlite3_result_zeroblob64=n.asm.sqlite3_result_zeroblob64).apply(null,arguments)},n._sqlite3_result_error_code=function(){return(n._sqlite3_result_error_code=n.asm.sqlite3_result_error_code).apply(null,arguments)},n._sqlite3_user_data=function(){return(n._sqlite3_user_data=n.asm.sqlite3_user_data).apply(null,arguments)},n._sqlite3_context_db_handle=function(){return(n._sqlite3_context_db_handle=n.asm.sqlite3_context_db_handle).apply(null,arguments)},n._sqlite3_vtab_nochange=function(){return(n._sqlite3_vtab_nochange=n.asm.sqlite3_vtab_nochange).apply(null,arguments)},n._sqlite3_vtab_in_first=function(){return(n._sqlite3_vtab_in_first=n.asm.sqlite3_vtab_in_first).apply(null,arguments)},n._sqlite3_vtab_in_next=function(){return(n._sqlite3_vtab_in_next=n.asm.sqlite3_vtab_in_next).apply(null,arguments)},n._sqlite3_aggregate_context=function(){return(n._sqlite3_aggregate_context=n.asm.sqlite3_aggregate_context).apply(null,arguments)},n._sqlite3_get_auxdata=function(){return(n._sqlite3_get_auxdata=n.asm.sqlite3_get_auxdata).apply(null,arguments)},n._sqlite3_set_auxdata=function(){return(n._sqlite3_set_auxdata=n.asm.sqlite3_set_auxdata).apply(null,arguments)},n._sqlite3_column_count=function(){return(n._sqlite3_column_count=n.asm.sqlite3_column_count).apply(null,arguments)},n._sqlite3_data_count=function(){return(n._sqlite3_data_count=n.asm.sqlite3_data_count).apply(null,arguments)},n._sqlite3_column_blob=function(){return(n._sqlite3_column_blob=n.asm.sqlite3_column_blob).apply(null,arguments)},n._sqlite3_column_bytes=function(){return(n._sqlite3_column_bytes=n.asm.sqlite3_column_bytes).apply(null,arguments)},n._sqlite3_column_double=function(){return(n._sqlite3_column_double=n.asm.sqlite3_column_double).apply(null,arguments)},n._sqlite3_column_value=function(){return(n._sqlite3_column_value=n.asm.sqlite3_column_value).apply(null,arguments)},n._sqlite3_bind_blob=function(){return(n._sqlite3_bind_blob=n.asm.sqlite3_bind_blob).apply(null,arguments)},n._sqlite3_bind_double=function(){return(n._sqlite3_bind_double=n.asm.sqlite3_bind_double).apply(null,arguments)},n._sqlite3_bind_int=function(){return(n._sqlite3_bind_int=n.asm.sqlite3_bind_int).apply(null,arguments)},n._sqlite3_bind_int64=function(){return(n._sqlite3_bind_int64=n.asm.sqlite3_bind_int64).apply(null,arguments)},n._sqlite3_bind_null=function(){return(n._sqlite3_bind_null=n.asm.sqlite3_bind_null).apply(null,arguments)},n._sqlite3_bind_pointer=function(){return(n._sqlite3_bind_pointer=n.asm.sqlite3_bind_pointer).apply(null,arguments)},n._sqlite3_bind_text=function(){return(n._sqlite3_bind_text=n.asm.sqlite3_bind_text).apply(null,arguments)},n._sqlite3_bind_parameter_count=function(){return(n._sqlite3_bind_parameter_count=n.asm.sqlite3_bind_parameter_count).apply(null,arguments)},n._sqlite3_bind_parameter_index=function(){return(n._sqlite3_bind_parameter_index=n.asm.sqlite3_bind_parameter_index).apply(null,arguments)},n._sqlite3_db_handle=function(){return(n._sqlite3_db_handle=n.asm.sqlite3_db_handle).apply(null,arguments)},n._sqlite3_stmt_readonly=function(){return(n._sqlite3_stmt_readonly=n.asm.sqlite3_stmt_readonly).apply(null,arguments)},n._sqlite3_stmt_isexplain=function(){return(n._sqlite3_stmt_isexplain=n.asm.sqlite3_stmt_isexplain).apply(null,arguments)},n._sqlite3_stmt_status=function(){return(n._sqlite3_stmt_status=n.asm.sqlite3_stmt_status).apply(null,arguments)},n._sqlite3_sql=function(){return(n._sqlite3_sql=n.asm.sqlite3_sql).apply(null,arguments)},n._sqlite3_expanded_sql=function(){return(n._sqlite3_expanded_sql=n.asm.sqlite3_expanded_sql).apply(null,arguments)},n._sqlite3_preupdate_old=function(){return(n._sqlite3_preupdate_old=n.asm.sqlite3_preupdate_old).apply(null,arguments)},n._sqlite3_preupdate_count=function(){return(n._sqlite3_preupdate_count=n.asm.sqlite3_preupdate_count).apply(null,arguments)},n._sqlite3_preupdate_depth=function(){return(n._sqlite3_preupdate_depth=n.asm.sqlite3_preupdate_depth).apply(null,arguments)},n._sqlite3_preupdate_blobwrite=function(){return(n._sqlite3_preupdate_blobwrite=n.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},n._sqlite3_preupdate_new=function(){return(n._sqlite3_preupdate_new=n.asm.sqlite3_preupdate_new).apply(null,arguments)},n._sqlite3_value_numeric_type=function(){return(n._sqlite3_value_numeric_type=n.asm.sqlite3_value_numeric_type).apply(null,arguments)},n._sqlite3_set_authorizer=function(){return(n._sqlite3_set_authorizer=n.asm.sqlite3_set_authorizer).apply(null,arguments)},n._sqlite3_strglob=function(){return(n._sqlite3_strglob=n.asm.sqlite3_strglob).apply(null,arguments)},n._sqlite3_strlike=function(){return(n._sqlite3_strlike=n.asm.sqlite3_strlike).apply(null,arguments)},n._sqlite3_auto_extension=function(){return(n._sqlite3_auto_extension=n.asm.sqlite3_auto_extension).apply(null,arguments)},n._sqlite3_cancel_auto_extension=function(){return(n._sqlite3_cancel_auto_extension=n.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},n._sqlite3_reset_auto_extension=function(){return(n._sqlite3_reset_auto_extension=n.asm.sqlite3_reset_auto_extension).apply(null,arguments)},n._sqlite3_prepare_v3=function(){return(n._sqlite3_prepare_v3=n.asm.sqlite3_prepare_v3).apply(null,arguments)},n._sqlite3_create_module=function(){return(n._sqlite3_create_module=n.asm.sqlite3_create_module).apply(null,arguments)},n._sqlite3_create_module_v2=function(){return(n._sqlite3_create_module_v2=n.asm.sqlite3_create_module_v2).apply(null,arguments)},n._sqlite3_drop_modules=function(){return(n._sqlite3_drop_modules=n.asm.sqlite3_drop_modules).apply(null,arguments)},n._sqlite3_declare_vtab=function(){return(n._sqlite3_declare_vtab=n.asm.sqlite3_declare_vtab).apply(null,arguments)},n._sqlite3_vtab_on_conflict=function(){return(n._sqlite3_vtab_on_conflict=n.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},n._sqlite3_vtab_collation=function(){return(n._sqlite3_vtab_collation=n.asm.sqlite3_vtab_collation).apply(null,arguments)},n._sqlite3_vtab_in=function(){return(n._sqlite3_vtab_in=n.asm.sqlite3_vtab_in).apply(null,arguments)},n._sqlite3_vtab_rhs_value=function(){return(n._sqlite3_vtab_rhs_value=n.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},n._sqlite3_vtab_distinct=function(){return(n._sqlite3_vtab_distinct=n.asm.sqlite3_vtab_distinct).apply(null,arguments)},n._sqlite3_keyword_name=function(){return(n._sqlite3_keyword_name=n.asm.sqlite3_keyword_name).apply(null,arguments)},n._sqlite3_keyword_count=function(){return(n._sqlite3_keyword_count=n.asm.sqlite3_keyword_count).apply(null,arguments)},n._sqlite3_keyword_check=function(){return(n._sqlite3_keyword_check=n.asm.sqlite3_keyword_check).apply(null,arguments)},n._sqlite3_complete=function(){return(n._sqlite3_complete=n.asm.sqlite3_complete).apply(null,arguments)},n._sqlite3_libversion=function(){return(n._sqlite3_libversion=n.asm.sqlite3_libversion).apply(null,arguments)},n._sqlite3_libversion_number=function(){return(n._sqlite3_libversion_number=n.asm.sqlite3_libversion_number).apply(null,arguments)},n._sqlite3_shutdown=function(){return(n._sqlite3_shutdown=n.asm.sqlite3_shutdown).apply(null,arguments)},n._sqlite3_last_insert_rowid=function(){return(n._sqlite3_last_insert_rowid=n.asm.sqlite3_last_insert_rowid).apply(null,arguments)},n._sqlite3_set_last_insert_rowid=function(){return(n._sqlite3_set_last_insert_rowid=n.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},n._sqlite3_changes64=function(){return(n._sqlite3_changes64=n.asm.sqlite3_changes64).apply(null,arguments)},n._sqlite3_changes=function(){return(n._sqlite3_changes=n.asm.sqlite3_changes).apply(null,arguments)},n._sqlite3_total_changes64=function(){return(n._sqlite3_total_changes64=n.asm.sqlite3_total_changes64).apply(null,arguments)},n._sqlite3_total_changes=function(){return(n._sqlite3_total_changes=n.asm.sqlite3_total_changes).apply(null,arguments)},n._sqlite3_txn_state=function(){return(n._sqlite3_txn_state=n.asm.sqlite3_txn_state).apply(null,arguments)},n._sqlite3_close_v2=function(){return(n._sqlite3_close_v2=n.asm.sqlite3_close_v2).apply(null,arguments)},n._sqlite3_busy_handler=function(){return(n._sqlite3_busy_handler=n.asm.sqlite3_busy_handler).apply(null,arguments)},n._sqlite3_progress_handler=function(){return(n._sqlite3_progress_handler=n.asm.sqlite3_progress_handler).apply(null,arguments)},n._sqlite3_busy_timeout=function(){return(n._sqlite3_busy_timeout=n.asm.sqlite3_busy_timeout).apply(null,arguments)},n._sqlite3_create_function=function(){return(n._sqlite3_create_function=n.asm.sqlite3_create_function).apply(null,arguments)},n._sqlite3_create_function_v2=function(){return(n._sqlite3_create_function_v2=n.asm.sqlite3_create_function_v2).apply(null,arguments)},n._sqlite3_create_window_function=function(){return(n._sqlite3_create_window_function=n.asm.sqlite3_create_window_function).apply(null,arguments)},n._sqlite3_overload_function=function(){return(n._sqlite3_overload_function=n.asm.sqlite3_overload_function).apply(null,arguments)},n._sqlite3_trace_v2=function(){return(n._sqlite3_trace_v2=n.asm.sqlite3_trace_v2).apply(null,arguments)},n._sqlite3_commit_hook=function(){return(n._sqlite3_commit_hook=n.asm.sqlite3_commit_hook).apply(null,arguments)},n._sqlite3_update_hook=function(){return(n._sqlite3_update_hook=n.asm.sqlite3_update_hook).apply(null,arguments)},n._sqlite3_rollback_hook=function(){return(n._sqlite3_rollback_hook=n.asm.sqlite3_rollback_hook).apply(null,arguments)},n._sqlite3_preupdate_hook=function(){return(n._sqlite3_preupdate_hook=n.asm.sqlite3_preupdate_hook).apply(null,arguments)},n._sqlite3_error_offset=function(){return(n._sqlite3_error_offset=n.asm.sqlite3_error_offset).apply(null,arguments)},n._sqlite3_errcode=function(){return(n._sqlite3_errcode=n.asm.sqlite3_errcode).apply(null,arguments)},n._sqlite3_extended_errcode=function(){return(n._sqlite3_extended_errcode=n.asm.sqlite3_extended_errcode).apply(null,arguments)},n._sqlite3_errstr=function(){return(n._sqlite3_errstr=n.asm.sqlite3_errstr).apply(null,arguments)},n._sqlite3_limit=function(){return(n._sqlite3_limit=n.asm.sqlite3_limit).apply(null,arguments)},n._sqlite3_open=function(){return(n._sqlite3_open=n.asm.sqlite3_open).apply(null,arguments)},n._sqlite3_open_v2=function(){return(n._sqlite3_open_v2=n.asm.sqlite3_open_v2).apply(null,arguments)},n._sqlite3_create_collation=function(){return(n._sqlite3_create_collation=n.asm.sqlite3_create_collation).apply(null,arguments)},n._sqlite3_create_collation_v2=function(){return(n._sqlite3_create_collation_v2=n.asm.sqlite3_create_collation_v2).apply(null,arguments)},n._sqlite3_collation_needed=function(){return(n._sqlite3_collation_needed=n.asm.sqlite3_collation_needed).apply(null,arguments)},n._sqlite3_get_autocommit=function(){return(n._sqlite3_get_autocommit=n.asm.sqlite3_get_autocommit).apply(null,arguments)},n._sqlite3_table_column_metadata=function(){return(n._sqlite3_table_column_metadata=n.asm.sqlite3_table_column_metadata).apply(null,arguments)},n._sqlite3_extended_result_codes=function(){return(n._sqlite3_extended_result_codes=n.asm.sqlite3_extended_result_codes).apply(null,arguments)},n._sqlite3_uri_key=function(){return(n._sqlite3_uri_key=n.asm.sqlite3_uri_key).apply(null,arguments)},n._sqlite3_uri_int64=function(){return(n._sqlite3_uri_int64=n.asm.sqlite3_uri_int64).apply(null,arguments)},n._sqlite3_db_name=function(){return(n._sqlite3_db_name=n.asm.sqlite3_db_name).apply(null,arguments)},n._sqlite3_db_filename=function(){return(n._sqlite3_db_filename=n.asm.sqlite3_db_filename).apply(null,arguments)},n._sqlite3_compileoption_used=function(){return(n._sqlite3_compileoption_used=n.asm.sqlite3_compileoption_used).apply(null,arguments)},n._sqlite3_compileoption_get=function(){return(n._sqlite3_compileoption_get=n.asm.sqlite3_compileoption_get).apply(null,arguments)},n._sqlite3session_diff=function(){return(n._sqlite3session_diff=n.asm.sqlite3session_diff).apply(null,arguments)},n._sqlite3session_attach=function(){return(n._sqlite3session_attach=n.asm.sqlite3session_attach).apply(null,arguments)},n._sqlite3session_create=function(){return(n._sqlite3session_create=n.asm.sqlite3session_create).apply(null,arguments)},n._sqlite3session_delete=function(){return(n._sqlite3session_delete=n.asm.sqlite3session_delete).apply(null,arguments)},n._sqlite3session_table_filter=function(){return(n._sqlite3session_table_filter=n.asm.sqlite3session_table_filter).apply(null,arguments)},n._sqlite3session_changeset=function(){return(n._sqlite3session_changeset=n.asm.sqlite3session_changeset).apply(null,arguments)},n._sqlite3session_changeset_strm=function(){return(n._sqlite3session_changeset_strm=n.asm.sqlite3session_changeset_strm).apply(null,arguments)},n._sqlite3session_patchset_strm=function(){return(n._sqlite3session_patchset_strm=n.asm.sqlite3session_patchset_strm).apply(null,arguments)},n._sqlite3session_patchset=function(){return(n._sqlite3session_patchset=n.asm.sqlite3session_patchset).apply(null,arguments)},n._sqlite3session_enable=function(){return(n._sqlite3session_enable=n.asm.sqlite3session_enable).apply(null,arguments)},n._sqlite3session_indirect=function(){return(n._sqlite3session_indirect=n.asm.sqlite3session_indirect).apply(null,arguments)},n._sqlite3session_isempty=function(){return(n._sqlite3session_isempty=n.asm.sqlite3session_isempty).apply(null,arguments)},n._sqlite3session_memory_used=function(){return(n._sqlite3session_memory_used=n.asm.sqlite3session_memory_used).apply(null,arguments)},n._sqlite3session_object_config=function(){return(n._sqlite3session_object_config=n.asm.sqlite3session_object_config).apply(null,arguments)},n._sqlite3session_changeset_size=function(){return(n._sqlite3session_changeset_size=n.asm.sqlite3session_changeset_size).apply(null,arguments)},n._sqlite3changeset_start=function(){return(n._sqlite3changeset_start=n.asm.sqlite3changeset_start).apply(null,arguments)},n._sqlite3changeset_start_v2=function(){return(n._sqlite3changeset_start_v2=n.asm.sqlite3changeset_start_v2).apply(null,arguments)},n._sqlite3changeset_start_strm=function(){return(n._sqlite3changeset_start_strm=n.asm.sqlite3changeset_start_strm).apply(null,arguments)},n._sqlite3changeset_start_v2_strm=function(){return(n._sqlite3changeset_start_v2_strm=n.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},n._sqlite3changeset_next=function(){return(n._sqlite3changeset_next=n.asm.sqlite3changeset_next).apply(null,arguments)},n._sqlite3changeset_op=function(){return(n._sqlite3changeset_op=n.asm.sqlite3changeset_op).apply(null,arguments)},n._sqlite3changeset_pk=function(){return(n._sqlite3changeset_pk=n.asm.sqlite3changeset_pk).apply(null,arguments)},n._sqlite3changeset_old=function(){return(n._sqlite3changeset_old=n.asm.sqlite3changeset_old).apply(null,arguments)},n._sqlite3changeset_new=function(){return(n._sqlite3changeset_new=n.asm.sqlite3changeset_new).apply(null,arguments)},n._sqlite3changeset_conflict=function(){return(n._sqlite3changeset_conflict=n.asm.sqlite3changeset_conflict).apply(null,arguments)},n._sqlite3changeset_fk_conflicts=function(){return(n._sqlite3changeset_fk_conflicts=n.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},n._sqlite3changeset_finalize=function(){return(n._sqlite3changeset_finalize=n.asm.sqlite3changeset_finalize).apply(null,arguments)},n._sqlite3changeset_invert=function(){return(n._sqlite3changeset_invert=n.asm.sqlite3changeset_invert).apply(null,arguments)},n._sqlite3changeset_invert_strm=function(){return(n._sqlite3changeset_invert_strm=n.asm.sqlite3changeset_invert_strm).apply(null,arguments)},n._sqlite3changeset_apply_v2=function(){return(n._sqlite3changeset_apply_v2=n.asm.sqlite3changeset_apply_v2).apply(null,arguments)},n._sqlite3changeset_apply=function(){return(n._sqlite3changeset_apply=n.asm.sqlite3changeset_apply).apply(null,arguments)},n._sqlite3changeset_apply_v2_strm=function(){return(n._sqlite3changeset_apply_v2_strm=n.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},n._sqlite3changeset_apply_strm=function(){return(n._sqlite3changeset_apply_strm=n.asm.sqlite3changeset_apply_strm).apply(null,arguments)},n._sqlite3changegroup_new=function(){return(n._sqlite3changegroup_new=n.asm.sqlite3changegroup_new).apply(null,arguments)},n._sqlite3changegroup_add=function(){return(n._sqlite3changegroup_add=n.asm.sqlite3changegroup_add).apply(null,arguments)},n._sqlite3changegroup_output=function(){return(n._sqlite3changegroup_output=n.asm.sqlite3changegroup_output).apply(null,arguments)},n._sqlite3changegroup_add_strm=function(){return(n._sqlite3changegroup_add_strm=n.asm.sqlite3changegroup_add_strm).apply(null,arguments)},n._sqlite3changegroup_output_strm=function(){return(n._sqlite3changegroup_output_strm=n.asm.sqlite3changegroup_output_strm).apply(null,arguments)},n._sqlite3changegroup_delete=function(){return(n._sqlite3changegroup_delete=n.asm.sqlite3changegroup_delete).apply(null,arguments)},n._sqlite3changeset_concat=function(){return(n._sqlite3changeset_concat=n.asm.sqlite3changeset_concat).apply(null,arguments)},n._sqlite3changeset_concat_strm=function(){return(n._sqlite3changeset_concat_strm=n.asm.sqlite3changeset_concat_strm).apply(null,arguments)},n._sqlite3session_config=function(){return(n._sqlite3session_config=n.asm.sqlite3session_config).apply(null,arguments)},n._sqlite3_sourceid=function(){return(n._sqlite3_sourceid=n.asm.sqlite3_sourceid).apply(null,arguments)},n._sqlite3_wasm_pstack_ptr=function(){return(n._sqlite3_wasm_pstack_ptr=n.asm.sqlite3_wasm_pstack_ptr).apply(null,arguments)},n._sqlite3_wasm_pstack_restore=function(){return(n._sqlite3_wasm_pstack_restore=n.asm.sqlite3_wasm_pstack_restore).apply(null,arguments)},n._sqlite3_wasm_pstack_alloc=function(){return(n._sqlite3_wasm_pstack_alloc=n.asm.sqlite3_wasm_pstack_alloc).apply(null,arguments)},n._sqlite3_wasm_pstack_remaining=function(){return(n._sqlite3_wasm_pstack_remaining=n.asm.sqlite3_wasm_pstack_remaining).apply(null,arguments)},n._sqlite3_wasm_pstack_quota=function(){return(n._sqlite3_wasm_pstack_quota=n.asm.sqlite3_wasm_pstack_quota).apply(null,arguments)},n._sqlite3_wasm_db_error=function(){return(n._sqlite3_wasm_db_error=n.asm.sqlite3_wasm_db_error).apply(null,arguments)},n._sqlite3_wasm_test_struct=function(){return(n._sqlite3_wasm_test_struct=n.asm.sqlite3_wasm_test_struct).apply(null,arguments)},n._sqlite3_wasm_enum_json=function(){return(n._sqlite3_wasm_enum_json=n.asm.sqlite3_wasm_enum_json).apply(null,arguments)},n._sqlite3_wasm_vfs_unlink=function(){return(n._sqlite3_wasm_vfs_unlink=n.asm.sqlite3_wasm_vfs_unlink).apply(null,arguments)},n._sqlite3_wasm_db_vfs=function(){return(n._sqlite3_wasm_db_vfs=n.asm.sqlite3_wasm_db_vfs).apply(null,arguments)},n._sqlite3_wasm_db_reset=function(){return(n._sqlite3_wasm_db_reset=n.asm.sqlite3_wasm_db_reset).apply(null,arguments)},n._sqlite3_wasm_db_export_chunked=function(){return(n._sqlite3_wasm_db_export_chunked=n.asm.sqlite3_wasm_db_export_chunked).apply(null,arguments)},n._sqlite3_wasm_db_serialize=function(){return(n._sqlite3_wasm_db_serialize=n.asm.sqlite3_wasm_db_serialize).apply(null,arguments)},n._sqlite3_wasm_vfs_create_file=function(){return(n._sqlite3_wasm_vfs_create_file=n.asm.sqlite3_wasm_vfs_create_file).apply(null,arguments)},n._sqlite3_wasm_posix_create_file=function(){return(n._sqlite3_wasm_posix_create_file=n.asm.sqlite3_wasm_posix_create_file).apply(null,arguments)},n._sqlite3_wasm_kvvfsMakeKeyOnPstack=function(){return(n._sqlite3_wasm_kvvfsMakeKeyOnPstack=n.asm.sqlite3_wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},n._sqlite3_wasm_kvvfs_methods=function(){return(n._sqlite3_wasm_kvvfs_methods=n.asm.sqlite3_wasm_kvvfs_methods).apply(null,arguments)},n._sqlite3_wasm_vtab_config=function(){return(n._sqlite3_wasm_vtab_config=n.asm.sqlite3_wasm_vtab_config).apply(null,arguments)},n._sqlite3_wasm_db_config_ip=function(){return(n._sqlite3_wasm_db_config_ip=n.asm.sqlite3_wasm_db_config_ip).apply(null,arguments)},n._sqlite3_wasm_db_config_pii=function(){return(n._sqlite3_wasm_db_config_pii=n.asm.sqlite3_wasm_db_config_pii).apply(null,arguments)},n._sqlite3_wasm_db_config_s=function(){return(n._sqlite3_wasm_db_config_s=n.asm.sqlite3_wasm_db_config_s).apply(null,arguments)},n._sqlite3_wasm_config_i=function(){return(n._sqlite3_wasm_config_i=n.asm.sqlite3_wasm_config_i).apply(null,arguments)},n._sqlite3_wasm_config_ii=function(){return(n._sqlite3_wasm_config_ii=n.asm.sqlite3_wasm_config_ii).apply(null,arguments)},n._sqlite3_wasm_config_j=function(){return(n._sqlite3_wasm_config_j=n.asm.sqlite3_wasm_config_j).apply(null,arguments)},n._sqlite3_wasm_init_wasmfs=function(){return(n._sqlite3_wasm_init_wasmfs=n.asm.sqlite3_wasm_init_wasmfs).apply(null,arguments)},n._sqlite3_wasm_test_intptr=function(){return(n._sqlite3_wasm_test_intptr=n.asm.sqlite3_wasm_test_intptr).apply(null,arguments)},n._sqlite3_wasm_test_voidptr=function(){return(n._sqlite3_wasm_test_voidptr=n.asm.sqlite3_wasm_test_voidptr).apply(null,arguments)},n._sqlite3_wasm_test_int64_max=function(){return(n._sqlite3_wasm_test_int64_max=n.asm.sqlite3_wasm_test_int64_max).apply(null,arguments)},n._sqlite3_wasm_test_int64_min=function(){return(n._sqlite3_wasm_test_int64_min=n.asm.sqlite3_wasm_test_int64_min).apply(null,arguments)},n._sqlite3_wasm_test_int64_times2=function(){return(n._sqlite3_wasm_test_int64_times2=n.asm.sqlite3_wasm_test_int64_times2).apply(null,arguments)},n._sqlite3_wasm_test_int64_minmax=function(){return(n._sqlite3_wasm_test_int64_minmax=n.asm.sqlite3_wasm_test_int64_minmax).apply(null,arguments)},n._sqlite3_wasm_test_int64ptr=function(){return(n._sqlite3_wasm_test_int64ptr=n.asm.sqlite3_wasm_test_int64ptr).apply(null,arguments)},n._sqlite3_wasm_test_stack_overflow=function(){return(n._sqlite3_wasm_test_stack_overflow=n.asm.sqlite3_wasm_test_stack_overflow).apply(null,arguments)},n._sqlite3_wasm_test_str_hello=function(){return(n._sqlite3_wasm_test_str_hello=n.asm.sqlite3_wasm_test_str_hello).apply(null,arguments)},n._sqlite3_wasm_SQLTester_strglob=function(){return(n._sqlite3_wasm_SQLTester_strglob=n.asm.sqlite3_wasm_SQLTester_strglob).apply(null,arguments)};var Lo=n._malloc=function(){return(Lo=n._malloc=n.asm.malloc).apply(null,arguments)};n._free=function(){return(n._free=n.asm.free).apply(null,arguments)},n._realloc=function(){return(n._realloc=n.asm.realloc).apply(null,arguments)};var Ai=n._emscripten_builtin_memalign=function(){return(Ai=n._emscripten_builtin_memalign=n.asm.emscripten_builtin_memalign).apply(null,arguments)};n.stackSave=function(){return(n.stackSave=n.asm.stackSave).apply(null,arguments)},n.stackRestore=function(){return(n.stackRestore=n.asm.stackRestore).apply(null,arguments)},n.stackAlloc=function(){return(n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)},n.wasmMemory=pe;var Er;hs=function _(){Er||Na(),Er||(hs=_)};function Na(_){if(yn>0||(Ts(),yn>0))return;function f(){Er||(Er=!0,n.calledRun=!0,!he&&(Ss(),a(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),jn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),f()},1)):f()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Na(),n.postRun||(n.postRun=[]),n.postRun.push(function(_){if(globalThis.sqlite3ApiBootstrap=function f(y=globalThis.sqlite3ApiConfig||f.defaultConfig){if(f.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),f.sqlite3;const b=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof _<"u"?!!_.HEAPU64:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},y||{});Object.assign(b,{allocExportName:b.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:b.useStdAlloc?"free":"sqlite3_free",reallocExportName:b.useStdAlloc?"realloc":"sqlite3_realloc"},b),["exports","memory","wasmfsOpfsDir"].forEach(R=>{typeof b[R]=="function"&&(b[R]=b[R]())});const x=Object.create(null),A=Object.create(null),J=R=>x.sqlite3_js_rc_str&&x.sqlite3_js_rc_str(R)||"Unknown result code #"+R,ie=R=>typeof R=="number"&&R===(R|0);class $e extends Error{constructor(...F){let re;if(F.length)if(ie(F[0]))if(re=F[0],F.length===1)super(J(F[0]));else{const K=J(re);typeof F[1]=="object"?super(K,F[1]):(F[0]=K+":",super(F.join(" ")))}else F.length===2&&typeof F[1]=="object"?super(...F):super(F.join(" "));this.resultCode=re||x.SQLITE_ERROR,this.name="SQLite3Error"}}$e.toss=(...R)=>{throw new $e(...R)};const Ue=$e.toss;b.wasmfsOpfsDir&&!/^\/[^/]+$/.test(b.wasmfsOpfsDir)&&Ue("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const Ze=R=>typeof R!="bigint"&&R===(R|0)&&R<=2147483647&&R>=-2147483648,ft=function R(F){return R._max||(R._max=BigInt("0x7fffffffffffffff"),R._min=~R._max),F>=R._min&&F<=R._max},fe=R=>R>=-0x7fffffffn-1n&&R<=0x7fffffffn,B=function R(F){return R._min||(R._min=Number.MIN_SAFE_INTEGER,R._max=Number.MAX_SAFE_INTEGER),F>=R._min&&F<=R._max},V=R=>R&&R.constructor&&Ze(R.constructor.BYTES_PER_ELEMENT)?R:!1,ne=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ce=R=>R.buffer instanceof ne,ee=(R,F,re)=>ce(R)?R.slice(F,re):R.subarray(F,re),we=R=>R&&(R instanceof Uint8Array||R instanceof Int8Array||R instanceof ArrayBuffer),De=R=>R&&(R instanceof Uint8Array||R instanceof Int8Array||R instanceof ArrayBuffer),je=R=>we(R)||Ue("Value is not of a supported TypedArray type."),Ve=new TextDecoder("utf-8"),We=function(R,F,re){return Ve.decode(ee(R,F,re))},L=function(R){return De(R)?We(R instanceof ArrayBuffer?new Uint8Array(R):R):Array.isArray(R)?R.join(""):(A.isPtr(R)&&(R=A.cstrToJs(R)),R)};class oe extends Error{constructor(...F){F.length===2&&typeof F[1]=="object"?super(...F):F.length?super(F.join(" ")):super("Allocation failed."),this.resultCode=x.SQLITE_NOMEM,this.name="WasmAllocError"}}oe.toss=(...R)=>{throw new oe(...R)},Object.assign(x,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(R,F,re,K,Ne,et,_t,At,ot)=>{},sqlite3_create_function:(R,F,re,K,Ne,et,_t,At)=>{},sqlite3_create_window_function:(R,F,re,K,Ne,et,_t,At,ot,bt)=>{},sqlite3_prepare_v3:(R,F,re,K,Ne,et)=>{},sqlite3_prepare_v2:(R,F,re,K,Ne)=>{},sqlite3_exec:(R,F,re,K,Ne)=>{},sqlite3_randomness:(R,F)=>{}});const le={affirmBindableTypedArray:je,flexibleString:L,bigIntFits32:fe,bigIntFits64:ft,bigIntFitsDouble:B,isBindableTypedArray:we,isInt32:Ze,isSQLableTypedArray:De,isTypedArray:V,typedArrayToString:We,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:ce,toss:function(...R){throw new Error(R.join(" "))},toss3:Ue,typedArrayPart:ee,affirmDbHeader:function(R){R instanceof ArrayBuffer&&(R=new Uint8Array(R));const F="SQLite format 3";F.length>R.byteLength&&Ue("Input does not contain an SQLite3 database header.");for(let re=0;re<F.length;++re)F.charCodeAt(re)!==R[re]&&Ue("Input does not contain an SQLite3 database header.")},affirmIsDb:function(R){R instanceof ArrayBuffer&&(R=new Uint8Array(R));const F=R.byteLength;(F<512||F%512!==0)&&Ue("Byte array size",F,"is invalid for an SQLite3 db."),le.affirmDbHeader(R)}};Object.assign(A,{ptrSizeof:b.wasmPtrSizeof||4,ptrIR:b.wasmPtrIR||"i32",bigIntEnabled:!!b.bigIntEnabled,exports:b.exports||Ue("Missing API config.exports (WASM module exports)."),memory:b.memory||b.exports.memory||Ue("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),A.allocFromTypedArray=function(R){R instanceof ArrayBuffer&&(R=new Uint8Array(R)),je(R);const F=A.alloc(R.byteLength||1);return A.heapForSize(R.constructor).set(R.byteLength?R:[0],F),F};{const R=b.allocExportName,F=b.deallocExportName,re=b.reallocExportName;for(const K of[R,F,re])A.exports[K]instanceof Function||Ue("Missing required exports[",K,"] function.");A.alloc=function K(Ne){return K.impl(Ne)||oe.toss("Failed to allocate",Ne," bytes.")},A.alloc.impl=A.exports[R],A.realloc=function K(Ne,et){const _t=K.impl(Ne,et);return et?_t||oe.toss("Failed to reallocate",et," bytes."):0},A.realloc.impl=A.exports[re],A.dealloc=A.exports[F]}A.compileOptionUsed=function R(F){if(arguments.length){if(Array.isArray(F)){const re={};return F.forEach(K=>{re[K]=x.sqlite3_compileoption_used(K)}),re}else if(typeof F=="object")return Object.keys(F).forEach(re=>{F[re]=x.sqlite3_compileoption_used(re)}),F}else{if(R._result)return R._result;R._opt||(R._rx=/^([^=]+)=(.+)/,R._rxInt=/^-?\d+$/,R._opt=function(_t,At){const ot=R._rx.exec(_t);At[0]=ot?ot[1]:_t,At[1]=ot?R._rxInt.test(ot[2])?+ot[2]:ot[2]:!0});const re={},K=[0,0];let Ne=0,et;for(;et=x.sqlite3_compileoption_get(Ne++);)R._opt(et,K),re[K[0]]=K[1];return R._result=re}return typeof F=="string"?!!x.sqlite3_compileoption_used(F):!1},A.pstack=Object.assign(Object.create(null),{restore:A.exports.sqlite3_wasm_pstack_restore,alloc:function(R){return typeof R=="string"&&!(R=A.sizeofIR(R))&&oe.toss("Invalid value for pstack.alloc(",arguments[0],")"),A.exports.sqlite3_wasm_pstack_alloc(R)||oe.toss("Could not allocate",R,"bytes from the pstack.")},allocChunks:function(R,F){typeof F=="string"&&!(F=A.sizeofIR(F))&&oe.toss("Invalid size value for allocChunks(",arguments[1],")");const re=A.pstack.alloc(R*F),K=[];let Ne=0,et=0;for(;Ne<R;++Ne,et+=F)K.push(re+et);return K},allocPtr:(R=1,F=!0)=>R===1?A.pstack.alloc(F?8:A.ptrSizeof):A.pstack.allocChunks(R,F?8:A.ptrSizeof),call:function(R){const F=A.pstack.pointer;try{return R(te)}finally{A.pstack.restore(F)}}}),Object.defineProperties(A.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:A.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:A.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:A.exports.sqlite3_wasm_pstack_remaining}}),x.sqlite3_randomness=(...R)=>{if(R.length===1&&le.isTypedArray(R[0])&&R[0].BYTES_PER_ELEMENT===1){const F=R[0];if(F.byteLength===0)return A.exports.sqlite3_randomness(0,0),F;const re=A.pstack.pointer;try{let K=F.byteLength,Ne=0;const et=A.exports.sqlite3_randomness,_t=A.heap8u(),At=K<512?K:512,ot=A.pstack.alloc(At);do{const bt=K>At?At:K;et(bt,ot),F.set(ee(_t,ot,ot+bt),Ne),K-=bt,Ne+=bt}while(K>0)}catch(K){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",K)}finally{A.pstack.restore(re)}return F}A.exports.sqlite3_randomness(...R)};let Me;if(x.sqlite3_wasmfs_opfs_dir=function(){if(Me!==void 0)return Me;const R=b.wasmfsOpfsDir;if(!R||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return Me="";try{return R&&A.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],R)===0?Me=R:Me=""}catch{return Me=""}},x.sqlite3_wasmfs_filename_is_persistent=function(R){const F=x.sqlite3_wasmfs_opfs_dir();return F&&R?R.startsWith(F+"/"):!1},x.sqlite3_js_db_uses_vfs=function(R,F,re=0){try{const K=x.sqlite3_vfs_find(F);return K?R?K===x.sqlite3_js_db_vfs(R,re)?K:!1:K===x.sqlite3_vfs_find(0)?K:!1:!1}catch{return!1}},x.sqlite3_js_vfs_list=function(){const R=[];let F=x.sqlite3_vfs_find(0);for(;F;){const re=new x.sqlite3_vfs(F);R.push(A.cstrToJs(re.$zName)),F=re.$pNext,re.dispose()}return R},x.sqlite3_js_db_export=function(R,F=0){R=A.xWrap.testConvertArg("sqlite3*",R),R||Ue("Invalid sqlite3* argument."),A.bigIntEnabled||Ue("BigInt64 support is not enabled.");const re=A.scopedAllocPush();let K;try{const Ne=A.scopedAlloc(8+A.ptrSizeof),et=Ne+8,_t=F?A.isPtr(F)?F:A.scopedAllocCString(""+F):0;let At=A.exports.sqlite3_wasm_db_serialize(R,_t,et,Ne,0);At&&Ue("Database serialization failed with code",te.capi.sqlite3_js_rc_str(At)),K=A.peekPtr(et);const ot=A.peek(Ne,"i64");return At=ot?A.heap8u().slice(K,K+Number(ot)):new Uint8Array,At}finally{K&&A.exports.sqlite3_free(K),A.scopedAllocPop(re)}},x.sqlite3_js_db_vfs=(R,F=0)=>A.sqlite3_wasm_db_vfs(R,F),x.sqlite3_js_aggregate_context=(R,F)=>x.sqlite3_aggregate_context(R,F)||(F?oe.toss("Cannot allocate",F,"bytes for sqlite3_aggregate_context()"):0),x.sqlite3_js_posix_create_file=function(R,F,re){let K;F&&A.isPtr(F)?K=F:F instanceof ArrayBuffer||F instanceof Uint8Array?(K=A.allocFromTypedArray(F),(arguments.length<3||!le.isInt32(re)||re<0)&&(re=F.byteLength)):$e.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!le.isInt32(re)||re<0)&&$e.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const Ne=A.sqlite3_wasm_posix_create_file(R,K,re);Ne&&$e.toss("Creation of file failed with sqlite3 result code",x.sqlite3_js_rc_str(Ne))}finally{A.dealloc(K)}},x.sqlite3_js_vfs_create_file=function(R,F,re,K){b.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let Ne;re?(A.isPtr(re)?Ne=re:re instanceof ArrayBuffer&&(re=new Uint8Array(re)),re instanceof Uint8Array?(Ne=A.allocFromTypedArray(re),(arguments.length<4||!le.isInt32(K)||K<0)&&(K=re.byteLength)):$e.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):Ne=0,(!le.isInt32(K)||K<0)&&(A.dealloc(Ne),$e.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const et=A.sqlite3_wasm_vfs_create_file(R,F,Ne,K);et&&$e.toss("Creation of file failed with sqlite3 result code",x.sqlite3_js_rc_str(et))}finally{A.dealloc(Ne)}},x.sqlite3_js_sql_to_string=R=>{if(typeof R=="string")return R;const F=L(v);return F===v?void 0:F},le.isUIThread()){const R=function(F){const re=Object.create(null);return re.prefix="kvvfs-"+F,re.stores=[],(F==="session"||F==="")&&re.stores.push(globalThis.sessionStorage),(F==="local"||F==="")&&re.stores.push(globalThis.localStorage),re};x.sqlite3_js_kvvfs_clear=function(F=""){let re=0;const K=R(F);return K.stores.forEach(Ne=>{const et=[];let _t;for(_t=0;_t<Ne.length;++_t){const At=Ne.key(_t);At.startsWith(K.prefix)&&et.push(At)}et.forEach(At=>Ne.removeItem(At)),re+=et.length}),re},x.sqlite3_js_kvvfs_size=function(F=""){let re=0;const K=R(F);return K.stores.forEach(Ne=>{let et;for(et=0;et<Ne.length;++et){const _t=Ne.key(et);_t.startsWith(K.prefix)&&(re+=_t.length,re+=Ne.getItem(_t).length)}}),re*2}}x.sqlite3_db_config=(function(R,F,...re){switch(this.s||(this.s=A.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=A.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=A.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),F){case x.SQLITE_DBCONFIG_ENABLE_FKEY:case x.SQLITE_DBCONFIG_ENABLE_TRIGGER:case x.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case x.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case x.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case x.SQLITE_DBCONFIG_ENABLE_QPSG:case x.SQLITE_DBCONFIG_TRIGGER_EQP:case x.SQLITE_DBCONFIG_RESET_DATABASE:case x.SQLITE_DBCONFIG_DEFENSIVE:case x.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case x.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case x.SQLITE_DBCONFIG_DQS_DML:case x.SQLITE_DBCONFIG_DQS_DDL:case x.SQLITE_DBCONFIG_ENABLE_VIEW:case x.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case x.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case x.SQLITE_DBCONFIG_STMT_SCANSTATUS:case x.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(R,F,re[0],re[1]||0);case x.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(R,F,re[0],re[1],re[2]);case x.SQLITE_DBCONFIG_MAINDBNAME:return this.s(R,F,re[0]);default:return x.SQLITE_MISUSE}}).bind(Object.create(null)),x.sqlite3_value_to_js=function(R,F=!0){let re;const K=x.sqlite3_value_type(R);switch(K){case x.SQLITE_INTEGER:A.bigIntEnabled?(re=x.sqlite3_value_int64(R),le.bigIntFitsDouble(re)&&(re=Number(re))):re=x.sqlite3_value_double(R);break;case x.SQLITE_FLOAT:re=x.sqlite3_value_double(R);break;case x.SQLITE_TEXT:re=x.sqlite3_value_text(R);break;case x.SQLITE_BLOB:{const Ne=x.sqlite3_value_bytes(R),et=x.sqlite3_value_blob(R);Ne&&!et&&te.WasmAllocError.toss("Cannot allocate memory for blob argument of",Ne,"byte(s)"),re=Ne?A.heap8u().slice(et,et+Number(Ne)):null;break}case x.SQLITE_NULL:re=null;break;default:F&&Ue(x.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",K),re=void 0}return re},x.sqlite3_values_to_js=function(R,F,re=!0){let K;const Ne=[];for(K=0;K<R;++K)Ne.push(x.sqlite3_value_to_js(A.peekPtr(F+A.ptrSizeof*K),re));return Ne},x.sqlite3_result_error_js=function(R,F){F instanceof oe?x.sqlite3_result_error_nomem(R):x.sqlite3_result_error(R,""+F,-1)},x.sqlite3_result_js=function(R,F){if(F instanceof Error){x.sqlite3_result_error_js(R,F);return}try{switch(typeof F){case"undefined":break;case"boolean":x.sqlite3_result_int(R,F?1:0);break;case"bigint":le.bigIntFits32(F)?x.sqlite3_result_int(R,Number(F)):le.bigIntFitsDouble(F)?x.sqlite3_result_double(R,Number(F)):A.bigIntEnabled?le.bigIntFits64(F)?x.sqlite3_result_int64(R,F):Ue("BigInt value",F.toString(),"is too BigInt for int64."):Ue("BigInt value",F.toString(),"is too BigInt.");break;case"number":{let re;le.isInt32(F)?re=x.sqlite3_result_int:A.bigIntEnabled&&Number.isInteger(F)&&le.bigIntFits64(BigInt(F))?re=x.sqlite3_result_int64:re=x.sqlite3_result_double,re(R,F);break}case"string":{const[re,K]=A.allocCString(F,!0);x.sqlite3_result_text(R,re,K,x.SQLITE_WASM_DEALLOC);break}case"object":if(F===null){x.sqlite3_result_null(R);break}else if(le.isBindableTypedArray(F)){const re=A.allocFromTypedArray(F);x.sqlite3_result_blob(R,re,F.byteLength,x.SQLITE_WASM_DEALLOC);break}default:Ue("Don't not how to handle this UDF result value:",typeof F,F)}}catch(re){x.sqlite3_result_error_js(R,re)}},x.sqlite3_column_js=function(R,F,re=!0){const K=x.sqlite3_column_value(R,F);return K===0?void 0:x.sqlite3_value_to_js(K,re)};const z=(function(R,F,re){re=x[re],this.ptr?A.pokePtr(this.ptr,0):this.ptr=A.allocPtr();const K=re(R,F,this.ptr);if(K)return $e.toss(K,arguments[2]+"() failed with code "+K);const Ne=A.peekPtr(this.ptr);return Ne?x.sqlite3_value_to_js(Ne,!0):void 0}).bind(Object.create(null));x.sqlite3_preupdate_new_js=(R,F)=>z(R,F,"sqlite3_preupdate_new"),x.sqlite3_preupdate_old_js=(R,F)=>z(R,F,"sqlite3_preupdate_old"),x.sqlite3changeset_new_js=(R,F)=>z(R,F,"sqlite3changeset_new"),x.sqlite3changeset_old_js=(R,F)=>z(R,F,"sqlite3changeset_old");const te={WasmAllocError:oe,SQLite3Error:$e,capi:x,util:le,wasm:A,config:b,version:Object.create(null),client:void 0,asyncPostInit:async function R(){if(R.isReady instanceof Promise)return R.isReady;let F=f.initializersAsync;delete f.initializersAsync;const re=async()=>(te.__isUnderTest||(delete te.util,delete te.StructBinder),te),K=et=>{throw b.error("an async sqlite3 initializer failed:",et),et};if(!F||!F.length)return R.isReady=re().catch(K);F=F.map(et=>et instanceof Function?async _t=>et(te):et),F.push(re);let Ne=Promise.resolve(te);for(;F.length;)Ne=Ne.then(F.shift());return R.isReady=Ne.catch(K)},scriptInfo:void 0};try{f.initializers.forEach(R=>{R(te)})}catch(R){throw console.error("sqlite3 bootstrap initializer threw:",R),R}return delete f.initializers,f.sqlite3=te,te},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(f){f.bigIntEnabled===void 0&&(f.bigIntEnabled=!!globalThis.BigInt64Array);const y=(...L)=>{throw new Error(L.join(" "))};f.exports||Object.defineProperty(f,"exports",{enumerable:!0,configurable:!0,get:()=>f.instance&&f.instance.exports});const b=f.pointerIR||"i32",x=f.ptrSizeof=b==="i32"?4:b==="i64"?8:y("Unhandled ptrSizeof:",b),A=Object.create(null);A.heapSize=0,A.memory=null,A.freeFuncIndexes=[],A.scopedAlloc=[],A.utf8Decoder=new TextDecoder,A.utf8Encoder=new TextEncoder("utf-8"),f.sizeofIR=L=>{switch(L){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return x;default:return(""+L).endsWith("*")?x:void 0}};const J=function(){if(!A.memory)A.memory=f.memory instanceof WebAssembly.Memory?f.memory:f.exports.memory;else if(A.heapSize===A.memory.buffer.byteLength)return A;const L=A.memory.buffer;return A.HEAP8=new Int8Array(L),A.HEAP8U=new Uint8Array(L),A.HEAP16=new Int16Array(L),A.HEAP16U=new Uint16Array(L),A.HEAP32=new Int32Array(L),A.HEAP32U=new Uint32Array(L),f.bigIntEnabled&&(A.HEAP64=new BigInt64Array(L),A.HEAP64U=new BigUint64Array(L)),A.HEAP32F=new Float32Array(L),A.HEAP64F=new Float64Array(L),A.heapSize=L.byteLength,A};f.heap8=()=>J().HEAP8,f.heap8u=()=>J().HEAP8U,f.heap16=()=>J().HEAP16,f.heap16u=()=>J().HEAP16U,f.heap32=()=>J().HEAP32,f.heap32u=()=>J().HEAP32U,f.heapForSize=function(L,oe=!0){const le=A.memory&&A.heapSize===A.memory.buffer.byteLength?A:J();switch(L){case Int8Array:return le.HEAP8;case Uint8Array:return le.HEAP8U;case Int16Array:return le.HEAP16;case Uint16Array:return le.HEAP16U;case Int32Array:return le.HEAP32;case Uint32Array:return le.HEAP32U;case 8:return oe?le.HEAP8U:le.HEAP8;case 16:return oe?le.HEAP16U:le.HEAP16;case 32:return oe?le.HEAP32U:le.HEAP32;case 64:if(le.HEAP64)return oe?le.HEAP64U:le.HEAP64;break;default:if(f.bigIntEnabled){if(L===globalThis.BigUint64Array)return le.HEAP64U;if(L===globalThis.BigInt64Array)return le.HEAP64;break}}y("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},f.functionTable=function(){return f.exports.__indirect_function_table},f.functionEntry=function(L){const oe=f.functionTable();return L<oe.length?oe.get(L):void 0},f.jsFuncToWasm=function L(oe,le){if(L._||(L._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(te,R,F){F<128?te[R](F):te[R](F%128|128,F>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(te){const R=L._.rxJSig.exec(te);return R?R[2]:te.substr(1)},letterType:te=>L._.sigTypes[te]||y("Invalid signature letter:",te),pushSigType:(te,R)=>te.push(L._.typeCodes[L._.letterType(R)])}),typeof oe=="string"){const te=le;le=oe,oe=te}const Me=L._.sigParams(le),z=[1,96];L._.uleb128Encode(z,"push",Me.length);for(const te of Me)L._.pushSigType(z,te);return le[0]==="v"?z.push(0):(z.push(1),L._.pushSigType(z,le[0])),L._.uleb128Encode(z,"unshift",z.length),z.unshift(0,97,115,109,1,0,0,0,1),z.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(z)),{e:{f:oe}}).exports.f};const ie=function(oe,le,Me){if(Me&&!A.scopedAlloc.length&&y("No scopedAllocPush() scope is active."),typeof oe=="string"){const F=le;le=oe,oe=F}(typeof le!="string"||!(oe instanceof Function))&&y("Invalid arguments: expecting (function,signature) or (signature,function).");const z=f.functionTable(),te=z.length;let R;for(;A.freeFuncIndexes.length&&(R=A.freeFuncIndexes.pop(),z.get(R));){R=null;continue}R||(R=te,z.grow(1));try{return z.set(R,oe),Me&&A.scopedAlloc[A.scopedAlloc.length-1].push(R),R}catch(F){if(!(F instanceof TypeError))throw R===te&&A.freeFuncIndexes.push(te),F}try{const F=f.jsFuncToWasm(oe,le);z.set(R,F),Me&&A.scopedAlloc[A.scopedAlloc.length-1].push(R)}catch(F){throw R===te&&A.freeFuncIndexes.push(te),F}return R};f.installFunction=(L,oe)=>ie(L,oe,!1),f.scopedInstallFunction=(L,oe)=>ie(L,oe,!0),f.uninstallFunction=function(L){if(!L&&L!==0)return;const oe=A.freeFuncIndexes,le=f.functionTable();oe.push(L);const Me=le.get(L);return le.set(L,null),Me},f.peek=function(oe,le="i8"){le.endsWith("*")&&(le=b);const Me=A.memory&&A.heapSize===A.memory.buffer.byteLength?A:J(),z=Array.isArray(oe)?[]:void 0;let te;do{switch(z&&(oe=arguments[0].shift()),le){case"i1":case"i8":te=Me.HEAP8[oe>>0];break;case"i16":te=Me.HEAP16[oe>>1];break;case"i32":te=Me.HEAP32[oe>>2];break;case"float":case"f32":te=Me.HEAP32F[oe>>2];break;case"double":case"f64":te=Number(Me.HEAP64F[oe>>3]);break;case"i64":if(f.bigIntEnabled){te=BigInt(Me.HEAP64[oe>>3]);break}default:y("Invalid type for peek():",le)}z&&z.push(te)}while(z&&arguments[0].length);return z||te},f.poke=function(L,oe,le="i8"){le.endsWith("*")&&(le=b);const Me=A.memory&&A.heapSize===A.memory.buffer.byteLength?A:J();for(const z of Array.isArray(L)?L:[L])switch(le){case"i1":case"i8":Me.HEAP8[z>>0]=oe;continue;case"i16":Me.HEAP16[z>>1]=oe;continue;case"i32":Me.HEAP32[z>>2]=oe;continue;case"float":case"f32":Me.HEAP32F[z>>2]=oe;continue;case"double":case"f64":Me.HEAP64F[z>>3]=oe;continue;case"i64":if(Me.HEAP64){Me.HEAP64[z>>3]=BigInt(oe);continue}default:y("Invalid type for poke(): "+le)}return this},f.peekPtr=(...L)=>f.peek(L.length===1?L[0]:L,b),f.pokePtr=(L,oe=0)=>f.poke(L,oe,b),f.peek8=(...L)=>f.peek(L.length===1?L[0]:L,"i8"),f.poke8=(L,oe)=>f.poke(L,oe,"i8"),f.peek16=(...L)=>f.peek(L.length===1?L[0]:L,"i16"),f.poke16=(L,oe)=>f.poke(L,oe,"i16"),f.peek32=(...L)=>f.peek(L.length===1?L[0]:L,"i32"),f.poke32=(L,oe)=>f.poke(L,oe,"i32"),f.peek64=(...L)=>f.peek(L.length===1?L[0]:L,"i64"),f.poke64=(L,oe)=>f.poke(L,oe,"i64"),f.peek32f=(...L)=>f.peek(L.length===1?L[0]:L,"f32"),f.poke32f=(L,oe)=>f.poke(L,oe,"f32"),f.peek64f=(...L)=>f.peek(L.length===1?L[0]:L,"f64"),f.poke64f=(L,oe)=>f.poke(L,oe,"f64"),f.getMemValue=f.peek,f.getPtrValue=f.peekPtr,f.setMemValue=f.poke,f.setPtrValue=f.pokePtr,f.isPtr32=L=>typeof L=="number"&&L===(L|0)&&L>=0,f.isPtr=f.isPtr32,f.cstrlen=function(L){if(!L||!f.isPtr(L))return null;const oe=J().HEAP8U;let le=L;for(;oe[le]!==0;++le);return le-L};const $e=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Ue=function(L,oe,le){return A.utf8Decoder.decode(L.buffer instanceof $e?L.slice(oe,le):L.subarray(oe,le))};f.cstrToJs=function(L){const oe=f.cstrlen(L);return oe?Ue(J().HEAP8U,L,L+oe):oe===null?oe:""},f.jstrlen=function(L){if(typeof L!="string")return null;const oe=L.length;let le=0;for(let Me=0;Me<oe;++Me){let z=L.charCodeAt(Me);z>=55296&&z<=57343&&(z=65536+((z&1023)<<10)|L.charCodeAt(++Me)&1023),z<=127?++le:z<=2047?le+=2:z<=65535?le+=3:le+=4}return le},f.jstrcpy=function(L,oe,le=0,Me=-1,z=!0){if((!oe||!(oe instanceof Int8Array)&&!(oe instanceof Uint8Array))&&y("jstrcpy() target must be an Int8Array or Uint8Array."),Me<0&&(Me=oe.length-le),!(Me>0)||!(le>=0))return 0;let te=0,R=L.length;const F=le,re=le+Me-(z?1:0);for(;te<R&&le<re;++te){let K=L.charCodeAt(te);if(K>=55296&&K<=57343&&(K=65536+((K&1023)<<10)|L.charCodeAt(++te)&1023),K<=127){if(le>=re)break;oe[le++]=K}else if(K<=2047){if(le+1>=re)break;oe[le++]=192|K>>6,oe[le++]=128|K&63}else if(K<=65535){if(le+2>=re)break;oe[le++]=224|K>>12,oe[le++]=128|K>>6&63,oe[le++]=128|K&63}else{if(le+3>=re)break;oe[le++]=240|K>>18,oe[le++]=128|K>>12&63,oe[le++]=128|K>>6&63,oe[le++]=128|K&63}}return z&&(oe[le++]=0),le-F},f.cstrncpy=function(L,oe,le){if((!L||!oe)&&y("cstrncpy() does not accept NULL strings."),le<0)le=f.cstrlen(strPtr)+1;else if(!(le>0))return 0;const Me=f.heap8u();let z=0,te;for(;z<le&&(te=Me[oe+z]);++z)Me[L+z]=te;return z<le&&(Me[L+z++]=0),z},f.jstrToUintArray=(L,oe=!1)=>A.utf8Encoder.encode(oe?L+"\0":L);const Ze=(L,oe)=>{(!(L.alloc instanceof Function)||!(L.dealloc instanceof Function))&&y("Object is missing alloc() and/or dealloc() function(s)","required by",oe+"().")},ft=function(L,oe,le,Me){if(Ze(f,Me),typeof L!="string")return null;{const z=A.utf8Encoder.encode(L),te=le(z.length+1),R=J().HEAP8U;return R.set(z,te),R[te+z.length]=0,oe?[te,z.length]:te}};f.allocCString=(L,oe=!1)=>ft(L,oe,f.alloc,"allocCString()"),f.scopedAllocPush=function(){Ze(f,"scopedAllocPush");const L=[];return A.scopedAlloc.push(L),L},f.scopedAllocPop=function(L){Ze(f,"scopedAllocPop");const oe=arguments.length?A.scopedAlloc.indexOf(L):A.scopedAlloc.length-1;oe<0&&y("Invalid state object for scopedAllocPop()."),arguments.length===0&&(L=A.scopedAlloc[oe]),A.scopedAlloc.splice(oe,1);for(let le;le=L.pop();)f.functionEntry(le)?f.uninstallFunction(le):f.dealloc(le)},f.scopedAlloc=function(L){A.scopedAlloc.length||y("No scopedAllocPush() scope is active.");const oe=f.alloc(L);return A.scopedAlloc[A.scopedAlloc.length-1].push(oe),oe},Object.defineProperty(f.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>A.scopedAlloc.length,set:()=>y("The 'active' property is read-only.")}),f.scopedAllocCString=(L,oe=!1)=>ft(L,oe,f.scopedAlloc,"scopedAllocCString()");const fe=function(L,oe){const le=f[L?"scopedAlloc":"alloc"]((oe.length+1)*f.ptrSizeof);let Me=0;return oe.forEach(z=>{f.pokePtr(le+f.ptrSizeof*Me++,f[L?"scopedAllocCString":"allocCString"](""+z))}),f.pokePtr(le+f.ptrSizeof*Me,0),le};f.scopedAllocMainArgv=L=>fe(!0,L),f.allocMainArgv=L=>fe(!1,L),f.cArgvToJs=(L,oe)=>{const le=[];for(let Me=0;Me<L;++Me){const z=f.peekPtr(oe+f.ptrSizeof*Me);le.push(z?f.cstrToJs(z):null)}return le},f.scopedAllocCall=function(L){f.scopedAllocPush();try{return L()}finally{f.scopedAllocPop()}};const B=function(L,oe,le){Ze(f,le);const Me=oe?"i64":b;let z=f[le](L*(oe?8:x));if(f.poke(z,0,Me),L===1)return z;const te=[z];for(let R=1;R<L;++R)z+=oe?8:x,te[R]=z,f.poke(z,0,Me);return te};f.allocPtr=(L=1,oe=!0)=>B(L,oe,"alloc"),f.scopedAllocPtr=(L=1,oe=!0)=>B(L,oe,"scopedAlloc"),f.xGet=function(L){return f.exports[L]||y("Cannot find exported symbol:",L)};const V=(L,oe)=>y(L+"() requires",oe,"argument(s).");f.xCall=function(L,...oe){const le=f.xGet(L);return le instanceof Function||y("Exported symbol",L,"is not a function."),le.length!==oe.length&&V(L,le.length),arguments.length===2&&Array.isArray(arguments[1])?le.apply(null,arguments[1]):le.apply(null,oe)},A.xWrap=Object.create(null),A.xWrap.convert=Object.create(null),A.xWrap.convert.arg=new Map,A.xWrap.convert.result=new Map;const ne=A.xWrap.convert.arg,ce=A.xWrap.convert.result;f.bigIntEnabled&&ne.set("i64",L=>BigInt(L));const ee=b==="i32"?L=>L|0:L=>BigInt(L)|BigInt(0);ne.set("i32",ee).set("i16",L=>(L|0)&65535).set("i8",L=>(L|0)&255).set("f32",L=>Number(L).valueOf()).set("float",ne.get("f32")).set("f64",ne.get("f32")).set("double",ne.get("f64")).set("int",ne.get("i32")).set("null",L=>L).set(null,ne.get("null")).set("**",ee).set("*",ee),ce.set("*",ee).set("pointer",ee).set("number",L=>Number(L)).set("void",L=>{}).set("null",L=>L).set(null,ce.get("null"));{const L=["i8","i16","i32","int","f32","float","f64","double"];f.bigIntEnabled&&L.push("i64");const oe=ne.get(b);for(const le of L)ne.set(le+"*",oe),ce.set(le+"*",oe),ce.set(le,ne.get(le)||y("Missing arg converter:",le))}const we=function(L){return typeof L=="string"?f.scopedAllocCString(L):L?ee(L):null};ne.set("string",we).set("utf8",we).set("pointer",we),ce.set("string",L=>f.cstrToJs(L)).set("utf8",ce.get("string")).set("string:dealloc",L=>{try{return L?f.cstrToJs(L):null}finally{f.dealloc(L)}}).set("utf8:dealloc",ce.get("string:dealloc")).set("json",L=>JSON.parse(f.cstrToJs(L))).set("json:dealloc",L=>{try{return L?JSON.parse(f.cstrToJs(L)):null}finally{f.dealloc(L)}});const De=class{constructor(L){this.name=L.name||"unnamed adapter"}convertArg(L,oe,le){y("AbstractArgAdapter must be subclassed.")}};ne.FuncPtrAdapter=class mr extends De{constructor(oe){super(oe),ne.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",oe),this.name=oe.name||"unnamed",this.signature=oe.signature,oe.contextKey instanceof Function&&(this.contextKey=oe.contextKey,oe.bindScope||(oe.bindScope="context")),this.bindScope=oe.bindScope||y("FuncPtrAdapter options requires a bindScope (explicit or implied)."),mr.bindScopes.indexOf(oe.bindScope)<0&&y("Invalid options.bindScope ("+oe.bindMod+") for FuncPtrAdapter. Expecting one of: ("+mr.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=oe.callProxy instanceof Function?oe.callProxy:void 0}contextKey(oe,le){return this}contextMap(oe){const le=this.__cmap||(this.__cmap=new Map);let Me=le.get(oe);return Me===void 0&&le.set(oe,Me=[]),Me}convertArg(oe,le,Me){let z=this.singleton;if(!z&&this.isContext&&(z=this.contextMap(this.contextKey(le,Me))),z&&z[0]===oe)return z[1];if(oe instanceof Function){this.callProxy&&(oe=this.callProxy(oe));const te=ie(oe,this.signature,this.isTransient);if(mr.debugFuncInstall&&mr.debugOut("FuncPtrAdapter installed",this,this.contextKey(le,Me),"@"+te,oe),z){if(z[1]){mr.debugFuncInstall&&mr.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(le,Me),"@"+z[1],oe);try{A.scopedAlloc[A.scopedAlloc.length-1].push(z[1])}catch{}}z[0]=oe,z[1]=te}return te}else if(f.isPtr(oe)||oe===null||oe===void 0){if(z&&z[1]&&z[1]!==oe){mr.debugFuncInstall&&mr.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(le,Me),"@"+z[1],oe);try{A.scopedAlloc[A.scopedAlloc.length-1].push(z[1])}catch{}z[0]=z[1]=oe|0}return oe||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},ne.FuncPtrAdapter.warnOnUse=!1,ne.FuncPtrAdapter.debugFuncInstall=!1,ne.FuncPtrAdapter.debugOut=console.debug.bind(console),ne.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const je=L=>ne.get(L)||y("Argument adapter not found:",L),Ve=L=>ce.get(L)||y("Result adapter not found:",L);A.xWrap.convertArg=(L,...oe)=>je(L)(...oe),A.xWrap.convertArgNoCheck=(L,...oe)=>ne.get(L)(...oe),A.xWrap.convertResult=(L,oe)=>L===null?oe:L?Ve(L)(oe):void 0,A.xWrap.convertResultNoCheck=(L,oe)=>L===null?oe:L?ce.get(L)(oe):void 0,f.xWrap=function(L,oe,...le){arguments.length===3&&Array.isArray(arguments[2])&&(le=arguments[2]),f.isPtr(L)&&(L=f.functionEntry(L)||y("Function pointer not found in WASM function table."));const Me=L instanceof Function,z=Me?L:f.xGet(L);if(Me&&(L=z.name||"unnamed function"),le.length!==z.length&&V(L,z.length),oe===null&&z.length===0)return z;oe!=null&&Ve(oe);for(const R of le)R instanceof De?ne.set(R,(...F)=>R.convertArg(...F)):je(R);const te=A.xWrap;return z.length===0?(...R)=>R.length?V(L,z.length):te.convertResult(oe,z.call(null)):function(...R){R.length!==z.length&&V(L,z.length);const F=f.scopedAllocPush();try{for(const re in R)R[re]=te.convertArgNoCheck(le[re],R[re],R,re);return te.convertResultNoCheck(oe,z.apply(null,R))}finally{f.scopedAllocPop(F)}}};const We=function(L,oe,le,Me,z,te){if(typeof le=="string"){if(oe===1)return te.get(le);if(oe===2){if(Me)Me instanceof Function||y(z,"requires a function argument.");else return delete te.get(le),L;return te.set(le,Me),L}}y("Invalid arguments to",z)};return f.xWrap.resultAdapter=function L(oe,le){return We(L,arguments.length,oe,le,"resultAdapter()",ce)},f.xWrap.argAdapter=function L(oe,le){return We(L,arguments.length,oe,le,"argAdapter()",ne)},f.xWrap.FuncPtrAdapter=ne.FuncPtrAdapter,f.xCallWrapped=function(L,oe,le,...Me){return Array.isArray(arguments[3])&&(Me=arguments[3]),f.xWrap(L,oe,le||[]).apply(null,Me||[])},f.xWrap.testConvertArg=A.xWrap.convertArg,f.xWrap.testConvertResult=A.xWrap.convertResult,f},globalThis.WhWasmUtilInstaller.yawl=(function(f){const y=()=>fetch(f.uri,{credentials:"same-origin"}),b=this,x=function(J){if(f.wasmUtilTarget){const ie=(...Ue)=>{throw new Error(Ue.join(" "))},$e=f.wasmUtilTarget;if($e.module=J.module,$e.instance=J.instance,$e.instance.exports.memory||($e.memory=f.imports&&f.imports.env&&f.imports.env.memory||ie("Missing 'memory' object!")),!$e.alloc&&J.instance.exports.malloc){const Ue=J.instance.exports;$e.alloc=function(Ze){return Ue.malloc(Ze)||ie("Allocation of",Ze,"bytes failed.")},$e.dealloc=function(Ze){Ue.free(Ze)}}b($e)}return f.onload&&f.onload(J,f),J};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(y(),f.imports||{}).then(x)}:function(){return y().then(ie=>ie.arrayBuffer()).then(ie=>WebAssembly.instantiate(ie,f.imports||{})).then(x)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function f(y){const b=(...Q)=>{throw new Error(Q.join(" "))};!(y.heap instanceof WebAssembly.Memory)&&!(y.heap instanceof Function)&&b("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(Q){y[Q]instanceof Function||b("Config option '"+Q+"' must be a function.")});const x=f,A=y.heap instanceof Function?y.heap:()=>new Uint8Array(y.heap.buffer),J=y.alloc,ie=y.dealloc,$e=y.log||console.log.bind(console),Ue=y.memberPrefix||"",Ze=y.memberSuffix||"",ft=y.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!y.bigIntEnabled,fe=globalThis.BigInt,B=globalThis.BigInt64Array,V=y.ptrSizeof||4,ne=y.ptrIR||"i32";x.debugFlags||(x.__makeDebugFlags=function(Q=null){Q&&Q.__flags&&(Q=Q.__flags);const me=function be(Ee){return arguments.length===0?be.__flags:(Ee<0?(delete be.__flags.getter,delete be.__flags.setter,delete be.__flags.alloc,delete be.__flags.dealloc):(be.__flags.getter=(1&Ee)!==0,be.__flags.setter=(2&Ee)!==0,be.__flags.alloc=(4&Ee)!==0,be.__flags.dealloc=(8&Ee)!==0),be._flags)};return Object.defineProperty(me,"__flags",{iterable:!1,writable:!1,value:Object.create(Q)}),Q||me(0),me},x.debugFlags=x.__makeDebugFlags());const ce=function(){const Q=new ArrayBuffer(2);return new DataView(Q).setInt16(0,256,!0),new Int16Array(Q)[0]===256}(),ee=Q=>Q[1]==="(",we=Q=>Q==="P",De=Q=>ee(Q)?"p":Q[0],je=function(Q){switch(De(Q)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return ne;case"j":return"i64";case"f":return"float";case"d":return"double"}b("Unhandled signature IR:",Q)},Ve=B?()=>!0:()=>b("BigInt64Array is not available."),We=function(Q){switch(De(Q)){case"p":case"P":case"s":{switch(V){case 4:return"getInt32";case 8:return Ve()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Ve()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}b("Unhandled DataView getter for signature:",Q)},L=function(Q){switch(De(Q)){case"p":case"P":case"s":{switch(V){case 4:return"setInt32";case 8:return Ve()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Ve()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}b("Unhandled DataView setter for signature:",Q)},oe=function(Q){switch(De(Q)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Ve()&&fe;case"p":case"P":case"s":switch(V){case 4:return Number;case 8:return Ve()&&fe}break}b("Unhandled DataView set wrapper for signature:",Q)},le=(Q,me)=>Q+"::"+me,Me=function(Q,me){return()=>b(le(Q,me),"is read-only.")},z=new WeakMap,te="(pointer-is-external)",R=function(Q,me,be){if(be||(be=z.get(me)),be){if(z.delete(me),Array.isArray(me.ondispose)){let Ee;for(;Ee=me.ondispose.shift();)try{Ee instanceof Function?Ee.call(me):Ee instanceof Ge?Ee.dispose():typeof Ee=="number"&&ie(Ee)}catch(Xe){console.warn("ondispose() for",Q.structName,"@",be,"threw. NOT propagating it.",Xe)}}else if(me.ondispose instanceof Function)try{me.ondispose()}catch(Ee){console.warn("ondispose() for",Q.structName,"@",be,"threw. NOT propagating it.",Ee)}delete me.ondispose,Q.debugFlags.__flags.dealloc&&$e("debug.dealloc:",me[te]?"EXTERNAL":"",Q.structName,"instance:",Q.structInfo.sizeof,"bytes @"+be),me[te]||ie(be)}},F=Q=>({configurable:!1,writable:!1,iterable:!1,value:Q}),re=function(Q,me,be){let Ee=!be;be?Object.defineProperty(me,te,F(be)):(be=J(Q.structInfo.sizeof),be||b("Allocation of",Q.structName,"structure failed."));try{Q.debugFlags.__flags.alloc&&$e("debug.alloc:",Ee?"":"EXTERNAL",Q.structName,"instance:",Q.structInfo.sizeof,"bytes @"+be),Ee&&A().fill(0,be,be+Q.structInfo.sizeof),z.set(me,be)}catch(Xe){throw R(Q,me,be),Xe}},K=function(){const Q=this.pointer;return Q?new Uint8Array(A().slice(Q,Q+this.structInfo.sizeof)):null},et=F(Q=>Ue+Q+Ze),_t=function(Q,me,be=!0){let Ee=Q.members[me];if(!Ee&&(Ue||Ze)){for(const Xe of Object.values(Q.members))if(Xe.key===me){Ee=Xe;break}!Ee&&be&&b(le(Q.name,me),"is not a mapped struct member.")}return Ee},At=function Q(me,be,Ee=!1){Q._||(Q._=pt=>pt.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const Xe=_t(me.structInfo,be,!0);return Ee?Q._(Xe.signature):Xe.signature},ot={configurable:!1,enumerable:!1,get:function(){return z.get(this)},set:()=>b("Cannot assign the 'pointer' property of a struct.")},bt=F(function(){const Q=[];for(const me of Object.keys(this.structInfo.members))Q.push(this.memberKey(me));return Q}),qt=new TextDecoder("utf-8"),Lt=new TextEncoder,Yt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Jt=function(Q,me,be){return qt.decode(Q.buffer instanceof Yt?Q.slice(me,be):Q.subarray(me,be))},hn=function(Q,me,be=!1){const Ee=_t(Q.structInfo,me,be);return Ee&&Ee.signature.length===1&&Ee.signature[0]==="s"?Ee:!1},Ft=function(Q){Q.signature!=="s"&&b("Invalid member type signature for C-string value:",JSON.stringify(Q))},ge=function(me,be){const Ee=_t(me.structInfo,be,!0);Ft(Ee);const Xe=me[Ee.key];if(!Xe)return null;let pt=Xe;const It=A();for(;It[pt]!==0;++pt);return Xe===pt?"":Jt(It,Xe,pt)},Te=function(Q,...me){Q.ondispose?Array.isArray(Q.ondispose)||(Q.ondispose=[Q.ondispose]):Q.ondispose=[],Q.ondispose.push(...me)},Ce=function(Q){const me=Lt.encode(Q),be=J(me.length+1);be||b("Allocation error while duplicating string:",Q);const Ee=A();return Ee.set(me,be),Ee[be+me.length]=0,be},Ke=function(Q,me,be){const Ee=_t(Q.structInfo,me,!0);Ft(Ee);const Xe=Ce(be);return Q[Ee.key]=Xe,Te(Q,Xe),Q},Ge=function(me,be){arguments[2]!==F&&b("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:F(me),structInfo:F(be)})};Ge.prototype=Object.create(null,{dispose:F(function(){R(this.constructor,this)}),lookupMember:F(function(Q,me=!0){return _t(this.structInfo,Q,me)}),memberToJsString:F(function(Q){return ge(this,Q)}),memberIsString:F(function(Q,me=!0){return hn(this,Q,me)}),memberKey:et,memberKeys:bt,memberSignature:F(function(Q,me=!1){return At(this,Q,me)}),memoryDump:F(K),pointer:ot,setMemberCString:F(function(Q,me){return Ke(this,Q,me)})}),Object.assign(Ge.prototype,{addOnDispose:function(...Q){return Te(this,...Q),this}}),Object.defineProperties(Ge,{allocCString:F(Ce),isA:F(Q=>Q instanceof Ge),hasExternalPointer:F(Q=>Q instanceof Ge&&!!Q[te]),memberKey:et});const tt=Q=>Number.isFinite(Q)||Q instanceof(fe||Number),Fe=function Q(me,be,Ee){if(!Q._){Q._={getters:{},setters:{},sw:{}};const cn=["i","c","C","p","P","s","f","d","v()"];ft&&cn.push("j"),cn.forEach(function(is){Q._.getters[is]=We(is),Q._.setters[is]=L(is),Q._.sw[is]=oe(is)});const Bc=/^[ipPsjfdcC]$/,Mo=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;Q.sigCheck=function(is,Ti,La,Ma){Object.prototype.hasOwnProperty.call(is,La)&&b(is.structName,"already has a property named",La+"."),Bc.test(Ma)||Mo.test(Ma)||b("Malformed signature for",le(is.structName,Ti)+":",Ma)}}const Xe=me.memberKey(be);Q.sigCheck(me.prototype,be,Xe,Ee.signature),Ee.key=Xe,Ee.name=be;const pt=De(Ee.signature),It=le(me.prototype.structName,Xe),jt=me.prototype.debugFlags.__flags,En=Object.create(null);En.configurable=!1,En.enumerable=!1,En.get=function(){jt.getter&&$e("debug.getter:",Q._.getters[pt],"for",je(pt),It,"@",this.pointer,"+",Ee.offset,"sz",Ee.sizeof);let cn=new DataView(A().buffer,this.pointer+Ee.offset,Ee.sizeof)[Q._.getters[pt]](0,ce);return jt.getter&&$e("debug.getter:",It,"result =",cn),cn},Ee.readOnly?En.set=Me(me.prototype.structName,Xe):En.set=function(cn){if(jt.setter&&$e("debug.setter:",Q._.setters[pt],"for",je(pt),It,"@",this.pointer,"+",Ee.offset,"sz",Ee.sizeof,cn),this.pointer||b("Cannot set struct property on disposed instance."),cn===null)cn=0;else for(;!tt(cn);){if(we(Ee.signature)&&cn instanceof Ge){cn=cn.pointer||0,jt.setter&&$e("debug.setter:",It,"resolved to",cn);break}b("Invalid value for pointer-type",It+".")}new DataView(A().buffer,this.pointer+Ee.offset,Ee.sizeof)[Q._.setters[pt]](0,Q._.sw[pt](cn),ce)},Object.defineProperty(me.prototype,Xe,En)},G=function Q(me,be){arguments.length===1?(be=me,me=be.name):be.name||(be.name=me),me||b("Struct name is required.");let Ee=!1;Object.keys(be.members).forEach(It=>{const jt=be.members[It];jt.sizeof?jt.sizeof===1?jt.signature==="c"||jt.signature==="C"||b("Unexpected sizeof==1 member",le(be.name,It),"with signature",jt.signature):(jt.sizeof%4!==0&&(console.warn("Invalid struct member description =",jt,"from",be),b(me,"member",It,"sizeof is not aligned. sizeof="+jt.sizeof)),jt.offset%4!==0&&(console.warn("Invalid struct member description =",jt,"from",be),b(me,"member",It,"offset is not aligned. offset="+jt.offset))):b(me,"member",It,"is missing sizeof."),(!Ee||Ee.offset<jt.offset)&&(Ee=jt)}),Ee?be.sizeof<Ee.offset+Ee.sizeof&&b("Invalid struct config:",me,"max member offset ("+Ee.offset+") ","extends past end of struct (sizeof="+be.sizeof+")."):b("No member property descriptions found.");const Xe=F(x.__makeDebugFlags(Q.debugFlags)),pt=function It(jt){this instanceof It?arguments.length?((jt!==(jt|0)||jt<=0)&&b("Invalid pointer value for",me,"constructor."),re(It,this,jt)):re(It,this):b("The",me,"constructor may only be called via 'new'.")};return Object.defineProperties(pt,{debugFlags:Xe,isA:F(It=>It instanceof pt),memberKey:et,memberKeys:bt,methodInfoForKey:F(function(It){}),structInfo:F(be),structName:F(me)}),pt.prototype=new Ge(me,be,F),Object.defineProperties(pt.prototype,{debugFlags:Xe,constructor:F(pt)}),Object.keys(be.members).forEach(It=>Fe(pt,It,be.members[It])),pt};return G.StructType=Ge,G.config=y,G.allocCString=Ce,G.debugFlags||(G.debugFlags=x.__makeDebugFlags(x.debugFlags)),G},globalThis.sqlite3ApiBootstrap.initializers.push(function(f){const y=(...fe)=>{throw new Error(fe.join(" "))};f.SQLite3Error.toss;const b=f.capi,x=f.wasm,A=f.util;if(globalThis.WhWasmUtilInstaller(x),delete globalThis.WhWasmUtilInstaller,x.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new x.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(fe,B)=>fe[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new x.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:fe=>fe[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new x.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:fe=>{let B;return(V,ne,ce,ee)=>{try{const we=x.cArgvToJs(ne,ce);return B||(B=x.cArgvToJs(ne,ee)),fe(we,B)|0}catch(we){return we.resultCode||b.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new x.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(fe,B)=>fe[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new x.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:fe=>fe[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new x.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(fe,B)=>fe[0],callProxy:fe=>(B,V,ne,ce,ee,we)=>{try{return ne=ne&&x.cstrToJs(ne),ce=ce&&x.cstrToJs(ce),ee=ee&&x.cstrToJs(ee),we=we&&x.cstrToJs(we),fe(B,V,ne,ce,ee,we)||0}catch(De){return De.resultCode||b.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new x.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(fe,B)=>fe[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new x.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(fe,B)=>fe[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],x.exports.sqlite3_activate_see instanceof Function&&x.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),x.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new x.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:fe=>fe[0],callProxy:fe=>(B,V,ne,ce,ee,we,De)=>{fe(B,V,ne,x.cstrToJs(ce),x.cstrToJs(ee),we,De)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new x.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:fe=>fe[0],callProxy:fe=>(B,V,ne,ce,ee)=>{fe(B,V,x.cstrToJs(ne),x.cstrToJs(ce),ee)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],x.bigIntEnabled&&x.exports.sqlite3changegroup_add){const fe={signature:"i(ps)",callProxy:B=>(V,ne)=>{try{return B(V,x.cstrToJs(ne))|0}catch(ce){return ce.resultCode||b.SQLITE_ERROR}}};x.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new x.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new x.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new x.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...fe}),new x.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new x.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new x.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...fe}),new x.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new x.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...fe}),new x.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new x.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new x.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...fe}),new x.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new x.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new x.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new x.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new x.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new x.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new x.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new x.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new x.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new x.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new x.xWrap.FuncPtrAdapter({name:"xFilter",...fe,contextKey:(B,V)=>B[0]}),"*"]])}x.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],f.StructBinder=globalThis.Jaccwabyt({heap:x.heap8u,alloc:x.alloc,dealloc:x.dealloc,bigIntEnabled:x.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const fe=x.xWrap.argAdapter("string");x.xWrap.argAdapter("string:flexible",ee=>fe(A.flexibleString(ee))),x.xWrap.argAdapter("string:static",(function(ee){return x.isPtr(ee)?ee:(ee=""+ee,this[ee]||(this[ee]=x.allocCString(ee)))}).bind(Object.create(null)));const B=x.xWrap.argAdapter("*"),V=function(){};x.xWrap.argAdapter("sqlite3_filename",B)("sqlite3_context*",B)("sqlite3_value*",B)("void*",B)("sqlite3_changegroup*",B)("sqlite3_changeset_iter*",B)("sqlite3_session*",B)("sqlite3_stmt*",ee=>{var we;return B(ee instanceof(((we=f==null?void 0:f.oo1)==null?void 0:we.Stmt)||V)?ee.pointer:ee)})("sqlite3*",ee=>{var we;return B(ee instanceof(((we=f==null?void 0:f.oo1)==null?void 0:we.DB)||V)?ee.pointer:ee)})("sqlite3_index_info*",ee=>B(ee instanceof(b.sqlite3_index_info||V)?ee.pointer:ee))("sqlite3_module*",ee=>B(ee instanceof(b.sqlite3_module||V)?ee.pointer:ee))("sqlite3_vfs*",ee=>typeof ee=="string"?b.sqlite3_vfs_find(ee)||f.SQLite3Error.toss(b.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",ee):B(ee instanceof(b.sqlite3_vfs||V)?ee.pointer:ee));const ne=x.xWrap.resultAdapter("*");x.xWrap.resultAdapter("sqlite3*",ne)("sqlite3_context*",ne)("sqlite3_stmt*",ne)("sqlite3_value*",ne)("sqlite3_vfs*",ne)("void*",ne),x.exports.sqlite3_step.length===0&&(x.xWrap.doArgcCheck=!1,f.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const ee of x.bindingSignatures)b[ee[0]]=x.xWrap.apply(null,ee);for(const ee of x.bindingSignatures.wasm)x[ee[0]]=x.xWrap.apply(null,ee);const ce=function(ee){return()=>y(ee+"() is unavailable due to lack","of BigInt support in this build.")};for(const ee of x.bindingSignatures.int64)b[ee[0]]=x.bigIntEnabled?x.xWrap.apply(null,ee):ce(ee[0]);if(delete x.bindingSignatures,x.exports.sqlite3_wasm_db_error){const ee=x.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");A.sqlite3_wasm_db_error=function(we,De,je){return De instanceof f.WasmAllocError?(De=b.SQLITE_NOMEM,je=0):De instanceof Error&&(je=je||""+De,De=De.resultCode||b.SQLITE_ERROR),we?ee(we,De,je):De}}else A.sqlite3_wasm_db_error=function(ee,we,De){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),we}}{const fe=x.xCall("sqlite3_wasm_enum_json");fe||y("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),x.ctype=JSON.parse(x.cstrToJs(fe));const B=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];x.bigIntEnabled&&B.push("serialize","session","vtab");for(const ce of B)for(const ee of Object.entries(x.ctype[ce]))b[ee[0]]=ee[1];x.functionEntry(b.SQLITE_WASM_DEALLOC)||y("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+b.SQLITE_WASM_DEALLOC+").");const V=Object.create(null);for(const ce of["resultCodes"])for(const ee of Object.entries(x.ctype[ce]))V[ee[1]]=ee[0];b.sqlite3_js_rc_str=ce=>V[ce];const ne=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!A.isUIThread(),sqlite3_index_info:!x.bigIntEnabled,sqlite3_index_constraint:!x.bigIntEnabled,sqlite3_index_orderby:!x.bigIntEnabled,sqlite3_index_constraint_usage:!x.bigIntEnabled});for(const ce of x.ctype.structs)ne[ce.name]||(b[ce.name]=f.StructBinder(ce));if(b.sqlite3_index_info){for(const ce of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])b.sqlite3_index_info[ce]=b[ce],delete b[ce];b.sqlite3_vtab_config=x.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}const J=(fe,B,V)=>A.sqlite3_wasm_db_error(fe,b.SQLITE_MISUSE,B+"() requires "+V+" argument"+(V===1?"":"s")+"."),ie=fe=>A.sqlite3_wasm_db_error(fe,b.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),$e=fe=>x.xWrap.argAdapter("sqlite3*")(fe),Ue=fe=>x.isPtr(fe)?x.cstrToJs(fe):fe,Ze=(function(fe,B){fe=$e(fe);let V=this.dbMap.get(fe);if(B)!V&&B>0&&this.dbMap.set(fe,V=Object.create(null));else return this.dbMap.delete(fe),V;return V}).bind(Object.assign(Object.create(null),{dbMap:new Map}));Ze.addCollation=function(fe,B){const V=Ze(fe,1);V.collation||(V.collation=new Set),V.collation.add(Ue(B).toLowerCase())},Ze._addUDF=function(fe,B,V,ne){B=Ue(B).toLowerCase();let ce=ne.get(B);ce||ne.set(B,ce=new Set),ce.add(V<0?-1:V)},Ze.addFunction=function(fe,B,V){const ne=Ze(fe,1);ne.udf||(ne.udf=new Map),this._addUDF(fe,B,V,ne.udf)},Ze.addWindowFunc=function(fe,B,V){const ne=Ze(fe,1);ne.wudf||(ne.wudf=new Map),this._addUDF(fe,B,V,ne.wudf)},Ze.cleanup=function(fe){fe=$e(fe);const B=[fe];for(const ce of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const ee=x.exports[ce];B.length=ee.length;try{b[ce](...B)}catch(we){console.warn("close-time call of",ce+"(",B,") threw:",we)}}const V=Ze(fe,0);if(!V)return;if(V.collation){for(const ce of V.collation)try{b.sqlite3_create_collation_v2(fe,ce,b.SQLITE_UTF8,0,0,0)}catch{}delete V.collation}let ne;for(ne=0;ne<2;++ne){const ce=ne?V.wudf:V.udf;if(!ce)continue;const ee=ne?b.sqlite3_create_window_function:b.sqlite3_create_function_v2;for(const we of ce){const De=we[0],je=we[1],Ve=[fe,De,0,b.SQLITE_UTF8,0,0,0,0,0];ne&&Ve.push(0);for(const We of je)try{Ve[2]=We,ee.apply(null,Ve)}catch{}je.clear()}ce.clear()}delete V.udf,delete V.wudf};{const fe=x.xWrap("sqlite3_close_v2","int","sqlite3*");b.sqlite3_close_v2=function(B){if(arguments.length!==1)return J(B,"sqlite3_close_v2",1);if(B)try{Ze.cleanup(B)}catch{}return fe(B)}}if(b.sqlite3session_table_filter){const fe=x.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);b.sqlite3session_delete=function(B){if(arguments.length!==1)return J(pDb,"sqlite3session_delete",1);B&&b.sqlite3session_table_filter(B,0,0),fe(B)}}{const fe=(V,ne)=>"argv["+ne+"]:"+V[0]+":"+x.cstrToJs(V[1]).toLowerCase(),B=x.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new x.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:fe}),new x.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:fe})]);b.sqlite3_create_collation_v2=function(V,ne,ce,ee,we,De){if(arguments.length!==6)return J(V,"sqlite3_create_collation_v2",6);if(!(ce&15))ce|=b.SQLITE_UTF8;else if(b.SQLITE_UTF8!==(ce&15))return ie(V);try{const je=B(V,ne,ce,ee,we,De);return je===0&&we instanceof Function&&Ze.addCollation(V,ne),je}catch(je){return A.sqlite3_wasm_db_error(V,je)}},b.sqlite3_create_collation=(V,ne,ce,ee,we)=>arguments.length===5?b.sqlite3_create_collation_v2(V,ne,ce,ee,we,0):J(V,"sqlite3_create_collation",5)}{const fe=function(ce,ee){return ce[0]+":"+(ce[2]<0?-1:ce[2])+":"+ee+":"+x.cstrToJs(ce[1]).toLowerCase()},B=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:fe,callProxy:ce=>(ee,we,De)=>{try{ce(ee,...b.sqlite3_values_to_js(we,De))}catch(je){b.sqlite3_result_error_js(ee,je)}}},xFinalAndValue:{signature:"v(p)",contextKey:fe,callProxy:ce=>ee=>{try{b.sqlite3_result_js(ee,ce(ee))}catch(we){b.sqlite3_result_error_js(ee,we)}}},xFunc:{signature:"v(pip)",contextKey:fe,callProxy:ce=>(ee,we,De)=>{try{b.sqlite3_result_js(ee,ce(ee,...b.sqlite3_values_to_js(we,De)))}catch(je){b.sqlite3_result_error_js(ee,je)}}},xDestroy:{signature:"v(p)",contextKey:fe,callProxy:ce=>ee=>{try{ce(ee)}catch(we){console.error("UDF xDestroy method threw:",we)}}}}),V=x.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new x.xWrap.FuncPtrAdapter({name:"xFunc",...B.xFunc}),new x.xWrap.FuncPtrAdapter({name:"xStep",...B.xInverseAndStep}),new x.xWrap.FuncPtrAdapter({name:"xFinal",...B.xFinalAndValue}),new x.xWrap.FuncPtrAdapter({name:"xDestroy",...B.xDestroy})]),ne=x.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new x.xWrap.FuncPtrAdapter({name:"xStep",...B.xInverseAndStep}),new x.xWrap.FuncPtrAdapter({name:"xFinal",...B.xFinalAndValue}),new x.xWrap.FuncPtrAdapter({name:"xValue",...B.xFinalAndValue}),new x.xWrap.FuncPtrAdapter({name:"xInverse",...B.xInverseAndStep}),new x.xWrap.FuncPtrAdapter({name:"xDestroy",...B.xDestroy})]);b.sqlite3_create_function_v2=function ce(ee,we,De,je,Ve,We,L,oe,le){if(ce.length!==arguments.length)return J(ee,"sqlite3_create_function_v2",ce.length);if(!(je&15))je|=b.SQLITE_UTF8;else if(b.SQLITE_UTF8!==(je&15))return ie(ee);try{const Me=V(ee,we,De,je,Ve,We,L,oe,le);return Me===0&&(We instanceof Function||L instanceof Function||oe instanceof Function||le instanceof Function)&&Ze.addFunction(ee,we,De),Me}catch(Me){return console.error("sqlite3_create_function_v2() setup threw:",Me),A.sqlite3_wasm_db_error(ee,Me,"Creation of UDF threw: "+Me)}},b.sqlite3_create_function=function ce(ee,we,De,je,Ve,We,L,oe){return ce.length===arguments.length?b.sqlite3_create_function_v2(ee,we,De,je,Ve,We,L,oe,0):J(ee,"sqlite3_create_function",ce.length)},b.sqlite3_create_window_function=function ce(ee,we,De,je,Ve,We,L,oe,le,Me){if(ce.length!==arguments.length)return J(ee,"sqlite3_create_window_function",ce.length);if(!(je&15))je|=b.SQLITE_UTF8;else if(b.SQLITE_UTF8!==(je&15))return ie(ee);try{const z=ne(ee,we,De,je,Ve,We,L,oe,le,Me);return z===0&&(We instanceof Function||L instanceof Function||oe instanceof Function||le instanceof Function||Me instanceof Function)&&Ze.addWindowFunc(ee,we,De),z}catch(z){return console.error("sqlite3_create_window_function() setup threw:",z),A.sqlite3_wasm_db_error(ee,z,"Creation of UDF threw: "+z)}},b.sqlite3_create_function_v2.udfSetResult=b.sqlite3_create_function.udfSetResult=b.sqlite3_create_window_function.udfSetResult=b.sqlite3_result_js,b.sqlite3_create_function_v2.udfConvertArgs=b.sqlite3_create_function.udfConvertArgs=b.sqlite3_create_window_function.udfConvertArgs=b.sqlite3_values_to_js,b.sqlite3_create_function_v2.udfSetError=b.sqlite3_create_function.udfSetError=b.sqlite3_create_window_function.udfSetError=b.sqlite3_result_error_js}{const fe=(V,ne)=>(typeof V=="string"?ne=-1:A.isSQLableTypedArray(V)?(ne=V.byteLength,V=A.typedArrayToString(V instanceof ArrayBuffer?new Uint8Array(V):V)):Array.isArray(V)&&(V=V.join(""),ne=-1),[V,ne]),B={basic:x.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:x.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};b.sqlite3_prepare_v3=function V(ne,ce,ee,we,De,je){if(V.length!==arguments.length)return J(ne,"sqlite3_prepare_v3",V.length);const[Ve,We]=fe(ce,ee);switch(typeof Ve){case"string":return B.basic(ne,Ve,We,we,De,null);case"number":return B.full(ne,Ve,We,we,De,je);default:return A.sqlite3_wasm_db_error(ne,b.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},b.sqlite3_prepare_v2=function V(ne,ce,ee,we,De){return V.length===arguments.length?b.sqlite3_prepare_v3(ne,ce,ee,0,we,De):J(ne,"sqlite3_prepare_v2",V.length)}}{const fe=x.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),B=x.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);b.sqlite3_bind_text=function V(ne,ce,ee,we,De){if(V.length!==arguments.length)return J(b.sqlite3_db_handle(ne),"sqlite3_bind_text",V.length);if(x.isPtr(ee)||ee===null)return fe(ne,ce,ee,we,De);ee instanceof ArrayBuffer?ee=new Uint8Array(ee):Array.isArray(pMem)&&(ee=pMem.join(""));let je,Ve;try{if(A.isSQLableTypedArray(ee))je=x.allocFromTypedArray(ee),Ve=ee.byteLength;else if(typeof ee=="string")[je,Ve]=x.allocCString(ee);else return A.sqlite3_wasm_db_error(b.sqlite3_db_handle(ne),b.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return fe(ne,ce,je,Ve,b.SQLITE_WASM_DEALLOC)}catch(We){return x.dealloc(je),A.sqlite3_wasm_db_error(b.sqlite3_db_handle(ne),We)}},b.sqlite3_bind_blob=function V(ne,ce,ee,we,De){if(V.length!==arguments.length)return J(b.sqlite3_db_handle(ne),"sqlite3_bind_blob",V.length);if(x.isPtr(ee)||ee===null)return B(ne,ce,ee,we,De);ee instanceof ArrayBuffer?ee=new Uint8Array(ee):Array.isArray(ee)&&(ee=ee.join(""));let je,Ve;try{if(A.isBindableTypedArray(ee))je=x.allocFromTypedArray(ee),Ve=we>=0?we:ee.byteLength;else if(typeof ee=="string")[je,Ve]=x.allocCString(ee);else return A.sqlite3_wasm_db_error(b.sqlite3_db_handle(ne),b.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return B(ne,ce,je,Ve,b.SQLITE_WASM_DEALLOC)}catch(We){return x.dealloc(je),A.sqlite3_wasm_db_error(b.sqlite3_db_handle(ne),We)}}}b.sqlite3_config=function(fe,...B){if(arguments.length<2)return b.SQLITE_MISUSE;switch(fe){case b.SQLITE_CONFIG_COVERING_INDEX_SCAN:case b.SQLITE_CONFIG_MEMSTATUS:case b.SQLITE_CONFIG_SMALL_MALLOC:case b.SQLITE_CONFIG_SORTERREF_SIZE:case b.SQLITE_CONFIG_STMTJRNL_SPILL:case b.SQLITE_CONFIG_URI:return x.exports.sqlite3_wasm_config_i(fe,B[0]);case b.SQLITE_CONFIG_LOOKASIDE:return x.exports.sqlite3_wasm_config_ii(fe,B[0],B[1]);case b.SQLITE_CONFIG_MEMDB_MAXSIZE:return x.exports.sqlite3_wasm_config_j(fe,B[0]);case b.SQLITE_CONFIG_GETMALLOC:case b.SQLITE_CONFIG_GETMUTEX:case b.SQLITE_CONFIG_GETPCACHE2:case b.SQLITE_CONFIG_GETPCACHE:case b.SQLITE_CONFIG_HEAP:case b.SQLITE_CONFIG_LOG:case b.SQLITE_CONFIG_MALLOC:case b.SQLITE_CONFIG_MMAP_SIZE:case b.SQLITE_CONFIG_MULTITHREAD:case b.SQLITE_CONFIG_MUTEX:case b.SQLITE_CONFIG_PAGECACHE:case b.SQLITE_CONFIG_PCACHE2:case b.SQLITE_CONFIG_PCACHE:case b.SQLITE_CONFIG_PCACHE_HDRSZ:case b.SQLITE_CONFIG_PMASZ:case b.SQLITE_CONFIG_SERIALIZED:case b.SQLITE_CONFIG_SINGLETHREAD:case b.SQLITE_CONFIG_SQLLOG:case b.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return b.SQLITE_NOTFOUND}};{const fe=new Set;b.sqlite3_auto_extension=function(B){if(B instanceof Function)B=x.installFunction("i(ppp)",B);else if(arguments.length!==1||!x.isPtr(B))return b.SQLITE_MISUSE;const V=x.exports.sqlite3_auto_extension(B);return B!==arguments[0]&&(V===0?fe.add(B):x.uninstallFunction(B)),V},b.sqlite3_cancel_auto_extension=function(B){return!B||arguments.length!==1||!x.isPtr(B)?0:x.exports.sqlite3_cancel_auto_extension(B)},b.sqlite3_reset_auto_extension=function(){x.exports.sqlite3_reset_auto_extension();for(const B of fe)x.uninstallFunction(B);fe.clear()}}const ft=b.sqlite3_vfs_find("kvvfs");if(ft)if(A.isUIThread()){const fe=new b.sqlite3_kvvfs_methods(x.exports.sqlite3_wasm_kvvfs_methods());delete b.sqlite3_kvvfs_methods;const B=x.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,V=x.pstack,ne=ee=>x.peek(ee)===115?sessionStorage:localStorage,ce={xRead:(ee,we,De,je)=>{const Ve=V.pointer,We=x.scopedAllocPush();try{const L=B(ee,we);if(!L)return-3;const oe=x.cstrToJs(L),le=ne(ee).getItem(oe);if(!le)return-1;const Me=le.length;if(je<=0)return Me;if(je===1)return x.poke(De,0),Me;const z=x.scopedAllocCString(le);return je>Me+1&&(je=Me+1),x.heap8u().copyWithin(De,z,z+je-1),x.poke(De+je-1,0),je-1}catch(L){return console.error("kvstorageRead()",L),-2}finally{V.restore(Ve),x.scopedAllocPop(We)}},xWrite:(ee,we,De)=>{const je=V.pointer;try{const Ve=B(ee,we);if(!Ve)return 1;const We=x.cstrToJs(Ve);return ne(ee).setItem(We,x.cstrToJs(De)),0}catch(Ve){return console.error("kvstorageWrite()",Ve),b.SQLITE_IOERR}finally{V.restore(je)}},xDelete:(ee,we)=>{const De=V.pointer;try{const je=B(ee,we);return je?(ne(ee).removeItem(x.cstrToJs(je)),0):1}catch(je){return console.error("kvstorageDelete()",je),b.SQLITE_IOERR}finally{V.restore(De)}}};for(const ee of Object.keys(ce))fe[fe.memberKey(ee)]=x.installFunction(fe.memberSignature(ee),ce[ee])}else b.sqlite3_vfs_unregister(ft);x.xWrap.FuncPtrAdapter.warnOnUse=!0}),globalThis.sqlite3ApiBootstrap.initializers.push(function(f){f.version={libVersion:"3.45.3",libVersionNumber:3045003,sourceId:"2024-04-15 13:34:05 8653b758870e6ef0c98d46b3ace27849054af85da891eb121e9aaa537f1e8355",downloadVersion:3450300}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(f){const y=(...z)=>{throw new f.SQLite3Error(...z)},b=f.capi,x=f.wasm,A=f.util,J=new WeakMap,ie=new WeakMap,$e=(z,te,R)=>{const F=Object.getOwnPropertyDescriptor(z,te);return F?F.value:R},Ue=function(z,te){return te&&(z instanceof B&&(z=z.pointer),y(te,"sqlite3 result code",te+":",z?b.sqlite3_errmsg(z):b.sqlite3_errstr(te))),arguments[0]},Ze=x.installFunction("i(ippp)",(function(z,te,R,F){b.SQLITE_TRACE_STMT===z&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+te+":",x.cstrToJs(F))}).bind({counter:0})),ft=Object.create(null),fe=function z(...te){if(!z._name2vfs){z._name2vfs=Object.create(null);const bt=typeof importScripts=="function"?qt=>y("The VFS for",qt,"is only available in the main window thread."):!1;z._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:bt||(()=>"local")},z._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:bt||(()=>"session")}}const R=z.normalizeArgs(...te);let F=R.filename,re=R.vfs,K=R.flags;(typeof F!="string"&&typeof F!="number"||typeof K!="string"||re&&typeof re!="string"&&typeof re!="number")&&(f.config.error("Invalid DB ctor args",R,arguments),y("Invalid arguments for DB constructor."));let Ne=typeof F=="number"?x.cstrToJs(F):F;const et=z._name2vfs[Ne];et&&(re=et.vfs,F=Ne=et.filename(Ne));let _t,At=0;K.indexOf("c")>=0&&(At|=b.SQLITE_OPEN_CREATE|b.SQLITE_OPEN_READWRITE),K.indexOf("w")>=0&&(At|=b.SQLITE_OPEN_READWRITE),At===0&&(At|=b.SQLITE_OPEN_READONLY),At|=b.SQLITE_OPEN_EXRESCODE;const ot=x.pstack.pointer;try{const bt=x.pstack.allocPtr();let qt=b.sqlite3_open_v2(F,bt,At,re||0);_t=x.peekPtr(bt),Ue(_t,qt),b.sqlite3_extended_result_codes(_t,1),K.indexOf("t")>=0&&b.sqlite3_trace_v2(_t,b.SQLITE_TRACE_STMT,Ze,_t)}catch(bt){throw _t&&b.sqlite3_close_v2(_t),bt}finally{x.pstack.restore(ot)}this.filename=Ne,J.set(this,_t),ie.set(this,Object.create(null));try{const bt=b.sqlite3_js_db_vfs(_t);bt||y("Internal error: cannot get VFS for new db handle.");const qt=ft[bt];qt instanceof Function?qt(this,f):qt&&Ue(_t,b.sqlite3_exec(_t,qt,0,0,0))}catch(bt){throw this.close(),bt}};fe.setVfsPostOpenSql=function(z,te){ft[z]=te},fe.normalizeArgs=function(z=":memory:",te="c",R=null){const F={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(F,arguments[0]),F.flags===void 0&&(F.flags="c"),F.vfs===void 0&&(F.vfs=null),F.filename===void 0&&(F.filename=":memory:")):(F.filename=z,F.flags=te,F.vfs=R),F};const B=function(...z){fe.apply(this,z)};B.dbCtorHelper=fe;const V={null:1,number:2,string:3,boolean:4,blob:5};V.undefined==V.null,x.bigIntEnabled&&(V.bigint=V.number);const ne=function(){V!==arguments[2]&&y(b.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],J.set(this,arguments[1]),this.parameterCount=b.sqlite3_bind_parameter_count(this.pointer)},ce=function(z){return z.pointer||y("DB has been closed."),z},ee=function(z,te){return(te!==(te|0)||te<0||te>=z.columnCount)&&y("Column index",te,"is out of range."),z},we=function(z,te){const R=Object.create(null);switch(R.opt=Object.create(null),te.length){case 1:typeof te[0]=="string"||A.isSQLableTypedArray(te[0])||Array.isArray(te[0])?R.sql=te[0]:te[0]&&typeof te[0]=="object"&&(R.opt=te[0],R.sql=R.opt.sql);break;case 2:R.sql=te[0],R.opt=te[1];break;default:y("Invalid argument count for exec().")}R.sql=A.flexibleString(R.sql),typeof R.sql!="string"&&y("Missing SQL argument or unsupported SQL value type.");const F=R.opt;switch(F.returnValue){case"resultRows":F.resultRows||(F.resultRows=[]),R.returnVal=()=>F.resultRows;break;case"saveSql":F.saveSql||(F.saveSql=[]),R.returnVal=()=>F.saveSql;break;case void 0:case"this":R.returnVal=()=>z;break;default:y("Invalid returnValue value:",F.returnValue)}if(!F.callback&&!F.returnValue&&F.rowMode!==void 0&&(F.resultRows||(F.resultRows=[]),R.returnVal=()=>F.resultRows),F.callback||F.resultRows)switch(F.rowMode===void 0?"array":F.rowMode){case"object":R.cbArg=re=>re.get(Object.create(null));break;case"array":R.cbArg=re=>re.get([]);break;case"stmt":Array.isArray(F.resultRows)&&y("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),R.cbArg=re=>re;break;default:if(A.isInt32(F.rowMode)){R.cbArg=re=>re.get(F.rowMode);break}else if(typeof F.rowMode=="string"&&F.rowMode.length>1&&F.rowMode[0]==="$"){const re=F.rowMode.substr(1);R.cbArg=K=>{const Ne=K.get(Object.create(null))[re];return Ne===void 0?y(b.SQLITE_NOTFOUND,"exec(): unknown result column:",re):Ne};break}y("Invalid rowMode:",F.rowMode)}return R},De=(z,te,R,...F)=>{const re=z.prepare(te);try{const K=re.bind(R).step()?re.get(...F):void 0;return re.reset(),K}finally{re.finalize()}},je=(z,te,R,F)=>z.exec({sql:te,bind:R,rowMode:F,returnValue:"resultRows"});B.checkRc=(z,te)=>Ue(z,te),B.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return ce(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const z=this.pointer;if(Object.keys(ie.get(this)).forEach((te,R)=>{if(R&&R.pointer)try{R.finalize()}catch{}}),J.delete(this),ie.delete(this),b.sqlite3_close_v2(z),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(z=!1,te=!1){const R=ce(this).pointer;return z?te?b.sqlite3_total_changes64(R):b.sqlite3_total_changes(R):te?b.sqlite3_changes64(R):b.sqlite3_changes(R)},dbFilename:function(z="main"){return b.sqlite3_db_filename(ce(this).pointer,z)},dbName:function(z=0){return b.sqlite3_db_name(ce(this).pointer,z)},dbVfsName:function(z=0){let te;const R=b.sqlite3_js_db_vfs(ce(this).pointer,z);if(R){const F=new b.sqlite3_vfs(R);try{te=x.cstrToJs(F.$zName)}finally{F.dispose()}}return te},prepare:function(z){ce(this);const te=x.pstack.pointer;let R,F;try{R=x.pstack.alloc(8),B.checkRc(this,b.sqlite3_prepare_v2(this.pointer,z,-1,R,null)),F=x.peekPtr(R)}finally{x.pstack.restore(te)}F||y("Cannot prepare empty SQL.");const re=new ne(this,F,V);return ie.get(this)[F]=re,re},exec:function(){ce(this);const z=we(this,arguments);if(!z.sql)return y("exec() requires an SQL string.");const te=z.opt,R=te.callback,F=Array.isArray(te.resultRows)?te.resultRows:void 0;let re,K=te.bind,Ne=!!(z.cbArg||te.columnNames||F);const et=x.scopedAllocPush(),_t=Array.isArray(te.saveSql)?te.saveSql:void 0;try{const At=A.isSQLableTypedArray(z.sql);let ot=At?z.sql.byteLength:x.jstrlen(z.sql);const bt=x.scopedAlloc(2*x.ptrSizeof+(ot+1)),qt=bt+x.ptrSizeof;let Lt=qt+x.ptrSizeof;const Yt=Lt+ot;for(At?x.heap8().set(z.sql,Lt):x.jstrcpy(z.sql,x.heap8(),Lt,ot,!1),x.poke(Lt+ot,0);Lt&&x.peek(Lt,"i8");){x.pokePtr([bt,qt],0),B.checkRc(this,b.sqlite3_prepare_v3(this.pointer,Lt,ot,0,bt,qt));const Jt=x.peekPtr(bt);if(Lt=x.peekPtr(qt),ot=Yt-Lt,!!Jt){if(_t&&_t.push(b.sqlite3_sql(Jt).trim()),re=new ne(this,Jt,V),K&&re.parameterCount&&(re.bind(K),K=null),Ne&&re.columnCount){let hn=Array.isArray(te.columnNames)?0:1;if(Ne=!1,z.cbArg||F){for(;re.step();re._lockedByExec=!1){hn++===0&&re.getColumnNames(te.columnNames),re._lockedByExec=!0;const Ft=z.cbArg(re);if(F&&F.push(Ft),R&&R.call(te,Ft,re)===!1)break}re._lockedByExec=!1}hn===0&&re.getColumnNames(te.columnNames)}else re.step();re.reset().finalize(),re=null}}}finally{x.scopedAllocPop(et),re&&(delete re._lockedByExec,re.finalize())}return z.returnVal()},createFunction:function(te,R,F){const re=Ft=>Ft instanceof Function;switch(arguments.length){case 1:F=te,te=F.name,R=F.xFunc||0;break;case 2:re(R)||(F=R,R=F.xFunc||0);break}F||(F={}),typeof te!="string"&&y("Invalid arguments: missing function name.");let K=F.xStep||0,Ne=F.xFinal||0;const et=F.xValue||0,_t=F.xInverse||0;let At;re(R)?(At=!1,(re(K)||re(Ne))&&y("Ambiguous arguments: scalar or aggregate?"),K=Ne=null):re(K)?(re(Ne)||y("Missing xFinal() callback for aggregate or window UDF."),R=null):re(Ne)?y("Missing xStep() callback for aggregate or window UDF."):y("Missing function-type properties."),At===!1?(re(et)||re(_t))&&y("xValue and xInverse are not permitted for non-window UDFs."):re(et)?(re(_t)||y("xInverse must be provided if xValue is."),At=!0):re(_t)&&y("xValue must be provided if xInverse is.");const ot=F.pApp;ot!=null&&(typeof ot!="number"||!A.isInt32(ot))&&y("Invalid value for pApp property. Must be a legal WASM pointer value.");const bt=F.xDestroy||0;bt&&!re(bt)&&y("xDestroy property must be a function.");let qt=0;$e(F,"deterministic")&&(qt|=b.SQLITE_DETERMINISTIC),$e(F,"directOnly")&&(qt|=b.SQLITE_DIRECTONLY),$e(F,"innocuous")&&(qt|=b.SQLITE_INNOCUOUS),te=te.toLowerCase();const Lt=R||K,Yt=$e(F,"arity"),Jt=typeof Yt=="number"?Yt:Lt.length?Lt.length-1:0;let hn;return At?hn=b.sqlite3_create_window_function(this.pointer,te,Jt,b.SQLITE_UTF8|qt,ot||0,K,Ne,et,_t,bt):hn=b.sqlite3_create_function_v2(this.pointer,te,Jt,b.SQLITE_UTF8|qt,ot||0,R,K,Ne,bt),B.checkRc(this,hn),this},selectValue:function(z,te,R){return De(this,z,te,0,R)},selectValues:function(z,te,R){const F=this.prepare(z),re=[];try{for(F.bind(te);F.step();)re.push(F.get(0,R));F.reset()}finally{F.finalize()}return re},selectArray:function(z,te){return De(this,z,te,[])},selectObject:function(z,te){return De(this,z,te,{})},selectArrays:function(z,te){return je(this,z,te,"array")},selectObjects:function(z,te){return je(this,z,te,"object")},openStatementCount:function(){return this.pointer?Object.keys(ie.get(this)).length:0},transaction:function(z){let te="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&y(b.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),te+=" "+arguments[0],z=arguments[1]),ce(this).exec(te);try{const R=z(this);return this.exec("COMMIT"),R}catch(R){throw this.exec("ROLLBACK"),R}},savepoint:function(z){ce(this).exec("SAVEPOINT oo1");try{const te=z(this);return this.exec("RELEASE oo1"),te}catch(te){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),te}},checkRc:function(z){return Ue(this,z)}};const Ve=function(z){return z.pointer||y("Stmt has been closed."),z},We=function(z){let te=V[z==null?"null":typeof z];switch(te){case V.boolean:case V.null:case V.number:case V.string:return te;case V.bigint:if(x.bigIntEnabled)return te;default:return A.isBindableTypedArray(z)?V.blob:void 0}},L=function(z){return We(z)||y("Unsupported bind() argument type:",typeof z)},oe=function(z,te){const R=typeof te=="number"?te:b.sqlite3_bind_parameter_index(z.pointer,te);return R===0||!A.isInt32(R)?y("Invalid bind() parameter name: "+te):(R<1||R>z.parameterCount)&&y("Bind index",te,"is out of range."),R},le=function(z,te){return z._lockedByExec&&y("Operation is illegal when statement is locked:",te),z},Me=function z(te,R,F,re){le(Ve(te),"bind()"),z._||(z._tooBigInt=Ne=>y("BigInt value is too big to store without precision loss:",Ne),z._={string:function(Ne,et,_t,At){const[ot,bt]=x.allocCString(_t,!0);return(At?b.sqlite3_bind_blob:b.sqlite3_bind_text)(Ne.pointer,et,ot,bt,b.SQLITE_WASM_DEALLOC)}}),L(re),R=oe(te,R);let K=0;switch(re==null?V.null:F){case V.null:K=b.sqlite3_bind_null(te.pointer,R);break;case V.string:K=z._.string(te,R,re,!1);break;case V.number:{let Ne;A.isInt32(re)?Ne=b.sqlite3_bind_int:typeof re=="bigint"?A.bigIntFits64(re)?x.bigIntEnabled?Ne=b.sqlite3_bind_int64:A.bigIntFitsDouble(re)?(re=Number(re),Ne=b.sqlite3_bind_double):z._tooBigInt(re):z._tooBigInt(re):(re=Number(re),x.bigIntEnabled&&Number.isInteger(re)?Ne=b.sqlite3_bind_int64:Ne=b.sqlite3_bind_double),K=Ne(te.pointer,R,re);break}case V.boolean:K=b.sqlite3_bind_int(te.pointer,R,re?1:0);break;case V.blob:{if(typeof re=="string"){K=z._.string(te,R,re,!0);break}else re instanceof ArrayBuffer?re=new Uint8Array(re):A.isBindableTypedArray(re)||y("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const Ne=x.alloc(re.byteLength||1);x.heap8().set(re.byteLength?re:[0],Ne),K=b.sqlite3_bind_blob(te.pointer,R,Ne,re.byteLength,b.SQLITE_WASM_DEALLOC);break}default:f.config.warn("Unsupported bind() argument type:",re),y("Unsupported bind() argument type: "+typeof re)}return K&&B.checkRc(te.db.pointer,K),te._mayGet=!1,te};ne.prototype={finalize:function(){if(this.pointer){le(this,"finalize()");const z=b.sqlite3_finalize(this.pointer);return delete ie.get(this.db)[this.pointer],J.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,z}},clearBindings:function(){return le(Ve(this),"clearBindings()"),b.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(z){le(this,"reset()"),z&&this.clearBindings();const te=b.sqlite3_reset(Ve(this).pointer);return this._mayGet=!1,Ue(this.db,te),this},bind:function(){Ve(this);let z,te;switch(arguments.length){case 1:z=1,te=arguments[0];break;case 2:z=arguments[0],te=arguments[1];break;default:y("Invalid bind() arguments.")}return te===void 0?this:(this.parameterCount||y("This statement has no bindable parameters."),this._mayGet=!1,te===null?Me(this,z,V.null,te):Array.isArray(te)?(arguments.length!==1&&y("When binding an array, an index argument is not permitted."),te.forEach((R,F)=>Me(this,F+1,L(R),R)),this):(te instanceof ArrayBuffer&&(te=new Uint8Array(te)),typeof te=="object"&&!A.isBindableTypedArray(te)?(arguments.length!==1&&y("When binding an object, an index argument is not permitted."),Object.keys(te).forEach(R=>Me(this,R,L(te[R]),te[R])),this):Me(this,z,L(te),te)))},bindAsBlob:function(z,te){Ve(this),arguments.length===1&&(te=z,z=1);const R=L(te);return V.string!==R&&V.blob!==R&&V.null!==R&&y("Invalid value type for bindAsBlob()"),Me(this,z,V.blob,te)},step:function(){le(this,"step()");const z=b.sqlite3_step(Ve(this).pointer);switch(z){case b.SQLITE_DONE:return this._mayGet=!1;case b.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,f.config.warn("sqlite3_step() rc=",z,b.sqlite3_js_rc_str(z),"SQL =",b.sqlite3_sql(this.pointer)),B.checkRc(this.db.pointer,z)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const z=this.step();return this.reset(),z}finally{try{this.finalize()}catch{}}},get:function(z,te){if(Ve(this)._mayGet||y("Stmt.step() has not (recently) returned true."),Array.isArray(z)){let R=0;const F=this.columnCount;for(;R<F;)z[R]=this.get(R++);return z}else if(z&&typeof z=="object"){let R=0;const F=this.columnCount;for(;R<F;)z[b.sqlite3_column_name(this.pointer,R)]=this.get(R++);return z}switch(ee(this,z),te===void 0?b.sqlite3_column_type(this.pointer,z):te){case b.SQLITE_NULL:return null;case b.SQLITE_INTEGER:if(x.bigIntEnabled){const R=b.sqlite3_column_int64(this.pointer,z);return R>=Number.MIN_SAFE_INTEGER&&R<=Number.MAX_SAFE_INTEGER?Number(R).valueOf():R}else{const R=b.sqlite3_column_double(this.pointer,z);return(R>Number.MAX_SAFE_INTEGER||R<Number.MIN_SAFE_INTEGER)&&y("Integer is out of range for JS integer range: "+R),A.isInt32(R)?R|0:R}case b.SQLITE_FLOAT:return b.sqlite3_column_double(this.pointer,z);case b.SQLITE_TEXT:return b.sqlite3_column_text(this.pointer,z);case b.SQLITE_BLOB:{const R=b.sqlite3_column_bytes(this.pointer,z),F=b.sqlite3_column_blob(this.pointer,z),re=new Uint8Array(R);return R&&re.set(x.heap8u().slice(F,F+R),0),R&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(re.buffer),re}default:y("Don't know how to translate","type of result column #"+z+".")}y("Not reached.")},getInt:function(z){return this.get(z,b.SQLITE_INTEGER)},getFloat:function(z){return this.get(z,b.SQLITE_FLOAT)},getString:function(z){return this.get(z,b.SQLITE_TEXT)},getBlob:function(z){return this.get(z,b.SQLITE_BLOB)},getJSON:function(z){const te=this.get(z,b.SQLITE_STRING);return te===null?te:JSON.parse(te)},getColumnName:function(z){return b.sqlite3_column_name(ee(Ve(this),z).pointer,z)},getColumnNames:function(z=[]){ee(Ve(this),0);const te=this.columnCount;for(let R=0;R<te;++R)z.push(b.sqlite3_column_name(this.pointer,R));return z},getParamIndex:function(z){return Ve(this).parameterCount?b.sqlite3_bind_parameter_index(this.pointer,z):void 0}};{const z={enumerable:!0,get:function(){return J.get(this)},set:()=>y("The pointer property is read-only.")};Object.defineProperty(ne.prototype,"pointer",z),Object.defineProperty(B.prototype,"pointer",z)}if(Object.defineProperty(ne.prototype,"columnCount",{enumerable:!1,get:function(){return b.sqlite3_column_count(this.pointer)},set:()=>y("The columnCount property is read-only.")}),f.oo1={DB:B,Stmt:ne},A.isUIThread()){f.oo1.JsStorageDb=function(te="session"){te!=="session"&&te!=="local"&&y("JsStorageDb db name must be one of 'session' or 'local'."),fe.call(this,{filename:te,flags:"c",vfs:"kvvfs"})};const z=f.oo1.JsStorageDb;z.prototype=Object.create(B.prototype),z.clearStorage=b.sqlite3_js_kvvfs_clear,z.prototype.clearStorage=function(){return z.clearStorage(ce(this).filename)},z.storageSize=b.sqlite3_js_kvvfs_size,z.prototype.storageSize=function(){return z.storageSize(ce(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(f){f.initWorker1API=(function(){const y=(...B)=>{throw new Error(B.join(" "))};globalThis.WorkerGlobalScope instanceof Function||y("initWorker1API() must be run from a Worker thread.");const b=this.sqlite3||y("Missing this.sqlite3 object."),x=b.oo1.DB,A=function(B){let V=J.idMap.get(B);return V||(V="db#"+ ++J.idSeq+"@"+B.pointer,J.idMap.set(B,V),V)},J={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(B){const V=new x(B);return this.dbs[A(V)]=V,this.dbList.indexOf(V)<0&&this.dbList.push(V),V},close:function(B,V){if(B){delete this.dbs[A(B)];const ne=B.filename,ce=b.wasm.sqlite3_wasm_db_vfs(B.pointer,0);B.close();const ee=this.dbList.indexOf(B);ee>=0&&this.dbList.splice(ee,1),V&&ne&&ce&&b.wasm.sqlite3_wasm_vfs_unlink(ce,ne)}},post:function(B,V){V&&V.length?(globalThis.postMessage(B,Array.from(V)),V.length=0):globalThis.postMessage(B)},dbs:Object.create(null),getDb:function(B,V=!0){return this.dbs[B]||(V?y("Unknown (or closed) DB ID:",B):void 0)}},ie=function(B=J.dbList[0]){return B&&B.pointer?B:y("DB is not opened.")},$e=function(B,V=!0){const ne=J.getDb(B.dbId,!1)||J.dbList[0];return V?ie(ne):ne},Ue=function(){return J.dbList[0]&&A(J.dbList[0])},Ze=function(B){const V=/^file:.+(vfs=(\w+))/.exec(B);return b.capi.sqlite3_vfs_find(V?V[2]:0)},ft=B=>B===""||B[0]===":",fe={open:function(B){const V=Object.create(null),ne=B.args||Object.create(null);ne.simulateError&&y("Throwing because of simulateError flag.");const ce=Object.create(null);let ee,we;if(V.vfs=ne.vfs,ft(ne.filename)?V.filename=ne.filename||"":(V.filename=ne.filename,ee=ne.byteArray,ee&&(we=Ze(ne.filename))),we){let je;try{je=b.wasm.allocFromTypedArray(ee);const Ve=b.wasm.sqlite3_wasm_vfs_create_file(we,V.filename,je,ee.byteLength);Ve&&b.SQLite3Error.toss(Ve)}catch(Ve){throw new b.SQLite3Error(Ve.name+" creating "+ne.filename+": "+Ve.message,{cause:Ve})}finally{je&&b.wasm.dealloc(je)}}const De=J.open(V);return ce.filename=De.filename,ce.persistent=!!b.capi.sqlite3_js_db_uses_vfs(De.pointer,"opfs"),ce.dbId=A(De),ce.vfs=De.dbVfsName(),ce},close:function(B){const V=$e(B,!1),ne={filename:V&&V.filename};if(V){const ce=B.args&&typeof B.args=="object"?!!B.args.unlink:!1;J.close(V,ce)}return ne},exec:function(B){const V=typeof B.args=="string"?{sql:B.args}:B.args||Object.create(null);V.rowMode==="stmt"?y("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):V.sql||y("'exec' requires input SQL.");const ne=$e(B);(V.callback||Array.isArray(V.resultRows))&&(ne._blobXfer=J.xfer);const ce=V.callback;let ee=0;const we=!!V.columnNames;typeof ce=="string"&&(we||(V.columnNames=[]),V.callback=function(De,je){J.post({type:ce,columnNames:V.columnNames,rowNumber:++ee,row:De},J.xfer)});try{const De=V.countChanges?ne.changes(!0,V.countChanges===64):void 0;ne.exec(V),De!==void 0&&(V.changeCount=ne.changes(!0,V.countChanges===64)-De),V.callback instanceof Function&&(V.callback=ce,J.post({type:ce,columnNames:V.columnNames,rowNumber:null,row:void 0}))}finally{delete ne._blobXfer,V.callback&&(V.callback=ce)}return V},"config-get":function(){const B=Object.create(null),V=b.config;return["bigIntEnabled"].forEach(function(ne){Object.getOwnPropertyDescriptor(V,ne)&&(B[ne]=V[ne])}),B.version=b.version,B.vfsList=b.capi.sqlite3_js_vfs_list(),B.opfsEnabled=!!b.opfs,B},export:function(B){const V=$e(B),ne={byteArray:b.capi.sqlite3_js_db_export(V.pointer),filename:V.filename,mimetype:"application/x-sqlite3"};return J.xfer.push(ne.byteArray.buffer),ne},toss:function(B){y("Testing worker exception")},"opfs-tree":async function(B){return b.opfs||y("OPFS support is unavailable."),await b.opfs.treeList()}};globalThis.onmessage=async function(B){B=B.data;let V,ne=B.dbId,ce=B.type;const ee=performance.now();try{fe.hasOwnProperty(ce)&&fe[ce]instanceof Function?V=await fe[ce](B):y("Unknown db worker message type:",B.type)}catch(we){ce="error",V={operation:B.type,message:we.message,errorClass:we.name,input:B},we.stack&&(V.stack=typeof we.stack=="string"?we.stack.split(/\n\s*/):we.stack)}ne||(ne=V.dbId||Ue()),J.post({type:ce,dbId:ne,messageId:B.messageId,workerReceivedTime:ee,workerRespondTime:performance.now(),departureTime:B.departureTime,result:V},J.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:f})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(f){const y=f.wasm,b=f.capi,x=f.util.toss3,A=Object.create(null),J=Object.create(null),ie=f.StructBinder;f.vfs=A,f.vtab=J;const $e=b.sqlite3_index_info;$e.prototype.nthConstraint=function(B,V=!1){if(B<0||B>=this.$nConstraint)return!1;const ne=this.$aConstraint+$e.sqlite3_index_constraint.structInfo.sizeof*B;return V?ne:new $e.sqlite3_index_constraint(ne)},$e.prototype.nthConstraintUsage=function(B,V=!1){if(B<0||B>=this.$nConstraint)return!1;const ne=this.$aConstraintUsage+$e.sqlite3_index_constraint_usage.structInfo.sizeof*B;return V?ne:new $e.sqlite3_index_constraint_usage(ne)},$e.prototype.nthOrderBy=function(B,V=!1){if(B<0||B>=this.$nOrderBy)return!1;const ne=this.$aOrderBy+$e.sqlite3_index_orderby.structInfo.sizeof*B;return V?ne:new $e.sqlite3_index_orderby(ne)};const Ue=function B(V,ne,ce,ee=B.installMethodArgcCheck){if(V instanceof ie.StructType?!(ce instanceof Function)&&!y.isPtr(ce)&&x("Usage errror: expecting a Function or WASM pointer to one."):x("Usage error: target object is-not-a StructType."),arguments.length===1)return(Ve,We)=>B(V,Ve,We,ee);B.argcProxy||(B.argcProxy=function(Ve,We,L,oe){return function(...le){return L.length!==arguments.length&&x("Argument mismatch for",Ve.structInfo.name+"::"+We+": Native signature is:",oe),L.apply(this,le)}},B.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((Ve,We)=>{if(typeof Ve=="number")try{y.uninstallFunction(Ve)}catch{}}),delete this.ondispose.__removeFuncList)});const we=V.memberSignature(ne);we.length<2&&x("Member",ne,"does not have a function pointer signature:",we);const De=V.memberKey(ne),je=ee&&!y.isPtr(ce)?B.argcProxy(V,De,ce,we):ce;if(y.isPtr(je))je&&!y.functionEntry(je)&&x("Pointer",je,"is not a WASM function table entry."),V[De]=je;else{const Ve=y.installFunction(je,V.memberSignature(ne,!0));V[De]=Ve,(!V.ondispose||!V.ondispose.__removeFuncList)&&(V.addOnDispose("ondispose.__removeFuncList handler",B.removeFuncList),V.ondispose.__removeFuncList=[]),V.ondispose.__removeFuncList.push(De,Ve)}return(Ve,We)=>B(V,Ve,We,ee)};Ue.installMethodArgcCheck=!1;const Ze=function(B,V,ne=Ue.installMethodArgcCheck){const ce=new Map;for(const ee of Object.keys(V)){const we=V[ee],De=ce.get(we);if(De){const je=B.memberKey(ee);B[je]=B[B.memberKey(De)]}else Ue(B,ee,we,ne),ce.set(we,ee)}return B};ie.StructType.prototype.installMethod=function(V,ne,ce=Ue.installMethodArgcCheck){return arguments.length<3&&V&&typeof V=="object"?Ze(this,...arguments):Ue(this,...arguments)},ie.StructType.prototype.installMethods=function(B,V=Ue.installMethodArgcCheck){return Ze(this,B,V)},b.sqlite3_vfs.prototype.registerVfs=function(B=!1){this instanceof f.capi.sqlite3_vfs||x("Expecting a sqlite3_vfs-type argument.");const V=b.sqlite3_vfs_register(this,B?1:0);return V&&x("sqlite3_vfs_register(",this,") failed with rc",V),this.pointer!==b.sqlite3_vfs_find(this.$zName)&&x("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},A.installVfs=function(B){let V=0;const ne=["io","vfs"];for(const ce of ne){const ee=B[ce];ee&&(++V,Ze(ee.struct,ee.methods,!!ee.applyArgcCheck),ce==="vfs"&&(!ee.struct.$zName&&typeof ee.name=="string"&&ee.struct.addOnDispose(ee.struct.$zName=y.allocCString(ee.name)),ee.struct.registerVfs(!!ee.asDefault)))}return V||x("Misuse: installVfs() options object requires at least","one of:",ne),this};const ft=function(B,V){return(function(ne,ce=!1){if(arguments.length===0&&(ne=new V),ne instanceof V)return this.set(ne.pointer,ne),ne;y.isPtr(ne)||f.SQLite3Error.toss("Invalid argument to",B+"()");let ee=this.get(ne);return ce&&this.delete(ne),ee}).bind(new Map)},fe=function(B,V){const ne=ft(B,V);return Object.assign(Object.create(null),{StructType:V,create:ce=>{const ee=ne();return y.pokePtr(ce,ee.pointer),ee},get:ce=>ne(ce),unget:ce=>ne(ce,!0),dispose:ce=>{const ee=ne(ce,!0);ee&&ee.dispose()}})};J.xVtab=fe("xVtab",b.sqlite3_vtab),J.xCursor=fe("xCursor",b.sqlite3_vtab_cursor),J.xIndexInfo=B=>new b.sqlite3_index_info(B),J.xError=function B(V,ne,ce){if(B.errorReporter instanceof Function)try{B.errorReporter("sqlite3_module::"+V+"(): "+ne.message)}catch{}let ee;return ne instanceof f.WasmAllocError?ee=b.SQLITE_NOMEM:arguments.length>2?ee=ce:ne instanceof f.SQLite3Error&&(ee=ne.resultCode),ee||b.SQLITE_ERROR},J.xError.errorReporter=console.error.bind(console),J.xRowid=(B,V)=>y.poke(B,V,"i64"),J.setupModule=function(B){let V=!1;const ne=this instanceof b.sqlite3_module?this:B.struct||(V=new b.sqlite3_module);try{const ce=B.methods||x("Missing 'methods' object.");for(const ee of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const we=ee[0],De=ee[1];ce[we]===!0?ce[we]=ce[De]:ce[De]===!0&&(ce[De]=ce[we])}if(B.catchExceptions){const ee=function(je,Ve){return["xConnect","xCreate"].indexOf(je)>=0?function(We,L,oe,le,Me,z){try{return Ve(...arguments)||0}catch(te){return te instanceof f.WasmAllocError||(y.dealloc(y.peekPtr(z)),y.pokePtr(z,y.allocCString(te.message))),J.xError(je,te)}}:function(...We){try{return Ve(...We)||0}catch(L){return J.xError(je,L)}}},we=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],De=Object.create(null);for(const je of we){const Ve=ce[je];if(Ve instanceof Function)je==="xConnect"&&ce.xCreate===Ve?De[je]=ce.xCreate:je==="xCreate"&&ce.xConnect===Ve?De[je]=ce.xConnect:De[je]=ee(je,Ve);else continue}Ze(ne,De,!1)}else Ze(ne,ce,!!B.applyArgcCheck);if(ne.$iVersion===0){let ee;typeof B.iVersion=="number"?ee=B.iVersion:ne.$xShadowName?ee=3:ne.$xSavePoint||ne.$xRelease||ne.$xRollbackTo?ee=2:ee=1,ne.$iVersion=ee}}catch(ce){throw V&&V.dispose(),ce}return ne},b.sqlite3_module.prototype.setupModule=function(B){return J.setupModule.call(this,B)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(f){const y=function b(x){var ie;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((ie=navigator==null?void 0:navigator.storage)!=null&&ie.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!x||typeof x!="object")&&(x=Object.create(null));const A=new URL(globalThis.location.href).searchParams;return A.has("opfs-disable")?Promise.resolve(f):(x.verbose===void 0&&(x.verbose=A.has("opfs-verbose")?+A.get("opfs-verbose")||2:1),x.sanityChecks===void 0&&(x.sanityChecks=A.has("opfs-sanity-check")),x.proxyUri===void 0&&(x.proxyUri=b.defaultProxyUri),typeof x.proxyUri=="function"&&(x.proxyUri=x.proxyUri()),new Promise(function($e,Ue){const Ze=[f.config.error,f.config.warn,f.config.log],ft=(ge,...Te)=>{x.verbose>ge&&Ze[ge]("OPFS syncer:",...Te)},fe=(...ge)=>ft(2,...ge),B=(...ge)=>ft(1,...ge),V=(...ge)=>ft(0,...ge),ne=f.util.toss,ce=f.capi,ee=f.util,we=f.wasm,De=ce.sqlite3_vfs,je=ce.sqlite3_file,Ve=ce.sqlite3_io_methods,We=Object.create(null),L=()=>{var ge;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((ge=navigator==null?void 0:navigator.storage)==null?void 0:ge.getDirectory)};We.metrics={dump:function(){let ge,Te=0,Ce=0,Ke=0;for(ge in K.opIds){const Ge=Ne[ge];Te+=Ge.count,Ce+=Ge.time,Ke+=Ge.wait,Ge.avgTime=Ge.count&&Ge.time?Ge.time/Ge.count:0,Ge.avgWait=Ge.count&&Ge.wait?Ge.wait/Ge.count:0}f.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Ne,`
Total of`,Te,"op(s) for",Ce,"ms (incl. "+Ke+" ms of waiting on the async side)"),f.config.log("Serialization metrics:",Ne.s11n),R.postMessage({type:"opfs-async-metrics"})},reset:function(){let ge;const Te=Ke=>Ke.count=Ke.time=Ke.wait=0;for(ge in K.opIds)Te(Ne[ge]=Object.create(null));let Ce=Ne.s11n=Object.create(null);Ce=Ce.serialize=Object.create(null),Ce.count=Ce.time=0,Ce=Ne.s11n.deserialize=Object.create(null),Ce.count=Ce.time=0}};const oe=new Ve,le=new De().addOnDispose(()=>oe.dispose());let Me;const z=ge=>(Me=!0,le.dispose(),Ue(ge)),te=()=>(Me=!1,$e(f)),R=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-CP8YxqRt.js",import.meta.url));setTimeout(()=>{Me===void 0&&z(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),R._originalOnError=R.onerror,R.onerror=function(ge){V("Error initializing OPFS asyncer:",ge),z(new Error("Loading OPFS async Worker failed for unknown reasons."))};const F=ce.sqlite3_vfs_find(null),re=F?new De(F):null;oe.$iVersion=1,le.$iVersion=2,le.$szOsFile=ce.sqlite3_file.structInfo.sizeof,le.$mxPathname=1024,le.$zName=we.allocCString("opfs"),le.$xDlOpen=le.$xDlError=le.$xDlSym=le.$xDlClose=null,le.addOnDispose("$zName",le.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const K=Object.create(null);K.verbose=x.verbose,K.littleEndian=(()=>{const ge=new ArrayBuffer(2);return new DataView(ge).setInt16(0,256,!0),new Int16Array(ge)[0]===256})(),K.asyncIdleWaitTime=150,K.asyncS11nExceptions=1,K.fileBufferSize=1024*64,K.sabS11nOffset=K.fileBufferSize,K.sabS11nSize=le.$mxPathname*2,K.sabIO=new SharedArrayBuffer(K.fileBufferSize+K.sabS11nSize),K.opIds=Object.create(null);const Ne=Object.create(null);{let ge=0;K.opIds.whichOp=ge++,K.opIds.rc=ge++,K.opIds.xAccess=ge++,K.opIds.xClose=ge++,K.opIds.xDelete=ge++,K.opIds.xDeleteNoWait=ge++,K.opIds.xFileSize=ge++,K.opIds.xLock=ge++,K.opIds.xOpen=ge++,K.opIds.xRead=ge++,K.opIds.xSleep=ge++,K.opIds.xSync=ge++,K.opIds.xTruncate=ge++,K.opIds.xUnlock=ge++,K.opIds.xWrite=ge++,K.opIds.mkdir=ge++,K.opIds["opfs-async-metrics"]=ge++,K.opIds["opfs-async-shutdown"]=ge++,K.opIds.retry=ge++,K.sabOP=new SharedArrayBuffer(ge*4),We.metrics.reset()}K.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(ge=>{(K.sq3Codes[ge]=ce[ge])===void 0&&ne("Maintenance required: not found:",ge)}),K.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});const et=(ge,...Te)=>{const Ce=K.opIds[ge]||ne("Invalid op ID:",ge);K.s11n.serialize(...Te),Atomics.store(K.sabOPView,K.opIds.rc,-1),Atomics.store(K.sabOPView,K.opIds.whichOp,Ce),Atomics.notify(K.sabOPView,K.opIds.whichOp);const Ke=performance.now();Atomics.wait(K.sabOPView,K.opIds.rc,-1);const Ge=Atomics.load(K.sabOPView,K.opIds.rc);if(Ne[ge].wait+=performance.now()-Ke,Ge&&K.asyncS11nExceptions){const tt=K.s11n.deserialize();tt&&V(ge+"() async error:",...tt)}return Ge};We.debug={asyncShutdown:()=>{B("Shutting down OPFS async listener. The OPFS VFS will no longer work."),et("opfs-async-shutdown")},asyncRestart:()=>{B("Attempting to restart OPFS VFS async listener. Might work, might not."),R.postMessage({type:"opfs-async-restart"})}};const _t=()=>{if(K.s11n)return K.s11n;const ge=new TextDecoder,Te=new TextEncoder("utf-8"),Ce=new Uint8Array(K.sabIO,K.sabS11nOffset,K.sabS11nSize),Ke=new DataView(K.sabIO,K.sabS11nOffset,K.sabS11nSize);K.s11n=Object.create(null);const Ge=Object.create(null);Ge.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},Ge.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},Ge.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},Ge.string={id:4};const tt=G=>Ge[typeof G]||ne("Maintenance required: this value type cannot be serialized.",G),Fe=G=>{switch(G){case Ge.number.id:return Ge.number;case Ge.bigint.id:return Ge.bigint;case Ge.boolean.id:return Ge.boolean;case Ge.string.id:return Ge.string;default:ne("Invalid type ID:",G)}};return K.s11n.deserialize=function(G=!1){++Ne.s11n.deserialize.count;const Q=performance.now(),me=Ce[0],be=me?[]:null;if(me){const Ee=[];let Xe=1,pt,It,jt;for(pt=0;pt<me;++pt,++Xe)Ee.push(Fe(Ce[Xe]));for(pt=0;pt<me;++pt){const En=Ee[pt];En.getter?(jt=Ke[En.getter](Xe,K.littleEndian),Xe+=En.size):(It=Ke.getInt32(Xe,K.littleEndian),Xe+=4,jt=ge.decode(Ce.slice(Xe,Xe+It)),Xe+=It),be.push(jt)}}return G&&(Ce[0]=0),Ne.s11n.deserialize.time+=performance.now()-Q,be},K.s11n.serialize=function(...G){const Q=performance.now();if(++Ne.s11n.serialize.count,G.length){const me=[];let be=0,Ee=1;for(Ce[0]=G.length&255;be<G.length;++be,++Ee)me.push(tt(G[be])),Ce[Ee]=me[be].id;for(be=0;be<G.length;++be){const Xe=me[be];if(Xe.setter)Ke[Xe.setter](Ee,G[be],K.littleEndian),Ee+=Xe.size;else{const pt=Te.encode(G[be]);Ke.setInt32(Ee,pt.byteLength,K.littleEndian),Ee+=4,Ce.set(pt,Ee),Ee+=pt.byteLength}}}else Ce[0]=0;Ne.s11n.serialize.time+=performance.now()-Q},K.s11n},At=function ge(Te=16){ge._chars||(ge._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",ge._n=ge._chars.length);const Ce=[];let Ke=0;for(;Ke<Te;++Ke){const Ge=Math.random()*(ge._n*64)%ge._n|0;Ce[Ke]=ge._chars[Ge]}return Ce.join("")},ot=Object.create(null),bt=Object.create(null);bt.op=void 0,bt.start=void 0;const qt=ge=>{bt.start=performance.now(),bt.op=ge,++Ne[ge].count},Lt=()=>Ne[bt.op].time+=performance.now()-bt.start,Yt={xCheckReservedLock:function(ge,Te){const Ce=ot[ge];return we.poke(Te,Ce.lockType?1:0,"i32"),0},xClose:function(ge){qt("xClose");let Te=0;const Ce=ot[ge];return Ce&&(delete ot[ge],Te=et("xClose",ge),Ce.sq3File&&Ce.sq3File.dispose()),Lt(),Te},xDeviceCharacteristics:function(ge){return ce.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(ge,Te,Ce){return ce.SQLITE_NOTFOUND},xFileSize:function(ge,Te){qt("xFileSize");let Ce=et("xFileSize",ge);if(Ce==0)try{const Ke=K.s11n.deserialize()[0];we.poke(Te,Ke,"i64")}catch(Ke){V("Unexpected error reading xFileSize() result:",Ke),Ce=K.sq3Codes.SQLITE_IOERR}return Lt(),Ce},xLock:function(ge,Te){qt("xLock");const Ce=ot[ge];let Ke=0;return Ce.lockType?Ce.lockType=Te:(Ke=et("xLock",ge,Te),Ke===0&&(Ce.lockType=Te)),Lt(),Ke},xRead:function(ge,Te,Ce,Ke){qt("xRead");const Ge=ot[ge];let tt;try{tt=et("xRead",ge,Ce,Number(Ke)),(tt===0||ce.SQLITE_IOERR_SHORT_READ===tt)&&we.heap8u().set(Ge.sabView.subarray(0,Ce),Te)}catch(Fe){V("xRead(",arguments,") failed:",Fe,Ge),tt=ce.SQLITE_IOERR_READ}return Lt(),tt},xSync:function(ge,Te){qt("xSync"),++Ne.xSync.count;const Ce=et("xSync",ge,Te);return Lt(),Ce},xTruncate:function(ge,Te){qt("xTruncate");const Ce=et("xTruncate",ge,Number(Te));return Lt(),Ce},xUnlock:function(ge,Te){qt("xUnlock");const Ce=ot[ge];let Ke=0;return ce.SQLITE_LOCK_NONE===Te&&Ce.lockType&&(Ke=et("xUnlock",ge,Te)),Ke===0&&(Ce.lockType=Te),Lt(),Ke},xWrite:function(ge,Te,Ce,Ke){qt("xWrite");const Ge=ot[ge];let tt;try{Ge.sabView.set(we.heap8u().subarray(Te,Te+Ce)),tt=et("xWrite",ge,Ce,Number(Ke))}catch(Fe){V("xWrite(",arguments,") failed:",Fe,Ge),tt=ce.SQLITE_IOERR_WRITE}return Lt(),tt}},Jt={xAccess:function(ge,Te,Ce,Ke){qt("xAccess");const Ge=et("xAccess",we.cstrToJs(Te));return we.poke(Ke,Ge?0:1,"i32"),Lt(),0},xCurrentTime:function(ge,Te){return we.poke(Te,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(ge,Te){return we.poke(Te,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(ge,Te,Ce){qt("xDelete");const Ke=et("xDelete",we.cstrToJs(Te),Ce,!1);return Lt(),Ke},xFullPathname:function(ge,Te,Ce,Ke){return we.cstrncpy(Ke,Te,Ce)<Ce?0:ce.SQLITE_CANTOPEN},xGetLastError:function(ge,Te,Ce){return B("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(Te,Ce,Ke,Ge,tt){qt("xOpen");let Fe=0;Ce===0?Ce=At():typeof Ce=="number"&&(ce.sqlite3_uri_boolean(Ce,"opfs-unlock-asap",0)&&(Fe|=K.opfsFlags.OPFS_UNLOCK_ASAP),Ce=we.cstrToJs(Ce));const G=Object.create(null);G.fid=Ke,G.filename=Ce,G.sab=new SharedArrayBuffer(K.fileBufferSize),G.flags=Ge;const Q=et("xOpen",Ke,Ce,Ge,Fe);return Q||(G.readOnly&&we.poke(tt,ce.SQLITE_OPEN_READONLY,"i32"),ot[Ke]=G,G.sabView=K.sabFileBufView,G.sq3File=new je(Ke),G.sq3File.$pMethods=oe.pointer,G.lockType=ce.SQLITE_LOCK_NONE),Lt(),Q}};re&&(le.$xRandomness=re.$xRandomness,le.$xSleep=re.$xSleep),le.$xRandomness||(Jt.xRandomness=function(ge,Te,Ce){const Ke=we.heap8u();let Ge=0;for(;Ge<Te;++Ge)Ke[Ce+Ge]=Math.random()*255e3&255;return Ge}),le.$xSleep||(Jt.xSleep=function(ge,Te){return Atomics.wait(K.sabOPView,K.opIds.xSleep,0,Te),0}),We.getResolvedPath=function(ge,Te){const Ce=new URL(ge,"file://irrelevant").pathname;return Te?Ce.split("/").filter(Ke=>!!Ke):Ce},We.getDirForFilename=async function(Te,Ce=!1){const Ke=We.getResolvedPath(Te,!0),Ge=Ke.pop();let tt=We.rootDirectory;for(const Fe of Ke)Fe&&(tt=await tt.getDirectoryHandle(Fe,{create:!!Ce}));return[tt,Ge]},We.mkdir=async function(ge){try{return await We.getDirForFilename(ge+"/filepart",!0),!0}catch{return!1}},We.entryExists=async function(ge){try{const[Te,Ce]=await We.getDirForFilename(ge);return await Te.getFileHandle(Ce),!0}catch{return!1}},We.randomFilename=At,We.registerVfs=(ge=!1)=>we.exports.sqlite3_vfs_register(le.pointer,ge?1:0),We.treeList=async function(){const ge=async function Ce(Ke,Ge){Ge.name=Ke.name,Ge.dirs=[],Ge.files=[];for await(const tt of Ke.values())if(tt.kind==="directory"){const Fe=Object.create(null);Ge.dirs.push(Fe),await Ce(tt,Fe)}else Ge.files.push(tt.name)},Te=Object.create(null);return await ge(We.rootDirectory,Te),Te},We.rmfr=async function(){const ge=We.rootDirectory,Te={recurse:!0};for await(const Ce of ge.values())ge.removeEntry(Ce.name,Te)},We.unlink=async function(ge,Te=!1,Ce=!1){try{const[Ke,Ge]=await We.getDirForFilename(ge,!1);return await Ke.removeEntry(Ge,{recursive:Te}),!0}catch(Ke){if(Ce)throw new Error("unlink(",arguments[0],") failed: "+Ke.message,{cause:Ke});return!1}},We.traverse=async function(ge){const Te={recursive:!0,directory:We.rootDirectory};typeof ge=="function"&&(ge={callback:ge}),ge=Object.assign(Te,ge||{}),async function Ke(Ge,tt){for await(const Fe of Ge.values()){if(ge.callback(Fe,Ge,tt)===!1)return!1;if(ge.recursive&&Fe.kind==="directory"&&await Ke(Fe,tt+1)===!1)break}}(ge.directory,0)};const hn=async function(ge,Te){const[Ce,Ke]=await We.getDirForFilename(ge,!0);let tt=await(await Ce.getFileHandle(Ke,{create:!0})).createSyncAccessHandle(),Fe=0,G,Q=!1;try{for(tt.truncate(0);(G=await Te())!==void 0;)G instanceof ArrayBuffer&&(G=new Uint8Array(G)),Fe===0&&G.byteLength>=15&&(ee.affirmDbHeader(G),Q=!0),tt.write(G,{at:Fe}),Fe+=G.byteLength;if((Fe<512||Fe%512!==0)&&ne("Input size",Fe,"is not correct for an SQLite database."),!Q){const me=new Uint8Array(20);tt.read(me,{at:0}),ee.affirmDbHeader(me)}return tt.write(new Uint8Array([1,1]),{at:18}),Fe}catch(me){throw await tt.close(),tt=void 0,await Ce.removeEntry(Ke).catch(()=>{}),me}finally{tt&&await tt.close()}};if(We.importDb=async function(ge,Te){if(Te instanceof Function)return hn(ge,Te);Te instanceof ArrayBuffer&&(Te=new Uint8Array(Te)),ee.affirmIsDb(Te);const Ce=Te.byteLength,[Ke,Ge]=await We.getDirForFilename(ge,!0);let tt,Fe=0;try{return tt=await(await Ke.getFileHandle(Ge,{create:!0})).createSyncAccessHandle(),tt.truncate(0),Fe=tt.write(Te,{at:0}),Fe!=Ce&&ne("Expected to write "+Ce+" bytes but wrote "+Fe+"."),tt.write(new Uint8Array([1,1]),{at:18}),Fe}catch(G){throw tt&&(await tt.close(),tt=void 0),await Ke.removeEntry(Ge).catch(()=>{}),G}finally{tt&&await tt.close()}},f.oo1){const ge=function(...Te){const Ce=f.oo1.DB.dbCtorHelper.normalizeArgs(...Te);Ce.vfs=le.$zName,f.oo1.DB.dbCtorHelper.call(this,Ce)};ge.prototype=Object.create(f.oo1.DB.prototype),f.oo1.OpfsDb=ge,ge.importDb=We.importDb,f.oo1.DB.dbCtorHelper.setVfsPostOpenSql(le.pointer,function(Te,Ce){Ce.capi.sqlite3_busy_timeout(Te,1e4),Ce.capi.sqlite3_exec(Te,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const Ft=function(){const ge=we.scopedAllocPush(),Te=new je;try{const Ce=Te.pointer,Ke=ce.SQLITE_OPEN_CREATE|ce.SQLITE_OPEN_READWRITE|ce.SQLITE_OPEN_MAIN_DB,Ge=we.scopedAlloc(8),tt="/sanity/check/file"+At(8),Fe=we.scopedAllocCString(tt);let G;if(K.s11n.serialize("This is  string."),G=K.s11n.deserialize(),fe("deserialize() says:",G),G[0]!=="This is  string."&&ne("String d13n error."),Jt.xAccess(le.pointer,Fe,0,Ge),G=we.peek(Ge,"i32"),fe("xAccess(",tt,") exists ?=",G),G=Jt.xOpen(le.pointer,Fe,Ce,Ke,Ge),fe("open rc =",G,"state.sabOPView[xOpen] =",K.sabOPView[K.opIds.xOpen]),G!==0){V("open failed with code",G);return}Jt.xAccess(le.pointer,Fe,0,Ge),G=we.peek(Ge,"i32"),G||ne("xAccess() failed to detect file."),G=Yt.xSync(Te.pointer,0),G&&ne("sync failed w/ rc",G),G=Yt.xTruncate(Te.pointer,1024),G&&ne("truncate failed w/ rc",G),we.poke(Ge,0,"i64"),G=Yt.xFileSize(Te.pointer,Ge),G&&ne("xFileSize failed w/ rc",G),fe("xFileSize says:",we.peek(Ge,"i64")),G=Yt.xWrite(Te.pointer,Fe,10,1),G&&ne("xWrite() failed!");const Q=we.scopedAlloc(16);G=Yt.xRead(Te.pointer,Q,6,2),we.poke(Q+6,0);let me=we.cstrToJs(Q);fe("xRead() got:",me),me!=="sanity"&&ne("Unexpected xRead() value."),Jt.xSleep&&(fe("xSleep()ing before close()ing..."),Jt.xSleep(le.pointer,2e3),fe("waking up from xSleep()")),G=Yt.xClose(Ce),fe("xClose rc =",G,"sabOPView =",K.sabOPView),fe("Deleting file:",tt),Jt.xDelete(le.pointer,Fe,4660),Jt.xAccess(le.pointer,Fe,0,Ge),G=we.peek(Ge,"i32"),G&&ne("Expecting 0 from xAccess(",tt,") after xDelete()."),B("End of OPFS sanity checks.")}finally{Te.dispose(),we.scopedAllocPop(ge)}};R.onmessage=function({data:ge}){switch(ge.type){case"opfs-unavailable":z(new Error(ge.payload.join(" ")));break;case"opfs-async-loaded":R.postMessage({type:"opfs-async-init",args:K});break;case"opfs-async-inited":{if(Me===!0)break;try{f.vfs.installVfs({io:{struct:oe,methods:Yt},vfs:{struct:le,methods:Jt}}),K.sabOPView=new Int32Array(K.sabOP),K.sabFileBufView=new Uint8Array(K.sabIO,0,K.fileBufferSize),K.sabS11nView=new Uint8Array(K.sabIO,K.sabS11nOffset,K.sabS11nSize),_t(),x.sanityChecks&&(B("Running sanity checks because of opfs-sanity-check URL arg..."),Ft()),L()?navigator.storage.getDirectory().then(Te=>{R.onerror=R._originalOnError,delete R._originalOnError,f.opfs=We,We.rootDirectory=Te,fe("End of OPFS sqlite3_vfs setup.",le),te()}).catch(z):te()}catch(Te){V(Te),z(Te)}break}default:{const Te="Unexpected message from the OPFS async worker: "+JSON.stringify(ge);V(Te),z(new Error(Te));break}}}}))};y.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async b=>{try{let x=y.defaultProxyUri;return b.scriptInfo.sqlite3Dir&&(y.defaultProxyUri=b.scriptInfo.sqlite3Dir+x),y().catch(A=>{b.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",A.message)})}catch(x){return b.config.error("installOpfsVfs() exception:",x),Promise.reject(x)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(f){var ot,bt,qt,Lt,Yt,Jt,hn,Ft,ge,Te,Ce,Ke,Al,tt;const y=f.util.toss,b=f.util.toss3,x=Object.create(null),A=f.capi,J=f.util,ie=f.wasm,$e=4096,Ue=512,Ze=4,ft=8,fe=Ue+Ze,B=Ue,V=fe,ne=$e,ce=A.SQLITE_OPEN_MAIN_DB|A.SQLITE_OPEN_MAIN_JOURNAL|A.SQLITE_OPEN_SUPER_JOURNAL|A.SQLITE_OPEN_WAL,ee=".opaque",we=()=>Math.random().toString(36).slice(2),De=new TextDecoder,je=new TextEncoder,Ve=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),We=[f.config.error,f.config.warn,f.config.log];f.config.log;const L=f.config.warn;f.config.error;const oe=new Map,le=Fe=>oe.get(Fe),Me=(Fe,G)=>{G?oe.set(Fe,G):oe.delete(Fe)},z=new Map,te=Fe=>z.get(Fe),R=(Fe,G)=>{G?z.set(Fe,G):z.delete(Fe)},F={xCheckReservedLock:function(Fe,G){const Q=te(Fe);return Q.log("xCheckReservedLock"),Q.storeErr(),ie.poke32(G,1),0},xClose:function(Fe){const G=te(Fe);G.storeErr();const Q=G.getOFileForS3File(Fe);if(Q)try{G.log(`xClose ${Q.path}`),G.mapS3FileToOFile(Fe,!1),Q.sah.flush(),Q.flags&A.SQLITE_OPEN_DELETEONCLOSE&&G.deletePath(Q.path)}catch(me){return G.storeErr(me,A.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(Fe){return A.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(Fe,G,Q){return A.SQLITE_NOTFOUND},xFileSize:function(Fe,G){const Q=te(Fe);Q.log("xFileSize");const be=Q.getOFileForS3File(Fe).sah.getSize()-ne;return ie.poke64(G,BigInt(be)),0},xLock:function(Fe,G){const Q=te(Fe);Q.log(`xLock ${G}`),Q.storeErr();const me=Q.getOFileForS3File(Fe);return me.lockType=G,0},xRead:function(Fe,G,Q,me){const be=te(Fe);be.storeErr();const Ee=be.getOFileForS3File(Fe);be.log(`xRead ${Ee.path} ${Q} @ ${me}`);try{const Xe=Ee.sah.read(ie.heap8u().subarray(G,G+Q),{at:ne+Number(me)});return Xe<Q?(ie.heap8u().fill(0,G+Xe,G+Q),A.SQLITE_IOERR_SHORT_READ):0}catch(Xe){return be.storeErr(Xe,A.SQLITE_IOERR)}},xSectorSize:function(Fe){return $e},xSync:function(Fe,G){const Q=te(Fe);Q.log(`xSync ${G}`),Q.storeErr();const me=Q.getOFileForS3File(Fe);try{return me.sah.flush(),0}catch(be){return Q.storeErr(be,A.SQLITE_IOERR)}},xTruncate:function(Fe,G){const Q=te(Fe);Q.log(`xTruncate ${G}`),Q.storeErr();const me=Q.getOFileForS3File(Fe);try{return me.sah.truncate(ne+Number(G)),0}catch(be){return Q.storeErr(be,A.SQLITE_IOERR)}},xUnlock:function(Fe,G){const Q=te(Fe);Q.log("xUnlock");const me=Q.getOFileForS3File(Fe);return me.lockType=G,0},xWrite:function(Fe,G,Q,me){const be=te(Fe);be.storeErr();const Ee=be.getOFileForS3File(Fe);be.log(`xWrite ${Ee.path} ${Q} ${me}`);try{const Xe=Ee.sah.write(ie.heap8u().subarray(G,G+Q),{at:ne+Number(me)});return Q===Xe?0:y("Unknown write() failure.")}catch(Xe){return be.storeErr(Xe,A.SQLITE_IOERR)}}},re=new A.sqlite3_io_methods;re.$iVersion=1,f.vfs.installVfs({io:{struct:re,methods:F}});const K={xAccess:function(Fe,G,Q,me){const be=le(Fe);be.storeErr();try{const Ee=be.getPath(G);ie.poke32(me,be.hasFilename(Ee)?1:0)}catch{ie.poke32(me,0)}return 0},xCurrentTime:function(Fe,G){return ie.poke(G,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(Fe,G){return ie.poke(G,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(Fe,G,Q){const me=le(Fe);me.log(`xDelete ${ie.cstrToJs(G)}`),me.storeErr();try{return me.deletePath(me.getPath(G)),0}catch(be){return me.storeErr(be),A.SQLITE_IOERR_DELETE}},xFullPathname:function(Fe,G,Q,me){return ie.cstrncpy(me,G,Q)<Q?0:A.SQLITE_CANTOPEN},xGetLastError:function(Fe,G,Q){const me=le(Fe),be=me.popErr();if(me.log(`xGetLastError ${G} e =`,be),be){const Ee=ie.scopedAllocPush();try{const[Xe,pt]=ie.scopedAllocCString(be.message,!0);ie.cstrncpy(Q,Xe,G),pt>G&&ie.poke8(Q+G-1,0)}catch{return A.SQLITE_NOMEM}finally{ie.scopedAllocPop(Ee)}}return be?be.sqlite3Rc||A.SQLITE_IOERR:0},xOpen:function(G,Q,me,be,Ee){const Xe=le(G);try{Xe.log(`xOpen ${ie.cstrToJs(Q)} ${be}`);const pt=Q&&ie.peek8(Q)?Xe.getPath(Q):we();let It=Xe.getSAHForPath(pt);!It&&be&A.SQLITE_OPEN_CREATE&&(Xe.getFileCount()<Xe.getCapacity()?(It=Xe.nextAvailableSAH(),Xe.setAssociatedPath(It,pt,be)):y("SAH pool is full. Cannot create file",pt)),It||y("file not found:",pt);const jt={path:pt,flags:be,sah:It};Xe.mapS3FileToOFile(me,jt),jt.lockType=A.SQLITE_LOCK_NONE;const En=new A.sqlite3_file(me);return En.$pMethods=re.pointer,En.dispose(),ie.poke32(Ee,be),0}catch(pt){return Xe.storeErr(pt),A.SQLITE_CANTOPEN}}},Ne=function(Fe){f.capi.sqlite3_vfs_find(Fe)&&b("VFS name is already registered:",Fe);const G=new A.sqlite3_vfs,Q=A.sqlite3_vfs_find(null),me=Q?new A.sqlite3_vfs(Q):null;return G.$iVersion=2,G.$szOsFile=A.sqlite3_file.structInfo.sizeof,G.$mxPathname=Ue,G.addOnDispose(G.$zName=ie.allocCString(Fe),()=>Me(G.pointer,0)),me&&(G.$xRandomness=me.$xRandomness,G.$xSleep=me.$xSleep,me.dispose()),!G.$xRandomness&&!K.xRandomness&&(K.xRandomness=function(be,Ee,Xe){const pt=ie.heap8u();let It=0;for(;It<Ee;++It)pt[Xe+It]=Math.random()*255e3&255;return It}),!G.$xSleep&&!K.xSleep&&(K.xSleep=(be,Ee)=>0),f.vfs.installVfs({vfs:{struct:G,methods:K}}),G};class et{constructor(G=Object.create(null)){Xn(this,Ke);ye(this,"vfsDir");Xn(this,ot);Xn(this,bt);Xn(this,qt);Xn(this,Lt,new Map);Xn(this,Yt,new Map);Xn(this,Jt,new Set);Xn(this,hn,new Map);Xn(this,Ft,new Uint8Array(fe));Xn(this,ge);Xn(this,Te);Xn(this,Ce);Ns(this,Ce,G.verbosity??Ve.verbosity),this.vfsName=G.name||Ve.name,Ns(this,Te,Ne(this.vfsName)),Me(rt(this,Te).pointer,this),this.vfsDir=G.directory||"."+this.vfsName,Ns(this,ge,new DataView(rt(this,Ft).buffer,rt(this,Ft).byteOffset)),this.isReady=this.reset(!!(G.clearOnInit??Ve.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(G.initialCapacity||Ve.initialCapacity)})}log(...G){wl(this,Ke,Al).call(this,2,...G)}warn(...G){wl(this,Ke,Al).call(this,1,...G)}error(...G){wl(this,Ke,Al).call(this,0,...G)}getVfs(){return rt(this,Te)}getCapacity(){return rt(this,Lt).size}getFileCount(){return rt(this,Yt).size}getFileNames(){const G=[],Q=rt(this,Yt).keys();for(const me of Q)G.push(me);return G}async addCapacity(G){for(let Q=0;Q<G;++Q){const me=we(),Ee=await(await rt(this,bt).getFileHandle(me,{create:!0})).createSyncAccessHandle();rt(this,Lt).set(Ee,me),this.setAssociatedPath(Ee,"",0)}return this.getCapacity()}async reduceCapacity(G){let Q=0;for(const me of Array.from(rt(this,Jt))){if(Q===G||this.getFileCount()===this.getCapacity())break;const be=rt(this,Lt).get(me);me.close(),await rt(this,bt).removeEntry(be),rt(this,Lt).delete(me),rt(this,Jt).delete(me),++Q}return Q}releaseAccessHandles(){for(const G of rt(this,Lt).keys())G.close();rt(this,Lt).clear(),rt(this,Yt).clear(),rt(this,Jt).clear()}async acquireAccessHandles(G){const Q=[];for await(const[me,be]of rt(this,bt))be.kind==="file"&&Q.push([me,be]);return Promise.all(Q.map(async([me,be])=>{try{const Ee=await be.createSyncAccessHandle();if(rt(this,Lt).set(Ee,me),G)Ee.truncate(ne),this.setAssociatedPath(Ee,"",0);else{const Xe=this.getAssociatedPath(Ee);Xe?rt(this,Yt).set(Xe,Ee):rt(this,Jt).add(Ee)}}catch(Ee){throw this.storeErr(Ee),this.releaseAccessHandles(),Ee}}))}getAssociatedPath(G){G.read(rt(this,Ft),{at:0});const Q=rt(this,ge).getUint32(B);if(rt(this,Ft)[0]&&(Q&A.SQLITE_OPEN_DELETEONCLOSE||!(Q&ce)))return L(`Removing file with unexpected flags ${Q.toString(16)}`,rt(this,Ft)),this.setAssociatedPath(G,"",0),"";const me=new Uint32Array(ft/4);G.read(me,{at:V});const be=this.computeDigest(rt(this,Ft));if(me.every((Ee,Xe)=>Ee===be[Xe])){const Ee=rt(this,Ft).findIndex(Xe=>Xe===0);return Ee===0&&G.truncate(ne),Ee?De.decode(rt(this,Ft).subarray(0,Ee)):""}else return L("Disassociating file with bad digest."),this.setAssociatedPath(G,"",0),""}setAssociatedPath(G,Q,me){const be=je.encodeInto(Q,rt(this,Ft));Ue<=be.written+1&&y("Path too long:",Q),rt(this,Ft).fill(0,be.written,Ue),rt(this,ge).setUint32(B,me);const Ee=this.computeDigest(rt(this,Ft));G.write(rt(this,Ft),{at:0}),G.write(Ee,{at:V}),G.flush(),Q?(rt(this,Yt).set(Q,G),rt(this,Jt).delete(G)):(G.truncate(ne),rt(this,Jt).add(G))}computeDigest(G){let Q=3735928559,me=1103547991;for(const be of G)Q=31*Q+be*307,me=31*me+be*307;return new Uint32Array([Q>>>0,me>>>0])}async reset(G){await this.isReady;let Q=await navigator.storage.getDirectory(),me;for(const be of this.vfsDir.split("/"))be&&(me=Q,Q=await Q.getDirectoryHandle(be,{create:!0}));return Ns(this,ot,Q),Ns(this,qt,me),Ns(this,bt,await rt(this,ot).getDirectoryHandle(ee,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(G)}getPath(G){return ie.isPtr(G)&&(G=ie.cstrToJs(G)),(G instanceof URL?G:new URL(G,"file://localhost/")).pathname}deletePath(G){const Q=rt(this,Yt).get(G);return Q&&(rt(this,Yt).delete(G),this.setAssociatedPath(Q,"",0)),!!Q}storeErr(G,Q){return G&&(G.sqlite3Rc=Q||A.SQLITE_IOERR,this.error(G)),this.$error=G,Q}popErr(){const G=this.$error;return this.$error=void 0,G}nextAvailableSAH(){const[G]=rt(this,Jt).keys();return G}getOFileForS3File(G){return rt(this,hn).get(G)}mapS3FileToOFile(G,Q){Q?(rt(this,hn).set(G,Q),R(G,this)):(rt(this,hn).delete(G),R(G,!1))}hasFilename(G){return rt(this,Yt).has(G)}getSAHForPath(G){return rt(this,Yt).get(G)}async removeVfs(){if(!rt(this,Te).pointer||!rt(this,bt))return!1;A.sqlite3_vfs_unregister(rt(this,Te).pointer),rt(this,Te).dispose();try{this.releaseAccessHandles(),await rt(this,ot).removeEntry(ee,{recursive:!0}),Ns(this,bt,void 0),await rt(this,qt).removeEntry(rt(this,ot).name,{recursive:!0}),Ns(this,ot,Ns(this,qt,void 0))}catch(G){f.config.error(this.vfsName,"removeVfs() failed:",G)}return!0}exportFile(G){const Q=rt(this,Yt).get(G)||y("File not found:",G),me=Q.getSize()-ne,be=new Uint8Array(me>0?me:0);if(me>0){const Ee=Q.read(be,{at:ne});Ee!=me&&y("Expected to read "+me+" bytes but read "+Ee+".")}return be}async importDbChunked(G,Q){const me=rt(this,Yt).get(G)||this.nextAvailableSAH()||y("No available handles to import to.");me.truncate(0);let be=0,Ee,Xe=!1;try{for(;(Ee=await Q())!==void 0;)Ee instanceof ArrayBuffer&&(Ee=new Uint8Array(Ee)),be===0&&Ee.byteLength>=15&&(J.affirmDbHeader(Ee),Xe=!0),me.write(Ee,{at:ne+be}),be+=Ee.byteLength;if((be<512||be%512!==0)&&y("Input size",be,"is not correct for an SQLite database."),!Xe){const pt=new Uint8Array(20);me.read(pt,{at:0}),J.affirmDbHeader(pt)}me.write(new Uint8Array([1,1]),{at:ne+18})}catch(pt){throw this.setAssociatedPath(me,"",0),pt}return this.setAssociatedPath(me,G,A.SQLITE_OPEN_MAIN_DB),be}importDb(G,Q){if(Q instanceof ArrayBuffer)Q=new Uint8Array(Q);else if(Q instanceof Function)return this.importDbChunked(G,Q);const me=rt(this,Yt).get(G)||this.nextAvailableSAH()||y("No available handles to import to."),be=Q.byteLength;(be<512||be%512!=0)&&y("Byte array size is invalid for an SQLite db.");const Ee="SQLite format 3";for(let pt=0;pt<Ee.length;++pt)Ee.charCodeAt(pt)!==Q[pt]&&y("Input does not contain an SQLite database header.");const Xe=me.write(Q,{at:ne});return Xe!=be?(this.setAssociatedPath(me,"",0),y("Expected to write "+be+" bytes but wrote "+Xe+".")):(me.write(new Uint8Array([1,1]),{at:ne+18}),this.setAssociatedPath(me,G,A.SQLITE_OPEN_MAIN_DB)),Xe}}ot=new WeakMap,bt=new WeakMap,qt=new WeakMap,Lt=new WeakMap,Yt=new WeakMap,Jt=new WeakMap,hn=new WeakMap,Ft=new WeakMap,ge=new WeakMap,Te=new WeakMap,Ce=new WeakMap,Ke=new WeakSet,Al=function(G,...Q){rt(this,Ce)>G&&We[G](this.vfsName+":",...Q)};class _t{constructor(G){Xn(this,tt);Ns(this,tt,G),this.vfsName=G.vfsName}async addCapacity(G){return rt(this,tt).addCapacity(G)}async reduceCapacity(G){return rt(this,tt).reduceCapacity(G)}getCapacity(){return rt(this,tt).getCapacity(rt(this,tt))}getFileCount(){return rt(this,tt).getFileCount()}getFileNames(){return rt(this,tt).getFileNames()}async reserveMinimumCapacity(G){const Q=rt(this,tt).getCapacity();return Q<G?rt(this,tt).addCapacity(G-Q):Q}exportFile(G){return rt(this,tt).exportFile(G)}importDb(G,Q){return rt(this,tt).importDb(G,Q)}async wipeFiles(){return rt(this,tt).reset(!0)}unlink(G){return rt(this,tt).deletePath(G)}async removeVfs(){return rt(this,tt).removeVfs()}}tt=new WeakMap;const At=async()=>{const Fe=await navigator.storage.getDirectory(),G=".opfs-sahpool-sync-check-"+we(),be=(await(await Fe.getFileHandle(G,{create:!0})).createSyncAccessHandle()).close();return await be,await Fe.removeEntry(G),be!=null&&be.then&&y("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};f.installOpfsSAHPoolVfs=async function(Fe=Object.create(null)){var Q;const G=Fe.name||Ve.name;return x[G]?x[G]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((Q=navigator==null?void 0:navigator.storage)!=null&&Q.getDirectory)?x[G]=Promise.reject(new Error("Missing required OPFS APIs.")):x[G]=At().then(async function(){if(Fe.$testThrowInInit)throw Fe.$testThrowInInit;const me=new et(Fe);return me.isReady.then(async()=>{const be=new _t(me);if(f.oo1){const Ee=f.oo1,Xe=me.getVfs(),pt=function(...It){const jt=Ee.DB.dbCtorHelper.normalizeArgs(...It);jt.vfs=Xe.$zName,Ee.DB.dbCtorHelper.call(this,jt)};pt.prototype=Object.create(Ee.DB.prototype),be.OpfsSAHPoolDb=pt,Ee.DB.dbCtorHelper.setVfsPostOpenSql(Xe.pointer,function(It,jt){jt.capi.sqlite3_exec(It,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return me.log("VFS initialized."),be}).catch(async be=>{throw await me.removeVfs().catch(()=>{}),be})}).catch(me=>x[G]=Promise.reject(me))}}),typeof _<"u"){const f=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?_.asm:wasmExports,memory:_.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=f;let y;try{y=globalThis.sqlite3ApiBootstrap()}catch(b){throw console.error("sqlite3ApiBootstrap() error:",b),b}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}_.sqlite3=y}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),t.ready}})();const v1=function(){var t,n;const s=qp;if(!s)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(t=globalThis==null?void 0:globalThis.document)==null?void 0:t.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(n=globalThis==null?void 0:globalThis.location)!=null&&n.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...a)=>console.warn("sqlite3.debugModule:",...a):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const a=e.moduleScript.src.split("/");a.pop(),e.sqlite3Dir=a.join("/")+"/"}if(globalThis.sqlite3InitModule=function a(...r){return s(...r).then(o=>{const m=o.sqlite3;m.scriptInfo=e,a.__isUnderTest&&(m.__isUnderTest=!0);const h=m.asyncPostInit;return delete m.asyncPostInit,h()}).catch(o=>{throw console.error("Exception loading sqlite3 module:",o),o})},globalThis.sqlite3InitModule.ready=s.ready,globalThis.sqlite3InitModuleState.moduleScript){const a=globalThis.sqlite3InitModuleState;let r=a.moduleScript.src.split("/");r.pop(),a.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();qp=v1;var k1=qp;globalThis.sqlite3Worker1Promiser=function s(e=s.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const u=e;e=Object.assign(Object.create(null),s.defaultConfig),e.onready=u}else e=Object.assign(Object.create(null),s.defaultConfig,e);const t=Object.create(null),n=function(){},a=e.onerror||n,r=e.debug||n,o=e.generateMessageId?void 0:Object.create(null),m=e.generateMessageId||function(u){return u.type+"#"+(o[u.type]=(o[u.type]||0)+1)},h=(...u)=>{throw new Error(u.join(" "))};e.worker||(e.worker=s.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let g;return e.worker.onmessage=function(u){u=u.data,r("worker1.onmessage",u);let k=t[u.messageId];if(!k){if(u&&u.type==="sqlite3-api"&&u.result==="worker1-ready"){e.onready&&e.onready();return}if(k=t[u.type],k&&k.onrow){k.onrow(u);return}e.onunhandled?e.onunhandled(arguments[0]):a("sqlite3Worker1Promiser() unhandled worker message:",u);return}switch(delete t[u.messageId],u.type){case"error":k.reject(u);return;case"open":g||(g=u.dbId);break;case"close":u.dbId===g&&(g=void 0);break}try{k.resolve(u)}catch(O){k.reject(O)}},function(){let u;arguments.length===1?u=arguments[0]:arguments.length===2?(u=Object.create(null),u.type=arguments[0],u.args=arguments[1],u.dbId=u.args.dbId):h("Invalid arugments for sqlite3Worker1Promiser()-created factory."),!u.dbId&&u.type!=="open"&&(u.dbId=g),u.messageId=m(u),u.departureTime=performance.now();const k=Object.create(null);k.message=u;let O;u.type==="exec"&&u.args&&(typeof u.args.callback=="function"?(O=u.messageId+":row",k.onrow=u.args.callback,u.args.callback=O,t[O]=k):typeof u.args.callback=="string"&&h("exec callback may not be a string when using the Promise interface."));let w=new Promise(function(N,Z){k.resolve=N,k.reject=Z,t[u.messageId]=k,r("Posting",u.type,"message to Worker dbId="+(g||"default")+":",u),e.worker.postMessage(u)});return O&&(w=w.finally(()=>delete t[O])),w}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-FvWaxY5S.js",import.meta.url),{type:"module"})},onerror:(...s)=>console.error("worker1 promiser error",...s)};var wt=(s=>(s.Number="number",s.Text="text",s.Title="title",s.Checkbox="checkbox",s.Date="date",s.File="file",s.MultiSelect="multi-select",s.Rating="rating",s.Select="select",s.URL="url",s.Formula="formula",s.Link="link",s.Lookup="lookup",s.CreatedTime="created-time",s.CreatedBy="created-by",s.LastEditedTime="last-edited-time",s.LastEditedBy="last-edited-by",s))(wt||{}),bn=(s=>(s.Uri="uri",s.Text="text",s.Image="image",s.RowID="row-id",s.Number="number",s.Bubble="bubble",s.Boolean="boolean",s.Loading="loading",s.Markdown="markdown",s.Drilldown="drilldown",s.Protected="protected",s.Custom="custom",s))(bn||{}),lt=(s=>(s.IsEmpty="IsEmpty",s.IsNotEmpty="IsNotEmpty",s.Equal="=",s.NotEqual="!=",s.Contains="Contains",s.NotContains="NotContains",s.StartsWith="StartsWith",s.EndsWith="EndsWith",s.GreaterThan=">",s.GreaterThanOrEqual=">=",s.LessThan="<",s.LessThanOrEqual="<=",s))(lt||{}),uo=(s=>(s.And="AND",s.Or="OR",s))(uo||{});const Bd=["=","!=",">",">=","<","<=","IsEmpty","IsNotEmpty"],Rp=["=","!=","Contains","NotContains","StartsWith","EndsWith","IsEmpty","IsNotEmpty"],Ln="eidos__tree",$n="eidos__columns",E1="eidos__files",A1="eidos__docs",T1="eidos__actions",S1="eidos__scripts",I1="eidos__views",q1="eidos__embeddings",R1="eidos__references",Za="eidos__chats",zi="eidos__messages";var ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ss={},Wu={exports:{}},Gf;function C1(){return Gf||(Gf=1,function(s){(function(e,t){s.exports?s.exports=t():e.moo=t()})(ma,function(){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=typeof new RegExp().sticky=="boolean";function a(d){return d&&t.call(d)==="[object RegExp]"}function r(d){return d&&typeof d=="object"&&!a(d)&&!Array.isArray(d)}function o(d){return d.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function m(d){var j=new RegExp("|"+d);return j.exec("").length-1}function h(d){return"("+d+")"}function g(d){if(!d.length)return"(?!)";var j=d.map(function(X){return"(?:"+X+")"}).join("|");return"(?:"+j+")"}function u(d){if(typeof d=="string")return"(?:"+o(d)+")";if(a(d)){if(d.ignoreCase)throw new Error("RegExp /i flag not allowed");if(d.global)throw new Error("RegExp /g flag is implied");if(d.sticky)throw new Error("RegExp /y flag is implied");if(d.multiline)throw new Error("RegExp /m flag is implied");return d.source}else throw new Error("Not a pattern: "+d)}function k(d,j){return d.length>j?d:Array(j-d.length+1).join(" ")+d}function O(d,j){for(var X=d.length,ve=0;;){var Je=d.lastIndexOf(`
`,X-1);if(Je===-1||(ve++,X=Je,ve===j)||X===0)break}var Be=ve<j?0:X+1;return d.substring(Be).split(`
`)}function w(d){for(var j=Object.getOwnPropertyNames(d),X=[],ve=0;ve<j.length;ve++){var Je=j[ve],Be=d[Je],Oe=[].concat(Be);if(Je==="include"){for(var ht=0;ht<Oe.length;ht++)X.push({include:Oe[ht]});continue}var yt=[];Oe.forEach(function(ct){r(ct)?(yt.length&&X.push(Z(Je,yt)),X.push(Z(Je,ct)),yt=[]):yt.push(ct)}),yt.length&&X.push(Z(Je,yt))}return X}function N(d){for(var j=[],X=0;X<d.length;X++){var ve=d[X];if(ve.include){for(var Je=[].concat(ve.include),Be=0;Be<Je.length;Be++)j.push({include:Je[Be]});continue}if(!ve.type)throw new Error("Rule has no type: "+JSON.stringify(ve));j.push(Z(ve.type,ve))}return j}function Z(d,j){if(r(j)||(j={match:j}),j.include)throw new Error("Matching rules cannot also include states");var X={defaultType:d,lineBreaks:!!j.error||!!j.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var ve in j)e.call(j,ve)&&(X[ve]=j[ve]);if(typeof X.type=="string"&&d!==X.type)throw new Error("Type transform cannot be a string (type '"+X.type+"' for token '"+d+"')");var Je=X.match;return X.match=Array.isArray(Je)?Je:Je?[Je]:[],X.match.sort(function(Be,Oe){return a(Be)&&a(Oe)?0:a(Oe)?-1:a(Be)?1:Oe.length-Be.length}),X}function ae(d){return Array.isArray(d)?N(d):w(d)}var Ae=Z("error",{lineBreaks:!0,shouldThrow:!0});function Pe(d,j){for(var X=null,ve=Object.create(null),Je=!0,Be=null,Oe=[],ht=[],yt=0;yt<d.length;yt++)d[yt].fallback&&(Je=!1);for(var yt=0;yt<d.length;yt++){var ct=d[yt];if(ct.include)throw new Error("Inheritance is not allowed in stateless lexers");if(ct.error||ct.fallback){if(X)throw!ct.fallback==!X.fallback?new Error("Multiple "+(ct.fallback?"fallback":"error")+" rules not allowed (for token '"+ct.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+ct.defaultType+"')");X=ct}var Bt=ct.match.slice();if(Je)for(;Bt.length&&typeof Bt[0]=="string"&&Bt[0].length===1;){var Pn=Bt.shift();ve[Pn.charCodeAt(0)]=ct}if(ct.pop||ct.push||ct.next){if(!j)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+ct.defaultType+"')");if(ct.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+ct.defaultType+"')")}if(Bt.length!==0){Je=!1,Oe.push(ct);for(var Ts=0;Ts<Bt.length;Ts++){var Ss=Bt[Ts];if(a(Ss)){if(Be===null)Be=Ss.unicode;else if(Be!==Ss.unicode&&ct.fallback===!1)throw new Error("If one rule is /u then all must be")}}var jn=g(Bt.map(u)),vn=new RegExp(jn);if(vn.test(""))throw new Error("RegExp matches empty string: "+vn);var er=m(jn);if(er>0)throw new Error("RegExp has capture groups: "+vn+`
Use (?:  ) instead`);if(!ct.lineBreaks&&vn.test(`
`))throw new Error("Rule should declare lineBreaks: "+vn);ht.push(h(jn))}}var Vn=X&&X.fallback,yn=n&&!Vn?"ym":"gm",hs=n||Vn?"":"|";Be===!0&&(yn+="u");var Zr=new RegExp(g(ht)+hs,yn);return{regexp:Zr,groups:Oe,fast:ve,error:X||Ae}}function ze(d){var j=Pe(ae(d));return new Ye({start:j},"start")}function pe(d,j,X){var ve=d&&(d.push||d.next);if(ve&&!X[ve])throw new Error("Missing state '"+ve+"' (in token '"+d.defaultType+"' of state '"+j+"')");if(d&&d.pop&&+d.pop!=1)throw new Error("pop must be 1 (in token '"+d.defaultType+"' of state '"+j+"')")}function he(d,j){var X=d.$all?ae(d.$all):[];delete d.$all;var ve=Object.getOwnPropertyNames(d);j||(j=ve[0]);for(var Je=Object.create(null),Be=0;Be<ve.length;Be++){var Oe=ve[Be];Je[Oe]=ae(d[Oe]).concat(X)}for(var Be=0;Be<ve.length;Be++)for(var Oe=ve[Be],ht=Je[Oe],yt=Object.create(null),ct=0;ct<ht.length;ct++){var Bt=ht[ct];if(Bt.include){var Pn=[ct,1];if(Bt.include!==Oe&&!yt[Bt.include]){yt[Bt.include]=!0;var Ts=Je[Bt.include];if(!Ts)throw new Error("Cannot include nonexistent state '"+Bt.include+"' (in state '"+Oe+"')");for(var Ss=0;Ss<Ts.length;Ss++){var jn=Ts[Ss];ht.indexOf(jn)===-1&&Pn.push(jn)}}ht.splice.apply(ht,Pn),ct--}}for(var vn=Object.create(null),Be=0;Be<ve.length;Be++){var Oe=ve[Be];vn[Oe]=Pe(Je[Oe],!0)}for(var Be=0;Be<ve.length;Be++){for(var er=ve[Be],Vn=vn[er],yn=Vn.groups,ct=0;ct<yn.length;ct++)pe(yn[ct],er,vn);for(var hs=Object.getOwnPropertyNames(Vn.fast),ct=0;ct<hs.length;ct++)pe(Vn.fast[hs[ct]],er,vn)}return new Ye(vn,j)}function Le(d){for(var j=typeof Map<"u",X=j?new Map:Object.create(null),ve=Object.getOwnPropertyNames(d),Je=0;Je<ve.length;Je++){var Be=ve[Je],Oe=d[Be],ht=Array.isArray(Oe)?Oe:[Oe];ht.forEach(function(yt){if(typeof yt!="string")throw new Error("keyword must be string (in keyword '"+Be+"')");j?X.set(yt,Be):X[yt]=Be})}return function(yt){return j?X.get(yt):X[yt]}}var Ye=function(d,j){this.startState=j,this.states=d,this.buffer="",this.stack=[],this.reset()};Ye.prototype.reset=function(d,j){return this.buffer=d||"",this.index=0,this.line=j?j.line:1,this.col=j?j.col:1,this.queuedToken=j?j.queuedToken:null,this.queuedText=j?j.queuedText:"",this.queuedThrow=j?j.queuedThrow:null,this.setState(j?j.state:this.startState),this.stack=j&&j.stack?j.stack.slice():[],this},Ye.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},Ye.prototype.setState=function(d){if(!(!d||this.state===d)){this.state=d;var j=this.states[d];this.groups=j.groups,this.error=j.error,this.re=j.regexp,this.fast=j.fast}},Ye.prototype.popState=function(){this.setState(this.stack.pop())},Ye.prototype.pushState=function(d){this.stack.push(this.state),this.setState(d)};var ut=n?function(d,j){return d.exec(j)}:function(d,j){var X=d.exec(j);return X[0].length===0?null:X};Ye.prototype._getGroup=function(d){for(var j=this.groups.length,X=0;X<j;X++)if(d[X+1]!==void 0)return this.groups[X];throw new Error("Cannot find token type for matched text")};function c(){return this.value}if(Ye.prototype.next=function(){var d=this.index;if(this.queuedGroup){var j=this._token(this.queuedGroup,this.queuedText,d);return this.queuedGroup=null,this.queuedText="",j}var X=this.buffer;if(d!==X.length){var Oe=this.fast[X.charCodeAt(d)];if(Oe)return this._token(Oe,X.charAt(d),d);var ve=this.re;ve.lastIndex=d;var Je=ut(ve,X),Be=this.error;if(Je==null)return this._token(Be,X.slice(d,X.length),d);var Oe=this._getGroup(Je),ht=Je[0];return Be.fallback&&Je.index!==d?(this.queuedGroup=Oe,this.queuedText=ht,this._token(Be,X.slice(d,Je.index),d)):this._token(Oe,ht,d)}},Ye.prototype._token=function(d,j,X){var ve=0;if(d.lineBreaks){var Je=/\n/g,Be=1;if(j===`
`)ve=1;else for(;Je.exec(j);)ve++,Be=Je.lastIndex}var Oe={type:typeof d.type=="function"&&d.type(j)||d.defaultType,value:typeof d.value=="function"?d.value(j):j,text:j,toString:c,offset:X,lineBreaks:ve,line:this.line,col:this.col},ht=j.length;if(this.index+=ht,this.line+=ve,ve!==0?this.col=ht-Be+1:this.col+=ht,d.shouldThrow){var yt=new Error(this.formatError(Oe,"invalid syntax"));throw yt}return d.pop?this.popState():d.push?this.pushState(d.push):d.next&&this.setState(d.next),Oe},typeof Symbol<"u"&&Symbol.iterator){var I=function(d){this.lexer=d};I.prototype.next=function(){var d=this.lexer.next();return{value:d,done:!d}},I.prototype[Symbol.iterator]=function(){return this},Ye.prototype[Symbol.iterator]=function(){return new I(this)}}return Ye.prototype.formatError=function(d,j){if(d==null)var X=this.buffer.slice(this.index),d={text:X,offset:this.index,lineBreaks:X.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var ve=2,Je=Math.max(d.line-ve,1),Be=d.line+ve,Oe=String(Be).length,ht=O(this.buffer,this.line-d.line+ve+1).slice(0,5),yt=[];yt.push(j+" at line "+d.line+" col "+d.col+":"),yt.push("");for(var ct=0;ct<ht.length;ct++){var Bt=ht[ct],Pn=Je+ct;yt.push(k(String(Pn),Oe)+"  "+Bt),Pn===d.line&&yt.push(k("",Oe+d.col+1)+"^")}return yt.join(`
`)},Ye.prototype.clone=function(){return new Ye(this.states,this.state)},Ye.prototype.has=function(d){return!0},{compile:ze,states:he,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:Le}})}(Wu)),Wu.exports}var Hu={exports:{}},Qf;function N1(){return Qf||(Qf=1,function(s){(function(e,t){s.exports?s.exports=t():e.nearley=t()})(ma,function(){function e(g,u,k){return this.id=++e.highestId,this.name=g,this.symbols=u,this.postprocess=k,this}e.highestId=0,e.prototype.toString=function(g){var u=typeof g>"u"?this.symbols.map(h).join(" "):this.symbols.slice(0,g).map(h).join(" ")+"  "+this.symbols.slice(g).map(h).join(" ");return this.name+"  "+u};function t(g,u,k,O){this.rule=g,this.dot=u,this.reference=k,this.data=[],this.wantedBy=O,this.isComplete=this.dot===g.symbols.length}t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(g){var u=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=g,u.isComplete&&(u.data=u.build(),u.right=void 0),u},t.prototype.build=function(){var g=[],u=this;do g.push(u.right.data),u=u.left;while(u.left);return g.reverse(),g},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function n(g,u){this.grammar=g,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}n.prototype.process=function(g){for(var u=this.states,k=this.wants,O=this.completed,w=0;w<u.length;w++){var N=u[w];if(N.isComplete){if(N.finish(),N.data!==o.fail){for(var Z=N.wantedBy,ae=Z.length;ae--;){var Ae=Z[ae];this.complete(Ae,N)}if(N.reference===this.index){var Pe=N.rule.name;(this.completed[Pe]=this.completed[Pe]||[]).push(N)}}}else{var Pe=N.rule.symbols[N.dot];if(typeof Pe!="string"){this.scannable.push(N);continue}if(k[Pe]){if(k[Pe].push(N),O.hasOwnProperty(Pe))for(var ze=O[Pe],ae=0;ae<ze.length;ae++){var pe=ze[ae];this.complete(N,pe)}}else k[Pe]=[N],this.predict(Pe)}}},n.prototype.predict=function(g){for(var u=this.grammar.byName[g]||[],k=0;k<u.length;k++){var O=u[k],w=this.wants[g],N=new t(O,0,this.index,w);this.states.push(N)}},n.prototype.complete=function(g,u){var k=g.nextState(u);this.states.push(k)};function a(g,u){this.rules=g,this.start=u||this.rules[0].name;var k=this.byName={};this.rules.forEach(function(O){k.hasOwnProperty(O.name)||(k[O.name]=[]),k[O.name].push(O)})}a.fromCompiled=function(O,u){var k=O.Lexer;O.ParserStart&&(u=O.ParserStart,O=O.ParserRules);var O=O.map(function(N){return new e(N.name,N.symbols,N.postprocess)}),w=new a(O,u);return w.lexer=k,w};function r(){this.reset("")}r.prototype.reset=function(g,u){this.buffer=g,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},r.prototype.next=function(){if(this.index<this.buffer.length){var g=this.buffer[this.index++];return g===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:g}}},r.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},r.prototype.formatError=function(g,u){var k=this.buffer;if(typeof k=="string"){var O=k.split(`
`).slice(Math.max(0,this.line-5),this.line),w=k.indexOf(`
`,this.index);w===-1&&(w=k.length);var N=this.index-this.lastLineBreak,Z=String(this.line).length;return u+=" at line "+this.line+" col "+N+`:

`,u+=O.map(function(Ae,Pe){return ae(this.line-O.length+Pe+1,Z)+" "+Ae},this).join(`
`),u+=`
`+ae("",Z+N)+`^
`,u}else return u+" at index "+(this.index-1);function ae(Ae,Pe){var ze=String(Ae);return Array(Pe-ze.length+1).join(" ")+ze}};function o(g,u,k){if(g instanceof a)var O=g,k=u;else var O=a.fromCompiled(g,u);this.grammar=O,this.options={keepHistory:!1,lexer:O.lexer||new r};for(var w in k||{})this.options[w]=k[w];this.lexer=this.options.lexer,this.lexerState=void 0;var N=new n(O,0);this.table=[N],N.wants[O.start]=[],N.predict(O.start),N.process(),this.current=0}o.fail={},o.prototype.feed=function(g){var u=this.lexer;u.reset(g,this.lexerState);for(var k;;){try{if(k=u.next(),!k)break}catch(Ye){var Z=new n(this.grammar,this.current+1);this.table.push(Z);var O=new Error(this.reportLexerError(Ye));throw O.offset=this.current,O.token=Ye.token,O}var w=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var N=this.current+1,Z=new n(this.grammar,N);this.table.push(Z);for(var ae=k.text!==void 0?k.text:k.value,Ae=u.constructor===r?k.value:k,Pe=w.scannable,ze=Pe.length;ze--;){var pe=Pe[ze],he=pe.rule.symbols[pe.dot];if(he.test?he.test(Ae):he.type?he.type===k.type:he.literal===ae){var Le=pe.nextState({data:Ae,token:k,isToken:!0,reference:N-1});Z.states.push(Le)}}if(Z.process(),Z.states.length===0){var O=new Error(this.reportError(k));throw O.offset=this.current,O.token=k,O}this.options.keepHistory&&(w.lexerState=u.save()),this.current++}return w&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(g){var u,k,O=g.token;return O?(u="input "+JSON.stringify(O.text[0])+" (lexer error)",k=this.lexer.formatError(O,"Syntax error")):(u="input (lexer error)",k=g.message),this.reportErrorCommon(k,u)},o.prototype.reportError=function(g){var u=(g.type?g.type+" token: ":"")+JSON.stringify(g.value!==void 0?g.value:g),k=this.lexer.formatError(g,"Syntax error");return this.reportErrorCommon(k,u)},o.prototype.reportErrorCommon=function(g,u){var k=[];k.push(g);var O=this.table.length-2,w=this.table[O],N=w.states.filter(function(ae){var Ae=ae.rule.symbols[ae.dot];return Ae&&typeof Ae!="string"});if(N.length===0)k.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(w.states,k);else{k.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var Z=N.map(function(ae){return this.buildFirstStateStack(ae,[])||[ae]},this);Z.forEach(function(ae){var Ae=ae[0],Pe=Ae.rule.symbols[Ae.dot],ze=this.getSymbolDisplay(Pe);k.push("A "+ze+" based on:"),this.displayStateStack(ae,k)},this)}return k.push(""),k.join(`
`)},o.prototype.displayStateStack=function(g,u){for(var k,O=0,w=0;w<g.length;w++){var N=g[w],Z=N.rule.toString(N.dot);Z===k?O++:(O>0&&u.push("    ^ "+O+" more lines identical to this"),O=0,u.push("    "+Z)),k=Z}},o.prototype.getSymbolDisplay=function(g){return m(g)},o.prototype.buildFirstStateStack=function(g,u){if(u.indexOf(g)!==-1)return null;if(g.wantedBy.length===0)return[g];var k=g.wantedBy[0],O=[g].concat(u),w=this.buildFirstStateStack(k,O);return w===null?null:[g].concat(w)},o.prototype.save=function(){var g=this.table[this.current];return g.lexerState=this.lexerState,g},o.prototype.restore=function(g){var u=g.index;this.current=u,this.table[u]=g,this.table.splice(u+1),this.lexerState=g.lexerState,this.results=this.finish()},o.prototype.rewind=function(g){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[g])},o.prototype.finish=function(){var g=[],u=this.grammar.start,k=this.table[this.table.length-1];return k.states.forEach(function(O){O.rule.name===u&&O.dot===O.rule.symbols.length&&O.reference===0&&O.data!==o.fail&&g.push(O)}),g.map(function(O){return O.data})};function m(g){var u=typeof g;if(u==="string")return g;if(u==="object"){if(g.literal)return JSON.stringify(g.literal);if(g instanceof RegExp)return"character matching "+g;if(g.type)return g.type+" token";if(g.test)return"token matching "+String(g.test);throw new Error("Unknown symbol type: "+g)}}function h(g){var u=typeof g;if(u==="string")return g;if(u==="object"){if(g.literal)return JSON.stringify(g.literal);if(g instanceof RegExp)return g.toString();if(g.type)return"%"+g.type;if(g.test)return"<"+String(g.test)+">";throw new Error("Unknown symbol type: "+g)}}return{Parser:o,Grammar:a,Rule:e}})}(Hu)),Hu.exports}(function(s){(function(e,t){for(var n in t)e[n]=t[n]})(s,function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(a,r,o){n.o(a,r)||Object.defineProperty(a,r,{enumerable:!0,get:o})},n.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.t=function(a,r){if(r&1&&(a=n(a)),r&8||r&4&&typeof a=="object"&&a&&a.__esModule)return a;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:a}),r&2&&typeof a!="string")for(var m in a)n.d(o,m,(function(h){return a[h]}).bind(null,m));return o},n.n=function(a){var r=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(r,"a",r),r},n.o=function(a,r){return Object.prototype.hasOwnProperty.call(a,r)},n.p="",n(n.s=7)}([function(e,t){e.exports=C1()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.unbox=t.doubleQuoted=t.box=t.track=t.tracking=t.trackingComments=t.lexerAny=t.lexer=void 0;const a=n(0),r=n(3),o={};for(const he of r.sqlKeywords)o["kw_"+he.toLowerCase()]=he;const m=he=>{const Le=(0,a.keywords)(he);return Ye=>Le(Ye.toUpperCase())};t.lexer=(0,a.compile)({word:{match:/[eE](?!')[A-Za-z0-9_]*|[a-df-zA-DF-Z_][A-Za-z0-9_]*/,type:m(o),value:he=>he.toLowerCase()},wordQuoted:{match:/"(?:[^"\*]|"")+"/,type:()=>"quoted_word",value:he=>he.substring(1,he.length-1)},string:{match:/'(?:[^']|\'\')*'/,value:he=>he.substring(1,he.length-1).replace(/''/g,"'")},eString:{match:/\b(?:e|E)'(?:[^'\\]|[\r\n\s]|(?:\\\s)|(?:\\\n)|(?:\\.)|(?:\'\'))+'/,value:he=>he.substring(2,he.length-1).replace(/''/g,"'").replace(/\\([\s\n])/g,(Le,Ye)=>Ye).replace(/\\./g,Le=>JSON.parse('"'+Le+'"'))},qparam:{match:/\$\d+/},commentLine:/\-\-.*?$[\s\r\n]*/,commentFullOpen:/\/\*/,commentFullClose:/\*\/[\s\r\n]*/,star:"*",comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,lparen:"(",rparen:")",lbracket:"[",rbracket:"]",semicolon:";",dot:/\.(?!\d)/,op_cast:"::",op_colon:":",op_plus:"+",op_eq:"=",op_neq:{match:/(?:!=)|(?:\<\>)/,value:()=>"!="},op_membertext:"->>",op_member:"->",op_minus:"-",op_div:/\//,op_not_ilike:/\!~~\*/,op_not_like:/\!~~/,op_ilike:/~~\*/,op_like:/~~/,op_mod:"%",op_exp:"^",op_additive:{match:["||","-","#-","&&"]},op_compare:{match:[">",">=","<","<=","@>","<@","?","?|","?&","#>>",">>","<<","~","~*","!~","!~*","@@"]},ops_others:{match:["|","&","^","#"]},codeblock:{match:/\$\$(?:.|[\s\t\n\v\f\r])*?\$\$/s,lineBreaks:!0,value:he=>he.substring(2,he.length-2)}}),t.lexer.next=(he=>()=>{let Le,Ye=null;for(;Le=he.call(t.lexer);){if(Le.type==="commentFullOpen"){if(Ye===null){Ye={nested:0,offset:Le.offset,text:Le.text};continue}Ye.nested++}if(Ye!=null){if(Ye.text+=Le.text,Le.type==="commentFullClose"){if(Ye.nested===0){h==null||h.push(g(Ye)),Ye=null;continue}Ye.nested--}continue}if(Le.type!=="space"){if(Le.type==="commentLine"){h==null||h.push(g(Le));continue}break}}if(k&&Le){const ut=Le.offset,c={start:ut,end:ut+Le.text.length};Le._location=c}return Le})(t.lexer.next),t.lexerAny=t.lexer;let h=null;const g=({offset:he,text:Le})=>({_location:{start:he,end:he+Le.length},comment:Le});function u(he){if(h)throw new Error("WAT ? Recursive comments tracking  ?");try{h=[];const Le=he();return{comments:h,ast:Le}}finally{h=null}}t.trackingComments=u;let k=!1;function O(he){if(k)return he();try{return k=!0,he()}finally{k=!1}}t.tracking=O;function w(he,Le){if(!k||!Le||typeof Le!="object")return Le;const Ye=pe(he,!0),ut=pe(he,!1);if(!Ye||!ut)return Le;if(Ye===ut)Le._location=Ye;else{const c={start:Ye.start,end:ut.end};Le._location=c}return Le}t.track=w;const N=Symbol("_literal"),Z=Symbol("_doublequoted");function ae(he,Le,Ye){return!k&&!Ye?Le:w(he,{[N]:Le,[Z]:Ye})}t.box=ae;function Ae(he){return Array.isArray(he)&&he.length===1&&(he=Ae(he[0])),Array.isArray(he)&&!he.length?null:he}function Pe(he){const Le=Ae(he);if(typeof he=="object"&&(Le!=null&&Le[Z]))return{doubleQuoted:!0}}t.doubleQuoted=Pe;function ze(he){var Le;return typeof he=="object"&&(Le=he==null?void 0:he[N])!==null&&Le!==void 0?Le:he}t.unbox=ze;function pe(he,Le){if(!he)return null;if(Array.isArray(he)){const Ye=Le?1:-1;for(let ut=Le?0:he.length-1;ut>=0&&ut<he.length;ut+=Ye){const c=pe(he[ut],Le);if(c)return c}return null}return typeof he!="object"?null:he._location}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AstDefaultMapper=t.arrayNilMap=t.assignChanged=t.astMapper=void 0;const a=n(6);function r(O){const w=new g;return w.wrapped=O(w),w}t.astMapper=r;function o(O,w){if(!O)return O;let N=!1;for(const Z of Object.keys(w))if(O[Z]!==w[Z]){N=!0;break}return N?(0,a.trimNullish)({...O,...w},0):O}t.assignChanged=o;function m(O,w){if(!(O!=null&&O.length))return O;let N=!1,Z=O;for(let ae=0;ae<O.length;ae++){const Ae=O[ae],Pe=w(Ae);!N&&(!Pe||Pe!==Ae)&&(N=!0,Z=O.slice(0,ae)),Pe&&N&&Z.push(Pe)}return Z}t.arrayNilMap=m;function h(O){switch(O==null?void 0:O.type){case"select":case"delete":case"insert":case"update":case"union":case"union all":case"with":return!0;default:return!1}}class g{super(){return new k(this)}statement(w){switch(w.type){case"alter table":return this.alterTable(w);case"alter index":return this.alterIndex(w);case"commit":case"start transaction":case"rollback":return this.transaction(w);case"create index":return this.createIndex(w);case"create table":return this.createTable(w);case"truncate table":return this.truncateTable(w);case"delete":return this.delete(w);case"insert":return this.insert(w);case"with":return this.with(w);case"with recursive":return this.withRecursive(w);case"select":return this.selection(w);case"update":return this.update(w);case"create extension":return this.createExtension(w);case"tablespace":return this.tablespace(w);case"set":return this.setGlobal(w);case"set timezone":return this.setTimezone(w);case"create sequence":return this.createSequence(w);case"alter sequence":return this.alterSequence(w);case"begin":return this.begin(w);case"drop table":case"drop index":case"drop sequence":case"drop type":case"drop trigger":return this.drop(w);case"create enum":return this.createEnum(w);case"create composite type":return this.createCompositeType(w);case"union":case"union all":return this.union(w);case"show":return this.show(w);case"prepare":return this.prepare(w);case"deallocate":return this.deallocate(w);case"create view":return this.createView(w);case"create materialized view":return this.createMaterializedView(w);case"refresh materialized view":return this.refreshMaterializedView(w);case"create schema":return this.createSchema(w);case"raise":return this.raise(w);case"comment":return this.comment(w);case"do":return this.do(w);case"create function":return this.createFunction(w);case"drop function":return this.dropFunction(w);case"values":return this.values(w);default:throw a.NotSupported.never(w)}}comment(w){return w}createView(w){const N=this.select(w.query);if(!N)return null;const Z=this.tableRef(w.name);return Z?o(w,{query:N,name:Z}):null}createMaterializedView(w){const N=this.select(w.query);if(!N)return null;const Z=this.tableRef(w.name);return Z?o(w,{query:N,name:Z}):null}refreshMaterializedView(w){return w}do(w){return w}createFunction(w){const N=m(w.arguments,ae=>{const Ae=this.dataType(ae.type);return o(ae,{type:Ae})});let Z;if(w.returns)switch(w.returns.kind){case"table":Z=o(w.returns,{columns:m(w.returns.columns,ae=>{const Ae=this.dataType(ae.type);return Ae&&o(ae,{type:Ae})})});break;case void 0:case null:case"array":Z=this.dataType(w.returns);break;default:throw a.NotSupported.never(w.returns)}return o(w,{returns:Z,arguments:N})}dropFunction(w){const N=m(w.arguments,Z=>{const ae=this.dataType(Z.type);return o(Z,{type:ae})});return o(w,{arguments:N})}show(w){return w}createEnum(w){return w}createCompositeType(w){const N=m(w.attributes,Z=>o(Z,{dataType:this.dataType(Z.dataType)}));return o(w,{attributes:N})}drop(w){return w}alterSequence(w){return w.change.type==="set options"&&w.change.as&&this.dataType(w.change.as),w}begin(w){return w}createSequence(w){return w.options.as&&this.dataType(w.options.as),w}tablespace(w){return w}setGlobal(w){return w}setTimezone(w){return w}update(w){if(!w)return w;const N=this.tableRef(w.table);if(!N)return null;const Z=w.from&&this.from(w.from),ae=w.where&&this.expr(w.where),Ae=m(w.sets,ze=>this.set(ze));if(!(Ae!=null&&Ae.length))return null;const Pe=m(w.returning,ze=>this.selectionColumn(ze));return o(w,{table:N,where:ae,sets:Ae,from:Z,returning:Pe})}insert(w){var N,Z;const ae=this.tableRef(w.into);if(!ae)return null;const Ae=w.insert&&this.select(w.insert);if(!Ae)return null;const Pe=m(w.returning,he=>this.selectionColumn(he));let ze=(N=w.onConflict)===null||N===void 0?void 0:N.on;switch(ze==null?void 0:ze.type){case"on constraint":break;case"on expr":ze=o(ze,{exprs:m(ze.exprs,he=>this.expr(he))});break;case null:case void 0:break;default:throw a.NotSupported.never(ze)}let pe=(Z=w.onConflict)===null||Z===void 0?void 0:Z.do;if(pe&&pe!=="do nothing"){const he=m(pe.sets,Le=>this.set(Le));he!=null&&he.length?pe.sets!==he&&(pe={sets:he}):pe="do nothing"}return o(w,{into:ae,insert:Ae,returning:Pe,onConflict:pe?o(w.onConflict,{do:pe,on:ze}):w.onConflict})}raise(w){return o(w,{formatExprs:w.formatExprs&&m(w.formatExprs,N=>this.expr(N)),using:w.using&&m(w.using,N=>o(N,{value:this.expr(N.value)}))})}delete(w){const N=this.tableRef(w.from);if(!N)return null;const Z=w.where&&this.expr(w.where),ae=m(w.returning,Ae=>this.selectionColumn(Ae));return o(w,{where:Z,returning:ae,from:N})}createSchema(w){return w}createTable(w){const N=m(w.columns,Z=>{switch(Z.kind){case"column":return this.createColumn(Z);case"like table":return this.likeTable(Z);default:throw a.NotSupported.never(Z)}});return N!=null&&N.length?o(w,{columns:N}):null}likeTable(w){const N=this.tableRef(w.like);return N?o(w,{like:N}):null}truncateTable(w){return w}constraint(w){switch(w.type){case"not null":case"null":case"primary key":case"unique":case"add generated":return w;case"default":{const N=this.expr(w.default);return N?o(w,{default:N}):null}case"check":{const N=this.expr(w.expr);return N?o(w,{expr:N}):null}case"reference":{const N=this.tableRef(w.foreignTable);return N?o(w,{foreignTable:N}):null}default:throw a.NotSupported.never(w)}}set(w){const N=this.expr(w.value);return N?o(w,{value:N}):null}dataType(w){return w}tableRef(w){return w}transaction(w){return w}createExtension(w){return w}createIndex(w){const N=m(w.expressions,Z=>{const ae=this.expr(Z.expression);return ae===Z.expression?Z:ae?{...Z,expression:ae}:null});return N!=null&&N.length?o(w,{expressions:N}):null}prepare(w){const N=this.statement(w.statement);return N?o(w,{args:m(w.args,Z=>this.dataType(Z)),statement:N}):null}deallocate(w){return w}alterIndex(w){return w}alterTable(w){var N;const Z=this.tableRef(w.table);if(!Z)return null;let ae=[],Ae=!1;for(let Pe=0;Pe<(((N=w.changes)===null||N===void 0?void 0:N.length)||0);Pe++){const ze=w.changes[Pe],pe=this.tableAlteration(ze,w.table);Ae=Ae||pe!=ze,pe&&ae.push(pe)}return ae.length?Ae?o(w,{table:Z,changes:ae}):w:null}tableAlteration(w,N){switch(w.type){case"add column":return this.addColumn(w,N);case"add constraint":return this.addConstraint(w,N);case"alter column":return this.alterColumn(w,N);case"rename":return this.renameTable(w,N);case"rename column":return this.renameColumn(w,N);case"rename constraint":return this.renameConstraint(w,N);case"drop column":return this.dropColumn(w,N);case"drop constraint":return this.dropConstraint(w,N);case"owner":return this.setTableOwner(w,N);default:throw a.NotSupported.never(w)}}dropColumn(w,N){return w}dropConstraint(w,N){return w}setTableOwner(w,N){return w}renameConstraint(w,N){return w}renameColumn(w,N){return w}renameTable(w,N){return w}alterColumn(w,N){let Z;switch(w.alter.type){case"set default":Z=this.setColumnDefault(w.alter,N,w.column);break;case"set type":Z=this.setColumnType(w.alter,N,w.column);break;case"drop default":case"set not null":case"drop not null":Z=this.alterColumnSimple(w.alter,N,w.column);break;case"add generated":Z=this.alterColumnAddGenerated(w.alter,N,w.column);break;default:throw a.NotSupported.never(w.alter)}return Z?o(w,{alter:Z}):null}setColumnType(w,N,Z){const ae=this.dataType(w.dataType);return o(w,{dataType:ae})}alterColumnAddGenerated(w,N,Z){return w}alterColumnSimple(w,N,Z){return w}setColumnDefault(w,N,Z){const ae=this.expr(w.default);return ae?o(w,{default:ae}):null}addConstraint(w,N){return w}addColumn(w,N){const Z=this.createColumn(w.column);return Z?o(w,{column:Z}):null}createColumn(w){var N;const Z=this.dataType(w.dataType);if(!Z)return null;const ae=(N=m(w.constraints,Ae=>this.constraint(Ae)))!==null&&N!==void 0?N:void 0;return o(w,{dataType:Z,constraints:ae})}select(w){switch(w.type){case"select":return this.selection(w);case"union":case"union all":return this.union(w);case"with":return this.with(w);case"values":return this.values(w);case"with recursive":return this.withRecursive(w);default:throw a.NotSupported.never(w)}}selection(w){var N,Z;const ae=m(w.from,Ye=>this.from(Ye)),Ae=m(w.columns,Ye=>this.selectionColumn(Ye)),Pe=w.where&&this.expr(w.where),ze=m(w.groupBy,Ye=>this.expr(Ye)),pe=w.having&&this.expr(w.having),he=this.orderBy(w.orderBy),Le=o(w.limit,{limit:this.expr((N=w.limit)===null||N===void 0?void 0:N.limit),offset:this.expr((Z=w.limit)===null||Z===void 0?void 0:Z.offset)});return o(w,{from:ae,columns:Ae,where:Pe,groupBy:ze,having:pe,orderBy:he,limit:Le})}orderBy(w){return m(w,N=>{const Z=this.expr(N.by);return Z?Z===N.by?N:{...N,by:Z}:null})}union(w){const N=this.select(w.left),Z=this.select(w.right);return!N||!Z?N??Z:o(w,{left:N,right:Z})}with(w){const N=m(w.bind,ae=>{const Ae=this.statement(ae.statement);return h(Ae)?o(ae,{statement:Ae}):null});if(!N)return null;const Z=this.statement(w.in);return h(Z)?o(w,{bind:N,in:Z}):null}withRecursive(w){const N=this.union(w.bind);if(!N||N.type!=="union"&&N.type!=="union all")return null;const Z=this.statement(w.in);return h(Z)?o(w,{bind:N,in:Z}):null}from(w){switch(w.type){case"table":return this.fromTable(w);case"statement":return this.fromStatement(w);case"call":return this.fromCall(w);default:throw a.NotSupported.never(w)}}fromCall(w){const N=this.call(w);return!N||N.type!=="call"?null:o(w,N)}fromStatement(w){const N=this.select(w.statement);if(!N)return null;const Z=w.join&&this.join(w.join);return o(w,{statement:N,join:Z})}values(w){const N=m(w.values,Z=>m(Z,ae=>this.expr(ae)));return N!=null&&N.length?o(w,{values:N}):null}join(w){const N=w.on&&this.expr(w.on);return!N&&!w.using?w:o(w,{on:N})}fromTable(w){const N=this.tableRef(w.name);if(!N)return null;const Z=w.join&&this.join(w.join);return o(w,{name:N,join:Z})}selectionColumn(w){const N=this.expr(w.expr);return N?o(w,{expr:N}):null}expr(w){if(!w)return w;switch(w.type){case"binary":return this.binary(w);case"unary":return this.unary(w);case"ref":return this.ref(w);case"string":case"numeric":case"integer":case"boolean":case"constant":case"null":return this.constant(w);case"list":case"array":return this.array(w);case"array select":return this.arraySelect(w);case"call":return this.call(w);case"cast":return this.cast(w);case"case":return this.case(w);case"member":return this.member(w);case"arrayIndex":return this.arrayIndex(w);case"ternary":return this.ternary(w);case"select":case"union":case"union all":case"with":case"with recursive":return this.select(w);case"keyword":return this.valueKeyword(w);case"parameter":return this.parameter(w);case"extract":return this.extract(w);case"overlay":return this.callOverlay(w);case"substring":return this.callSubstring(w);case"values":return this.values(w);case"default":return this.default(w);default:throw a.NotSupported.never(w)}}arraySelect(w){const N=this.select(w.select);return N?o(w,{select:N}):null}extract(w){const N=this.expr(w.from);return N?o(w,{from:N}):null}valueKeyword(w){return w}ternary(w){const N=this.expr(w.value),Z=this.expr(w.lo),ae=this.expr(w.hi);return!N||!Z||!ae?null:o(w,{value:N,lo:Z,hi:ae})}parameter(w){return w}arrayIndex(w){const N=this.expr(w.array),Z=this.expr(w.index);return!N||!Z?null:o(w,{array:N,index:Z})}member(w){const N=this.expr(w.operand);return N?o(w,{operand:N}):null}case(w){const N=w.value&&this.expr(w.value),Z=m(w.whens,Ae=>{const Pe=this.expr(Ae.when),ze=this.expr(Ae.value);return!Pe||!ze?null:o(Ae,{value:ze,when:Pe})});if(!(Z!=null&&Z.length))return null;const ae=w.else&&this.expr(w.else);return o(w,{value:N,whens:Z,else:ae})}cast(w){const N=this.expr(w.operand);return N?o(w,{operand:N}):null}call(w){const N=m(w.args,Ae=>this.expr(Ae));if(!N)return null;const Z=this.orderBy(w.orderBy),ae=this.expr(w.filter);return o(w,{args:N,orderBy:Z,filter:ae})}callSubstring(w){return o(w,{value:this.expr(w.value),from:this.expr(w.from),for:this.expr(w.for)})}callOverlay(w){return o(w,{value:this.expr(w.value),placing:this.expr(w.placing),from:this.expr(w.from),for:this.expr(w.for)})}array(w){const N=m(w.expressions,Z=>this.expr(Z));return N?o(w,{expressions:N}):null}constant(w){return w}default(w){return w}ref(w){return w}unary(w){const N=this.expr(w.operand);return N?o(w,{operand:N}):null}binary(w){const N=this.expr(w.left),Z=this.expr(w.right);return!N||!Z?null:o(w,{left:N,right:Z})}}t.AstDefaultMapper=g;const u=g.prototype;for(const O of Object.getOwnPropertyNames(u)){const w=u[O];O==="constructor"||O==="super"||typeof w!="function"||Object.defineProperty(u,O,{configurable:!1,get(){return function(...N){var Z;if(this.skipNext)return this.skipNext=!1,w.apply(this,N);const ae=(Z=this.wrapped)===null||Z===void 0?void 0:Z[O];return ae?ae.apply(this.wrapped,N):w.apply(this,N)}}})}class k extends g{constructor(w){super(),this.parent=w}}for(const O of Object.getOwnPropertyNames(u)){const w=u[O];O==="constructor"||O==="super"||typeof w!="function"||Object.defineProperty(k.prototype,O,{configurable:!1,get(){return function(...N){return this.parent.skipNext=!0,w.apply(this.parent,N)}}})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sqlKeywords=void 0,t.sqlKeywords=["ALL","ANALYSE","ANALYZE","AND","ANY","ARRAY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","ILIKE","IN","INITIALLY","INNER","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","NATURAL","NOT","NOTNULL","NULL","OFFSET","ON","ONLY","OR","ORDER","OUTER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","PRECISION"]},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.intervalToString=t.normalizeInterval=t.buildInterval=void 0;const a=[["years",12],["months",30],["days",24],["hours",60],["minutes",60],["seconds",1e3],["milliseconds",0]];function*r(k){if(typeof k[1]=="number")yield k;else for(const O of k)yield*r(O)}function o(k,O){var w;const N={};if(O==="invalid")throw new Error(`invalid input syntax for type interval: "${k}"`);for(const[Z,ae]of r(O))N[Z]=((w=N[Z])!==null&&w!==void 0?w:0)+ae;return N}t.buildInterval=o;function m(k){var O,w,N,Z,ae,Ae,Pe,ze,pe;const he={...k};for(let ut=0;ut<a.length;ut++){const[c,I]=a[ut],d=(O=he[c])!==null&&O!==void 0?O:0,j=d>=0?Math.floor(d):Math.ceil(d);if(!d||j===d)continue;const X=(w=a[ut+1])===null||w===void 0?void 0:w[0];X&&(he[X]=((N=he[X])!==null&&N!==void 0?N:0)+I*(d-j)),he[c]=j}if(he.months||he.years){const ut=((Z=he.months)!==null&&Z!==void 0?Z:0)+((ae=he.years)!==null&&ae!==void 0?ae:0)*12;he.months=ut%12,he.years=(ut-he.months)/12}let Le=((Ae=he.hours)!==null&&Ae!==void 0?Ae:0)*3600+((Pe=he.minutes)!==null&&Pe!==void 0?Pe:0)*60+((ze=he.seconds)!==null&&ze!==void 0?ze:0)+((pe=he.milliseconds)!==null&&pe!==void 0?pe:0)/1e3,Ye=1;Le<0&&(Ye=-1,Le=-Le),Le>=3600?(he.hours=Ye*Math.floor(Le/3600),Le-=Ye*he.hours*3600):delete he.hours,Le>=60?(he.minutes=Ye*Math.floor(Le/60),Le-=Ye*he.minutes*60):delete he.minutes,Le>0?(he.seconds=Ye*Math.floor(Le),Le-=Ye*he.seconds):delete he.seconds,Le>0?he.milliseconds=Ye*Math.round(Le*1e3):delete he.milliseconds;for(const[ut]of a)he[ut]||delete he[ut];return he}t.normalizeInterval=m;function h(k){var O,w,N;k=m(k);const Z=[];if(k.years&&Z.push(k.years===1?"1 year":k.years+" years"),k.months&&Z.push(k.months===1?"1 month":k.months+" months"),k.days&&Z.push(k.days===1?"1 day":k.days+" days"),k.hours||k.minutes||k.seconds||k.milliseconds){let ae=`${g((O=k.hours)!==null&&O!==void 0?O:0)}:${g((w=k.minutes)!==null&&w!==void 0?w:0)}:${g((N=k.seconds)!==null&&N!==void 0?N:0)}`;k.milliseconds&&(ae=ae+(k.milliseconds/1e3).toString().substr(1)),(u(k.hours)||u(k.minutes)||u(k.seconds)||u(k.milliseconds))&&(ae="-"+ae),Z.push(ae)}return Z.join(" ")}t.intervalToString=h;function g(k){return k=Math.abs(k),k<10?"0"+k:k.toString()}function u(k){return k&&k<0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.astVisitor=void 0;const a=n(2);class r{super(){return new m(this)}}const o=a.AstDefaultMapper.prototype;for(const g of Object.getOwnPropertyNames(o)){const u=o[g];g==="constructor"||g==="super"||typeof u!="function"||Object.defineProperty(r.prototype,g,{configurable:!1,get(){return function(...k){const O=this.visitor[g];return O?(O.apply(this.visitor,k),k[0]):u.apply(this,k)}}})}class m{constructor(u){this.parent=u}}for(const g of Object.getOwnPropertyNames(o)){const u=o[g];g==="constructor"||g==="super"||typeof u!="function"||Object.defineProperty(m.prototype,g,{configurable:!1,get(){return function(...k){return u.apply(this.parent,k)}}})}function h(g){return(0,a.astMapper)(u=>{const k=new r;return k.mapper=u,k.visitor=g(k),k})}t.astVisitor=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.trimNullish=t.NotSupported=void 0;class a extends Error{constructor(m){super("Not supported"+(m?": "+m:""))}static never(m,h){return new a(`${h??""} ${JSON.stringify(m)}`)}}t.NotSupported=a;function r(o,m=5){if(m<0||(o instanceof Array&&o.forEach(h=>r(h,m-1)),typeof o!="object"||o instanceof Date)||!o)return o;for(const h of Object.keys(o)){const g=o[h];g==null?delete o[h]:r(g,m-1)}return o}t.trimNullish=r},function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(k,O,w,N){N===void 0&&(N=w);var Z=Object.getOwnPropertyDescriptor(O,w);(!Z||("get"in Z?!O.__esModule:Z.writable||Z.configurable))&&(Z={enumerable:!0,get:function(){return O[w]}}),Object.defineProperty(k,N,Z)}:function(k,O,w,N){N===void 0&&(N=w),k[N]=O[w]}),r=this&&this.__exportStar||function(k,O){for(var w in k)w!=="default"&&!Object.prototype.hasOwnProperty.call(O,w)&&a(O,k,w)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeInterval=t.intervalToString=t.toSql=t.astMapper=t.assignChanged=t.arrayNilMap=t.astVisitor=t.parseWithComments=t.parseIntervalLiteral=t.parseGeometricLiteral=t.parseArrayLiteral=t.parseFirst=t.parse=void 0;var o=n(8);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.parse}}),Object.defineProperty(t,"parseFirst",{enumerable:!0,get:function(){return o.parseFirst}}),Object.defineProperty(t,"parseArrayLiteral",{enumerable:!0,get:function(){return o.parseArrayLiteral}}),Object.defineProperty(t,"parseGeometricLiteral",{enumerable:!0,get:function(){return o.parseGeometricLiteral}}),Object.defineProperty(t,"parseIntervalLiteral",{enumerable:!0,get:function(){return o.parseIntervalLiteral}}),Object.defineProperty(t,"parseWithComments",{enumerable:!0,get:function(){return o.parseWithComments}});var m=n(5);Object.defineProperty(t,"astVisitor",{enumerable:!0,get:function(){return m.astVisitor}});var h=n(2);Object.defineProperty(t,"arrayNilMap",{enumerable:!0,get:function(){return h.arrayNilMap}}),Object.defineProperty(t,"assignChanged",{enumerable:!0,get:function(){return h.assignChanged}}),Object.defineProperty(t,"astMapper",{enumerable:!0,get:function(){return h.astMapper}});var g=n(19);Object.defineProperty(t,"toSql",{enumerable:!0,get:function(){return g.toSql}}),r(n(21),t);var u=n(4);Object.defineProperty(t,"intervalToString",{enumerable:!0,get:function(){return u.intervalToString}}),Object.defineProperty(t,"normalizeInterval",{enumerable:!0,get:function(){return u.normalizeInterval}})},function(e,t,n){var a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGeometricLiteral=t.parseIntervalLiteral=t.parseArrayLiteral=t.parse=t.parseWithComments=t.parseFirst=void 0;const r=n(9),o=a(n(10)),m=a(n(11)),h=a(n(13)),g=a(n(15)),u=a(n(17)),k=n(4),O=n(1);let w,N,Z,ae,Ae;function Pe(c){return pe(c)[0]}t.parseFirst=Pe;function ze(c,I){return(0,O.trackingComments)(()=>pe(c,I))}t.parseWithComments=ze;function pe(c,I){w||(w=r.Grammar.fromCompiled(o.default));const d=typeof I=="string"?I:I==null?void 0:I.entry,j=typeof I=="string"?null:I,X=()=>ut(c,w,d);let ve=j!=null&&j.locationTracking?(0,O.tracking)(X):X();return typeof I!="string"&&!Array.isArray(ve)&&(ve=[ve]),ve}t.parse=pe;function he(c){return N||(N=r.Grammar.fromCompiled(m.default)),ut(c,N)}t.parseArrayLiteral=he;function Le(c){if(c.startsWith("P"))return Ae||(Ae=r.Grammar.fromCompiled(u.default)),(0,k.buildInterval)(c,ut(c,Ae));{ae||(ae=r.Grammar.fromCompiled(g.default));const I=c.toLowerCase();return(0,k.buildInterval)(c,ut(I,ae))}}t.parseIntervalLiteral=Le;function Ye(c,I){return Z||(Z=r.Grammar.fromCompiled(h.default)),ut(c,Z,I)}t.parseGeometricLiteral=Ye;function ut(c,I,d){try{I.start=d??"main";const j=new r.Parser(I);j.feed(c);const X=j.finish();if(X.length){if(X.length!==1)throw new Error(` Ambiguous SQL syntax: Please file an issue stating the request that has failed at https://github.com/oguimbal/pgsql-ast-parser:

        ${c}

        `)}else throw new Error("Unexpected end of input");return X[0]}catch(j){if(typeof(j==null?void 0:j.message)!="string")throw j;let X=j.message,ve=null;const Je=[],Be=/A (.+) token based on:/g;let Oe;for(;Oe=Be.exec(X);)ve=ve??X.substr(0,Oe.index),Je.push(`    - A "${Oe[1]}" token`);throw ve&&(X=ve+Je.join(`
`)+`

`),j.message=X,j}}},function(e,t){e.exports=N1()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function a(c){return c[0]}const r=n(1),o=n(1);function m(c){return h(c,void 0)}function h(c,I){const d=ae(c);return!I||I.length===0?(0,o.track)(c,{name:d}):(0,o.track)(c,{name:d,columns:I.map(j=>({name:ae(j)}))})}function g(c){const I=ae(c);return(0,o.track)(c,{value:I})}function u(c){return Array.isArray(c)&&c.length===1&&(c=u(c[0])),Array.isArray(c)&&!c.length?null:(0,o.unbox)(c)}const k=c=>I=>(0,o.track)(I,I[c]),O=c=>Array.isArray(c)?(0,o.track)(c[c.length-1],c[c.length-1]):c;function w(c){if(Array.isArray(c)){const I=[];for(const d of c)I.push(...w(d));return I}return c?[c]:[]}function N(c){var I;return c=(0,o.unbox)(c),(I=c==null?void 0:c.value)!==null&&I!==void 0?I:c}function Z(c){return w((0,o.unbox)(c)).filter(d=>!!d).map(d=>N(d)).filter(d=>typeof d=="string").map(d=>d.trim()).filter(d=>!!d)}function ae(c,I){return Z(c).join(I||"")}function Ae(c){const I={};for(const[d,j]of c)I[d]=j;return I}const Pe={sensitivity:"accent"},ze=(c,I)=>c.localeCompare(I,void 0,Pe)===0,pe=c=>(I,d,j)=>{const X=N(I[0]);return ze(X,c)?(0,o.box)(I,c):j},he=pe,Le=(...c)=>{const I=new Set(c);return(d,j,X)=>{const ve=typeof d[0]=="string"?d[0]:d[0].value;return I.has(ve)?ve:X}};function Ye(c,I){const d=new Set,j=I.map(o.unbox);for(const[X,ve]of j){if(d.has(X))throw new Error("conflicting or redundant options");d.add(X),c[X]=(0,o.unbox)(ve)}}const ut={Lexer:r.lexerAny,ParserRules:[{name:"lparen",symbols:[r.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"rparen",symbols:[r.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"number$subexpression$1",symbols:["float"]},{name:"number$subexpression$1",symbols:["int"]},{name:"number",symbols:["number$subexpression$1"],postprocess:u},{name:"dot",symbols:[r.lexerAny.has("dot")?{type:"dot"}:dot],postprocess:a},{name:"float",symbols:[r.lexerAny.has("float")?{type:"float"}:float],postprocess:c=>(0,o.box)(c,parseFloat(u(c)))},{name:"int",symbols:[r.lexerAny.has("int")?{type:"int"}:int],postprocess:c=>(0,o.box)(c,parseInt(u(c),10))},{name:"comma",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma],postprocess:a},{name:"star",symbols:[r.lexerAny.has("star")?{type:"star"}:star],postprocess:c=>(0,o.box)(c,c[0].value)},{name:"string$subexpression$1",symbols:[r.lexerAny.has("string")?{type:"string"}:string]},{name:"string$subexpression$1",symbols:[r.lexerAny.has("eString")?{type:"eString"}:eString]},{name:"string",symbols:["string$subexpression$1"],postprocess:c=>(0,o.box)(c,u(c[0]).value)},{name:"ident",symbols:["word"],postprocess:k(0)},{name:"word",symbols:[r.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary],postprocess:c=>(0,o.box)(c,"primary")},{name:"word",symbols:[r.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:c=>(0,o.box)(c,"unique")},{name:"word",symbols:[r.lexerAny.has("quoted_word")?{type:"quoted_word"}:quoted_word],postprocess:c=>(0,o.box)(c,c[0].value,!0)},{name:"word",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:c=>(0,o.box)(c,c[0].value)},{name:"collist_paren",symbols:["lparen","collist","rparen"],postprocess:k(1)},{name:"collist$ebnf$1",symbols:[]},{name:"collist$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:O},{name:"collist$ebnf$1",symbols:["collist$ebnf$1","collist$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"collist",symbols:["ident","collist$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"kw_between",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("between")},{name:"kw_conflict",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("conflict")},{name:"kw_nothing",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("nothing")},{name:"kw_begin",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("begin")},{name:"kw_if",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("if")},{name:"kw_exists",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("exists")},{name:"kw_key",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("key")},{name:"kw_index",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("index")},{name:"kw_extension",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("extension")},{name:"kw_schema",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("schema")},{name:"kw_nulls",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("nulls")},{name:"kw_first",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("first")},{name:"kw_last",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("last")},{name:"kw_start",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("start")},{name:"kw_restart",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("restart")},{name:"kw_filter",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("filter")},{name:"kw_commit",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("commit")},{name:"kw_tablespace",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("tablespace")},{name:"kw_transaction",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("transaction")},{name:"kw_work",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("work")},{name:"kw_read",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("read")},{name:"kw_write",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("write")},{name:"kw_isolation",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("isolation")},{name:"kw_level",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("level")},{name:"kw_serializable",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("serializable")},{name:"kw_rollback",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("rollback")},{name:"kw_insert",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("insert")},{name:"kw_value",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("value")},{name:"kw_values",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("values")},{name:"kw_update",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("update")},{name:"kw_column",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("column")},{name:"kw_set",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("set")},{name:"kw_version",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("version")},{name:"kw_alter",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("alter")},{name:"kw_rename",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("rename")},{name:"kw_sequence",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("sequence")},{name:"kw_temp",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("temp")},{name:"kw_temporary",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("temporary")},{name:"kw_add",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("add")},{name:"kw_owner",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("owner")},{name:"kw_owned",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("owned")},{name:"kw_including",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("including")},{name:"kw_excluding",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("excluding")},{name:"kw_none",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("none")},{name:"kw_drop",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("drop")},{name:"kw_operator",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("operator")},{name:"kw_minvalue",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("minvalue")},{name:"kw_maxvalue",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("maxvalue")},{name:"kw_data",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("data")},{name:"kw_type",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("type")},{name:"kw_trigger",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("trigger")},{name:"kw_delete",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("delete")},{name:"kw_cache",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("cache")},{name:"kw_cascade",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("cascade")},{name:"kw_no",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("no")},{name:"kw_timestamp",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("timestamp")},{name:"kw_cycle",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("cycle")},{name:"kw_function",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("function")},{name:"kw_returns",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("returns")},{name:"kw_language",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("language")},{name:"kw_out",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("out")},{name:"kw_inout",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("inout")},{name:"kw_variadic",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("variadic")},{name:"kw_action",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("action")},{name:"kw_restrict",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("restrict")},{name:"kw_truncate",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("truncate")},{name:"kw_increment",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("increment")},{name:"kw_by",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("by")},{name:"kw_row",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("row")},{name:"kw_rows",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("rows")},{name:"kw_next",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("next")},{name:"kw_match",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("match")},{name:"kw_replace",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("replace")},{name:"kw_recursive",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("recursive")},{name:"kw_view",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("view")},{name:"kw_cascaded",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("cascaded")},{name:"kw_unlogged",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("unlogged")},{name:"kw_global",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("global")},{name:"kw_option",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("option")},{name:"kw_materialized",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("materialized")},{name:"kw_partial",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("partial")},{name:"kw_partition",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("partition")},{name:"kw_simple",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("simple")},{name:"kw_generated",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("generated")},{name:"kw_always",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("always")},{name:"kw_identity",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("identity")},{name:"kw_name",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("name")},{name:"kw_enum",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("enum")},{name:"kw_show",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("show")},{name:"kw_ordinality",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("ordinality")},{name:"kw_overriding",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("overriding")},{name:"kw_over",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("over")},{name:"kw_system",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("system")},{name:"kw_comment",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("comment")},{name:"kw_time",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("time")},{name:"kw_at",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("at")},{name:"kw_zone",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("zone")},{name:"kw_interval",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("interval")},{name:"kw_hour",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("hour")},{name:"kw_minute",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("minute")},{name:"kw_local",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("local")},{name:"kw_prepare",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("prepare")},{name:"kw_deallocate",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("deallocate")},{name:"kw_raise",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("raise")},{name:"kw_continue",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("continue")},{name:"kw_share",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("share")},{name:"kw_refresh",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("refresh")},{name:"kw_nowait",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("nowait")},{name:"kw_skip",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("skip")},{name:"kw_locked",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:pe("locked")},{name:"kw_ifnotexists",symbols:["kw_if",r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not,"kw_exists"]},{name:"kw_ifexists",symbols:["kw_if","kw_exists"]},{name:"kw_withordinality",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"kw_ordinality"]},{name:"kw_not_null",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not,r.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"kw_primary_key",symbols:[r.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary,"kw_key"]},{name:"data_type$ebnf$1$subexpression$1$macrocall$2",symbols:["int"]},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"data_type$ebnf$1$subexpression$1$macrocall$2"],postprocess:O},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1",symbols:["data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1","data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"data_type$ebnf$1$subexpression$1$macrocall$1",symbols:["data_type$ebnf$1$subexpression$1$macrocall$2","data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"data_type$ebnf$1$subexpression$1",symbols:["lparen","data_type$ebnf$1$subexpression$1$macrocall$1","rparen"],postprocess:k(1)},{name:"data_type$ebnf$1",symbols:["data_type$ebnf$1$subexpression$1"],postprocess:a},{name:"data_type$ebnf$1",symbols:[],postprocess:()=>null},{name:"data_type$ebnf$2$subexpression$1",symbols:[r.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,r.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$1"]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$2",symbols:[r.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,r.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1","data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$2"],postprocess:c=>c[0].concat([c[1]])},{name:"data_type$ebnf$2$subexpression$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1"]},{name:"data_type$ebnf$2",symbols:["data_type$ebnf$2$subexpression$1"],postprocess:a},{name:"data_type$ebnf$2",symbols:[],postprocess:()=>null},{name:"data_type",symbols:["data_type_simple","data_type$ebnf$1","data_type$ebnf$2"],postprocess:c=>{let I=c[2];const d=u(c[0]);let j;if(j={...d,...Array.isArray(c[1])&&c[1].length?{config:c[1].map(u)}:{}},I){I[0].type==="kw_array"&&(I=[["array"]]);for(const X of I[0])j={kind:"array",arrayOf:j}}return(0,o.track)(c,j)}},{name:"data_type_list$ebnf$1",symbols:[]},{name:"data_type_list$ebnf$1$subexpression$1",symbols:["comma","data_type"],postprocess:O},{name:"data_type_list$ebnf$1",symbols:["data_type_list$ebnf$1","data_type_list$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"data_type_list",symbols:["data_type","data_type_list$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"data_type_simple",symbols:["data_type_text"],postprocess:c=>(0,o.track)(c,{name:ae(c," ")})},{name:"data_type_simple",symbols:["data_type_numeric"],postprocess:c=>(0,o.track)(c,{name:ae(c," ")})},{name:"data_type_simple",symbols:["data_type_date"]},{name:"data_type_simple",symbols:["qualified_name_mark_quotes"]},{name:"data_type_numeric$subexpression$1",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:he("double")},{name:"data_type_numeric",symbols:["data_type_numeric$subexpression$1",r.lexerAny.has("kw_precision")?{type:"kw_precision"}:kw_precision]},{name:"data_type_text$subexpression$1",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:Le("character","bit")},{name:"data_type_text$subexpression$2",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:he("varying")},{name:"data_type_text",symbols:["data_type_text$subexpression$1","data_type_text$subexpression$2"]},{name:"data_type_date$subexpression$1",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:Le("timestamp","time")},{name:"data_type_date$subexpression$2",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"data_type_date$subexpression$2",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:he("without")},{name:"data_type_date$subexpression$3",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:he("time")},{name:"data_type_date$subexpression$4",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:he("zone")},{name:"data_type_date",symbols:["data_type_date$subexpression$1","data_type_date$subexpression$2","data_type_date$subexpression$3","data_type_date$subexpression$4"],postprocess:c=>(0,o.track)(c,{name:ae(c," ")})},{name:"data_type_date$subexpression$5",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:Le("timestamp","time")},{name:"data_type_date$subexpression$6",symbols:["lparen","int","rparen"],postprocess:k(1)},{name:"data_type_date$subexpression$7",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"data_type_date$subexpression$7",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:he("without")},{name:"data_type_date$subexpression$8",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:he("time")},{name:"data_type_date$subexpression$9",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:he("zone")},{name:"data_type_date",symbols:["data_type_date$subexpression$5","data_type_date$subexpression$6","data_type_date$subexpression$7","data_type_date$subexpression$8","data_type_date$subexpression$9"],postprocess:c=>(0,o.track)(c,{name:`timestamp ${ae(c[2])} time zone`,config:[(0,o.unbox)(c[1])]})},{name:"ident_aliased$subexpression$1",symbols:[r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"ident"],postprocess:O},{name:"ident_aliased",symbols:["ident_aliased$subexpression$1"]},{name:"ident_aliased",symbols:["ident"],postprocess:u},{name:"table_ref",symbols:["qualified_name"],postprocess:u},{name:"qcolumn$ebnf$1$subexpression$1",symbols:["dot","ident"],postprocess:O},{name:"qcolumn$ebnf$1",symbols:["qcolumn$ebnf$1$subexpression$1"],postprocess:a},{name:"qcolumn$ebnf$1",symbols:[],postprocess:()=>null},{name:"qcolumn",symbols:["ident","dot","ident","qcolumn$ebnf$1"],postprocess:c=>c[3]?(0,o.track)(c,{schema:(0,o.unbox)(c[0]),table:(0,o.unbox)(c[2]),column:(0,o.unbox)(c[3])}):(0,o.track)(c,{table:(0,o.unbox)(c[0]),column:(0,o.unbox)(c[2])})},{name:"table_ref_aliased$ebnf$1",symbols:["ident_aliased"],postprocess:a},{name:"table_ref_aliased$ebnf$1",symbols:[],postprocess:()=>null},{name:"table_ref_aliased",symbols:["table_ref","table_ref_aliased$ebnf$1"],postprocess:c=>{const I=u(c[1]);return(0,o.track)(c,{...u(c[0]),...I?{alias:I}:{}})}},{name:"qualified_name",symbols:["qname_ident"],postprocess:c=>(0,o.track)(c,{name:ae(c)})},{name:"qualified_name",symbols:["ident","dot","ident_extended"],postprocess:c=>{const I=ae(c[0]),d=ae(c[2]);return(0,o.track)(c,{schema:I,name:d})}},{name:"qualified_name",symbols:[r.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema],postprocess:c=>(0,o.track)(c,{name:"current_schema"})},{name:"qualified_name_mark_quotes",symbols:["qname_ident"],postprocess:c=>(0,o.track)(c,{name:ae(c),...(0,o.doubleQuoted)(c)})},{name:"qualified_name_mark_quotes",symbols:["ident","dot","ident_extended"],postprocess:c=>{const I=ae(c[0]),d=ae(c[2]);return(0,o.track)(c,{schema:I,name:d,...(0,o.doubleQuoted)(c[2])})}},{name:"qualified_name_mark_quotes",symbols:[r.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema],postprocess:c=>(0,o.track)(c,{name:"current_schema"})},{name:"qname_ident",symbols:["ident"]},{name:"qname_ident",symbols:[r.lexerAny.has("kw_precision")?{type:"kw_precision"}:kw_precision]},{name:"qname",symbols:["qualified_name"],postprocess:u},{name:"any_keyword",symbols:[r.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_analyse")?{type:"kw_analyse"}:kw_analyse]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_analyze")?{type:"kw_analyze"}:kw_analyze]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_any")?{type:"kw_any"}:kw_any]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_asymmetric")?{type:"kw_asymmetric"}:kw_asymmetric]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_authorization")?{type:"kw_authorization"}:kw_authorization]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_binary")?{type:"kw_binary"}:kw_binary]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_both")?{type:"kw_both"}:kw_both]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_case")?{type:"kw_case"}:kw_case]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_cast")?{type:"kw_cast"}:kw_cast]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_collation")?{type:"kw_collation"}:kw_collation]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_cross")?{type:"kw_cross"}:kw_cross]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_current_catalog")?{type:"kw_current_catalog"}:kw_current_catalog]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_current_date")?{type:"kw_current_date"}:kw_current_date]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_current_role")?{type:"kw_current_role"}:kw_current_role]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_current_time")?{type:"kw_current_time"}:kw_current_time]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_current_timestamp")?{type:"kw_current_timestamp"}:kw_current_timestamp]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_deferrable")?{type:"kw_deferrable"}:kw_deferrable]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_else")?{type:"kw_else"}:kw_else]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_end")?{type:"kw_end"}:kw_end]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_except")?{type:"kw_except"}:kw_except]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_fetch")?{type:"kw_fetch"}:kw_fetch]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_foreign")?{type:"kw_foreign"}:kw_foreign]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_freeze")?{type:"kw_freeze"}:kw_freeze]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_grant")?{type:"kw_grant"}:kw_grant]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_group")?{type:"kw_group"}:kw_group]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_having")?{type:"kw_having"}:kw_having]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_ilike")?{type:"kw_ilike"}:kw_ilike]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_initially")?{type:"kw_initially"}:kw_initially]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_inner")?{type:"kw_inner"}:kw_inner]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_intersect")?{type:"kw_intersect"}:kw_intersect]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_into")?{type:"kw_into"}:kw_into]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_isnull")?{type:"kw_isnull"}:kw_isnull]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_join")?{type:"kw_join"}:kw_join]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_lateral")?{type:"kw_lateral"}:kw_lateral]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_leading")?{type:"kw_leading"}:kw_leading]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_left")?{type:"kw_left"}:kw_left]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_limit")?{type:"kw_limit"}:kw_limit]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_localtime")?{type:"kw_localtime"}:kw_localtime]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_localtimestamp")?{type:"kw_localtimestamp"}:kw_localtimestamp]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_natural")?{type:"kw_natural"}:kw_natural]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_notnull")?{type:"kw_notnull"}:kw_notnull]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_offset")?{type:"kw_offset"}:kw_offset]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_order")?{type:"kw_order"}:kw_order]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_overlaps")?{type:"kw_overlaps"}:kw_overlaps]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_placing")?{type:"kw_placing"}:kw_placing]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_references")?{type:"kw_references"}:kw_references]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_right")?{type:"kw_right"}:kw_right]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_select")?{type:"kw_select"}:kw_select]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_similar")?{type:"kw_similar"}:kw_similar]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_some")?{type:"kw_some"}:kw_some]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_symmetric")?{type:"kw_symmetric"}:kw_symmetric]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_tablesample")?{type:"kw_tablesample"}:kw_tablesample]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_then")?{type:"kw_then"}:kw_then]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_trailing")?{type:"kw_trailing"}:kw_trailing]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_union")?{type:"kw_union"}:kw_union]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_variadic")?{type:"kw_variadic"}:kw_variadic]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_verbose")?{type:"kw_verbose"}:kw_verbose]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_when")?{type:"kw_when"}:kw_when]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_window")?{type:"kw_window"}:kw_window]},{name:"any_keyword",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"ident_extended",symbols:["ident"]},{name:"ident_extended",symbols:["any_keyword"]},{name:"select_statement$ebnf$1",symbols:["select_from"],postprocess:a},{name:"select_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$2",symbols:["select_where"],postprocess:a},{name:"select_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$3$subexpression$1$ebnf$1",symbols:["select_having"],postprocess:a},{name:"select_statement$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$3$subexpression$1",symbols:["select_groupby","select_statement$ebnf$3$subexpression$1$ebnf$1"]},{name:"select_statement$ebnf$3",symbols:["select_statement$ebnf$3$subexpression$1"],postprocess:a},{name:"select_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$4",symbols:["select_order_by"],postprocess:a},{name:"select_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$5",symbols:["select_limit_offset"],postprocess:a},{name:"select_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$6$subexpression$1$ebnf$1",symbols:["select_skip"],postprocess:a},{name:"select_statement$ebnf$6$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$6$subexpression$1",symbols:["select_for","select_statement$ebnf$6$subexpression$1$ebnf$1"]},{name:"select_statement$ebnf$6",symbols:["select_statement$ebnf$6$subexpression$1"],postprocess:a},{name:"select_statement$ebnf$6",symbols:[],postprocess:()=>null},{name:"select_statement",symbols:["select_what","select_statement$ebnf$1","select_statement$ebnf$2","select_statement$ebnf$3","select_statement$ebnf$4","select_statement$ebnf$5","select_statement$ebnf$6"],postprocess:c=>{let[I,d,j,X,ve,Je,Be]=c;d=u(d);let Oe=X&&X[0],ht=X&&X[1];Oe=Oe&&(Oe.length===1&&Oe[0].type==="list"?Oe[0].expressions:Oe),ht=ht&&u(ht);let yt=Be&&Be[0],ct=Be&&Be[1];return ct=u(ct),(0,o.track)(c,{...I,...d?{from:Array.isArray(d)?d:[d]}:{},...Oe?{groupBy:Oe}:{},...ht?{having:ht}:{},...Je?{limit:u(Je)}:{},...ve?{orderBy:ve}:{},...j?{where:j}:{},...yt?{for:yt[1]}:{},...ct?{skip:ct}:{},type:"select"})}},{name:"select_from",symbols:[r.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"select_from_items"],postprocess:O},{name:"select_from_items$ebnf$1",symbols:[]},{name:"select_from_items$ebnf$1$subexpression$1",symbols:["comma","select_from_item"],postprocess:O},{name:"select_from_items$ebnf$1",symbols:["select_from_items$ebnf$1","select_from_items$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"select_from_items",symbols:["select_from_item","select_from_items$ebnf$1"],postprocess:([c,I])=>[...c,...w(I)||[]]},{name:"select_from_item",symbols:["select_from_subject"]},{name:"select_from_item",symbols:["select_from_item_joins"],postprocess:k(0)},{name:"select_from_item_joins$subexpression$1",symbols:["select_from_item"],postprocess:k(0)},{name:"select_from_item_joins",symbols:["select_from_item_joins$subexpression$1","select_table_join"],postprocess:w},{name:"select_from_item_joins",symbols:["lparen","select_from_item_joins","rparen"],postprocess:k(1)},{name:"select_from_subject",symbols:["stb_table"],postprocess:u},{name:"select_from_subject",symbols:["stb_statement"],postprocess:u},{name:"select_from_subject",symbols:["stb_call"],postprocess:u},{name:"stb_opts$ebnf$1",symbols:["collist_paren"],postprocess:a},{name:"stb_opts$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_opts",symbols:["ident_aliased","stb_opts$ebnf$1"],postprocess:c=>(0,o.track)(c,{alias:ae(c[0]),...c[1]&&{columnNames:(0,o.unbox)(c[1]).map(m)}})},{name:"stb_table$ebnf$1",symbols:["stb_opts"],postprocess:a},{name:"stb_table$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_table",symbols:["table_ref","stb_table$ebnf$1"],postprocess:c=>(0,o.track)(c,{type:"table",name:(0,o.track)(c,{...c[0],...c[1]})})},{name:"stb_statement",symbols:["selection_paren","stb_opts"],postprocess:c=>(0,o.track)(c,{type:"statement",statement:u(c[0]),...c[1]})},{name:"select_values",symbols:["kw_values","insert_values"],postprocess:c=>(0,o.track)(c,{type:"values",values:c[1]})},{name:"stb_call$ebnf$1",symbols:["kw_withordinality"],postprocess:a},{name:"stb_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call$ebnf$2",symbols:["stb_call_alias"],postprocess:a},{name:"stb_call$ebnf$2",symbols:[],postprocess:()=>null},{name:"stb_call",symbols:["expr_function_call","stb_call$ebnf$1","stb_call$ebnf$2"],postprocess:c=>{const I=c[1],d=c[2];return!I&&!d?c[0]:(0,o.track)(c,{...c[0],...I&&{withOrdinality:!0},alias:d?h(d[0],d[1]):void 0})}},{name:"stb_call_alias$subexpression$1$ebnf$1",symbols:[r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as],postprocess:a},{name:"stb_call_alias$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call_alias$subexpression$1",symbols:["stb_call_alias$subexpression$1$ebnf$1","ident"],postprocess:O},{name:"stb_call_alias$ebnf$1",symbols:["stb_call_alias_list"],postprocess:a},{name:"stb_call_alias$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call_alias",symbols:["stb_call_alias$subexpression$1","stb_call_alias$ebnf$1"]},{name:"stb_call_alias_list",symbols:["lparen","stb_call_alias_list_raw","rparen"],postprocess:k(1)},{name:"stb_call_alias_list_raw$ebnf$1",symbols:[]},{name:"stb_call_alias_list_raw$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:O},{name:"stb_call_alias_list_raw$ebnf$1",symbols:["stb_call_alias_list_raw$ebnf$1","stb_call_alias_list_raw$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"stb_call_alias_list_raw",symbols:["ident","stb_call_alias_list_raw$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"select_table_join$ebnf$1",symbols:["select_table_join_clause"],postprocess:a},{name:"select_table_join$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_table_join",symbols:["select_join_op",r.lexerAny.has("kw_join")?{type:"kw_join"}:kw_join,"select_from_subject","select_table_join$ebnf$1"],postprocess:c=>(0,o.track)(c,{...u(c[2]),join:{type:ae(c[0]," "),...c[3]&&u(c[3])}})},{name:"select_table_join_clause",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"expr"],postprocess:c=>(0,o.track)(c,{on:O(c)})},{name:"select_table_join_clause$macrocall$2",symbols:["ident"]},{name:"select_table_join_clause$macrocall$1$ebnf$1",symbols:[]},{name:"select_table_join_clause$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"select_table_join_clause$macrocall$2"],postprocess:O},{name:"select_table_join_clause$macrocall$1$ebnf$1",symbols:["select_table_join_clause$macrocall$1$ebnf$1","select_table_join_clause$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"select_table_join_clause$macrocall$1",symbols:["select_table_join_clause$macrocall$2","select_table_join_clause$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"select_table_join_clause",symbols:[r.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"lparen","select_table_join_clause$macrocall$1","rparen"],postprocess:c=>(0,o.track)(c,{using:c[2].map(m)})},{name:"select_join_op$subexpression$1$ebnf$1",symbols:[r.lexerAny.has("kw_inner")?{type:"kw_inner"}:kw_inner],postprocess:a},{name:"select_join_op$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$1",symbols:["select_join_op$subexpression$1$ebnf$1"],postprocess:c=>(0,o.box)(c,"INNER JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$1"]},{name:"select_join_op$subexpression$2",symbols:[r.lexerAny.has("kw_cross")?{type:"kw_cross"}:kw_cross],postprocess:c=>(0,o.box)(c,"CROSS JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$2"]},{name:"select_join_op$subexpression$3$ebnf$1",symbols:[r.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:a},{name:"select_join_op$subexpression$3$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$3",symbols:[r.lexerAny.has("kw_left")?{type:"kw_left"}:kw_left,"select_join_op$subexpression$3$ebnf$1"],postprocess:c=>(0,o.box)(c,"LEFT JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$3"]},{name:"select_join_op$subexpression$4$ebnf$1",symbols:[r.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:a},{name:"select_join_op$subexpression$4$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$4",symbols:[r.lexerAny.has("kw_right")?{type:"kw_right"}:kw_right,"select_join_op$subexpression$4$ebnf$1"],postprocess:c=>(0,o.box)(c,"RIGHT JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$4"]},{name:"select_join_op$subexpression$5$ebnf$1",symbols:[r.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:a},{name:"select_join_op$subexpression$5$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$5",symbols:[r.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full,"select_join_op$subexpression$5$ebnf$1"],postprocess:c=>(0,o.box)(c,"FULL JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$5"]},{name:"select_what$ebnf$1",symbols:["select_distinct"],postprocess:a},{name:"select_what$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_what$ebnf$2",symbols:["select_expr_list_aliased"],postprocess:a},{name:"select_what$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_what",symbols:[r.lexerAny.has("kw_select")?{type:"kw_select"}:kw_select,"select_what$ebnf$1","select_what$ebnf$2"],postprocess:c=>(0,o.track)(c,{columns:c[2],...c[1]&&{distinct:(0,o.unbox)(c[1])}})},{name:"select_expr_list_aliased$ebnf$1",symbols:[]},{name:"select_expr_list_aliased$ebnf$1$subexpression$1",symbols:["comma","select_expr_list_item"],postprocess:O},{name:"select_expr_list_aliased$ebnf$1",symbols:["select_expr_list_aliased$ebnf$1","select_expr_list_aliased$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"select_expr_list_aliased",symbols:["select_expr_list_item","select_expr_list_aliased$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"select_expr_list_item$ebnf$1",symbols:["ident_aliased"],postprocess:a},{name:"select_expr_list_item$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_expr_list_item",symbols:["expr","select_expr_list_item$ebnf$1"],postprocess:c=>(0,o.track)(c,{expr:c[0],...c[1]?{alias:m(c[1])}:{}})},{name:"select_distinct",symbols:[r.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:c=>(0,o.box)(c,"all")},{name:"select_distinct$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"lparen","expr_list_raw","rparen"],postprocess:k(2)},{name:"select_distinct$ebnf$1",symbols:["select_distinct$ebnf$1$subexpression$1"],postprocess:a},{name:"select_distinct$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_distinct",symbols:[r.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct,"select_distinct$ebnf$1"],postprocess:c=>(0,o.box)(c,c[1]||"distinct")},{name:"select_where",symbols:[r.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:O},{name:"select_groupby",symbols:[r.lexerAny.has("kw_group")?{type:"kw_group"}:kw_group,"kw_by","expr_list_raw"],postprocess:O},{name:"select_having",symbols:[r.lexerAny.has("kw_having")?{type:"kw_having"}:kw_having,"expr"],postprocess:O},{name:"select_limit_offset$ebnf$1$subexpression$1",symbols:["select_offset"]},{name:"select_limit_offset$ebnf$1$subexpression$1",symbols:["select_limit"]},{name:"select_limit_offset$ebnf$1",symbols:["select_limit_offset$ebnf$1$subexpression$1"]},{name:"select_limit_offset$ebnf$1$subexpression$2",symbols:["select_offset"]},{name:"select_limit_offset$ebnf$1$subexpression$2",symbols:["select_limit"]},{name:"select_limit_offset$ebnf$1",symbols:["select_limit_offset$ebnf$1","select_limit_offset$ebnf$1$subexpression$2"],postprocess:c=>c[0].concat([c[1]])},{name:"select_limit_offset",symbols:["select_limit_offset$ebnf$1"],postprocess:(c,I)=>{const d=u(c);if(!Array.isArray(d))return(0,o.track)(c,d);if(d.length!=2)return I;const j=u(d[0]),X=u(d[1]);return j.offset&&X.offset||j.limit&&X.limit?I:(0,o.track)(c,{...j,...X})}},{name:"select_offset$ebnf$1$subexpression$1",symbols:["kw_row"]},{name:"select_offset$ebnf$1$subexpression$1",symbols:["kw_rows"]},{name:"select_offset$ebnf$1",symbols:["select_offset$ebnf$1$subexpression$1"],postprocess:a},{name:"select_offset$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_offset",symbols:[r.lexerAny.has("kw_offset")?{type:"kw_offset"}:kw_offset,"expr_nostar","select_offset$ebnf$1"],postprocess:c=>(0,o.track)(c,{offset:u(c[1])})},{name:"select_limit$subexpression$1",symbols:["select_limit_1"]},{name:"select_limit$subexpression$1",symbols:["select_limit_2"]},{name:"select_limit",symbols:["select_limit$subexpression$1"],postprocess:c=>(0,o.track)(c,{limit:u(c)})},{name:"select_limit_1",symbols:[r.lexerAny.has("kw_limit")?{type:"kw_limit"}:kw_limit,"expr_nostar"],postprocess:O},{name:"select_limit_2$ebnf$1$subexpression$1",symbols:["kw_first"]},{name:"select_limit_2$ebnf$1$subexpression$1",symbols:["kw_next"]},{name:"select_limit_2$ebnf$1",symbols:["select_limit_2$ebnf$1$subexpression$1"],postprocess:a},{name:"select_limit_2$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_limit_2$subexpression$1",symbols:["kw_row"]},{name:"select_limit_2$subexpression$1",symbols:["kw_rows"]},{name:"select_limit_2",symbols:[r.lexerAny.has("kw_fetch")?{type:"kw_fetch"}:kw_fetch,"select_limit_2$ebnf$1","expr_nostar","select_limit_2$subexpression$1",r.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only],postprocess:k(2)},{name:"select_for$subexpression$1",symbols:["kw_update"],postprocess:c=>(0,o.track)(c,{type:"update"})},{name:"select_for$subexpression$1",symbols:["kw_no","kw_key","kw_update"],postprocess:c=>(0,o.track)(c,{type:"no key update"})},{name:"select_for$subexpression$1",symbols:["kw_share"],postprocess:c=>(0,o.track)(c,{type:"share"})},{name:"select_for$subexpression$1",symbols:["kw_key","kw_share"],postprocess:c=>(0,o.track)(c,{type:"key share"})},{name:"select_for",symbols:[r.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"select_for$subexpression$1"]},{name:"select_skip$subexpression$1",symbols:["kw_nowait"],postprocess:c=>(0,o.track)(c,{type:"nowait"})},{name:"select_skip$subexpression$1",symbols:["kw_skip","kw_locked"],postprocess:c=>(0,o.track)(c,{type:"skip locked"})},{name:"select_skip",symbols:["select_skip$subexpression$1"]},{name:"select_order_by$subexpression$1",symbols:[r.lexerAny.has("kw_order")?{type:"kw_order"}:kw_order,"kw_by"]},{name:"select_order_by$ebnf$1",symbols:[]},{name:"select_order_by$ebnf$1$subexpression$1",symbols:["comma","select_order_by_expr"],postprocess:O},{name:"select_order_by$ebnf$1",symbols:["select_order_by$ebnf$1","select_order_by$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"select_order_by",symbols:["select_order_by$subexpression$1","select_order_by_expr","select_order_by$ebnf$1"],postprocess:([c,I,d])=>[I,...d||[]]},{name:"select_order_by_expr$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"select_order_by_expr$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"select_order_by_expr$ebnf$1",symbols:["select_order_by_expr$ebnf$1$subexpression$1"],postprocess:a},{name:"select_order_by_expr$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_order_by_expr$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_first"]},{name:"select_order_by_expr$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_last"]},{name:"select_order_by_expr$ebnf$2$subexpression$1",symbols:["kw_nulls","select_order_by_expr$ebnf$2$subexpression$1$subexpression$1"],postprocess:O},{name:"select_order_by_expr$ebnf$2",symbols:["select_order_by_expr$ebnf$2$subexpression$1"],postprocess:a},{name:"select_order_by_expr$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_order_by_expr",symbols:["expr","select_order_by_expr$ebnf$1","select_order_by_expr$ebnf$2"],postprocess:c=>(0,o.track)(c,{by:c[0],...c[1]&&{order:ae(c[1]).toUpperCase()},...c[2]&&{nulls:ae(c[2]).toUpperCase()}})},{name:"expr",symbols:["expr_nostar"],postprocess:u},{name:"expr",symbols:["expr_star"],postprocess:u},{name:"expr_nostar",symbols:["expr_paren"],postprocess:u},{name:"expr_nostar",symbols:["expr_or"],postprocess:u},{name:"expr_paren$subexpression$1",symbols:["expr_or_select"]},{name:"expr_paren$subexpression$1",symbols:["expr_list_many"]},{name:"expr_paren",symbols:["lparen","expr_paren$subexpression$1","rparen"],postprocess:k(1)},{name:"expr_or$macrocall$2$macrocall$2",symbols:[r.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or]},{name:"expr_or$macrocall$2$macrocall$1",symbols:["expr_or$macrocall$2$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_or$macrocall$2",symbols:["expr_or$macrocall$2$macrocall$1"]},{name:"expr_or$macrocall$3",symbols:["expr_or"]},{name:"expr_or$macrocall$4",symbols:["expr_and"]},{name:"expr_or$macrocall$1$subexpression$1",symbols:["expr_or$macrocall$3"]},{name:"expr_or$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_or$macrocall$1$subexpression$2",symbols:["expr_or$macrocall$4"]},{name:"expr_or$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_or$macrocall$1",symbols:["expr_or$macrocall$1$subexpression$1","expr_or$macrocall$2","expr_or$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_or$macrocall$1",symbols:["expr_or$macrocall$4"],postprocess:u},{name:"expr_or",symbols:["expr_or$macrocall$1"]},{name:"expr_and$macrocall$2$macrocall$2",symbols:[r.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"expr_and$macrocall$2$macrocall$1",symbols:["expr_and$macrocall$2$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_and$macrocall$2",symbols:["expr_and$macrocall$2$macrocall$1"]},{name:"expr_and$macrocall$3",symbols:["expr_and"]},{name:"expr_and$macrocall$4",symbols:["expr_not"]},{name:"expr_and$macrocall$1$subexpression$1",symbols:["expr_and$macrocall$3"]},{name:"expr_and$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_and$macrocall$1$subexpression$2",symbols:["expr_and$macrocall$4"]},{name:"expr_and$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_and$macrocall$1",symbols:["expr_and$macrocall$1$subexpression$1","expr_and$macrocall$2","expr_and$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_and$macrocall$1",symbols:["expr_and$macrocall$4"],postprocess:u},{name:"expr_and",symbols:["expr_and$macrocall$1"]},{name:"expr_not$macrocall$2$macrocall$2",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not]},{name:"expr_not$macrocall$2$macrocall$1",symbols:["expr_not$macrocall$2$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_not$macrocall$2",symbols:["expr_not$macrocall$2$macrocall$1"]},{name:"expr_not$macrocall$3",symbols:["expr_not"]},{name:"expr_not$macrocall$4",symbols:["expr_eq"]},{name:"expr_not$macrocall$1$subexpression$1",symbols:["expr_not$macrocall$3"]},{name:"expr_not$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_not$macrocall$1",symbols:["expr_not$macrocall$2","expr_not$macrocall$1$subexpression$1"],postprocess:c=>(0,o.track)(c,{type:"unary",...u(c[0]),operand:u(c[1])})},{name:"expr_not$macrocall$1",symbols:["expr_not$macrocall$4"],postprocess:u},{name:"expr_not",symbols:["expr_not$macrocall$1"]},{name:"expr_eq$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq]},{name:"expr_eq$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_neq")?{type:"op_neq"}:op_neq]},{name:"expr_eq$macrocall$2$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_eq$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$2"]},{name:"expr_eq$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_eq$macrocall$2$macrocall$1$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_eq$macrocall$2$macrocall$1",symbols:["expr_eq$macrocall$2$macrocall$1$macrocall$1"],postprocess:u},{name:"expr_eq$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_eq$macrocall$2$macrocall$2","rparen"],postprocess:c=>(0,o.track)(c,{op:(ae(c[4]," ")||"<error>").toUpperCase(),opSchema:ae(c[2])})},{name:"expr_eq$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$1"]},{name:"expr_eq$macrocall$3",symbols:["expr_eq"]},{name:"expr_eq$macrocall$4",symbols:["expr_is"]},{name:"expr_eq$macrocall$1$subexpression$1",symbols:["expr_eq$macrocall$3"]},{name:"expr_eq$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_eq$macrocall$1$subexpression$2",symbols:["expr_eq$macrocall$4"]},{name:"expr_eq$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_eq$macrocall$1",symbols:["expr_eq$macrocall$1$subexpression$1","expr_eq$macrocall$2","expr_eq$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_eq$macrocall$1",symbols:["expr_eq$macrocall$4"],postprocess:u},{name:"expr_eq",symbols:["expr_eq$macrocall$1"]},{name:"expr_star",symbols:["star"],postprocess:c=>(0,o.track)(c,{type:"ref",name:"*"})},{name:"expr_is$subexpression$1",symbols:["expr_is"]},{name:"expr_is$subexpression$1",symbols:["expr_paren"]},{name:"expr_is$subexpression$2",symbols:[r.lexerAny.has("kw_isnull")?{type:"kw_isnull"}:kw_isnull]},{name:"expr_is$subexpression$2",symbols:[r.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,r.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"expr_is",symbols:["expr_is$subexpression$1","expr_is$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"unary",op:"IS NULL",operand:u(c[0])})},{name:"expr_is$subexpression$3",symbols:["expr_is"]},{name:"expr_is$subexpression$3",symbols:["expr_paren"]},{name:"expr_is$subexpression$4",symbols:[r.lexerAny.has("kw_notnull")?{type:"kw_notnull"}:kw_notnull]},{name:"expr_is$subexpression$4",symbols:[r.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"kw_not_null"]},{name:"expr_is",symbols:["expr_is$subexpression$3","expr_is$subexpression$4"],postprocess:c=>(0,o.track)(c,{type:"unary",op:"IS NOT NULL",operand:u(c[0])})},{name:"expr_is$subexpression$5",symbols:["expr_is"]},{name:"expr_is$subexpression$5",symbols:["expr_paren"]},{name:"expr_is$ebnf$1",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:a},{name:"expr_is$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_is$subexpression$6",symbols:[r.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"expr_is$subexpression$6",symbols:[r.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"expr_is",symbols:["expr_is$subexpression$5",r.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"expr_is$ebnf$1","expr_is$subexpression$6"],postprocess:c=>(0,o.track)(c,{type:"unary",op:"IS "+Z([c[2],c[3]]).join(" ").toUpperCase(),operand:u(c[0])})},{name:"expr_is",symbols:["expr_compare"],postprocess:u},{name:"expr_compare$macrocall$2$macrocall$2",symbols:[r.lexerAny.has("op_compare")?{type:"op_compare"}:op_compare]},{name:"expr_compare$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_compare$macrocall$2$macrocall$2"]},{name:"expr_compare$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_compare$macrocall$2$macrocall$1$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_compare$macrocall$2$macrocall$1",symbols:["expr_compare$macrocall$2$macrocall$1$macrocall$1"],postprocess:u},{name:"expr_compare$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_compare$macrocall$2$macrocall$2","rparen"],postprocess:c=>(0,o.track)(c,{op:(ae(c[4]," ")||"<error>").toUpperCase(),opSchema:ae(c[2])})},{name:"expr_compare$macrocall$2",symbols:["expr_compare$macrocall$2$macrocall$1"]},{name:"expr_compare$macrocall$3",symbols:["expr_compare"]},{name:"expr_compare$macrocall$4",symbols:["expr_range"]},{name:"expr_compare$macrocall$1$subexpression$1",symbols:["expr_compare$macrocall$3"]},{name:"expr_compare$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_compare$macrocall$1$subexpression$2",symbols:["expr_compare$macrocall$4"]},{name:"expr_compare$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_compare$macrocall$1",symbols:["expr_compare$macrocall$1$subexpression$1","expr_compare$macrocall$2","expr_compare$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_compare$macrocall$1",symbols:["expr_compare$macrocall$4"],postprocess:u},{name:"expr_compare",symbols:["expr_compare$macrocall$1"]},{name:"expr_range$macrocall$2",symbols:["ops_between"]},{name:"expr_range$macrocall$3",symbols:[r.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"expr_range$macrocall$4",symbols:["expr_range"]},{name:"expr_range$macrocall$5",symbols:["expr_others"]},{name:"expr_range$macrocall$1$subexpression$1",symbols:["expr_range$macrocall$4"]},{name:"expr_range$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_range$macrocall$1$subexpression$2",symbols:["expr_range$macrocall$4"]},{name:"expr_range$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_range$macrocall$1$subexpression$3",symbols:["expr_range$macrocall$5"]},{name:"expr_range$macrocall$1$subexpression$3",symbols:["expr_paren"]},{name:"expr_range$macrocall$1",symbols:["expr_range$macrocall$1$subexpression$1","expr_range$macrocall$2","expr_range$macrocall$1$subexpression$2","expr_range$macrocall$3","expr_range$macrocall$1$subexpression$3"],postprocess:c=>(0,o.track)(c,{type:"ternary",value:u(c[0]),lo:u(c[2]),hi:u(c[4]),op:(Z(c[1]).join(" ")||"<error>").toUpperCase()})},{name:"expr_range$macrocall$1",symbols:["expr_range$macrocall$5"],postprocess:u},{name:"expr_range",symbols:["expr_range$macrocall$1"]},{name:"expr_others$macrocall$2$macrocall$2",symbols:[r.lexerAny.has("ops_others")?{type:"ops_others"}:ops_others]},{name:"expr_others$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_others$macrocall$2$macrocall$2"]},{name:"expr_others$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_others$macrocall$2$macrocall$1$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_others$macrocall$2$macrocall$1",symbols:["expr_others$macrocall$2$macrocall$1$macrocall$1"],postprocess:u},{name:"expr_others$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_others$macrocall$2$macrocall$2","rparen"],postprocess:c=>(0,o.track)(c,{op:(ae(c[4]," ")||"<error>").toUpperCase(),opSchema:ae(c[2])})},{name:"expr_others$macrocall$2",symbols:["expr_others$macrocall$2$macrocall$1"]},{name:"expr_others$macrocall$3",symbols:["expr_others"]},{name:"expr_others$macrocall$4",symbols:["expr_like"]},{name:"expr_others$macrocall$1$subexpression$1",symbols:["expr_others$macrocall$3"]},{name:"expr_others$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_others$macrocall$1$subexpression$2",symbols:["expr_others$macrocall$4"]},{name:"expr_others$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_others$macrocall$1",symbols:["expr_others$macrocall$1$subexpression$1","expr_others$macrocall$2","expr_others$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_others$macrocall$1",symbols:["expr_others$macrocall$4"],postprocess:u},{name:"expr_others",symbols:["expr_others$macrocall$1"]},{name:"expr_like$macrocall$2$macrocall$2",symbols:["ops_like"]},{name:"expr_like$macrocall$2$macrocall$1",symbols:["expr_like$macrocall$2$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_like$macrocall$2",symbols:["expr_like$macrocall$2$macrocall$1"]},{name:"expr_like$macrocall$3",symbols:["expr_like"]},{name:"expr_like$macrocall$4",symbols:["expr_in"]},{name:"expr_like$macrocall$1$subexpression$1",symbols:["expr_like$macrocall$3"]},{name:"expr_like$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_like$macrocall$1$subexpression$2",symbols:["expr_like$macrocall$4"]},{name:"expr_like$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_like$macrocall$1",symbols:["expr_like$macrocall$1$subexpression$1","expr_like$macrocall$2","expr_like$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_like$macrocall$1",symbols:["expr_like$macrocall$4"],postprocess:u},{name:"expr_like",symbols:["expr_like$macrocall$1"]},{name:"expr_in$macrocall$2$macrocall$2",symbols:["ops_in"]},{name:"expr_in$macrocall$2$macrocall$1",symbols:["expr_in$macrocall$2$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_in$macrocall$2",symbols:["expr_in$macrocall$2$macrocall$1"]},{name:"expr_in$macrocall$3",symbols:["expr_in"]},{name:"expr_in$macrocall$4",symbols:["expr_add"]},{name:"expr_in$macrocall$1$subexpression$1",symbols:["expr_in$macrocall$3"]},{name:"expr_in$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_in$macrocall$1$subexpression$2",symbols:["expr_in$macrocall$4"]},{name:"expr_in$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_in$macrocall$1",symbols:["expr_in$macrocall$1$subexpression$1","expr_in$macrocall$2","expr_in$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_in$macrocall$1",symbols:["expr_in$macrocall$4"],postprocess:u},{name:"expr_in",symbols:["expr_in$macrocall$1"]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_plus")?{type:"op_plus"}:op_plus]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_minus")?{type:"op_minus"}:op_minus]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_additive")?{type:"op_additive"}:op_additive]},{name:"expr_add$macrocall$2$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_add$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$2"]},{name:"expr_add$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_add$macrocall$2$macrocall$1$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_add$macrocall$2$macrocall$1",symbols:["expr_add$macrocall$2$macrocall$1$macrocall$1"],postprocess:u},{name:"expr_add$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_add$macrocall$2$macrocall$2","rparen"],postprocess:c=>(0,o.track)(c,{op:(ae(c[4]," ")||"<error>").toUpperCase(),opSchema:ae(c[2])})},{name:"expr_add$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$1"]},{name:"expr_add$macrocall$3",symbols:["expr_add"]},{name:"expr_add$macrocall$4",symbols:["expr_mult"]},{name:"expr_add$macrocall$1$subexpression$1",symbols:["expr_add$macrocall$3"]},{name:"expr_add$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_add$macrocall$1$subexpression$2",symbols:["expr_add$macrocall$4"]},{name:"expr_add$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_add$macrocall$1",symbols:["expr_add$macrocall$1$subexpression$1","expr_add$macrocall$2","expr_add$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_add$macrocall$1",symbols:["expr_add$macrocall$4"],postprocess:u},{name:"expr_add",symbols:["expr_add$macrocall$1"]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("star")?{type:"star"}:star]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_div")?{type:"op_div"}:op_div]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_mod")?{type:"op_mod"}:op_mod]},{name:"expr_mult$macrocall$2$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_mult$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$2"]},{name:"expr_mult$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_mult$macrocall$2$macrocall$1$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_mult$macrocall$2$macrocall$1",symbols:["expr_mult$macrocall$2$macrocall$1$macrocall$1"],postprocess:u},{name:"expr_mult$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_mult$macrocall$2$macrocall$2","rparen"],postprocess:c=>(0,o.track)(c,{op:(ae(c[4]," ")||"<error>").toUpperCase(),opSchema:ae(c[2])})},{name:"expr_mult$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$1"]},{name:"expr_mult$macrocall$3",symbols:["expr_mult"]},{name:"expr_mult$macrocall$4",symbols:["expr_exp"]},{name:"expr_mult$macrocall$1$subexpression$1",symbols:["expr_mult$macrocall$3"]},{name:"expr_mult$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_mult$macrocall$1$subexpression$2",symbols:["expr_mult$macrocall$4"]},{name:"expr_mult$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_mult$macrocall$1",symbols:["expr_mult$macrocall$1$subexpression$1","expr_mult$macrocall$2","expr_mult$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_mult$macrocall$1",symbols:["expr_mult$macrocall$4"],postprocess:u},{name:"expr_mult",symbols:["expr_mult$macrocall$1"]},{name:"expr_exp$macrocall$2$macrocall$2",symbols:[r.lexerAny.has("op_exp")?{type:"op_exp"}:op_exp]},{name:"expr_exp$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_exp$macrocall$2$macrocall$2"]},{name:"expr_exp$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_exp$macrocall$2$macrocall$1$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_exp$macrocall$2$macrocall$1",symbols:["expr_exp$macrocall$2$macrocall$1$macrocall$1"],postprocess:u},{name:"expr_exp$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_exp$macrocall$2$macrocall$2","rparen"],postprocess:c=>(0,o.track)(c,{op:(ae(c[4]," ")||"<error>").toUpperCase(),opSchema:ae(c[2])})},{name:"expr_exp$macrocall$2",symbols:["expr_exp$macrocall$2$macrocall$1"]},{name:"expr_exp$macrocall$3",symbols:["expr_exp"]},{name:"expr_exp$macrocall$4",symbols:["expr_unary_add"]},{name:"expr_exp$macrocall$1$subexpression$1",symbols:["expr_exp$macrocall$3"]},{name:"expr_exp$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_exp$macrocall$1$subexpression$2",symbols:["expr_exp$macrocall$4"]},{name:"expr_exp$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_exp$macrocall$1",symbols:["expr_exp$macrocall$1$subexpression$1","expr_exp$macrocall$2","expr_exp$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_exp$macrocall$1",symbols:["expr_exp$macrocall$4"],postprocess:u},{name:"expr_exp",symbols:["expr_exp$macrocall$1"]},{name:"expr_unary_add$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_plus")?{type:"op_plus"}:op_plus]},{name:"expr_unary_add$macrocall$2$macrocall$2$subexpression$1",symbols:[r.lexerAny.has("op_minus")?{type:"op_minus"}:op_minus]},{name:"expr_unary_add$macrocall$2$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_unary_add$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$2"]},{name:"expr_unary_add$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_unary_add$macrocall$2$macrocall$1$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_unary_add$macrocall$2$macrocall$1",symbols:["expr_unary_add$macrocall$2$macrocall$1$macrocall$1"],postprocess:u},{name:"expr_unary_add$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_unary_add$macrocall$2$macrocall$2","rparen"],postprocess:c=>(0,o.track)(c,{op:(ae(c[4]," ")||"<error>").toUpperCase(),opSchema:ae(c[2])})},{name:"expr_unary_add$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$1"]},{name:"expr_unary_add$macrocall$3",symbols:["expr_unary_add"]},{name:"expr_unary_add$macrocall$4",symbols:["expr_various_constructs"]},{name:"expr_unary_add$macrocall$1$subexpression$1",symbols:["expr_unary_add$macrocall$3"]},{name:"expr_unary_add$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_unary_add$macrocall$1",symbols:["expr_unary_add$macrocall$2","expr_unary_add$macrocall$1$subexpression$1"],postprocess:c=>(0,o.track)(c,{type:"unary",...u(c[0]),operand:u(c[1])})},{name:"expr_unary_add$macrocall$1",symbols:["expr_unary_add$macrocall$4"],postprocess:u},{name:"expr_unary_add",symbols:["expr_unary_add$macrocall$1"]},{name:"expr_various_constructs$macrocall$2$macrocall$2",symbols:["various_binaries"]},{name:"expr_various_constructs$macrocall$2$macrocall$1",symbols:["expr_various_constructs$macrocall$2$macrocall$2"],postprocess:c=>(0,o.track)(c,{op:(ae(c," ")||"<error>").toUpperCase()})},{name:"expr_various_constructs$macrocall$2",symbols:["expr_various_constructs$macrocall$2$macrocall$1"]},{name:"expr_various_constructs$macrocall$3",symbols:["expr_various_constructs"]},{name:"expr_various_constructs$macrocall$4",symbols:["expr_array_index"]},{name:"expr_various_constructs$macrocall$1$subexpression$1",symbols:["expr_various_constructs$macrocall$3"]},{name:"expr_various_constructs$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_various_constructs$macrocall$1$subexpression$2",symbols:["expr_various_constructs$macrocall$4"]},{name:"expr_various_constructs$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_various_constructs$macrocall$1",symbols:["expr_various_constructs$macrocall$1$subexpression$1","expr_various_constructs$macrocall$2","expr_various_constructs$macrocall$1$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"binary",left:u(c[0]),right:u(c[2]),...u(c[1])})},{name:"expr_various_constructs$macrocall$1",symbols:["expr_various_constructs$macrocall$4"],postprocess:u},{name:"expr_various_constructs",symbols:["expr_various_constructs$macrocall$1"]},{name:"expr_array_index$subexpression$1",symbols:["expr_array_index"]},{name:"expr_array_index$subexpression$1",symbols:["expr_paren"]},{name:"expr_array_index",symbols:["expr_array_index$subexpression$1",r.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_nostar",r.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:c=>(0,o.track)(c,{type:"arrayIndex",array:u(c[0]),index:u(c[2])})},{name:"expr_array_index",symbols:["expr_member"],postprocess:u},{name:"expr_member$subexpression$1",symbols:["expr_member"]},{name:"expr_member$subexpression$1",symbols:["expr_paren"]},{name:"expr_member$subexpression$2",symbols:["string"]},{name:"expr_member$subexpression$2",symbols:["int"]},{name:"expr_member",symbols:["expr_member$subexpression$1","ops_member","expr_member$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"member",operand:u(c[0]),op:c[1],member:u(c[2])})},{name:"expr_member$subexpression$3",symbols:["expr_member"]},{name:"expr_member$subexpression$3",symbols:["expr_paren"]},{name:"expr_member",symbols:["expr_member$subexpression$3",r.lexerAny.has("op_cast")?{type:"op_cast"}:op_cast,"data_type"],postprocess:c=>(0,o.track)(c,{type:"cast",operand:u(c[0]),to:c[2]})},{name:"expr_member",symbols:[r.lexerAny.has("kw_cast")?{type:"kw_cast"}:kw_cast,"lparen","expr_nostar",r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"data_type","rparen"],postprocess:c=>(0,o.track)(c,{type:"cast",operand:u(c[2]),to:c[4]})},{name:"expr_member",symbols:["data_type","string"],postprocess:c=>(0,o.track)(c,{type:"cast",operand:(0,o.track)(c[1],{type:"string",value:(0,o.unbox)(c[1])}),to:(0,o.unbox)(c[0])})},{name:"expr_member",symbols:["expr_dot"],postprocess:u},{name:"expr_dot$subexpression$1",symbols:["word"]},{name:"expr_dot$subexpression$1",symbols:["star"]},{name:"expr_dot",symbols:["qname",r.lexerAny.has("dot")?{type:"dot"}:dot,"expr_dot$subexpression$1"],postprocess:c=>(0,o.track)(c,{type:"ref",table:u(c[0]),name:ae(c[2])})},{name:"expr_dot",symbols:["expr_final"],postprocess:u},{name:"expr_final",symbols:["expr_basic"]},{name:"expr_final",symbols:["expr_primary"]},{name:"expr_basic",symbols:["expr_special_calls"]},{name:"expr_basic",symbols:["expr_call"]},{name:"expr_basic",symbols:["expr_array"]},{name:"expr_basic",symbols:["expr_case"]},{name:"expr_basic",symbols:["expr_extract"]},{name:"expr_basic",symbols:["word"],postprocess:c=>(0,o.track)(c,{type:"ref",name:u(c[0])})},{name:"expr_array$ebnf$1",symbols:["expr_subarray_items"],postprocess:a},{name:"expr_array$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_array",symbols:[r.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array,r.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_array$ebnf$1",r.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:c=>(0,o.track)(c,{type:"array",expressions:c[2]||[]})},{name:"expr_array",symbols:[r.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array,"lparen","selection","rparen"],postprocess:c=>(0,o.track)(c,{type:"array select",select:u(c[2])})},{name:"expr_subarray$ebnf$1",symbols:["expr_subarray_items"],postprocess:a},{name:"expr_subarray$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_subarray",symbols:[r.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_subarray$ebnf$1",r.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:k(1)},{name:"expr_subarray_items$macrocall$2",symbols:["expr_list_item"]},{name:"expr_subarray_items$macrocall$1$ebnf$1",symbols:[]},{name:"expr_subarray_items$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"expr_subarray_items$macrocall$2"],postprocess:O},{name:"expr_subarray_items$macrocall$1$ebnf$1",symbols:["expr_subarray_items$macrocall$1$ebnf$1","expr_subarray_items$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"expr_subarray_items$macrocall$1",symbols:["expr_subarray_items$macrocall$2","expr_subarray_items$macrocall$1$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"expr_subarray_items",symbols:["expr_subarray_items$macrocall$1"],postprocess:c=>c[0].map(u)},{name:"expr_subarray_items$macrocall$4",symbols:["expr_subarray"]},{name:"expr_subarray_items$macrocall$3$ebnf$1",symbols:[]},{name:"expr_subarray_items$macrocall$3$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"expr_subarray_items$macrocall$4"],postprocess:O},{name:"expr_subarray_items$macrocall$3$ebnf$1",symbols:["expr_subarray_items$macrocall$3$ebnf$1","expr_subarray_items$macrocall$3$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"expr_subarray_items$macrocall$3",symbols:["expr_subarray_items$macrocall$4","expr_subarray_items$macrocall$3$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"expr_subarray_items",symbols:["expr_subarray_items$macrocall$3"],postprocess:c=>c[0].map(I=>(0,o.track)(I,{type:"array",expressions:I[0].map(u)}))},{name:"expr_function_call$ebnf$1",symbols:["expr_list_raw"],postprocess:a},{name:"expr_function_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_function_call",symbols:["expr_fn_name","lparen","expr_function_call$ebnf$1","rparen"],postprocess:c=>(0,o.track)(c,{type:"call",function:u(c[0]),args:c[2]||[]})},{name:"expr_call$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"expr_call$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct]},{name:"expr_call$ebnf$1",symbols:["expr_call$ebnf$1$subexpression$1"],postprocess:a},{name:"expr_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$2",symbols:["expr_list_raw"],postprocess:a},{name:"expr_call$ebnf$2",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$3",symbols:["select_order_by"],postprocess:a},{name:"expr_call$ebnf$3",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$4$subexpression$1",symbols:["kw_filter","lparen",r.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr","rparen"],postprocess:k(3)},{name:"expr_call$ebnf$4",symbols:["expr_call$ebnf$4$subexpression$1"],postprocess:a},{name:"expr_call$ebnf$4",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$5",symbols:["expr_call_over"],postprocess:a},{name:"expr_call$ebnf$5",symbols:[],postprocess:()=>null},{name:"expr_call",symbols:["expr_fn_name","lparen","expr_call$ebnf$1","expr_call$ebnf$2","expr_call$ebnf$3","rparen","expr_call$ebnf$4","expr_call$ebnf$5"],postprocess:c=>(0,o.track)(c,{type:"call",function:u(c[0]),...c[2]&&{distinct:ae(c[2])},args:c[3]||[],...c[4]&&{orderBy:c[4]},...c[6]&&{filter:u(c[6])},...c[7]&&{over:u(c[7])}})},{name:"expr_call_over$ebnf$1$subexpression$1",symbols:["kw_partition","kw_by","expr_list_raw"],postprocess:O},{name:"expr_call_over$ebnf$1",symbols:["expr_call_over$ebnf$1$subexpression$1"],postprocess:a},{name:"expr_call_over$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_call_over$ebnf$2",symbols:["select_order_by"],postprocess:a},{name:"expr_call_over$ebnf$2",symbols:[],postprocess:()=>null},{name:"expr_call_over",symbols:["kw_over","lparen","expr_call_over$ebnf$1","expr_call_over$ebnf$2","rparen"],postprocess:c=>(0,o.track)(c,{...c[2]&&{partitionBy:c[2]},...c[3]&&{orderBy:c[3]}})},{name:"expr_extract$subexpression$1",symbols:["word"],postprocess:he("extract")},{name:"expr_extract",symbols:["expr_extract$subexpression$1","lparen","word",r.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr","rparen"],postprocess:c=>(0,o.track)(c,{type:"extract",field:m(c[2]),from:c[4]})},{name:"expr_primary",symbols:["float"],postprocess:c=>(0,o.track)(c,{type:"numeric",value:(0,o.unbox)(c[0])})},{name:"expr_primary",symbols:["int"],postprocess:c=>(0,o.track)(c,{type:"integer",value:(0,o.unbox)(c[0])})},{name:"expr_primary",symbols:["string"],postprocess:c=>(0,o.track)(c,{type:"string",value:(0,o.unbox)(c[0])})},{name:"expr_primary",symbols:[r.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true],postprocess:c=>(0,o.track)(c,{type:"boolean",value:!0})},{name:"expr_primary",symbols:[r.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false],postprocess:c=>(0,o.track)(c,{type:"boolean",value:!1})},{name:"expr_primary",symbols:[r.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null],postprocess:c=>(0,o.track)(c,{type:"null"})},{name:"expr_primary",symbols:["value_keyword"],postprocess:c=>(0,o.track)(c,{type:"keyword",keyword:ae(c)})},{name:"expr_primary",symbols:[r.lexerAny.has("qparam")?{type:"qparam"}:qparam],postprocess:c=>(0,o.track)(c,{type:"parameter",name:ae(c[0])})},{name:"expr_primary",symbols:[r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:c=>(0,o.track)(c,{type:"default"})},{name:"ops_like",symbols:["ops_like_keywors"]},{name:"ops_like",symbols:["ops_like_operators"]},{name:"ops_like_keywors$ebnf$1",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:a},{name:"ops_like_keywors$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_like_keywors$subexpression$1",symbols:[r.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like]},{name:"ops_like_keywors$subexpression$1",symbols:[r.lexerAny.has("kw_ilike")?{type:"kw_ilike"}:kw_ilike]},{name:"ops_like_keywors",symbols:["ops_like_keywors$ebnf$1","ops_like_keywors$subexpression$1"]},{name:"ops_like_operators$subexpression$1",symbols:[r.lexerAny.has("op_like")?{type:"op_like"}:op_like],postprocess:()=>"LIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$1"]},{name:"ops_like_operators$subexpression$2",symbols:[r.lexerAny.has("op_ilike")?{type:"op_ilike"}:op_ilike],postprocess:()=>"ILIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$2"]},{name:"ops_like_operators$subexpression$3",symbols:[r.lexerAny.has("op_not_like")?{type:"op_not_like"}:op_not_like],postprocess:()=>"NOT LIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$3"]},{name:"ops_like_operators$subexpression$4",symbols:[r.lexerAny.has("op_not_ilike")?{type:"op_not_ilike"}:op_not_ilike],postprocess:()=>"NOT ILIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$4"]},{name:"ops_in$ebnf$1",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:a},{name:"ops_in$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_in",symbols:["ops_in$ebnf$1",r.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"ops_between$ebnf$1",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:a},{name:"ops_between$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_between",symbols:["ops_between$ebnf$1","kw_between"]},{name:"ops_member$subexpression$1",symbols:[r.lexerAny.has("op_member")?{type:"op_member"}:op_member]},{name:"ops_member$subexpression$1",symbols:[r.lexerAny.has("op_membertext")?{type:"op_membertext"}:op_membertext]},{name:"ops_member",symbols:["ops_member$subexpression$1"],postprocess:c=>{var I;return(I=u(c))===null||I===void 0?void 0:I.value}},{name:"expr_list_item",symbols:["expr_or_select"],postprocess:u},{name:"expr_list_item",symbols:["expr_star"],postprocess:u},{name:"expr_list_raw$macrocall$2",symbols:["expr_list_item"]},{name:"expr_list_raw$macrocall$1$ebnf$1",symbols:[]},{name:"expr_list_raw$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw$macrocall$2"],postprocess:O},{name:"expr_list_raw$macrocall$1$ebnf$1",symbols:["expr_list_raw$macrocall$1$ebnf$1","expr_list_raw$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"expr_list_raw$macrocall$1",symbols:["expr_list_raw$macrocall$2","expr_list_raw$macrocall$1$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"expr_list_raw",symbols:["expr_list_raw$macrocall$1"],postprocess:([c])=>c.map(u)},{name:"expr_list_raw_many$macrocall$2",symbols:["expr_list_item"]},{name:"expr_list_raw_many$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw_many$macrocall$2"],postprocess:O},{name:"expr_list_raw_many$macrocall$1$ebnf$1",symbols:["expr_list_raw_many$macrocall$1$ebnf$1$subexpression$1"]},{name:"expr_list_raw_many$macrocall$1$ebnf$1$subexpression$2",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw_many$macrocall$2"],postprocess:O},{name:"expr_list_raw_many$macrocall$1$ebnf$1",symbols:["expr_list_raw_many$macrocall$1$ebnf$1","expr_list_raw_many$macrocall$1$ebnf$1$subexpression$2"],postprocess:c=>c[0].concat([c[1]])},{name:"expr_list_raw_many$macrocall$1",symbols:["expr_list_raw_many$macrocall$2","expr_list_raw_many$macrocall$1$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"expr_list_raw_many",symbols:["expr_list_raw_many$macrocall$1"],postprocess:([c])=>c.map(u)},{name:"expr_or_select",symbols:["expr_nostar"],postprocess:u},{name:"expr_or_select",symbols:["selection"],postprocess:u},{name:"expr_list_many",symbols:["expr_list_raw_many"],postprocess:c=>(0,o.track)(c,{type:"list",expressions:c[0]})},{name:"expr_case$ebnf$1",symbols:["expr_nostar"],postprocess:a},{name:"expr_case$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_case$ebnf$2",symbols:[]},{name:"expr_case$ebnf$2",symbols:["expr_case$ebnf$2","expr_case_whens"],postprocess:c=>c[0].concat([c[1]])},{name:"expr_case$ebnf$3",symbols:["expr_case_else"],postprocess:a},{name:"expr_case$ebnf$3",symbols:[],postprocess:()=>null},{name:"expr_case",symbols:[r.lexerAny.has("kw_case")?{type:"kw_case"}:kw_case,"expr_case$ebnf$1","expr_case$ebnf$2","expr_case$ebnf$3",r.lexerAny.has("kw_end")?{type:"kw_end"}:kw_end],postprocess:c=>(0,o.track)(c,{type:"case",value:c[1],whens:c[2],else:c[3]})},{name:"expr_case_whens",symbols:[r.lexerAny.has("kw_when")?{type:"kw_when"}:kw_when,"expr_nostar",r.lexerAny.has("kw_then")?{type:"kw_then"}:kw_then,"expr_nostar"],postprocess:c=>(0,o.track)(c,{when:c[1],value:c[3]})},{name:"expr_case_else",symbols:[r.lexerAny.has("kw_else")?{type:"kw_else"}:kw_else,"expr_nostar"],postprocess:O},{name:"expr_fn_name$subexpression$1$ebnf$1$subexpression$1",symbols:["word",r.lexerAny.has("dot")?{type:"dot"}:dot]},{name:"expr_fn_name$subexpression$1$ebnf$1",symbols:["expr_fn_name$subexpression$1$ebnf$1$subexpression$1"],postprocess:a},{name:"expr_fn_name$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_fn_name$subexpression$1",symbols:["expr_fn_name$subexpression$1$ebnf$1","word_or_keyword"],postprocess:c=>(0,o.track)(c,{name:(0,o.unbox)(u(c[1])),...c[0]&&{schema:ae(c[0][0])}})},{name:"expr_fn_name",symbols:["expr_fn_name$subexpression$1"]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[r.lexerAny.has("kw_any")?{type:"kw_any"}:kw_any]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[r.lexerAny.has("kw_some")?{type:"kw_some"}:kw_some]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[r.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"expr_fn_name$subexpression$2",symbols:["expr_fn_name$subexpression$2$subexpression$1"],postprocess:c=>(0,o.track)(c,{name:ae(u(c))})},{name:"expr_fn_name",symbols:["expr_fn_name$subexpression$2"]},{name:"word_or_keyword",symbols:["word"]},{name:"word_or_keyword",symbols:["value_keyword"],postprocess:c=>(0,o.box)(c,ae(c))},{name:"value_keyword",symbols:[r.lexerAny.has("kw_current_catalog")?{type:"kw_current_catalog"}:kw_current_catalog]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_current_date")?{type:"kw_current_date"}:kw_current_date]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_current_role")?{type:"kw_current_role"}:kw_current_role]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_current_timestamp")?{type:"kw_current_timestamp"}:kw_current_timestamp]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_current_time")?{type:"kw_current_time"}:kw_current_time]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_localtimestamp")?{type:"kw_localtimestamp"}:kw_localtimestamp]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_localtime")?{type:"kw_localtime"}:kw_localtime]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"value_keyword",symbols:[r.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"expr_special_calls",symbols:["spe_overlay"]},{name:"expr_special_calls",symbols:["spe_substring"]},{name:"spe_overlay$subexpression$1",symbols:["word"],postprocess:he("overlay")},{name:"spe_overlay$subexpression$2",symbols:[r.lexerAny.has("lparen")?{type:"lparen"}:lparen,"expr_nostar"]},{name:"spe_overlay$subexpression$3",symbols:[r.lexerAny.has("kw_placing")?{type:"kw_placing"}:kw_placing,"expr_nostar"]},{name:"spe_overlay$subexpression$4",symbols:[r.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr_nostar"]},{name:"spe_overlay$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"expr_nostar"]},{name:"spe_overlay$ebnf$1",symbols:["spe_overlay$ebnf$1$subexpression$1"],postprocess:a},{name:"spe_overlay$ebnf$1",symbols:[],postprocess:()=>null},{name:"spe_overlay",symbols:["spe_overlay$subexpression$1","spe_overlay$subexpression$2","spe_overlay$subexpression$3","spe_overlay$subexpression$4","spe_overlay$ebnf$1",r.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:c=>(0,o.track)(c,{type:"overlay",value:c[1][1],placing:c[2][1],from:c[3][1],...c[4]&&{for:c[4][1]}})},{name:"spe_substring$subexpression$1",symbols:["word"],postprocess:he("substring")},{name:"spe_substring$subexpression$2",symbols:[r.lexerAny.has("lparen")?{type:"lparen"}:lparen,"expr_nostar"]},{name:"spe_substring$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr_nostar"]},{name:"spe_substring$ebnf$1",symbols:["spe_substring$ebnf$1$subexpression$1"],postprocess:a},{name:"spe_substring$ebnf$1",symbols:[],postprocess:()=>null},{name:"spe_substring$ebnf$2$subexpression$1",symbols:[r.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"expr_nostar"]},{name:"spe_substring$ebnf$2",symbols:["spe_substring$ebnf$2$subexpression$1"],postprocess:a},{name:"spe_substring$ebnf$2",symbols:[],postprocess:()=>null},{name:"spe_substring",symbols:["spe_substring$subexpression$1","spe_substring$subexpression$2","spe_substring$ebnf$1","spe_substring$ebnf$2",r.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:c=>(0,o.track)(c,{type:"substring",value:c[1][1],...c[2]&&{from:c[2][1]},...c[3]&&{for:c[3][1]}})},{name:"various_binaries",symbols:["kw_at","kw_time","kw_zone"],postprocess:()=>"AT TIME ZONE"},{name:"createtable_statement$ebnf$1",symbols:["createtable_modifiers"],postprocess:a},{name:"createtable_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:a},{name:"createtable_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createtable_statement$ebnf$3",symbols:["createtable_opts"],postprocess:a},{name:"createtable_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createtable_statement",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"createtable_statement$ebnf$1",r.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"createtable_statement$ebnf$2","qname","lparen","createtable_declarationlist","rparen","createtable_statement$ebnf$3"],postprocess:c=>{const I=c[6].filter(j=>"kind"in j),d=c[6].filter(j=>!("kind"in j));return(0,o.track)(c,{type:"create table",...c[3]?{ifNotExists:!0}:{},name:c[4],columns:I,...u(c[1]),...d.length?{constraints:d}:{},...O(c)})}},{name:"createtable_modifiers",symbols:["kw_unlogged"],postprocess:c=>c[0]?{unlogged:!0}:{}},{name:"createtable_modifiers",symbols:["m_locglob"]},{name:"createtable_modifiers",symbols:["m_tmp"]},{name:"createtable_modifiers",symbols:["m_locglob","m_tmp"],postprocess:([c,I])=>({...c,...I})},{name:"m_locglob$subexpression$1",symbols:["kw_local"]},{name:"m_locglob$subexpression$1",symbols:["kw_global"]},{name:"m_locglob",symbols:["m_locglob$subexpression$1"],postprocess:c=>({locality:ae(c)})},{name:"m_tmp$subexpression$1",symbols:["kw_temp"]},{name:"m_tmp$subexpression$1",symbols:["kw_temporary"]},{name:"m_tmp",symbols:["m_tmp$subexpression$1"],postprocess:c=>({temporary:!0})},{name:"createtable_declarationlist$ebnf$1",symbols:[]},{name:"createtable_declarationlist$ebnf$1$subexpression$1",symbols:["comma","createtable_declaration"],postprocess:O},{name:"createtable_declarationlist$ebnf$1",symbols:["createtable_declarationlist$ebnf$1","createtable_declarationlist$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"createtable_declarationlist",symbols:["createtable_declaration","createtable_declarationlist$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_constraint"]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_column"]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_like"]},{name:"createtable_declaration",symbols:["createtable_declaration$subexpression$1"],postprocess:u},{name:"createtable_constraint$macrocall$2",symbols:["createtable_constraint_def"]},{name:"createtable_constraint$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"word"]},{name:"createtable_constraint$macrocall$1$ebnf$1",symbols:["createtable_constraint$macrocall$1$ebnf$1$subexpression$1"],postprocess:a},{name:"createtable_constraint$macrocall$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_constraint$macrocall$1",symbols:["createtable_constraint$macrocall$1$ebnf$1","createtable_constraint$macrocall$2"],postprocess:c=>{const I=c[0]&&m(c[0][1]);return I?(0,o.track)(c,{constraintName:I,...u(c[1])}):(0,o.track)(c,u(c[1]))}},{name:"createtable_constraint",symbols:["createtable_constraint$macrocall$1"],postprocess:u},{name:"createtable_constraint_def",symbols:["createtable_constraint_def_unique"]},{name:"createtable_constraint_def",symbols:["createtable_constraint_def_check"]},{name:"createtable_constraint_def",symbols:["createtable_constraint_foreignkey"]},{name:"createtable_constraint_def_unique$subexpression$1",symbols:[r.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique]},{name:"createtable_constraint_def_unique$subexpression$1",symbols:["kw_primary_key"]},{name:"createtable_constraint_def_unique",symbols:["createtable_constraint_def_unique$subexpression$1","lparen","createtable_collist","rparen"],postprocess:c=>(0,o.track)(c,{type:ae(c[0]," "),columns:c[2].map(m)})},{name:"createtable_constraint_def_check",symbols:[r.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"expr_paren"],postprocess:c=>(0,o.track)(c,{type:"check",expr:u(c[1])})},{name:"createtable_constraint_foreignkey",symbols:[r.lexerAny.has("kw_foreign")?{type:"kw_foreign"}:kw_foreign,"kw_key","collist_paren","createtable_references"],postprocess:c=>(0,o.track)(c,{type:"foreign key",localColumns:c[2].map(m),...c[3]})},{name:"createtable_references$ebnf$1",symbols:[]},{name:"createtable_references$ebnf$1",symbols:["createtable_references$ebnf$1","createtable_constraint_foreignkey_onsometing"],postprocess:c=>c[0].concat([c[1]])},{name:"createtable_references",symbols:[r.lexerAny.has("kw_references")?{type:"kw_references"}:kw_references,"table_ref","collist_paren","createtable_references$ebnf$1"],postprocess:c=>(0,o.track)(c,{foreignTable:u(c[1]),foreignColumns:c[2].map(m),...c[3].reduce((I,d)=>({...I,...d}),{})})},{name:"createtable_constraint_foreignkey_onsometing",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_delete","createtable_constraint_on_action"],postprocess:c=>(0,o.track)(c,{onDelete:O(c)})},{name:"createtable_constraint_foreignkey_onsometing",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_update","createtable_constraint_on_action"],postprocess:c=>(0,o.track)(c,{onUpdate:O(c)})},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:[r.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full]},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:["kw_partial"]},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:["kw_simple"]},{name:"createtable_constraint_foreignkey_onsometing",symbols:["kw_match","createtable_constraint_foreignkey_onsometing$subexpression$1"],postprocess:c=>(0,o.track)(c,{match:ae(O(c))})},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_cascade"]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$1",symbols:["kw_no","kw_action"]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["createtable_constraint_on_action$subexpression$1$subexpression$1"]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_restrict"]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$2",symbols:[r.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$2",symbols:[r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_set","createtable_constraint_on_action$subexpression$1$subexpression$2"]},{name:"createtable_constraint_on_action",symbols:["createtable_constraint_on_action$subexpression$1"],postprocess:c=>ae(c," ")},{name:"createtable_collist$ebnf$1",symbols:[]},{name:"createtable_collist$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:O},{name:"createtable_collist$ebnf$1",symbols:["createtable_collist$ebnf$1","createtable_collist$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"createtable_collist",symbols:["ident","createtable_collist$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"createtable_column$ebnf$1",symbols:["createtable_collate"],postprocess:a},{name:"createtable_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_column$ebnf$2",symbols:[]},{name:"createtable_column$ebnf$2",symbols:["createtable_column$ebnf$2","createtable_column_constraint"],postprocess:c=>c[0].concat([c[1]])},{name:"createtable_column",symbols:["word","data_type","createtable_column$ebnf$1","createtable_column$ebnf$2"],postprocess:c=>(0,o.track)(c,{kind:"column",name:m(c[0]),dataType:c[1],...c[2]?{collate:c[2][1]}:{},...c[3]&&c[3].length?{constraints:c[3]}:{}})},{name:"createtable_like$ebnf$1",symbols:[]},{name:"createtable_like$ebnf$1",symbols:["createtable_like$ebnf$1","createtable_like_opt"],postprocess:c=>c[0].concat([c[1]])},{name:"createtable_like",symbols:[r.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like,"qname","createtable_like$ebnf$1"],postprocess:c=>(0,o.track)(c,{kind:"like table",like:c[1],options:c[2]})},{name:"createtable_like_opt$subexpression$1",symbols:["kw_including"]},{name:"createtable_like_opt$subexpression$1",symbols:["kw_excluding"]},{name:"createtable_like_opt",symbols:["createtable_like_opt$subexpression$1","createtable_like_opt_val"],postprocess:c=>(0,o.track)(c,{verb:ae(c[0]),option:ae(c[1])})},{name:"createtable_like_opt_val",symbols:["word"],postprocess:Le("defaults","constraints","indexes","storage","comments")},{name:"createtable_like_opt_val",symbols:[r.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"createtable_column_constraint$macrocall$2",symbols:["createtable_column_constraint_def"]},{name:"createtable_column_constraint$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"word"]},{name:"createtable_column_constraint$macrocall$1$ebnf$1",symbols:["createtable_column_constraint$macrocall$1$ebnf$1$subexpression$1"],postprocess:a},{name:"createtable_column_constraint$macrocall$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_column_constraint$macrocall$1",symbols:["createtable_column_constraint$macrocall$1$ebnf$1","createtable_column_constraint$macrocall$2"],postprocess:c=>{const I=c[0]&&m(c[0][1]);return I?(0,o.track)(c,{constraintName:I,...u(c[1])}):(0,o.track)(c,u(c[1]))}},{name:"createtable_column_constraint",symbols:["createtable_column_constraint$macrocall$1"],postprocess:u},{name:"createtable_column_constraint_def",symbols:[r.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:c=>(0,o.track)(c,{type:"unique"})},{name:"createtable_column_constraint_def",symbols:["kw_primary_key"],postprocess:c=>(0,o.track)(c,{type:"primary key"})},{name:"createtable_column_constraint_def",symbols:["kw_not_null"],postprocess:c=>(0,o.track)(c,{type:"not null"})},{name:"createtable_column_constraint_def",symbols:[r.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null],postprocess:c=>(0,o.track)(c,{type:"null"})},{name:"createtable_column_constraint_def",symbols:[r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:c=>(0,o.track)(c,{type:"default",default:u(c[1])})},{name:"createtable_column_constraint_def",symbols:[r.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"expr_paren"],postprocess:c=>(0,o.track)(c,{type:"check",expr:u(c[1])})},{name:"createtable_column_constraint_def",symbols:["createtable_references"],postprocess:c=>(0,o.track)(c,{type:"reference",...u(c)})},{name:"createtable_column_constraint_def",symbols:["altercol_generated"]},{name:"createtable_collate",symbols:[r.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate,"qualified_name"]},{name:"createtable_opts$subexpression$1",symbols:["word"],postprocess:he("inherits")},{name:"createtable_opts$macrocall$2",symbols:["qname"]},{name:"createtable_opts$macrocall$1$ebnf$1",symbols:[]},{name:"createtable_opts$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"createtable_opts$macrocall$2"],postprocess:O},{name:"createtable_opts$macrocall$1$ebnf$1",symbols:["createtable_opts$macrocall$1$ebnf$1","createtable_opts$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"createtable_opts$macrocall$1",symbols:["createtable_opts$macrocall$2","createtable_opts$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"createtable_opts",symbols:["createtable_opts$subexpression$1","lparen","createtable_opts$macrocall$1","rparen"],postprocess:c=>(0,o.track)(c,{inherits:c[2]})},{name:"createindex_statement$ebnf$1",symbols:[r.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:a},{name:"createindex_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:a},{name:"createindex_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$3",symbols:["word"],postprocess:a},{name:"createindex_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$4$subexpression$1",symbols:[r.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"ident"],postprocess:O},{name:"createindex_statement$ebnf$4",symbols:["createindex_statement$ebnf$4$subexpression$1"],postprocess:a},{name:"createindex_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$5",symbols:["createindex_with"],postprocess:a},{name:"createindex_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$6",symbols:["createindex_tblspace"],postprocess:a},{name:"createindex_statement$ebnf$6",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$7",symbols:["createindex_predicate"],postprocess:a},{name:"createindex_statement$ebnf$7",symbols:[],postprocess:()=>null},{name:"createindex_statement",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"createindex_statement$ebnf$1","kw_index","createindex_statement$ebnf$2","createindex_statement$ebnf$3",r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"table_ref","createindex_statement$ebnf$4","lparen","createindex_expressions","rparen","createindex_statement$ebnf$5","createindex_statement$ebnf$6","createindex_statement$ebnf$7"],postprocess:c=>(0,o.track)(c,{type:"create index",...c[1]&&{unique:!0},...c[3]&&{ifNotExists:!0},...c[4]&&{indexName:m(c[4])},table:c[6],...c[7]&&{using:m(c[7])},expressions:c[9],...c[11]&&{with:c[11]},...c[12]&&{tablespace:u(c[12])},...c[13]&&{where:u(c[13])}})},{name:"createindex_expressions$ebnf$1",symbols:[]},{name:"createindex_expressions$ebnf$1$subexpression$1",symbols:["comma","createindex_expression"],postprocess:O},{name:"createindex_expressions$ebnf$1",symbols:["createindex_expressions$ebnf$1","createindex_expressions$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"createindex_expressions",symbols:["createindex_expression","createindex_expressions$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"createindex_expression$subexpression$1",symbols:["expr_basic"]},{name:"createindex_expression$subexpression$1",symbols:["expr_paren"]},{name:"createindex_expression$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate,"qualified_name"],postprocess:O},{name:"createindex_expression$ebnf$1",symbols:["createindex_expression$ebnf$1$subexpression$1"],postprocess:a},{name:"createindex_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$2",symbols:["qualified_name"],postprocess:a},{name:"createindex_expression$ebnf$2",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$3$subexpression$1",symbols:[r.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"createindex_expression$ebnf$3$subexpression$1",symbols:[r.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"createindex_expression$ebnf$3",symbols:["createindex_expression$ebnf$3$subexpression$1"],postprocess:a},{name:"createindex_expression$ebnf$3",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$4$subexpression$1$subexpression$1",symbols:["kw_first"]},{name:"createindex_expression$ebnf$4$subexpression$1$subexpression$1",symbols:["kw_last"]},{name:"createindex_expression$ebnf$4$subexpression$1",symbols:["kw_nulls","createindex_expression$ebnf$4$subexpression$1$subexpression$1"],postprocess:O},{name:"createindex_expression$ebnf$4",symbols:["createindex_expression$ebnf$4$subexpression$1"],postprocess:a},{name:"createindex_expression$ebnf$4",symbols:[],postprocess:()=>null},{name:"createindex_expression",symbols:["createindex_expression$subexpression$1","createindex_expression$ebnf$1","createindex_expression$ebnf$2","createindex_expression$ebnf$3","createindex_expression$ebnf$4"],postprocess:c=>(0,o.track)(c,{expression:u(c[0]),...c[1]&&{collate:u(c[1])},...c[2]&&{opclass:u(c[2])},...c[3]&&{order:u(c[3]).value},...c[4]&&{nulls:u(c[4])}})},{name:"createindex_predicate",symbols:[r.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:O},{name:"createindex_with$macrocall$2",symbols:["createindex_with_item"]},{name:"createindex_with$macrocall$1$ebnf$1",symbols:[]},{name:"createindex_with$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"createindex_with$macrocall$2"],postprocess:O},{name:"createindex_with$macrocall$1$ebnf$1",symbols:["createindex_with$macrocall$1$ebnf$1","createindex_with$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"createindex_with$macrocall$1",symbols:["createindex_with$macrocall$2","createindex_with$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"createindex_with",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"lparen","createindex_with$macrocall$1","rparen"],postprocess:k(2)},{name:"createindex_with_item$subexpression$1",symbols:["string"]},{name:"createindex_with_item$subexpression$1",symbols:["int"]},{name:"createindex_with_item",symbols:["ident",r.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"createindex_with_item$subexpression$1"],postprocess:c=>(0,o.track)(c,{parameter:ae(c[0]),value:u(c[2]).toString()})},{name:"createindex_tblspace",symbols:["kw_tablespace","ident"],postprocess:O},{name:"createextension_statement$ebnf$1",symbols:["kw_ifnotexists"],postprocess:a},{name:"createextension_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$2",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:a},{name:"createextension_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$3$subexpression$1",symbols:["kw_schema","word"],postprocess:O},{name:"createextension_statement$ebnf$3",symbols:["createextension_statement$ebnf$3$subexpression$1"],postprocess:a},{name:"createextension_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$4$subexpression$1",symbols:["kw_version","string"],postprocess:O},{name:"createextension_statement$ebnf$4",symbols:["createextension_statement$ebnf$4$subexpression$1"],postprocess:a},{name:"createextension_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$5$subexpression$1",symbols:[r.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"string"],postprocess:O},{name:"createextension_statement$ebnf$5",symbols:["createextension_statement$ebnf$5$subexpression$1"],postprocess:a},{name:"createextension_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"createextension_statement",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_extension","createextension_statement$ebnf$1","word","createextension_statement$ebnf$2","createextension_statement$ebnf$3","createextension_statement$ebnf$4","createextension_statement$ebnf$5"],postprocess:c=>(0,o.track)(c,{type:"create extension",...c[2]?{ifNotExists:!0}:{},extension:m(c[3]),...c[5]?{schema:m(c[5])}:{},...c[6]?{version:g(c[6])}:{},...c[7]?{from:g(c[7])}:{}})},{name:"simplestatements_all",symbols:["simplestatements_start_transaction"]},{name:"simplestatements_all",symbols:["simplestatements_commit"]},{name:"simplestatements_all",symbols:["simplestatements_rollback"]},{name:"simplestatements_all",symbols:["simplestatements_tablespace"]},{name:"simplestatements_all",symbols:["simplestatements_set"]},{name:"simplestatements_all",symbols:["simplestatements_show"]},{name:"simplestatements_all",symbols:["simplestatements_begin"]},{name:"simplestatements_start_transaction$subexpression$1",symbols:["kw_start","kw_transaction"]},{name:"simplestatements_start_transaction",symbols:["simplestatements_start_transaction$subexpression$1"],postprocess:c=>(0,o.track)(c,{type:"start transaction"})},{name:"simplestatements_commit",symbols:["kw_commit"],postprocess:c=>(0,o.track)(c,{type:"commit"})},{name:"simplestatements_rollback",symbols:["kw_rollback"],postprocess:c=>(0,o.track)(c,{type:"rollback"})},{name:"simplestatements_tablespace",symbols:["kw_tablespace","word"],postprocess:c=>(0,o.track)(c,{type:"tablespace",tablespace:m(c[1])})},{name:"simplestatements_set$subexpression$1",symbols:["simplestatements_set_simple"]},{name:"simplestatements_set$subexpression$1",symbols:["simplestatements_set_timezone"]},{name:"simplestatements_set",symbols:["kw_set","simplestatements_set$subexpression$1"],postprocess:O},{name:"simplestatements_set_timezone",symbols:["kw_time","kw_zone","simplestatements_set_timezone_val"],postprocess:c=>(0,o.track)(c,{type:"set timezone",to:c[2]})},{name:"simplestatements_set_timezone_val$subexpression$1",symbols:["string"]},{name:"simplestatements_set_timezone_val$subexpression$1",symbols:["int"]},{name:"simplestatements_set_timezone_val",symbols:["simplestatements_set_timezone_val$subexpression$1"],postprocess:c=>(0,o.track)(c,{type:"value",value:u(c[0])})},{name:"simplestatements_set_timezone_val",symbols:["kw_local"],postprocess:c=>(0,o.track)(c,{type:"local"})},{name:"simplestatements_set_timezone_val",symbols:[r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:c=>(0,o.track)(c,{type:"default"})},{name:"simplestatements_set_timezone_val",symbols:["kw_interval","string","kw_hour",r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"kw_minute"],postprocess:c=>(0,o.track)(c,{type:"interval",value:(0,o.unbox)(c[1])})},{name:"simplestatements_set_simple$subexpression$1",symbols:[r.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq]},{name:"simplestatements_set_simple$subexpression$1",symbols:[r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to]},{name:"simplestatements_set_simple",symbols:["ident","simplestatements_set_simple$subexpression$1","simplestatements_set_val"],postprocess:c=>(0,o.track)(c,{type:"set",variable:m(c[0]),set:(0,o.unbox)(c[2])})},{name:"simplestatements_set_val",symbols:["simplestatements_set_val_raw"],postprocess:u},{name:"simplestatements_set_val",symbols:[r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:c=>(0,o.track)(c,{type:"default"})},{name:"simplestatements_set_val$ebnf$1$subexpression$1",symbols:["comma","simplestatements_set_val_raw"]},{name:"simplestatements_set_val$ebnf$1",symbols:["simplestatements_set_val$ebnf$1$subexpression$1"]},{name:"simplestatements_set_val$ebnf$1$subexpression$2",symbols:["comma","simplestatements_set_val_raw"]},{name:"simplestatements_set_val$ebnf$1",symbols:["simplestatements_set_val$ebnf$1","simplestatements_set_val$ebnf$1$subexpression$2"],postprocess:c=>c[0].concat([c[1]])},{name:"simplestatements_set_val",symbols:["simplestatements_set_val_raw","simplestatements_set_val$ebnf$1"],postprocess:c=>(0,o.track)(c,{type:"list",values:[c[0],...c[1]||[]]})},{name:"simplestatements_set_val_raw$subexpression$1",symbols:["string"]},{name:"simplestatements_set_val_raw$subexpression$1",symbols:["int"]},{name:"simplestatements_set_val_raw",symbols:["simplestatements_set_val_raw$subexpression$1"],postprocess:c=>(0,o.track)(c,{type:"value",value:u(c)})},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[r.lexerAny.has("word")?{type:"word"}:word]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[r.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[r.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"simplestatements_set_val_raw",symbols:["simplestatements_set_val_raw$subexpression$2"],postprocess:c=>(0,o.track)(c,{type:"identifier",name:u(c).value})},{name:"simplestatements_set_val_raw",symbols:[r.lexerAny.has("quoted_word")?{type:"quoted_word"}:quoted_word],postprocess:c=>(0,o.track)(c,{type:"identifier",doubleQuoted:!0,name:u(c).value})},{name:"simplestatements_show",symbols:["kw_show","ident"],postprocess:c=>(0,o.track)(c,{type:"show",variable:m(c[1])})},{name:"create_schema$subexpression$1",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_schema"]},{name:"create_schema$ebnf$1",symbols:["kw_ifnotexists"],postprocess:a},{name:"create_schema$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_schema",symbols:["create_schema$subexpression$1","create_schema$ebnf$1","ident"],postprocess:c=>(0,o.track)(c,{type:"create schema",name:m(c[2]),...c[1]?{ifNotExists:!0}:{}})},{name:"raise_statement$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:Le("debug","log","info","notice","warning","exception")},{name:"raise_statement$ebnf$1",symbols:["raise_statement$ebnf$1$subexpression$1"],postprocess:a},{name:"raise_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"raise_statement$ebnf$2$subexpression$1",symbols:["comma","expr_list_raw"],postprocess:O},{name:"raise_statement$ebnf$2",symbols:["raise_statement$ebnf$2$subexpression$1"],postprocess:a},{name:"raise_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"raise_statement$ebnf$3",symbols:["raise_using"],postprocess:a},{name:"raise_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"raise_statement",symbols:["kw_raise","raise_statement$ebnf$1","string","raise_statement$ebnf$2","raise_statement$ebnf$3"],postprocess:c=>(0,o.track)(c,{type:"raise",format:ae(c[2]),...c[1]&&{level:ae(c[1])},...c[3]&&c[3].length&&{formatExprs:c[3]},...c[4]&&c[4].length&&{using:c[4]}})},{name:"raise_using$macrocall$2",symbols:["raise_using_one"]},{name:"raise_using$macrocall$1$ebnf$1",symbols:[]},{name:"raise_using$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"raise_using$macrocall$2"],postprocess:O},{name:"raise_using$macrocall$1$ebnf$1",symbols:["raise_using$macrocall$1$ebnf$1","raise_using$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"raise_using$macrocall$1",symbols:["raise_using$macrocall$2","raise_using$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"raise_using",symbols:[r.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"raise_using$macrocall$1"],postprocess:O},{name:"raise_using_one",symbols:["raise_using_what",r.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:c=>(0,o.track)(c,{type:ae(c[0]),value:c[2]})},{name:"raise_using_what",symbols:[r.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"raise_using_what",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:Le("message","detail","hint","errcode","column","constraint","datatype","schema")},{name:"comment_statement",symbols:["kw_comment",r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"comment_what",r.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"string"],postprocess:c=>(0,o.track)(c,{type:"comment",comment:(0,o.unbox)(O(c)),on:u(c[2])})},{name:"comment_what",symbols:["comment_what_col"]},{name:"comment_what",symbols:["comment_what_nm"]},{name:"comment_what_nm$subexpression$1",symbols:[r.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"comment_what_nm$subexpression$1",symbols:["kw_materialized","kw_view"]},{name:"comment_what_nm$subexpression$1",symbols:[r.lexerAny.has("word")?{type:"word"}:word],postprocess:Le("database","index","trigger","type","view")},{name:"comment_what_nm",symbols:["comment_what_nm$subexpression$1","qualified_name"],postprocess:c=>(0,o.track)(c,{type:ae(c[0]),name:c[1]})},{name:"comment_what_col",symbols:["kw_column","qcolumn"],postprocess:c=>(0,o.track)(c,{type:"column",column:O(c)})},{name:"simplestatements_begin$ebnf$1$subexpression$1",symbols:["kw_transaction"]},{name:"simplestatements_begin$ebnf$1$subexpression$1",symbols:["kw_work"]},{name:"simplestatements_begin$ebnf$1",symbols:["simplestatements_begin$ebnf$1$subexpression$1"],postprocess:a},{name:"simplestatements_begin$ebnf$1",symbols:[],postprocess:()=>null},{name:"simplestatements_begin$ebnf$2",symbols:[]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_isol"]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_writ"]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_def"]},{name:"simplestatements_begin$ebnf$2",symbols:["simplestatements_begin$ebnf$2","simplestatements_begin$ebnf$2$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"simplestatements_begin",symbols:["kw_begin","simplestatements_begin$ebnf$1","simplestatements_begin$ebnf$2"],postprocess:c=>(0,o.track)(c,{type:"begin",...c[2].reduce((I,d)=>({...u(I),...u(d)}),{})})},{name:"simplestatements_begin_isol$subexpression$1",symbols:["kw_isolation","kw_level"]},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_serializable"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$1",symbols:["word"],postprocess:he("repeatable")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["simplestatements_begin_isol$subexpression$2$subexpression$1","kw_read"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$2",symbols:["word"],postprocess:he("committed")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_read","simplestatements_begin_isol$subexpression$2$subexpression$2"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$3",symbols:["word"],postprocess:he("uncommitted")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_read","simplestatements_begin_isol$subexpression$2$subexpression$3"]},{name:"simplestatements_begin_isol",symbols:["simplestatements_begin_isol$subexpression$1","simplestatements_begin_isol$subexpression$2"],postprocess:c=>(0,o.track)(c,{isolationLevel:ae(c[1]," ")})},{name:"simplestatements_begin_writ$subexpression$1",symbols:["kw_read","kw_write"]},{name:"simplestatements_begin_writ$subexpression$1",symbols:["kw_read",r.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only]},{name:"simplestatements_begin_writ",symbols:["simplestatements_begin_writ$subexpression$1"],postprocess:c=>(0,o.track)(c,{writeable:ae(c," ")})},{name:"simplestatements_begin_def$ebnf$1",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:a},{name:"simplestatements_begin_def$ebnf$1",symbols:[],postprocess:()=>null},{name:"simplestatements_begin_def",symbols:["simplestatements_begin_def$ebnf$1",r.lexerAny.has("kw_deferrable")?{type:"kw_deferrable"}:kw_deferrable],postprocess:c=>(0,o.track)(c,{deferrable:!c[0]})},{name:"insert_statement$subexpression$1",symbols:["kw_insert",r.lexerAny.has("kw_into")?{type:"kw_into"}:kw_into]},{name:"insert_statement$ebnf$1",symbols:["collist_paren"],postprocess:a},{name:"insert_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_system"]},{name:"insert_statement$ebnf$2$subexpression$1$subexpression$1",symbols:[r.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"insert_statement$ebnf$2$subexpression$1",symbols:["kw_overriding","insert_statement$ebnf$2$subexpression$1$subexpression$1","kw_value"],postprocess:k(1)},{name:"insert_statement$ebnf$2",symbols:["insert_statement$ebnf$2$subexpression$1"],postprocess:a},{name:"insert_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$3$subexpression$1",symbols:["selection"]},{name:"insert_statement$ebnf$3$subexpression$1",symbols:["selection_paren"]},{name:"insert_statement$ebnf$3",symbols:["insert_statement$ebnf$3$subexpression$1"],postprocess:a},{name:"insert_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$4$subexpression$1",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_conflict","insert_on_conflict"],postprocess:O},{name:"insert_statement$ebnf$4",symbols:["insert_statement$ebnf$4$subexpression$1"],postprocess:a},{name:"insert_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$5$subexpression$1",symbols:[r.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:O},{name:"insert_statement$ebnf$5",symbols:["insert_statement$ebnf$5$subexpression$1"],postprocess:a},{name:"insert_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"insert_statement",symbols:["insert_statement$subexpression$1","table_ref_aliased","insert_statement$ebnf$1","insert_statement$ebnf$2","insert_statement$ebnf$3","insert_statement$ebnf$4","insert_statement$ebnf$5"],postprocess:c=>{const I=c[2]&&c[2].map(m),d=ae(c[3]),j=u(c[4]),X=c[5],ve=c[6];return(0,o.track)(c,{type:"insert",into:u(c[1]),insert:j,...d&&{overriding:d},...I&&{columns:I},...ve&&{returning:ve},...X&&{onConflict:X}})}},{name:"insert_values$ebnf$1",symbols:[]},{name:"insert_values$ebnf$1$subexpression$1",symbols:["comma","insert_value"],postprocess:O},{name:"insert_values$ebnf$1",symbols:["insert_values$ebnf$1","insert_values$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"insert_values",symbols:["insert_value","insert_values$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"insert_value",symbols:["lparen","insert_expr_list_raw","rparen"],postprocess:k(1)},{name:"insert_expr_list_raw$ebnf$1",symbols:[]},{name:"insert_expr_list_raw$ebnf$1$subexpression$1",symbols:["comma","expr_or_select"],postprocess:O},{name:"insert_expr_list_raw$ebnf$1",symbols:["insert_expr_list_raw$ebnf$1","insert_expr_list_raw$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"insert_expr_list_raw",symbols:["expr_or_select","insert_expr_list_raw$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"insert_on_conflict$ebnf$1",symbols:["insert_on_conflict_what"],postprocess:a},{name:"insert_on_conflict$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_on_conflict",symbols:["insert_on_conflict$ebnf$1","insert_on_conflict_do"],postprocess:c=>(0,o.track)(c,{...c[0]?{on:u(c[0])}:{},...c[1]})},{name:"insert_on_conflict_what",symbols:["lparen","expr_list_raw","rparen"],postprocess:c=>(0,o.track)(c,{type:"on expr",exprs:c[1]})},{name:"insert_on_conflict_what",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,r.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"qname"],postprocess:c=>(0,o.track)(c,{type:"on constraint",constraint:O(c)})},{name:"insert_on_conflict_do",symbols:[r.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"kw_nothing"],postprocess:c=>({do:"do nothing"})},{name:"insert_on_conflict_do$subexpression$1",symbols:[r.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"kw_update","kw_set"]},{name:"insert_on_conflict_do$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:O},{name:"insert_on_conflict_do$ebnf$1",symbols:["insert_on_conflict_do$ebnf$1$subexpression$1"],postprocess:a},{name:"insert_on_conflict_do$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_on_conflict_do",symbols:["insert_on_conflict_do$subexpression$1","update_set_list","insert_on_conflict_do$ebnf$1"],postprocess:c=>({do:{sets:c[1]},...c[2]&&{where:c[2]}})},{name:"update_statement$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"select_from_subject"],postprocess:O},{name:"update_statement$ebnf$1",symbols:["update_statement$ebnf$1$subexpression$1"],postprocess:a},{name:"update_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"update_statement$ebnf$2",symbols:["select_where"],postprocess:a},{name:"update_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"update_statement$ebnf$3$subexpression$1",symbols:[r.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:O},{name:"update_statement$ebnf$3",symbols:["update_statement$ebnf$3$subexpression$1"],postprocess:a},{name:"update_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"update_statement",symbols:["kw_update","table_ref_aliased","kw_set","update_set_list","update_statement$ebnf$1","update_statement$ebnf$2","update_statement$ebnf$3"],postprocess:c=>{const I=u(c[4]),d=u(c[5]),j=c[6];return(0,o.track)(c,{type:"update",table:u(c[1]),sets:c[3],...d?{where:d}:{},...I?{from:I}:{},...j?{returning:j}:{}})}},{name:"update_set_list$ebnf$1",symbols:[]},{name:"update_set_list$ebnf$1$subexpression$1",symbols:["comma","update_set"],postprocess:O},{name:"update_set_list$ebnf$1",symbols:["update_set_list$ebnf$1","update_set_list$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"update_set_list",symbols:["update_set","update_set_list$ebnf$1"],postprocess:([c,I])=>{const d=[];for(const j of[c,...I||[]]){const X=u(j);Array.isArray(X)?d.push(...X):d.push(X)}return d}},{name:"update_set",symbols:["update_set_one"]},{name:"update_set",symbols:["update_set_multiple"]},{name:"update_set_one",symbols:["ident",r.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:c=>(0,o.box)(c,{column:m(c[0]),value:u(c[2])})},{name:"update_set_multiple$subexpression$1",symbols:["lparen","expr_list_raw","rparen"],postprocess:k(1)},{name:"update_set_multiple",symbols:["collist_paren",r.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"update_set_multiple$subexpression$1"],postprocess:c=>{const I=c[0],d=c[2];if(I.length!==d.length)throw new Error("number of columns does not match number of values");return(0,o.box)(c,I.map((j,X)=>({column:m(j),value:u(d[X])})))}},{name:"altertable_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:a},{name:"altertable_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_statement$ebnf$2",symbols:[r.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only],postprocess:a},{name:"altertable_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_statement",symbols:["kw_alter",r.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"altertable_statement$ebnf$1","altertable_statement$ebnf$2","table_ref","altertable_actions"],postprocess:c=>(0,o.track)(c,{type:"alter table",...c[2]?{ifExists:!0}:{},...c[3]?{only:!0}:{},table:u(c[4]),changes:(0,o.unbox)(c[5]).map(u)})},{name:"altertable_actions$ebnf$1",symbols:[]},{name:"altertable_actions$ebnf$1$subexpression$1",symbols:["comma","altertable_action"],postprocess:O},{name:"altertable_actions$ebnf$1",symbols:["altertable_actions$ebnf$1","altertable_actions$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"altertable_actions",symbols:["altertable_action","altertable_actions$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"altertable_action",symbols:["altertable_rename_table"]},{name:"altertable_action",symbols:["altertable_rename_column"]},{name:"altertable_action",symbols:["altertable_rename_constraint"]},{name:"altertable_action",symbols:["altertable_add_column"]},{name:"altertable_action",symbols:["altertable_drop_column"]},{name:"altertable_action",symbols:["altertable_alter_column"]},{name:"altertable_action",symbols:["altertable_add_constraint"]},{name:"altertable_action",symbols:["altertable_drop_constraint"]},{name:"altertable_action",symbols:["altertable_owner"]},{name:"altertable_rename_table",symbols:["kw_rename",r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"word"],postprocess:c=>(0,o.track)(c,{type:"rename",to:m(O(c))})},{name:"altertable_rename_column$ebnf$1",symbols:["kw_column"],postprocess:a},{name:"altertable_rename_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_rename_column",symbols:["kw_rename","altertable_rename_column$ebnf$1","ident",r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:c=>(0,o.track)(c,{type:"rename column",column:m(c[2]),to:m(O(c))})},{name:"altertable_rename_constraint",symbols:["kw_rename",r.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"ident",r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:c=>(0,o.track)(c,{type:"rename constraint",constraint:m(c[2]),to:m(O(c))})},{name:"altertable_add_column$ebnf$1",symbols:["kw_column"],postprocess:a},{name:"altertable_add_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_add_column$ebnf$2",symbols:["kw_ifnotexists"],postprocess:a},{name:"altertable_add_column$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_add_column",symbols:["kw_add","altertable_add_column$ebnf$1","altertable_add_column$ebnf$2","createtable_column"],postprocess:c=>(0,o.track)(c,{type:"add column",...c[2]?{ifNotExists:!0}:{},column:u(c[3])})},{name:"altertable_drop_column$ebnf$1",symbols:["kw_column"],postprocess:a},{name:"altertable_drop_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_drop_column$ebnf$2",symbols:["kw_ifexists"],postprocess:a},{name:"altertable_drop_column$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_drop_column$ebnf$3$subexpression$1",symbols:["kw_restrict"]},{name:"altertable_drop_column$ebnf$3$subexpression$1",symbols:["kw_cascade"]},{name:"altertable_drop_column$ebnf$3",symbols:["altertable_drop_column$ebnf$3$subexpression$1"],postprocess:a},{name:"altertable_drop_column$ebnf$3",symbols:[],postprocess:()=>null},{name:"altertable_drop_column",symbols:["kw_drop","altertable_drop_column$ebnf$1","altertable_drop_column$ebnf$2","ident","altertable_drop_column$ebnf$3"],postprocess:c=>(0,o.track)(c,{type:"drop column",...c[2]?{ifExists:!0}:{},column:m(c[3]),...c[4]?{behaviour:ae(c[4]," ")}:{}})},{name:"altertable_alter_column$ebnf$1",symbols:["kw_column"],postprocess:a},{name:"altertable_alter_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_alter_column",symbols:["kw_alter","altertable_alter_column$ebnf$1","ident","altercol"],postprocess:c=>(0,o.track)(c,{type:"alter column",column:m(c[2]),alter:u(c[3])})},{name:"altercol$ebnf$1$subexpression$1",symbols:["kw_set","kw_data"]},{name:"altercol$ebnf$1",symbols:["altercol$ebnf$1$subexpression$1"],postprocess:a},{name:"altercol$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol",symbols:["altercol$ebnf$1","kw_type","data_type"],postprocess:c=>(0,o.track)(c,{type:"set type",dataType:u(O(c))})},{name:"altercol",symbols:["kw_set",r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:c=>(0,o.track)(c,{type:"set default",default:u(O(c))})},{name:"altercol",symbols:["kw_drop",r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:c=>(0,o.track)(c,{type:"drop default"})},{name:"altercol$subexpression$1",symbols:["kw_set"]},{name:"altercol$subexpression$1",symbols:["kw_drop"]},{name:"altercol",symbols:["altercol$subexpression$1","kw_not_null"],postprocess:c=>(0,o.track)(c,{type:ae(c," ")})},{name:"altercol",symbols:["altercol_generated_add"],postprocess:u},{name:"altertable_add_constraint",symbols:["kw_add","createtable_constraint"],postprocess:c=>(0,o.track)(c,{type:"add constraint",constraint:u(O(c))})},{name:"altertable_drop_constraint$ebnf$1",symbols:["kw_ifexists"],postprocess:a},{name:"altertable_drop_constraint$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_drop_constraint$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"altertable_drop_constraint$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"altertable_drop_constraint$ebnf$2",symbols:["altertable_drop_constraint$ebnf$2$subexpression$1"],postprocess:a},{name:"altertable_drop_constraint$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_drop_constraint",symbols:["kw_drop",r.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"altertable_drop_constraint$ebnf$1","ident","altertable_drop_constraint$ebnf$2"],postprocess:c=>(0,o.track)(c,{type:"drop constraint",...c[2]?{ifExists:!0}:{},constraint:m(c[3]),...c[4]?{behaviour:ae(c[4]," ")}:{}})},{name:"altertable_owner",symbols:["kw_owner",r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:c=>(0,o.track)(c,{type:"owner",to:m(O(c))})},{name:"altercol_generated_add",symbols:["kw_add","altercol_generated"],postprocess:O},{name:"altercol_generated$ebnf$1$subexpression$1",symbols:["kw_always"]},{name:"altercol_generated$ebnf$1$subexpression$1",symbols:["kw_by",r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"altercol_generated$ebnf$1",symbols:["altercol_generated$ebnf$1$subexpression$1"],postprocess:a},{name:"altercol_generated$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol_generated$subexpression$1",symbols:[r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"kw_identity"]},{name:"altercol_generated$ebnf$2$subexpression$1",symbols:["lparen","altercol_generated_seq","rparen"],postprocess:k(1)},{name:"altercol_generated$ebnf$2",symbols:["altercol_generated$ebnf$2$subexpression$1"],postprocess:a},{name:"altercol_generated$ebnf$2",symbols:[],postprocess:()=>null},{name:"altercol_generated",symbols:["kw_generated","altercol_generated$ebnf$1","altercol_generated$subexpression$1","altercol_generated$ebnf$2"],postprocess:c=>(0,o.track)(c,{type:"add generated",...c[1]&&{always:ae(c[1]," ")},...c[3]&&{sequence:u(c[3])}})},{name:"altercol_generated_seq$ebnf$1$subexpression$1",symbols:["kw_sequence","kw_name","qualified_name"]},{name:"altercol_generated_seq$ebnf$1",symbols:["altercol_generated_seq$ebnf$1$subexpression$1"],postprocess:a},{name:"altercol_generated_seq$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol_generated_seq$ebnf$2",symbols:[]},{name:"altercol_generated_seq$ebnf$2",symbols:["altercol_generated_seq$ebnf$2","create_sequence_option"],postprocess:c=>c[0].concat([c[1]])},{name:"altercol_generated_seq",symbols:["altercol_generated_seq$ebnf$1","altercol_generated_seq$ebnf$2"],postprocess:c=>{const I={...c[0]&&{name:u(O(c[0]))}};return Ye(I,c[1]),(0,o.track)(c,I)}},{name:"alterindex_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:a},{name:"alterindex_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"alterindex_statement",symbols:["kw_alter","kw_index","alterindex_statement$ebnf$1","table_ref","alterindex_action"],postprocess:c=>(0,o.track)(c,{type:"alter index",...c[2]?{ifExists:!0}:{},index:u(c[3]),change:u(c[4])})},{name:"alterindex_action",symbols:["alterindex_rename"]},{name:"alterindex_action",symbols:["alterindex_set_tablespace"]},{name:"alterindex_rename",symbols:["kw_rename",r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"word"],postprocess:c=>(0,o.track)(c,{type:"rename",to:m(O(c))})},{name:"alterindex_set_tablespace",symbols:["kw_set","kw_tablespace","word"],postprocess:c=>(0,o.track)(c,{type:"set tablespace",tablespace:m(O(c))})},{name:"delete_statement",symbols:["delete_delete"]},{name:"delete_statement",symbols:["delete_truncate"]},{name:"delete_delete$subexpression$1",symbols:["kw_delete",r.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from]},{name:"delete_delete$ebnf$1",symbols:["select_where"],postprocess:a},{name:"delete_delete$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_delete$ebnf$2$subexpression$1",symbols:[r.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:O},{name:"delete_delete$ebnf$2",symbols:["delete_delete$ebnf$2$subexpression$1"],postprocess:a},{name:"delete_delete$ebnf$2",symbols:[],postprocess:()=>null},{name:"delete_delete",symbols:["delete_delete$subexpression$1","table_ref_aliased","delete_delete$ebnf$1","delete_delete$ebnf$2"],postprocess:c=>{const I=c[2],d=c[3];return(0,o.track)(c,{type:"delete",from:u(c[1]),...I?{where:I}:{},...d?{returning:d}:{}})}},{name:"delete_truncate$subexpression$1$ebnf$1",symbols:[r.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table],postprocess:a},{name:"delete_truncate$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_truncate$subexpression$1",symbols:["kw_truncate","delete_truncate$subexpression$1$ebnf$1"]},{name:"delete_truncate$macrocall$2",symbols:["table_ref"]},{name:"delete_truncate$macrocall$1$ebnf$1",symbols:[]},{name:"delete_truncate$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"delete_truncate$macrocall$2"],postprocess:O},{name:"delete_truncate$macrocall$1$ebnf$1",symbols:["delete_truncate$macrocall$1$ebnf$1","delete_truncate$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"delete_truncate$macrocall$1",symbols:["delete_truncate$macrocall$2","delete_truncate$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"delete_truncate$ebnf$1$subexpression$1$subexpression$1",symbols:["kw_restart"]},{name:"delete_truncate$ebnf$1$subexpression$1$subexpression$1",symbols:["kw_continue"]},{name:"delete_truncate$ebnf$1$subexpression$1",symbols:["delete_truncate$ebnf$1$subexpression$1$subexpression$1","kw_identity"]},{name:"delete_truncate$ebnf$1",symbols:["delete_truncate$ebnf$1$subexpression$1"],postprocess:a},{name:"delete_truncate$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_truncate$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"delete_truncate$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"delete_truncate$ebnf$2",symbols:["delete_truncate$ebnf$2$subexpression$1"],postprocess:a},{name:"delete_truncate$ebnf$2",symbols:[],postprocess:()=>null},{name:"delete_truncate",symbols:["delete_truncate$subexpression$1","delete_truncate$macrocall$1","delete_truncate$ebnf$1","delete_truncate$ebnf$2"],postprocess:c=>(0,o.track)(c,{type:"truncate table",tables:c[1],...c[2]&&{identity:ae(c[2][0])},...c[3]&&{cascade:ae(c[3])}})},{name:"create_sequence_statement$ebnf$1$subexpression$1",symbols:["kw_temp"]},{name:"create_sequence_statement$ebnf$1$subexpression$1",symbols:["kw_temporary"]},{name:"create_sequence_statement$ebnf$1",symbols:["create_sequence_statement$ebnf$1$subexpression$1"],postprocess:a},{name:"create_sequence_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_sequence_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:a},{name:"create_sequence_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_sequence_statement$ebnf$3",symbols:[]},{name:"create_sequence_statement$ebnf$3",symbols:["create_sequence_statement$ebnf$3","create_sequence_option"],postprocess:c=>c[0].concat([c[1]])},{name:"create_sequence_statement",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_sequence_statement$ebnf$1","kw_sequence","create_sequence_statement$ebnf$2","qualified_name","create_sequence_statement$ebnf$3"],postprocess:c=>{const I={type:"create sequence",...c[1]&&{temp:!0},...c[3]&&{ifNotExists:!0},name:u(c[4]),options:{}};return Ye(I.options,c[5]),(0,o.track)(c,I)}},{name:"create_sequence_option",symbols:[r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"data_type"],postprocess:c=>(0,o.box)(c,["as",c[1]])},{name:"create_sequence_option$ebnf$1",symbols:["kw_by"],postprocess:a},{name:"create_sequence_option$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["kw_increment","create_sequence_option$ebnf$1","int"],postprocess:c=>(0,o.box)(c,["incrementBy",c[2]])},{name:"create_sequence_option",symbols:["create_sequence_minvalue"],postprocess:c=>(0,o.box)(c,["minValue",c[0]])},{name:"create_sequence_option",symbols:["create_sequence_maxvalue"],postprocess:c=>(0,o.box)(c,["maxValue",c[0]])},{name:"create_sequence_option$ebnf$2",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:a},{name:"create_sequence_option$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["kw_start","create_sequence_option$ebnf$2","int"],postprocess:c=>(0,o.box)(c,["startWith",c[2]])},{name:"create_sequence_option",symbols:["kw_cache","int"],postprocess:c=>(0,o.box)(c,["cache",c[1]])},{name:"create_sequence_option$ebnf$3",symbols:["kw_no"],postprocess:a},{name:"create_sequence_option$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["create_sequence_option$ebnf$3","kw_cycle"],postprocess:c=>(0,o.box)(c,["cycle",ae(c," ")])},{name:"create_sequence_option",symbols:["create_sequence_owned_by"],postprocess:c=>(0,o.box)(c,["ownedBy",u(c)])},{name:"create_sequence_minvalue",symbols:["kw_minvalue","int"],postprocess:O},{name:"create_sequence_minvalue",symbols:["kw_no","kw_minvalue"],postprocess:c=>(0,o.box)(c,"no minvalue")},{name:"create_sequence_maxvalue",symbols:["kw_maxvalue","int"],postprocess:O},{name:"create_sequence_maxvalue",symbols:["kw_no","kw_maxvalue"],postprocess:c=>(0,o.box)(c,"no maxvalue")},{name:"create_sequence_owned_by$subexpression$1",symbols:["kw_none"]},{name:"create_sequence_owned_by$subexpression$1",symbols:["qcolumn"]},{name:"create_sequence_owned_by",symbols:["kw_owned","kw_by","create_sequence_owned_by$subexpression$1"],postprocess:c=>(0,o.box)(c,u(O(c)))},{name:"alter_sequence_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:a},{name:"alter_sequence_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_statement",symbols:["kw_alter","kw_sequence","alter_sequence_statement$ebnf$1","qualified_name","alter_sequence_statement_body"],postprocess:c=>{const I={type:"alter sequence",...c[2]&&{ifExists:!0},name:u(c[3]),change:c[4]};return(0,o.track)(c,I)}},{name:"alter_sequence_statement_body$ebnf$1",symbols:["alter_sequence_option"]},{name:"alter_sequence_statement_body$ebnf$1",symbols:["alter_sequence_statement_body$ebnf$1","alter_sequence_option"],postprocess:c=>c[0].concat([c[1]])},{name:"alter_sequence_statement_body",symbols:["alter_sequence_statement_body$ebnf$1"],postprocess:c=>{const I={type:"set options"};return Ye(I,c[0]),(0,o.track)(c,I)}},{name:"alter_sequence_statement_body$subexpression$1",symbols:["ident"]},{name:"alter_sequence_statement_body$subexpression$1",symbols:[r.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"alter_sequence_statement_body$subexpression$1",symbols:[r.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"alter_sequence_statement_body",symbols:["kw_owner",r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"alter_sequence_statement_body$subexpression$1"],postprocess:c=>(0,o.track)(c,{type:"owner to",owner:m(O(c))})},{name:"alter_sequence_statement_body",symbols:["kw_rename",r.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:c=>(0,o.track)(c,{type:"rename",newName:m(O(c))})},{name:"alter_sequence_statement_body",symbols:["kw_set","kw_schema","ident"],postprocess:c=>(0,o.track)(c,{type:"set schema",newSchema:m(O(c))})},{name:"alter_sequence_option",symbols:["create_sequence_option"],postprocess:u},{name:"alter_sequence_option$ebnf$1$subexpression$1$ebnf$1",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:a},{name:"alter_sequence_option$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_option$ebnf$1$subexpression$1",symbols:["alter_sequence_option$ebnf$1$subexpression$1$ebnf$1","int"],postprocess:O},{name:"alter_sequence_option$ebnf$1",symbols:["alter_sequence_option$ebnf$1$subexpression$1"],postprocess:a},{name:"alter_sequence_option$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_option",symbols:["kw_restart","alter_sequence_option$ebnf$1"],postprocess:c=>(0,o.box)(c,["restart",typeof(0,o.unbox)(c[1])=="number"?(0,o.unbox)(c[1]):!0])},{name:"drop_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:a},{name:"drop_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_statement$macrocall$2",symbols:["qualified_name"]},{name:"drop_statement$macrocall$1$ebnf$1",symbols:[]},{name:"drop_statement$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"drop_statement$macrocall$2"],postprocess:O},{name:"drop_statement$macrocall$1$ebnf$1",symbols:["drop_statement$macrocall$1$ebnf$1","drop_statement$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"drop_statement$macrocall$1",symbols:["drop_statement$macrocall$2","drop_statement$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"drop_statement$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"drop_statement$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"drop_statement$ebnf$2",symbols:["drop_statement$ebnf$2$subexpression$1"],postprocess:a},{name:"drop_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"drop_statement",symbols:["kw_drop","drop_what","drop_statement$ebnf$1","drop_statement$macrocall$1","drop_statement$ebnf$2"],postprocess:(c,I)=>{const d=u(c[1]);return(0,o.track)(c,{...d,...c[2]&&{ifExists:!0},names:c[3],...c[4]&&{cascade:ae(c[4])}})}},{name:"drop_what",symbols:[r.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table],postprocess:c=>(0,o.track)(c,{type:"drop table"})},{name:"drop_what",symbols:["kw_sequence"],postprocess:c=>(0,o.track)(c,{type:"drop sequence"})},{name:"drop_what",symbols:["kw_type"],postprocess:c=>(0,o.track)(c,{type:"drop type"})},{name:"drop_what",symbols:["kw_trigger"],postprocess:c=>(0,o.track)(c,{type:"drop trigger"})},{name:"drop_what$ebnf$1",symbols:[r.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently],postprocess:a},{name:"drop_what$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_what",symbols:["kw_index","drop_what$ebnf$1"],postprocess:c=>(0,o.track)(c,{type:"drop index",...c[1]&&{concurrently:!0}})},{name:"with_statement",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"with_statement_bindings","with_statement_statement"],postprocess:c=>(0,o.track)(c,{type:"with",bind:c[1],in:u(c[2])})},{name:"with_recursive_statement$subexpression$1",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"kw_recursive"]},{name:"with_recursive_statement",symbols:["with_recursive_statement$subexpression$1","ident","collist_paren",r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","union_statement","rparen","with_statement_statement"],postprocess:c=>(0,o.track)(c,{type:"with recursive",alias:m(c[1]),columnNames:c[2].map(m),bind:c[5],in:u(c[7])})},{name:"with_statement_bindings$ebnf$1",symbols:[]},{name:"with_statement_bindings$ebnf$1$subexpression$1",symbols:["comma","with_statement_binding"],postprocess:O},{name:"with_statement_bindings$ebnf$1",symbols:["with_statement_bindings$ebnf$1","with_statement_bindings$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"with_statement_bindings",symbols:["with_statement_binding","with_statement_bindings$ebnf$1"],postprocess:([c,I])=>[c,...I||[]]},{name:"with_statement_binding",symbols:["word",r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","with_statement_statement","rparen"],postprocess:c=>(0,o.track)(c,{alias:m(c[0]),statement:u(c[3])})},{name:"with_statement_statement",symbols:["selection"]},{name:"with_statement_statement",symbols:["insert_statement"]},{name:"with_statement_statement",symbols:["update_statement"]},{name:"with_statement_statement",symbols:["delete_statement"]},{name:"createtype_statement$subexpression$1",symbols:["createtype_enum"]},{name:"createtype_statement$subexpression$1",symbols:["createtype_composite"]},{name:"createtype_statement",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_type","qualified_name","createtype_statement$subexpression$1"],postprocess:c=>(0,o.track)(c,{name:c[2],...u(c[3])})},{name:"createtype_enum$macrocall$2",symbols:["enum_value"]},{name:"createtype_enum$macrocall$1$ebnf$1",symbols:[]},{name:"createtype_enum$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"createtype_enum$macrocall$2"],postprocess:O},{name:"createtype_enum$macrocall$1$ebnf$1",symbols:["createtype_enum$macrocall$1$ebnf$1","createtype_enum$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"createtype_enum$macrocall$1",symbols:["createtype_enum$macrocall$2","createtype_enum$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"createtype_enum",symbols:[r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"kw_enum","lparen","createtype_enum$macrocall$1","rparen"],postprocess:c=>(0,o.track)(c,{type:"create enum",values:c[3]})},{name:"enum_value",symbols:["string"],postprocess:c=>(0,o.track)(c,{value:ae(c)})},{name:"createtype_composite$macrocall$2",symbols:["createtype_composite_attr"]},{name:"createtype_composite$macrocall$1$ebnf$1",symbols:[]},{name:"createtype_composite$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"createtype_composite$macrocall$2"],postprocess:O},{name:"createtype_composite$macrocall$1$ebnf$1",symbols:["createtype_composite$macrocall$1$ebnf$1","createtype_composite$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"createtype_composite$macrocall$1",symbols:["createtype_composite$macrocall$2","createtype_composite$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"createtype_composite",symbols:[r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","createtype_composite$macrocall$1","rparen"],postprocess:c=>(0,o.track)(c,{type:"create composite type",attributes:c[2]})},{name:"createtype_composite_attr$ebnf$1",symbols:["createtable_collate"],postprocess:a},{name:"createtype_composite_attr$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtype_composite_attr",symbols:["word","data_type","createtype_composite_attr$ebnf$1"],postprocess:c=>(0,o.track)(c,{name:m(c[0]),dataType:c[1],...c[2]?{collate:c[2][1]}:{}})},{name:"union_left",symbols:["select_statement"]},{name:"union_left",symbols:["select_values"]},{name:"union_left",symbols:["selection_paren"]},{name:"union_right",symbols:["selection"]},{name:"union_right",symbols:["selection_paren"]},{name:"union_statement$subexpression$1$ebnf$1",symbols:[r.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:a},{name:"union_statement$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"union_statement$subexpression$1",symbols:[r.lexerAny.has("kw_union")?{type:"kw_union"}:kw_union,"union_statement$subexpression$1$ebnf$1"]},{name:"union_statement",symbols:["union_left","union_statement$subexpression$1","union_right"],postprocess:c=>(0,o.track)(c,{type:ae(c[1]," "),left:u(c[0]),right:u(c[2])})},{name:"prepare$ebnf$1$subexpression$1",symbols:["lparen","data_type_list","rparen"],postprocess:k(1)},{name:"prepare$ebnf$1",symbols:["prepare$ebnf$1$subexpression$1"],postprocess:a},{name:"prepare$ebnf$1",symbols:[],postprocess:()=>null},{name:"prepare",symbols:["kw_prepare","ident","prepare$ebnf$1",r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"statement_noprep"],postprocess:c=>(0,o.track)(c,{type:"prepare",name:m(c[1]),...c[2]&&{args:c[2]},statement:u(O(c))})},{name:"deallocate$ebnf$1",symbols:["kw_prepare"],postprocess:a},{name:"deallocate$ebnf$1",symbols:[],postprocess:()=>null},{name:"deallocate",symbols:["kw_deallocate","deallocate$ebnf$1","deallocate_target"],postprocess:c=>(0,o.track)(c,{type:"deallocate",target:c[2]})},{name:"deallocate_target",symbols:["deallocate_all"],postprocess:u},{name:"deallocate_target",symbols:["deallocate_name"],postprocess:u},{name:"deallocate_name",symbols:["ident"],postprocess:c=>(0,o.track)(c,m(c[0]))},{name:"deallocate_all",symbols:[r.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:c=>(0,o.track)(c,{option:"all"})},{name:"create_view_statements",symbols:["create_view"]},{name:"create_view_statements",symbols:["create_materialized_view"]},{name:"create_view$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or,"kw_replace"]},{name:"create_view$ebnf$1",symbols:["create_view$ebnf$1$subexpression$1"],postprocess:a},{name:"create_view$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$2$subexpression$1",symbols:["kw_temp"]},{name:"create_view$ebnf$2$subexpression$1",symbols:["kw_temporary"]},{name:"create_view$ebnf$2",symbols:["create_view$ebnf$2$subexpression$1"],postprocess:a},{name:"create_view$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$3",symbols:["kw_recursive"],postprocess:a},{name:"create_view$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$4$subexpression$1$macrocall$2",symbols:["ident"]},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"create_view$ebnf$4$subexpression$1$macrocall$2"],postprocess:O},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1",symbols:["create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1","create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"create_view$ebnf$4$subexpression$1$macrocall$1",symbols:["create_view$ebnf$4$subexpression$1$macrocall$2","create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"create_view$ebnf$4$subexpression$1",symbols:["lparen","create_view$ebnf$4$subexpression$1$macrocall$1","rparen"],postprocess:k(1)},{name:"create_view$ebnf$4",symbols:["create_view$ebnf$4$subexpression$1"],postprocess:a},{name:"create_view$ebnf$4",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$5",symbols:["create_view_opts"],postprocess:a},{name:"create_view$ebnf$5",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$6$subexpression$1$subexpression$1",symbols:["kw_local"]},{name:"create_view$ebnf$6$subexpression$1$subexpression$1",symbols:["kw_cascaded"]},{name:"create_view$ebnf$6$subexpression$1",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_view$ebnf$6$subexpression$1$subexpression$1",r.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"kw_option"],postprocess:k(1)},{name:"create_view$ebnf$6",symbols:["create_view$ebnf$6$subexpression$1"],postprocess:a},{name:"create_view$ebnf$6",symbols:[],postprocess:()=>null},{name:"create_view",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_view$ebnf$1","create_view$ebnf$2","create_view$ebnf$3","kw_view","qualified_name","create_view$ebnf$4","create_view$ebnf$5",r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"selection","create_view$ebnf$6"],postprocess:c=>(0,o.track)(c,{type:"create view",...c[1]&&{orReplace:!0},...c[2]&&{temp:!0},...c[3]&&{recursive:!0},name:c[5],...c[6]&&{columnNames:c[6].map(m)},...c[7]&&{parameters:Ae(c[7])},query:c[9],...c[10]&&{checkOption:ae(c[10])}})},{name:"create_view_opt",symbols:["ident",r.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"ident"],postprocess:([c,I,d])=>[ae(c),ae(d)]},{name:"create_view_opts$macrocall$2",symbols:["create_view_opt"]},{name:"create_view_opts$macrocall$1$ebnf$1",symbols:[]},{name:"create_view_opts$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"create_view_opts$macrocall$2"],postprocess:O},{name:"create_view_opts$macrocall$1$ebnf$1",symbols:["create_view_opts$macrocall$1$ebnf$1","create_view_opts$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"create_view_opts$macrocall$1",symbols:["create_view_opts$macrocall$2","create_view_opts$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"create_view_opts",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_view_opts$macrocall$1"],postprocess:O},{name:"create_materialized_view$ebnf$1",symbols:["kw_ifnotexists"],postprocess:a},{name:"create_materialized_view$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$2",symbols:["ident"]},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"create_materialized_view$ebnf$2$subexpression$1$macrocall$2"],postprocess:O},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1",symbols:["create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1","create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1",symbols:["create_materialized_view$ebnf$2$subexpression$1$macrocall$2","create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"create_materialized_view$ebnf$2$subexpression$1",symbols:["lparen","create_materialized_view$ebnf$2$subexpression$1$macrocall$1","rparen"],postprocess:k(1)},{name:"create_materialized_view$ebnf$2",symbols:["create_materialized_view$ebnf$2$subexpression$1"],postprocess:a},{name:"create_materialized_view$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$3",symbols:["create_view_opts"],postprocess:a},{name:"create_materialized_view$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$4$subexpression$1",symbols:["kw_tablespace","ident"],postprocess:O},{name:"create_materialized_view$ebnf$4",symbols:["create_materialized_view$ebnf$4$subexpression$1"],postprocess:a},{name:"create_materialized_view$ebnf$4",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$5$subexpression$1$ebnf$1",symbols:["kw_no"],postprocess:a},{name:"create_materialized_view$ebnf$5$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$5$subexpression$1",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_materialized_view$ebnf$5$subexpression$1$ebnf$1","kw_data"]},{name:"create_materialized_view$ebnf$5",symbols:["create_materialized_view$ebnf$5$subexpression$1"],postprocess:a},{name:"create_materialized_view$ebnf$5",symbols:[],postprocess:()=>null},{name:"create_materialized_view",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_materialized","kw_view","create_materialized_view$ebnf$1","qualified_name","create_materialized_view$ebnf$2","create_materialized_view$ebnf$3","create_materialized_view$ebnf$4",r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"selection","create_materialized_view$ebnf$5"],postprocess:c=>(0,o.track)(c,{type:"create materialized view",...c[3]&&{ifNotExists:!0},name:c[4],...c[5]&&{columnNames:c[6].map(m)},...c[6]&&{parameters:Ae(c[6])},...c[7]&&{tablespace:m(c[7])},query:c[9],...c[10]&&{withData:ae(c[10][1])!=="no"}})},{name:"refresh_view_statements$ebnf$1",symbols:[r.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently],postprocess:a},{name:"refresh_view_statements$ebnf$1",symbols:[],postprocess:()=>null},{name:"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1",symbols:["kw_no"],postprocess:a},{name:"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"refresh_view_statements$ebnf$2$subexpression$1",symbols:[r.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1","kw_data"]},{name:"refresh_view_statements$ebnf$2",symbols:["refresh_view_statements$ebnf$2$subexpression$1"],postprocess:a},{name:"refresh_view_statements$ebnf$2",symbols:[],postprocess:()=>null},{name:"refresh_view_statements",symbols:["kw_refresh","kw_materialized","kw_view","refresh_view_statements$ebnf$1","qname","refresh_view_statements$ebnf$2"],postprocess:c=>(0,o.track)(c,{type:"refresh materialized view",...c[3]?{concurrently:!0}:{},name:c[4],...c[5]?{withData:ae(c[5][1])!=="no"}:{}})},{name:"functions_statements",symbols:["create_func"]},{name:"functions_statements",symbols:["do_stm"]},{name:"functions_statements",symbols:["drop_func"]},{name:"create_func$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or,"kw_replace"]},{name:"create_func$ebnf$1",symbols:["create_func$ebnf$1$subexpression$1"],postprocess:a},{name:"create_func$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_func$subexpression$1$ebnf$1$macrocall$2",symbols:["func_argdef"]},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"create_func$subexpression$1$ebnf$1$macrocall$2"],postprocess:O},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1","create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"create_func$subexpression$1$ebnf$1$macrocall$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$2","create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"create_func$subexpression$1$ebnf$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$1"],postprocess:a},{name:"create_func$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_func$subexpression$1",symbols:["lparen","create_func$subexpression$1$ebnf$1","rparen"],postprocess:k(1)},{name:"create_func$ebnf$2",symbols:["func_spec"]},{name:"create_func$ebnf$2",symbols:["create_func$ebnf$2","func_spec"],postprocess:c=>c[0].concat([c[1]])},{name:"create_func",symbols:[r.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_func$ebnf$1","kw_function","qname","create_func$subexpression$1","create_func$ebnf$2"],postprocess:(c,I)=>{var d;const j={};for(const X of c[5]){for(const ve in X)if(ve[0]!=="_"&&ve in j)throw new Error("conflicting or redundant options "+ve);Object.assign(j,X)}return(0,o.track)(c,{type:"create function",...c[1]&&{orReplace:!0},name:c[3],arguments:(d=c[4])!==null&&d!==void 0?d:[],...j})}},{name:"func_argdef$ebnf$1",symbols:["func_argopts"],postprocess:a},{name:"func_argdef$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_argdef$ebnf$2",symbols:["func_argdefault"],postprocess:a},{name:"func_argdef$ebnf$2",symbols:[],postprocess:()=>null},{name:"func_argdef",symbols:["func_argdef$ebnf$1","data_type","func_argdef$ebnf$2"],postprocess:c=>(0,o.track)(c,{default:c[2],type:c[1],...c[0]})},{name:"func_argdefault",symbols:[r.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:c=>c[1]},{name:"func_argdefault",symbols:[r.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:c=>c[1]},{name:"func_argopts$ebnf$1",symbols:["word"],postprocess:a},{name:"func_argopts$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_argopts",symbols:["func_argmod","func_argopts$ebnf$1"],postprocess:c=>(0,o.track)(c,{mode:ae(c[0]),...c[1]&&{name:m(c[1])}})},{name:"func_argopts",symbols:["word"],postprocess:(c,I)=>{const d=m(c);return d==="out"||d==="inout"||d==="variadic"?I:(0,o.track)(c,{name:d})}},{name:"func_argmod",symbols:[r.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"func_argmod",symbols:["kw_out"]},{name:"func_argmod",symbols:["kw_inout"]},{name:"func_argmod",symbols:["kw_variadic"]},{name:"func_spec",symbols:["kw_language","word"],postprocess:c=>(0,o.track)(c,{language:m(O(c))})},{name:"func_spec",symbols:["func_purity"],postprocess:c=>(0,o.track)(c,{purity:ae(c)})},{name:"func_spec$subexpression$1",symbols:[r.lexerAny.has("codeblock")?{type:"codeblock"}:codeblock]},{name:"func_spec$subexpression$1",symbols:["string"]},{name:"func_spec",symbols:[r.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"func_spec$subexpression$1"],postprocess:c=>({code:ae(O(c))})},{name:"func_spec$ebnf$1",symbols:[r.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:a},{name:"func_spec$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_spec$subexpression$2",symbols:["word"],postprocess:he("leakproof")},{name:"func_spec",symbols:["func_spec$ebnf$1","func_spec$subexpression$2"],postprocess:c=>(0,o.track)(c,{leakproof:!c[0]})},{name:"func_spec",symbols:["func_returns"],postprocess:c=>(0,o.track)(c,{returns:u(c)})},{name:"func_spec$subexpression$3",symbols:["word"],postprocess:he("called")},{name:"func_spec",symbols:["func_spec$subexpression$3","oninp"],postprocess:()=>({onNullInput:"call"})},{name:"func_spec$subexpression$4",symbols:["word"],postprocess:he("returns")},{name:"func_spec",symbols:["func_spec$subexpression$4",r.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null,"oninp"],postprocess:()=>({onNullInput:"null"})},{name:"func_spec$subexpression$5",symbols:["word"],postprocess:he("strict")},{name:"func_spec",symbols:["func_spec$subexpression$5"],postprocess:()=>({onNullInput:"strict"})},{name:"func_purity",symbols:["word"],postprocess:he("immutable")},{name:"func_purity",symbols:["word"],postprocess:he("stable")},{name:"func_purity",symbols:["word"],postprocess:he("volatile")},{name:"oninp$subexpression$1",symbols:["word"],postprocess:he("input")},{name:"oninp",symbols:[r.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,r.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null,"oninp$subexpression$1"]},{name:"func_returns",symbols:["kw_returns","data_type"],postprocess:O},{name:"func_returns$macrocall$2",symbols:["func_ret_table_col"]},{name:"func_returns$macrocall$1$ebnf$1",symbols:[]},{name:"func_returns$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"func_returns$macrocall$2"],postprocess:O},{name:"func_returns$macrocall$1$ebnf$1",symbols:["func_returns$macrocall$1$ebnf$1","func_returns$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"func_returns$macrocall$1",symbols:["func_returns$macrocall$2","func_returns$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"func_returns",symbols:["kw_returns",r.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"lparen","func_returns$macrocall$1","rparen"],postprocess:c=>(0,o.track)(c,{kind:"table",columns:c[3]})},{name:"func_ret_table_col",symbols:["word","data_type"],postprocess:c=>(0,o.track)(c,{name:m(c[0]),type:c[1]})},{name:"do_stm$ebnf$1$subexpression$1",symbols:["kw_language","word"],postprocess:O},{name:"do_stm$ebnf$1",symbols:["do_stm$ebnf$1$subexpression$1"],postprocess:a},{name:"do_stm$ebnf$1",symbols:[],postprocess:()=>null},{name:"do_stm",symbols:[r.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"do_stm$ebnf$1",r.lexerAny.has("codeblock")?{type:"codeblock"}:codeblock],postprocess:c=>(0,o.track)(c,{type:"do",...c[1]&&{language:m(c[1])},code:c[2].value})},{name:"drop_func$ebnf$1$subexpression$1",symbols:["kw_if","kw_exists"]},{name:"drop_func$ebnf$1",symbols:["drop_func$ebnf$1$subexpression$1"],postprocess:a},{name:"drop_func$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_func$ebnf$2",symbols:["drop_func_overload"],postprocess:a},{name:"drop_func$ebnf$2",symbols:[],postprocess:()=>null},{name:"drop_func",symbols:["kw_drop","kw_function","drop_func$ebnf$1","qname","drop_func$ebnf$2"],postprocess:c=>(0,o.track)(c,{type:"drop function",...c[2]&&{ifExists:!0},name:c[3],...c[4]&&{arguments:c[4]}})},{name:"drop_func_overload$macrocall$2",symbols:["drop_func_overload_col"]},{name:"drop_func_overload$macrocall$1$ebnf$1",symbols:[]},{name:"drop_func_overload$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"drop_func_overload$macrocall$2"],postprocess:O},{name:"drop_func_overload$macrocall$1$ebnf$1",symbols:["drop_func_overload$macrocall$1$ebnf$1","drop_func_overload$macrocall$1$ebnf$1$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"drop_func_overload$macrocall$1",symbols:["drop_func_overload$macrocall$2","drop_func_overload$macrocall$1$ebnf$1"],postprocess:([c,I])=>[u(c),...I.map(u)||[]]},{name:"drop_func_overload",symbols:["lparen","drop_func_overload$macrocall$1","rparen"],postprocess:k(1)},{name:"drop_func_overload_col$ebnf$1",symbols:["word"],postprocess:a},{name:"drop_func_overload_col$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_func_overload_col",symbols:["drop_func_overload_col$ebnf$1","qname"],postprocess:c=>(0,o.track)(c,{type:c[1],...c[0]&&{name:m(c[0])}})},{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement_separator"],postprocess:c=>c[0].concat([c[1]])},{name:"main$ebnf$2",symbols:[]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["statement_separator"]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","statement_separator"],postprocess:c=>c[0].concat([c[1]])},{name:"main$ebnf$2$subexpression$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","statement"]},{name:"main$ebnf$2",symbols:["main$ebnf$2","main$ebnf$2$subexpression$1"],postprocess:c=>c[0].concat([c[1]])},{name:"main$ebnf$3",symbols:[]},{name:"main$ebnf$3",symbols:["main$ebnf$3","statement_separator"],postprocess:c=>c[0].concat([c[1]])},{name:"main",symbols:["main$ebnf$1","statement","main$ebnf$2","main$ebnf$3"],postprocess:([c,I,d])=>{const j=d,X=[u(I),...j.map(ve=>u(ve[1]))];return X.length===1?X[0]:X}},{name:"statement_separator",symbols:[r.lexerAny.has("semicolon")?{type:"semicolon"}:semicolon]},{name:"statement",symbols:["statement_noprep"]},{name:"statement",symbols:["prepare"]},{name:"statement",symbols:["deallocate"]},{name:"statement_noprep",symbols:["selection"]},{name:"statement_noprep",symbols:["createtable_statement"]},{name:"statement_noprep",symbols:["createextension_statement"]},{name:"statement_noprep",symbols:["createindex_statement"]},{name:"statement_noprep",symbols:["simplestatements_all"]},{name:"statement_noprep",symbols:["insert_statement"]},{name:"statement_noprep",symbols:["update_statement"]},{name:"statement_noprep",symbols:["altertable_statement"]},{name:"statement_noprep",symbols:["alterindex_statement"]},{name:"statement_noprep",symbols:["delete_statement"]},{name:"statement_noprep",symbols:["create_sequence_statement"]},{name:"statement_noprep",symbols:["alter_sequence_statement"]},{name:"statement_noprep",symbols:["drop_statement"]},{name:"statement_noprep",symbols:["createtype_statement"]},{name:"statement_noprep",symbols:["create_view_statements"]},{name:"statement_noprep",symbols:["refresh_view_statements"]},{name:"statement_noprep",symbols:["create_schema"]},{name:"statement_noprep",symbols:["raise_statement"]},{name:"statement_noprep",symbols:["comment_statement"]},{name:"statement_noprep",symbols:["functions_statements"]},{name:"selection",symbols:["select_statement"],postprocess:u},{name:"selection",symbols:["select_values"],postprocess:u},{name:"selection",symbols:["with_statement"],postprocess:u},{name:"selection",symbols:["with_recursive_statement"],postprocess:u},{name:"selection",symbols:["union_statement"],postprocess:u},{name:"selection_paren",symbols:["lparen","selection","rparen"],postprocess:k(1)}],ParserStart:"main"};t.default=ut},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function a(h){return h[0]}const r=n(12),o=h=>h&&h[h.length-1],m={Lexer:r.lexerAny,ParserRules:[{name:"main$ebnf$1",symbols:["elements"],postprocess:a},{name:"main$ebnf$1",symbols:[],postprocess:()=>null},{name:"main",symbols:[r.lexerAny.has("start_list")?{type:"start_list"}:start_list,"main$ebnf$1",r.lexerAny.has("end_list")?{type:"end_list"}:end_list],postprocess:h=>h[1]||[]},{name:"elements$ebnf$1",symbols:[]},{name:"elements$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"elt"],postprocess:o},{name:"elements$ebnf$1",symbols:["elements$ebnf$1","elements$ebnf$1$subexpression$1"],postprocess:h=>h[0].concat([h[1]])},{name:"elements",symbols:["elt","elements$ebnf$1"],postprocess:([h,g])=>[h,...g||[]]},{name:"elt",symbols:[r.lexerAny.has("value")?{type:"value"}:value],postprocess:h=>h[0].value},{name:"elt",symbols:["main"],postprocess:h=>h[0]}],ParserStart:"main"};t.default=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.lexerAny=t.lexer=void 0;const a=n(0);t.lexer=(0,a.compile)({valueString:{match:/"(?:\\["\\]|[^\n"\\])*"/,value:r=>JSON.parse(r),type:r=>"value"},valueRaw:{match:/[^\s,\{\}"](?:[^,\{\}"]*[^\s,\{\}"])?/,type:()=>"value"},comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},start_list:"{",end_list:"}"}),t.lexer.next=(r=>()=>{let o;for(;(o=r.call(t.lexer))&&o.type==="space";);return o})(t.lexer.next),t.lexerAny=t.lexer},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function a(u){return u[0]}const r=n(14),o=u=>k=>k[u],m=u=>u&&u[u.length-1];function h(u){return Array.isArray(u)&&u.length===1&&(u=h(u[0])),Array.isArray(u)&&!u.length?null:u}const g={Lexer:r.lexerAny,ParserRules:[{name:"number$subexpression$1",symbols:["float"]},{name:"number$subexpression$1",symbols:["int"]},{name:"number",symbols:["number$subexpression$1"],postprocess:h},{name:"float",symbols:[r.lexerAny.has("float")?{type:"float"}:float],postprocess:u=>parseFloat(h(u))},{name:"int",symbols:[r.lexerAny.has("int")?{type:"int"}:int],postprocess:u=>parseInt(h(u),10)},{name:"comma",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma],postprocess:a},{name:"point$macrocall$2",symbols:["point_content"]},{name:"point$macrocall$1$subexpression$1",symbols:["point$macrocall$2"]},{name:"point$macrocall$1$subexpression$1",symbols:[r.lexerAny.has("lparen")?{type:"lparen"}:lparen,"point$macrocall$2",r.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:o(1)},{name:"point$macrocall$1",symbols:["point$macrocall$1$subexpression$1"],postprocess:h},{name:"point",symbols:["point$macrocall$1"],postprocess:h},{name:"point_content",symbols:["number","comma","number"],postprocess:u=>({x:u[0],y:u[2]})},{name:"line",symbols:[r.lexerAny.has("lcurl")?{type:"lcurl"}:lcurl,"number","comma","number","comma","number",r.lexerAny.has("rcurl")?{type:"rcurl"}:rcurl],postprocess:u=>({a:u[1],b:u[3],c:u[5]})},{name:"box",symbols:["closed_path"],postprocess:([u],k)=>u.length!==2?k:u},{name:"lseg",symbols:["path"],postprocess:([u],k)=>u.path.length!==2?k:u.path},{name:"path",symbols:["open_path"],postprocess:([u])=>({closed:!1,path:u})},{name:"path",symbols:["closed_path"],postprocess:([u])=>({closed:!0,path:u})},{name:"open_path$macrocall$2",symbols:[r.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket]},{name:"open_path$macrocall$3",symbols:[r.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"open_path$macrocall$1$macrocall$2",symbols:["point"]},{name:"open_path$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"open_path$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"open_path$macrocall$1$macrocall$2"],postprocess:m},{name:"open_path$macrocall$1$macrocall$1$ebnf$1",symbols:["open_path$macrocall$1$macrocall$1$ebnf$1","open_path$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:u=>u[0].concat([u[1]])},{name:"open_path$macrocall$1$macrocall$1",symbols:["open_path$macrocall$1$macrocall$2","open_path$macrocall$1$macrocall$1$ebnf$1"],postprocess:([u,k])=>[h(u),...k.map(h)||[]]},{name:"open_path$macrocall$1",symbols:["open_path$macrocall$2","open_path$macrocall$1$macrocall$1","open_path$macrocall$3"],postprocess:o(1)},{name:"open_path",symbols:["open_path$macrocall$1"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$2",symbols:[r.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"closed_path$subexpression$1$macrocall$3",symbols:[r.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$2",symbols:["point"]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"closed_path$subexpression$1$macrocall$1$macrocall$2"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1",symbols:["closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1","closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:u=>u[0].concat([u[1]])},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1",symbols:["closed_path$subexpression$1$macrocall$1$macrocall$2","closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1"],postprocess:([u,k])=>[h(u),...k.map(h)||[]]},{name:"closed_path$subexpression$1$macrocall$1",symbols:["closed_path$subexpression$1$macrocall$2","closed_path$subexpression$1$macrocall$1$macrocall$1","closed_path$subexpression$1$macrocall$3"],postprocess:o(1)},{name:"closed_path$subexpression$1",symbols:["closed_path$subexpression$1$macrocall$1"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$5",symbols:["point"]},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1",symbols:[]},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("comma")?{type:"comma"}:comma,"closed_path$subexpression$1$macrocall$5"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1",symbols:["closed_path$subexpression$1$macrocall$4$ebnf$1","closed_path$subexpression$1$macrocall$4$ebnf$1$subexpression$1"],postprocess:u=>u[0].concat([u[1]])},{name:"closed_path$subexpression$1$macrocall$4",symbols:["closed_path$subexpression$1$macrocall$5","closed_path$subexpression$1$macrocall$4$ebnf$1"],postprocess:([u,k])=>[h(u),...k.map(h)||[]]},{name:"closed_path$subexpression$1",symbols:["closed_path$subexpression$1$macrocall$4"],postprocess:m},{name:"closed_path",symbols:["closed_path$subexpression$1"],postprocess:o(0)},{name:"polygon",symbols:["closed_path"],postprocess:o(0)},{name:"circle_body",symbols:["point","comma","number"],postprocess:u=>({c:u[0],r:u[2]})},{name:"circle$subexpression$1$macrocall$2",symbols:[r.lexerAny.has("lcomp")?{type:"lcomp"}:lcomp]},{name:"circle$subexpression$1$macrocall$3",symbols:[r.lexerAny.has("rcomp")?{type:"rcomp"}:rcomp]},{name:"circle$subexpression$1$macrocall$1",symbols:["circle$subexpression$1$macrocall$2","circle_body","circle$subexpression$1$macrocall$3"],postprocess:o(1)},{name:"circle$subexpression$1",symbols:["circle$subexpression$1$macrocall$1"]},{name:"circle$subexpression$1$macrocall$5",symbols:[r.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"circle$subexpression$1$macrocall$6",symbols:[r.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"circle$subexpression$1$macrocall$4",symbols:["circle$subexpression$1$macrocall$5","circle_body","circle$subexpression$1$macrocall$6"],postprocess:o(1)},{name:"circle$subexpression$1",symbols:["circle$subexpression$1$macrocall$4"]},{name:"circle$subexpression$1",symbols:["circle_body"]},{name:"circle",symbols:["circle$subexpression$1"],postprocess:h}],ParserStart:"number"};t.default=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.lexerAny=t.lexer=void 0;const a=n(0);t.lexer=(0,a.compile)({comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,lcurl:"{",rcurl:"}",lparen:"(",rparen:")",lbracket:"[",rbracket:"]",lcomp:"<",rcomp:">"}),t.lexer.next=(r=>()=>{let o;for(;(o=r.call(t.lexer))&&o.type==="space";);return o})(t.lexer.next),t.lexerAny=t.lexer},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function a(m){return m[0]}const r=n(16),o={Lexer:r.lexerAny,ParserRules:[{name:"main$ebnf$1",symbols:["elt"]},{name:"main$ebnf$1",symbols:["main$ebnf$1","elt"],postprocess:m=>m[0].concat([m[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([m])=>{const h=new Set;for(const g of m){const u=typeof g[1]=="number"?g[0]:"time";if(h.has(u))return"invalid";h.add(u)}return m}},{name:"elt",symbols:["time"]},{name:"elt",symbols:["num","unit"],postprocess:([[m],h])=>(h=h[0].type,[h,m])},{name:"unit",symbols:[r.lexerAny.has("years")?{type:"years"}:years]},{name:"unit",symbols:[r.lexerAny.has("months")?{type:"months"}:months]},{name:"unit",symbols:[r.lexerAny.has("days")?{type:"days"}:days]},{name:"unit",symbols:[r.lexerAny.has("hours")?{type:"hours"}:hours]},{name:"unit",symbols:[r.lexerAny.has("minutes")?{type:"minutes"}:minutes]},{name:"unit",symbols:[r.lexerAny.has("seconds")?{type:"seconds"}:seconds]},{name:"unit",symbols:[r.lexerAny.has("milliseconds")?{type:"milliseconds"}:milliseconds]},{name:"num",symbols:["int"]},{name:"num",symbols:["float"]},{name:"uint",symbols:[r.lexerAny.has("int")?{type:"int"}:int],postprocess:([m])=>parseInt(m,10)},{name:"int$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("neg")?{type:"neg"}:neg]},{name:"int$ebnf$1",symbols:["int$ebnf$1$subexpression$1"],postprocess:a},{name:"int$ebnf$1",symbols:[],postprocess:()=>null},{name:"int",symbols:["int$ebnf$1",r.lexerAny.has("int")?{type:"int"}:int],postprocess:([m,h])=>parseInt(h,10)*(m?-1:1)},{name:"float$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("neg")?{type:"neg"}:neg]},{name:"float$ebnf$1",symbols:["float$ebnf$1$subexpression$1"],postprocess:a},{name:"float$ebnf$1",symbols:[],postprocess:()=>null},{name:"float$ebnf$2",symbols:[r.lexerAny.has("int")?{type:"int"}:int],postprocess:a},{name:"float$ebnf$2",symbols:[],postprocess:()=>null},{name:"float",symbols:["float$ebnf$1","float$ebnf$2",r.lexerAny.has("dot")?{type:"dot"}:dot,r.lexerAny.has("int")?{type:"int"}:int],postprocess:([m,...h])=>parseFloat(h.map(g=>g?g.text:"0").join(""))*(m?-1:1)},{name:"time$ebnf$1$subexpression$1",symbols:[r.lexerAny.has("colon")?{type:"colon"}:colon,"uint"]},{name:"time$ebnf$1",symbols:["time$ebnf$1$subexpression$1"],postprocess:a},{name:"time$ebnf$1",symbols:[],postprocess:()=>null},{name:"time$ebnf$2$subexpression$1",symbols:[r.lexerAny.has("dot")?{type:"dot"}:dot,r.lexerAny.has("int")?{type:"int"}:int]},{name:"time$ebnf$2",symbols:["time$ebnf$2$subexpression$1"],postprocess:a},{name:"time$ebnf$2",symbols:[],postprocess:()=>null},{name:"time",symbols:["uint",r.lexerAny.has("colon")?{type:"colon"}:colon,"uint","time$ebnf$1","time$ebnf$2"],postprocess:([m,h,g,u,k])=>{u=u&&u[1],k=k&&k[1];const O=typeof u=="number"?[["hours",m],["minutes",g],["seconds",u]]:[["minutes",m],["seconds",g]];return k&&O.push(["milliseconds",parseFloat("0."+k)*1e3]),O}}],ParserStart:"main"};t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.lexerAny=t.lexer=void 0;const a=n(0);t.lexer=(0,a.compile)({int:/\d+/,neg:"-",dot:".",years:/(?:y|yrs?|years?)\b/,months:/(?:mon(?:th)?s?)\b/,days:/(?:d|days?)\b/,hours:/(?:h|hrs?|hours?)\b/,minutes:/(?:m|mins?|minutes?)\b/,seconds:/(?:s|secs?|seconds?)\b/,milliseconds:/(?:ms|milliseconds?)\b/,space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},colon:":"}),t.lexer.next=(r=>()=>{let o;for(;(o=r.call(t.lexer))&&o.type==="space";);return o})(t.lexer.next),t.lexerAny=t.lexer},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function a(m){return m[0]}const r=n(18),o={Lexer:r.lexerAny,ParserRules:[{name:"num",symbols:[r.lexerAny.has("int")?{type:"int"}:int]},{name:"num",symbols:[r.lexerAny.has("float")?{type:"float"}:float]},{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","long"],postprocess:m=>m[0].concat([m[1]])},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["short"]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","short"],postprocess:m=>m[0].concat([m[1]])},{name:"main$ebnf$2$subexpression$1",symbols:[r.lexerAny.has("T")?{type:"T"}:T,"main$ebnf$2$subexpression$1$ebnf$1"]},{name:"main$ebnf$2",symbols:["main$ebnf$2$subexpression$1"],postprocess:a},{name:"main$ebnf$2",symbols:[],postprocess:()=>null},{name:"main",symbols:[r.lexerAny.has("P")?{type:"P"}:P,"main$ebnf$1","main$ebnf$2"],postprocess:([m,h,g],u)=>(g=g?g[1]:[],!h.length&&!g.length?u:h.length?g.length?[...h,...g]:h:g)},{name:"long$subexpression$1",symbols:[r.lexerAny.has("Y")?{type:"Y"}:Y]},{name:"long$subexpression$1",symbols:[r.lexerAny.has("M")?{type:"M"}:M]},{name:"long$subexpression$1",symbols:[r.lexerAny.has("W")?{type:"W"}:W]},{name:"long$subexpression$1",symbols:[r.lexerAny.has("D")?{type:"D"}:D]},{name:"long",symbols:["num","long$subexpression$1"],postprocess:([m,h])=>{switch(m=parseFloat(m[0].value),h=h[0].type,h){case"Y":return["years",m];case"M":return["months",m];case"W":return["days",m*7];case"D":return["days",m];default:throw new Error("Unexpected unit "+h)}}},{name:"short$ebnf$1",symbols:[r.lexerAny.has("T")?{type:"T"}:T],postprocess:a},{name:"short$ebnf$1",symbols:[],postprocess:()=>null},{name:"short$subexpression$1",symbols:[r.lexerAny.has("H")?{type:"H"}:H]},{name:"short$subexpression$1",symbols:[r.lexerAny.has("M")?{type:"M"}:M]},{name:"short$subexpression$1",symbols:[r.lexerAny.has("S")?{type:"S"}:S]},{name:"short",symbols:["short$ebnf$1","num","short$subexpression$1"],postprocess:([m,h,g])=>{switch(h=parseFloat(h[0].value),g=g[0].type,g){case"H":return["hours",h];case"M":return["minutes",h];case"S":return["seconds",h];default:throw new Error("Unexpected unit "+g)}}}],ParserStart:"num"};t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.lexerAny=t.lexer=void 0;const a=n(0);t.lexer=(0,a.compile)({int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,P:"P",Y:"Y",M:"M",W:"W",D:"D",H:"H",S:"S",T:"T"}),t.lexerAny=t.lexer},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.toSql=void 0;const a=n(2),r=n(5),o=n(6),m=n(20),h=n(3),g=new Set(h.sqlKeywords.map(I=>I.toLowerCase()));let u=[];function k(I){return O(I.name)}function O(I,d){if(!d){const j=I.toLowerCase();if(j===I&&!g.has(j)&&/^[a-z][a-z0-9_]*$/.test(j))return I}return'"'+I+'"'}function w(I,d,j){j&&u.push("(");let X=!0;for(const ve of I)X||u.push(", "),X=!1,d(ve);j&&u.push(")")}function N(I,d){switch(I.type){case"foreign key":u.push(" foreign key (",...I.localColumns.map(k).join(", "),")");case"reference":u.push(" REFERENCES "),d.tableRef(I.foreignTable),u.push("(",...I.foreignColumns.map(k).join(", "),") "),I.match&&u.push(" MATCH ",I.match.toUpperCase()),I.onDelete&&u.push(" ON DELETE ",I.onDelete),I.onUpdate&&u.push(" ON UPDATE ",I.onUpdate);break;case"primary key":case"unique":u.push(" ",I.type," "),"columns"in I&&u.push("(",...I.columns.map(k).join(", "),") ");break;case"check":u.push(" check "),d.expr(I.expr);break;case"not null":case"null":u.push(" ",I.type," ");break;case"default":u.push(" default "),d.expr(I.default);break;case"add generated":u.push(" GENERATED "),ze(d,I);break;default:throw o.NotSupported.never(I)}u.push(" ")}function Z(I,d){I.schema&&u.push(O(I.schema),"."),u.push(O(I.name,d)," ")}function ae(I){Z(I),I.alias&&u.push(" AS ",O(I.alias)," ")}function Ae(I,d){u.push(" ORDER BY "),w(d,j=>{I.expr(j.by),j.order&&u.push(" ",j.order," "),j.nulls&&u.push(" NULLS ",j.nulls," ")},!1)}function Pe(I){switch(I.type){case"default":u.push("DEFAULT ");break;case"identifier":u.push(I.name);break;case"list":let d=!0;for(const j of I.values)d||u.push(", "),d=!1,Pe(j);break;case"value":u.push(typeof I.value=="number"?I.value.toString():(0,m.literal)(I.value));break;default:throw o.NotSupported.never(I)}}function ze(I,d){d.always&&u.push(d.always.toUpperCase()," "),u.push("AS IDENTITY "),d.sequence&&(u.push("("),d.sequence.name&&(u.push("SEQUENCE NAME "),Z(d.sequence.name),u.push(" ")),pe(I,d.sequence),u.push(") "))}function pe(I,d){d.as&&(u.push("AS "),I.dataType(d.as),u.push(" ")),typeof d.incrementBy=="number"&&u.push("INCREMENT BY ",d.incrementBy.toString()," "),d.minValue==="no minvalue"&&u.push("NO MINVALUE "),typeof d.minValue=="number"&&u.push("MINVALUE ",d.minValue.toString()," "),d.maxValue==="no maxvalue"&&u.push("NO MAXVALUE "),typeof d.maxValue=="number"&&u.push("MAXVALUE ",d.maxValue.toString()," "),typeof d.startWith=="number"&&u.push("START WITH ",d.startWith.toString()," "),typeof d.cache=="number"&&u.push("CACHE ",d.cache.toString()," "),d.cycle&&u.push(d.cycle," "),d.ownedBy==="none"?u.push("OWNED BY NONE "):d.ownedBy&&(u.push("OWNED BY "),he(d.ownedBy)),"restart"in d&&(d.restart===!0?u.push("RESTART "):d.restart&&u.push("RESTART WITH ",d.restart.toString()," "))}function he(I){I.schema&&u.push(O(I.schema),"."),u.push(O(I.table),".",O(I.column)," ")}function Le(I,d,j){if(!d){j();return}u.push(d.type," "),j(),d.on&&(u.push("ON "),I.expr(d.on)),d.using&&(u.push("USING ("),w(d.using,X=>u.push(k(X)),!1),u.push(") ")),u.push(" ")}function Ye(I){I.opSchema?u.push(" operator(",O(I.opSchema),".",I.op,") "):u.push(" ",I.op," ")}const ut=(0,r.astVisitor)(I=>({addColumn:(...d)=>{u.push(" ADD COLUMN "),d[0].ifNotExists&&u.push("IF NOT EXISTS "),I.super().addColumn(...d)},createExtension:d=>{u.push("CREATE EXTENSION "),d.ifNotExists&&u.push(" IF NOT EXISTS "),u.push(k(d.extension)),!(!d.from&&!d.version&&!d.schema)&&(u.push(" WITH"),d.schema&&u.push(" SCHEMA ",k(d.schema)),d.version&&u.push(" VERSION ",(0,m.literal)(d.version.value)),d.from&&u.push(" FROM ",(0,m.literal)(d.from.value)))},tablespace:d=>{u.push("TABLESPACE ",k(d.tablespace))},addConstraint:d=>{u.push(" ADD ");const j=d.constraint.constraintName;j&&u.push(" CONSTRAINT ",k(j)," "),N(d.constraint,I)},alterColumn:(d,j)=>{u.push(" ALTER COLUMN ",k(d.column)," "),I.super().alterColumn(d,j)},setColumnDefault:(d,j,X)=>{if(u.push(" SET DEFAULT "),I.expr(d.default),d.updateExisting)throw new Error("Not implemented: updateExisting on set column default")},createEnum:d=>{u.push("CREATE TYPE "),Z(d.name),u.push(" AS ENUM "),w(d.values,j=>u.push((0,m.literal)(j.value)),!0),u.push(" ")},createCompositeType:d=>{u.push("CREATE TYPE "),Z(d.name),u.push(" AS "),w(d.attributes,j=>{u.push(k(j.name)," "),I.dataType(j.dataType),j.collate&&(u.push("COLLATE "),Z(j.collate))},!0),u.push(" ")},setTableOwner:d=>{u.push(" OWNER TO ",k(d.to))},alterColumnSimple:d=>u.push(d.type),alterColumnAddGenerated:d=>{u.push(" ADD GENERATED "),ze(I,d)},setColumnType:d=>{u.push(" SET DATA TYPE "),I.dataType(d.dataType),u.push(" ")},alterTable:d=>{u.push("ALTER TABLE "),d.ifExists&&u.push(" IF EXISTS "),d.only&&u.push(" ONLY "),ae(d.table),w(d.changes,j=>I.tableAlteration(j,d.table),!1)},alterIndex:d=>{switch(u.push("ALTER INDEX "),d.ifExists&&u.push(" IF EXISTS "),ae(d.index),d.change.type){case"rename":u.push(" RENAME TO "),Z(d.change.to),u.push(" ");break;case"set tablespace":u.push(" SET TABLESPACE "),Z(d.change.tablespace),u.push(" ");break;default:throw o.NotSupported.never(d.change,"Alter index type not supported: ")}},tableAlteration:(d,j)=>{switch(d.type){case"add column":return I.addColumn(d,j);case"add constraint":return I.addConstraint(d,j);case"alter column":return I.alterColumn(d,j);case"rename":return I.renameTable(d,j);case"rename column":return I.renameColumn(d,j);case"rename constraint":return I.renameConstraint(d,j);case"drop column":return I.dropColumn(d,j);case"drop constraint":return I.dropConstraint(d,j);case"owner":return I.setTableOwner(d,j);default:throw o.NotSupported.never(d)}},array:d=>{u.push(d.type==="array"?"ARRAY[":"("),w(d.expressions,j=>I.expr(j),!1),u.push(d.type==="array"?"]":")")},arrayIndex:d=>{I.expr(d.array),u.push("["),I.expr(d.index),u.push("] ")},expr:d=>{if(d.type==="ref"){I.ref(d);return}if(d.type==="list"){I.super().expr(d);return}u.push("("),I.super().expr(d),u.push(")")},callOverlay:d=>{u.push("OVERLAY("),I.expr(d.value),u.push(" PLACING "),I.expr(d.placing),u.push(" FROM "),I.expr(d.from),d.for&&(u.push(" FOR "),I.expr(d.for)),u.push(")")},callSubstring:d=>{u.push("SUBSTRING("),I.expr(d.value),d.from&&(u.push(" FROM "),I.expr(d.from)),d.for&&(u.push(" FOR "),I.expr(d.for)),u.push(")")},binary:d=>{I.expr(d.left),Ye(d),I.expr(d.right)},call:d=>{Z(d.function),u.push("("),d.distinct&&u.push(d.distinct," "),w(d.args,j=>I.expr(j),!1),d.orderBy&&Ae(I,d.orderBy),u.push(") "),d.filter&&(u.push("filter (where "),I.expr(d.filter),u.push(") ")),d.over&&(u.push("over ("),d.over.partitionBy&&(u.push("PARTITION BY "),w(d.over.partitionBy,j=>I.expr(j),!1),u.push(" ")),d.over.orderBy&&(Ae(I,d.over.orderBy),u.push(" ")),u.push(") "))},case:d=>{u.push("CASE "),d.value&&I.expr(d.value);for(const j of d.whens)u.push(" WHEN "),I.expr(j.when),u.push(" THEN "),I.expr(j.value);d.else&&(u.push(" ELSE "),I.expr(d.else)),u.push(" END ")},cast:d=>{I.expr(d.operand),u.push("::"),I.dataType(d.to)},constant:d=>{switch(d.type){case"boolean":u.push(d.value?"true":"false");break;case"integer":u.push(d.value.toString(10));break;case"numeric":u.push(d.value.toString()),Number.isInteger(d.value)&&u.push(".");break;case"null":u.push("null");break;case"constant":break;case"string":u.push((0,m.literal)(d.value));break;default:throw o.NotSupported.never(d)}},valueKeyword:d=>{u.push(d.keyword," ")},comment:d=>{switch(u.push("COMMENT ON ",d.on.type.toUpperCase()," "),d.on.type){case"column":he(d.on.column);break;default:Z(d.on.name);break}u.push(" IS ",(0,m.literal)(d.comment)," ")},extract:d=>{u.push("EXTRACT (",d.field.name.toUpperCase()," FROM "),I.expr(d.from),u.push(") ")},createColumn:d=>{var j;u.push(k(d.name)," "),I.dataType(d.dataType),u.push(" "),d.collate&&(u.push("COLLATE "),Z(d.collate));for(const X of(j=d.constraints)!==null&&j!==void 0?j:[])I.constraint(X)},begin:d=>{u.push("BEGIN "),d.isolationLevel&&u.push("ISOLATION LEVEL ",d.isolationLevel.toUpperCase()," "),d.writeable&&u.push(d.writeable.toUpperCase()," "),typeof d.deferrable=="boolean"&&(d.deferrable||u.push("NOT "),u.push("DEFERRABLE "))},alterSequence:d=>{switch(u.push("ALTER SEQUENCE "),d.ifExists&&u.push("IF EXISTS "),Z(d.name),d.change.type){case"set options":pe(I,d.change);break;case"rename":u.push("RENAME TO ",k(d.change.newName)," ");break;case"set schema":u.push("SET SCHEMA ",k(d.change.newSchema)," ");break;case"owner to":d.change.owner,u.push("OWNER TO ",k(d.change.owner)," ");break;default:throw o.NotSupported.never(d.change)}},createSequence:d=>{u.push("CREATE "),d.temp&&u.push("TEMPORARY "),u.push("SEQUENCE "),d.ifNotExists&&u.push("IF NOT EXISTS "),Z(d.name),pe(I,d.options)},drop:d=>{u.push(d.type.toUpperCase()," "),d.concurrently&&u.push("CONCURRENTLY "),d.ifExists&&u.push("IF EXISTS "),w(d.names,j=>I.tableRef(j),!1),d.cascade&&u.push(d.cascade.toUpperCase()," ")},constraint:d=>{d.constraintName&&u.push(" CONSTRAINT ",k(d.constraintName)," "),N(d,I)},do:d=>{u.push("DO"),d.language&&u.push(" LANGUAGE ",d.language.name),u.push(" $$",d.code,"$$")},createFunction:d=>{var j;if(u.push(d.orReplace?"CREATE OR REPLACE FUNCTION ":"CREATE FUNCTION "),Z(d.name),w(d.arguments,X=>{X.mode&&u.push(X.mode," "),X.name&&u.push(k(X.name)," "),I.dataType(X.type),X.default&&(u.push(" = "),I.expr(X.default))},!0),d.returns)switch(d.returns.kind){case"table":u.push(" RETURNS TABLE "),w(d.returns.columns,X=>{u.push(k(X.name)," "),I.dataType(X.type)},!0);break;case void 0:case null:case"array":u.push(" RETURNS "),I.dataType(d.returns);break;default:throw o.NotSupported.never(d.returns)}switch(u.push(" AS $$",(j=d.code)!==null&&j!==void 0?j:"","$$"),d.language&&u.push("LANGUAGE ",d.language.name," "),d.purity&&u.push(d.purity.toUpperCase()," "),typeof d.leakproof=="boolean"&&u.push(d.leakproof?"LEAKPROOF ":"NOT LEAKPROOF "),d.onNullInput){case"call":u.push("CALLED ON NULL INPUT ");break;case"null":u.push("RETURNS NULL ON NULL INPUT ");break;case"strict":u.push("STRICT ");break;case null:case void 0:break;default:throw o.NotSupported.never(d.onNullInput)}},dropFunction:d=>{u.push("DROP FUNCTION "),d.ifExists&&u.push("IF EXISTS "),Z(d.name),d.arguments&&w(d.arguments,j=>{j.name&&(Z(j.name),u.push(" ")),I.dataType(j.type)},!0),u.push(" ")},with:d=>{u.push("WITH "),w(d.bind,j=>{u.push(k(j.alias)," AS ("),I.statement(j.statement),u.push(") ")},!1),I.statement(d.in)},withRecursive:d=>{u.push("WITH RECURSIVE ",k(d.alias),"(",...d.columnNames.map(k).join(", "),") AS ("),I.union(d.bind),u.push(") "),I.statement(d.in)},setGlobal:d=>{u.push("SET ",k(d.variable)," = "),Pe(d.set)},setTimezone:d=>{switch(u.push("SET TIME ZONE "),d.to.type){case"default":case"local":u.push(d.to.type.toUpperCase()," ");break;case"value":u.push(typeof d.to.value=="string"?(0,m.literal)(d.to.value):d.to.value.toString(10));break;case"interval":u.push("INTERVAL ",(0,m.literal)(d.to.value)," HOUR TO MINUTE");break;default:throw o.NotSupported.never(d.to)}},dataType:d=>{var j,X;if((d==null?void 0:d.kind)==="array"){I.dataType(d.arrayOf),u.push("[]");return}if(!(d!=null&&d.name)){u.push("unkown");return}let ve=!0;if(d.schema)Z(d,d.doubleQuoted);else if(d.doubleQuoted)Z(d,!0);else switch(d.name){case"double precision":case"character varying":case"bit varying":u.push(d.name," ");break;case"time without time zone":case"timestamp without time zone":case"time with time zone":case"timestamp with time zone":const Je=d.name.split(" ");u.push(Je.shift()),!((j=d.config)===null||j===void 0)&&j.length&&w(d.config,Be=>u.push(Be.toString(10)),!0),u.push(" "),u.push(Je.join(" ")," "),ve=!1;break;default:Z(d);break}ve&&(!((X=d.config)===null||X===void 0)&&X.length)&&w(d.config,Je=>u.push(Je.toString(10)),!0)},createIndex:d=>{u.push(d.unique?"CREATE UNIQUE INDEX ":"CREATE INDEX "),d.ifNotExists&&u.push(" IF NOT EXISTS "),d.indexName&&u.push(k(d.indexName)," "),u.push("ON "),I.tableRef(d.table),d.using&&u.push("USING ",k(d.using)," "),w(d.expressions,j=>{I.expr(j.expression),u.push(" "),j.collate&&(u.push("COLLATE "),Z(j.collate)),j.opclass&&Z(j.opclass),j.order&&u.push(j.order," "),j.nulls&&u.push("nulls ",j.nulls," ")},!0),d.with&&(u.push("WITH "),w(d.with,j=>{u.push(j.parameter," = ",(0,m.literal)(j.value))},!0)),d.tablespace&&u.push("TABLESPACE ",O(d.tablespace)),d.where&&(u.push(" WHERE "),I.expr(d.where)),u.push(" ")},createTable:d=>{var j;u.push("CREATE "),d.locality&&u.push(d.locality.toUpperCase()," "),d.temporary&&u.push("TEMPORARY "),d.unlogged&&u.push("UNLOGGED "),u.push(d.ifNotExists?"TABLE IF NOT EXISTS ":"TABLE "),I.tableRef(d.name),u.push("("),w(d.columns,X=>{switch(X.kind){case"column":return I.createColumn(X);case"like table":return I.likeTable(X);default:throw o.NotSupported.never(X)}},!1),d.constraints&&(u.push(", "),w(d.constraints,X=>{const ve=X.constraintName;ve&&u.push("CONSTRAINT ",k(ve)," "),N(X,I)},!1)),u.push(") "),!((j=d.inherits)===null||j===void 0)&&j.length&&(u.push(" INHERITS "),w(d.inherits,X=>Z(X),!0))},likeTable:d=>{u.push(" LIKE "),I.tableRef(d.like),u.push(" ");for(const{verb:j,option:X}of d.options)u.push(j.toUpperCase()," ",X.toUpperCase()," ")},createSchema:d=>{u.push(d.ifNotExists?"CREATE SCHEMA IF NOT EXISTS ":"CREATE SCHEMA "),u.push(k(d.name))},truncateTable:d=>{u.push("TRUNCATE TABLE ");let j=!0;for(const X of d.tables)j||u.push(", "),j=!1,I.tableRef(X);if(d.identity)switch(d.identity){case"restart":u.push(" RESTART IDENTITY ");break;case"continue":u.push(" CONTINUE IDENTITY ");break}d.cascade&&u.push(" ",d.cascade," ")},delete:d=>{u.push("DELETE FROM "),I.tableRef(d.from),d.where&&(u.push(" WHERE "),I.expr(d.where)),d.returning&&(u.push(" RETURNING "),w(d.returning,j=>I.selectionColumn(j),!1)),u.push(" ")},dropColumn:d=>{u.push(" DROP COLUMN "),d.ifExists&&u.push(" IF EXISTS "),u.push(k(d.column)),d.behaviour&&u.push(" ",d.behaviour),u.push(" ")},dropConstraint:d=>{u.push(" DROP CONSTRAINT "),d.ifExists&&u.push(" IF EXISTS "),u.push(k(d.constraint)),d.behaviour&&u.push(" ",d.behaviour.toUpperCase()," ")},from:d=>I.super().from(d),fromCall:d=>{Le(I,d.join,()=>{var j,X;if(I.call(d),d.withOrdinality&&u.push(" WITH ORDINALITY"),d.alias){u.push(" AS ",k(d.alias)," ");const ve=(X=(j=d.alias.columns)===null||j===void 0?void 0:j.length)!==null&&X!==void 0?X:0;if(ve>0){u.push("(");for(let Je=0;Je<ve;++Je)Je!==0&&u.push(", "),u.push(k(d.alias.columns[Je]));u.push(")")}}}),u.push(" ")},fromStatement:d=>{Le(I,d.join,()=>{u.push("("),I.select(d.statement),u.push(") "),d.alias&&(u.push(" AS ",O(d.alias)),d.columnNames&&w(d.columnNames,j=>u.push(k(j)),!0),u.push(" "))}),u.push(" ")},values:d=>{u.push("VALUES "),w(d.values,j=>{w(j,X=>{I.expr(X)},!0)},!1)},fromTable:d=>{Le(I,d.join,()=>{if(I.tableRef(d.name),d.name.columnNames){if(!d.name.alias)throw new Error("Cannot specify aliased column names without an alias");w(d.name.columnNames,j=>u.push(k(j)),!0)}})},join:d=>{throw new Error("Should not happen ")},insert:d=>{if(u.push("INSERT INTO "),I.tableRef(d.into),d.columns&&u.push("(",d.columns.map(k).join(", "),")"),u.push(" "),d.overriding&&u.push("OVERRIDING ",d.overriding.toUpperCase()," VALUE "),I.select(d.insert),u.push(" "),d.onConflict){u.push("ON CONFLICT ");const j=d.onConflict.on;switch(j==null?void 0:j.type){case"on expr":w(j.exprs,X=>I.expr(X),!0);break;case"on constraint":u.push("ON CONSTRAINT "),Z(j.constraint);case null:case void 0:break;default:throw o.NotSupported.never(j)}d.onConflict.do==="do nothing"?u.push(" DO NOTHING"):(u.push(" DO UPDATE SET "),w(d.onConflict.do.sets,X=>I.set(X),!1),d.onConflict.where&&(u.push(" WHERE "),I.expr(d.onConflict.where))),u.push(" ")}d.returning&&(u.push(" RETURNING "),w(d.returning,j=>I.selectionColumn(j),!1))},raise:d=>{var j,X;u.push("RAISE "),d.level&&u.push(d.level.toUpperCase()," "),u.push((0,m.literal)(d.format)," "),!((j=d.formatExprs)===null||j===void 0)&&j.length&&(u.push(", "),w(d.formatExprs,ve=>I.expr(ve),!1)),!((X=d.using)===null||X===void 0)&&X.length&&(u.push(" USING "),w(d.using,({type:ve,value:Je})=>{u.push(ve.toUpperCase(),"="),I.expr(Je)},!1)),u.push(" ")},default:()=>{u.push(" DEFAULT ")},member:d=>{I.expr(d.operand),u.push(d.op),u.push(typeof d.member=="number"?d.member.toString(10):(0,m.literal)(d.member))},ref:d=>{d.table&&(Z(d.table),u.push(".")),u.push(d.name==="*"?"*":O(d.name))},parameter:d=>{u.push(d.name)},renameColumn:d=>{u.push(" RENAME COLUMN ",k(d.column)," TO ",k(d.to))},renameConstraint:d=>{u.push(" RENAME CONSTRAINT ",k(d.constraint)," TO ",k(d.to))},renameTable:d=>{u.push(" RENAME TO ",k(d.to))},createView:d=>{u.push("CREATE "),d.orReplace&&u.push("OR REPLACE "),d.temp&&u.push("TEMP "),d.recursive&&u.push("RECURSIVE "),u.push("VIEW "),I.tableRef(d.name),d.columnNames&&w(d.columnNames,X=>u.push(k(X)),!0);const j=d.parameters&&Object.entries(d.parameters);j!=null&&j.length&&(u.push(" WITH "),w(j,([X,ve])=>u.push(X,"=",ve),!1)),u.push(" AS "),I.select(d.query),d.checkOption&&u.push(" WITH ",d.checkOption.toUpperCase()," CHECK OPTION")},createMaterializedView:d=>{u.push("CREATE MATERIALIZED VIEW "),d.ifNotExists&&u.push("IF NOT EXISTS "),I.tableRef(d.name),d.columnNames&&w(d.columnNames,X=>u.push(k(X)),!0);const j=d.parameters&&Object.entries(d.parameters);j!=null&&j.length&&(u.push(" WITH "),w(j,([X,ve])=>u.push(X,"=",ve),!1)),d.tablespace&&u.push(" TABLESPACE ",k(d.tablespace)),u.push(" AS "),I.select(d.query),typeof d.withData=="boolean"&&u.push(d.withData?" WITH DATA":" WITH NO DATA")},refreshMaterializedView:d=>{u.push("REFRESH MATERIALIZED VIEW "),d.concurrently&&u.push("CONCURRENTLY "),I.tableRef(d.name),typeof d.withData=="boolean"&&u.push(d.withData?" WITH DATA":" WITH NO DATA")},select:d=>I.super().select(d),selection:d=>{if(u.push("SELECT "),d.distinct&&(typeof d.distinct=="string"?u.push(d.distinct.toUpperCase()):(u.push(" DISTINCT ON "),w(d.distinct,j=>I.expr(j),!0)),u.push(" ")),d.columns&&w(d.columns,j=>I.selectionColumn(j),!1),u.push(" "),d.from){u.push("FROM ");const j=d.from.length;for(let X=0;X<j;X++){const ve=d.from[X];X>0&&!ve.join&&u.push(","),I.from(ve)}u.push(" ")}d.where&&(u.push("WHERE "),I.expr(d.where),u.push(" ")),d.groupBy&&(u.push("GROUP BY "),w(d.groupBy,j=>I.expr(j),!1),u.push(" "),d.having&&(u.push(" HAVING "),I.expr(d.having),u.push(" "))),d.orderBy&&(Ae(I,d.orderBy),u.push(" ")),d.limit&&(d.limit.offset&&(u.push("OFFSET "),I.expr(d.limit.offset)),d.limit.limit&&(u.push("LIMIT "),I.expr(d.limit.limit))),d.for&&(u.push("FOR ",d.for.type.toUpperCase()),d.skip&&u.push(" ",d.skip.type.toUpperCase()))},show:d=>{u.push("SHOW ",k(d.variable))},prepare:d=>{var j;u.push("PREPARE ",k(d.name)),!((j=d.args)===null||j===void 0)&&j.length&&w(d.args,X=>I.dataType(X),!0),u.push(" AS "),I.statement(d.statement)},deallocate:d=>{if(u.push("DEALLOCATE "),"name"in d.target){u.push(d.target.name);return}u.push("ALL")},arraySelect:d=>{u.push("array("),I.select(d.select),u.push(")")},union:d=>{u.push("("),I.statement(d.left),u.push(") ",d.type.toUpperCase()," "),d.right.type==="union"||d.right.type==="union all"?I.union(d.right):(u.push("("),I.statement(d.right),u.push(")"))},selectionColumn:d=>{I.expr(d.expr),d.alias&&u.push(" AS ",k(d.alias)),u.push(" ")},set:d=>{u.push(k(d.column)," = "),I.expr(d.value),u.push(" ")},statement:d=>I.super().statement(d),tableRef:d=>{Z(d),d.alias&&u.push(" AS ",O(d.alias)),u.push(" ")},ternary:d=>{I.expr(d.value),u.push(" ",d.op," "),I.expr(d.lo),u.push(" AND "),I.expr(d.hi),u.push(" ")},transaction:d=>{u.push(d.type)},unary:d=>{switch(d.op){case"+":case"-":Ye(d),I.expr(d.operand);break;case"NOT":u.push(d.op),u.push(" "),I.expr(d.operand);break;default:I.expr(d.operand),u.push(" "),u.push(d.op)}},update:d=>{u.push("UPDATE "),I.tableRef(d.table),u.push(" SET "),w(d.sets,j=>I.set(j),!1),u.push(" "),d.from&&(u.push("FROM "),I.from(d.from),u.push(" ")),d.where&&(u.push("WHERE "),I.expr(d.where),u.push(" ")),d.returning&&(u.push(" RETURNING "),w(d.returning,j=>I.selectionColumn(j),!1),u.push(" "))}}));t.toSql={};const c=a.AstDefaultMapper.prototype;for(const I of Object.getOwnPropertyNames(c)){const d=c[I];I==="constructor"||I==="super"||typeof d!="function"||(t.toSql[I]=function(...j){try{return ut[I].apply(ut,j),u.join("").trim()}finally{u=[]}})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.literal=void 0;function a(r){if(r==null)return"NULL";if(Array.isArray(r)){var o=r.map(a);return"("+o.join(", ")+")"}var m=~r.indexOf("\\"),h=m?"E":"";return r=r.replace(/'/g,"''"),r=r.replace(/\\/g,"\\\\"),h+"'"+r+"'"}t.literal=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.locationOf=void 0;function a(r){const o=r._location;if(!o)throw new Error("This statement has not been parsed using location tracking (which has a small performance hit). ");return o}t.locationOf=a}]))})(ss);function Yf(s){return["SELECT","PRAGMA","EXPLAIN","ANALYZE"].some(t=>s.trim().toUpperCase().startsWith(t))}function L1(s,...e){const t=[];let n=s[0];if(s.filter(a=>a.trim().length>0).length===0)return{sql:e.join(" "),bind:[]};for(let a=0;a<e.length;a++){const r=e[a];typeof r=="symbol"?n+=r.description+s[a+1]:Array.isArray(r)?(n+=`(${Array.from({length:r.length}).fill("?").join(",")})`,t.push(...r)):(n+="?"+s[a+1],t.push(r))}return{sql:n,bind:t}}const M1=s=>{const e=s.match(/from\s+(\w+)/i);return e?e[1]:""},D1=(s,e)=>{const n=ss.parseFirst(s),a={};e.forEach(m=>{a[m.name.toLowerCase()]=m.table_column_name});const o=ss.astMapper(m=>({ref:h=>{const g=a[h.name];return g?{...h,name:g}:m.super().ref(h)}})).statement(n);return ss.toSql.statement(o)},F1=(s,e)=>{const t=e.filter(g=>g.type===wt.Formula),n={};e.forEach(g=>{n[g.name.toLowerCase()]=g.table_column_name});const a=ss.astMapper(g=>({expr:u=>{if(u&&u.type==="call"&&u.function.name==="props"){const k=u.args[0],O=n[k.name.toLowerCase()];return{type:"call",function:{type:"ref",name:"props"},args:[{type:"ref",name:O}]}}return g.super().expr(u)},ref:u=>{const k=n[u.name];return k?{...u,name:k}:g.super().ref(u)}})),r=t.find(g=>g.table_column_name===s);if(!r)return null;const o=ss.parseFirst(`select ${r.property.formula}`),m=a.statement(o);return ss.toSql.statement(m).replace("SELECT","").trim()};var P1={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/ace+json":{source:"iana",compressible:!0},"application/ace-groupcomm+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/aif+cbor":{source:"iana"},"application/aif+json":{source:"iana",compressible:!0},"application/alto-cdni+json":{source:"iana",compressible:!0},"application/alto-cdnifilter+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-propmap+json":{source:"iana",compressible:!0},"application/alto-propmapparams+json":{source:"iana",compressible:!0},"application/alto-tips+json":{source:"iana",compressible:!0},"application/alto-tipsparams+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/appinstaller":{compressible:!1,extensions:["appinstaller"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/appx":{compressible:!1,extensions:["appx"]},"application/appxbundle":{compressible:!1,extensions:["appxbundle"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/automationml-aml+xml":{source:"iana",compressible:!0,extensions:["aml"]},"application/automationml-amlx+zip":{source:"iana",compressible:!1,extensions:["amlx"]},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/bufr":{source:"iana"},"application/c2pa":{source:"iana"},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/cid-edhoc+cbor-seq":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/concise-problem-details+cbor":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cose-x509":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwl":{source:"iana",extensions:["cwl"]},"application/cwl+json":{source:"iana",compressible:!0},"application/cwl+yaml":{source:"iana"},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dpop+jwt":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"apache",compressible:!0,extensions:["ecma"]},"application/edhoc+cbor-seq":{source:"iana"},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.legacyesn+json":{source:"iana",compressible:!0},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdf":{source:"iana",extensions:["fdf"]},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+json":{source:"iana",compressible:!0},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gnap-binding-jws":{source:"iana"},"application/gnap-binding-jwsd":{source:"iana"},"application/gnap-binding-rotation-jws":{source:"iana"},"application/gnap-binding-rotation-jwsd":{source:"iana"},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/grib":{source:"iana"},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"iana",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"apache",charset:"UTF-8",compressible:!0,extensions:["js"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/jscontact+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jsonpath":{source:"iana"},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/linkset":{source:"iana"},"application/linkset+json":{source:"iana",compressible:!0},"application/load-control+xml":{source:"iana",compressible:!0},"application/logout+jwt":{source:"iana"},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4","mpg4","mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msix":{compressible:!1,extensions:["msix"]},"application/msixbundle":{compressible:!1,extensions:["msixbundle"]},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/ohttp-keys":{source:"iana"},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["sig","asc"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/private-token-issuer-directory":{source:"iana"},"application/private-token-request":{source:"iana"},"application/private-token-response":{source:"iana"},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.implied-document+xml":{source:"iana",compressible:!0},"application/prs.implied-executable":{source:"iana"},"application/prs.implied-object+json":{source:"iana",compressible:!0},"application/prs.implied-object+json-seq":{source:"iana"},"application/prs.implied-object+yaml":{source:"iana"},"application/prs.implied-structure":{source:"iana"},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.vcfbzip2":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0,extensions:["xsf"]},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"apache"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-checklist":{source:"iana"},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-signed-tal":{source:"iana"},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"apache"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana",extensions:["sql"]},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/st2110-41":{source:"iana"},"application/stix+json":{source:"iana",compressible:!0},"application/stratum":{source:"iana"},"application/swid+cbor":{source:"iana"},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tm+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vc":{source:"iana"},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.1ob":{source:"iana"},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3a+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ach+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc8+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.5gsa2x":{source:"iana"},"application/vnd.3gpp.5gsa2x-local-service-information":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.crs+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.current-location-discovery+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-msgstore-ctrl-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.pinapp-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.seal-group-doc+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-network-qos-management-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-ue-config-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-unicast-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-user-profile-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.v2x":{source:"iana"},"application/vnd.3gpp.vae-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acm.addressxfer+json":{source:"iana",compressible:!0},"application/vnd.acm.chatbot+json":{source:"iana",compressible:!0},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"apache",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"apache"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.parquet":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.apexlang":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"apache"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.belightsoft.lhzd+zip":{source:"iana",compressible:!1},"application/vnd.belightsoft.lhzl+zip":{source:"iana",compressible:!1},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.bzip3":{source:"iana"},"application/vnd.c3voc.schedule+xml":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.cncf.helm.chart.content.v1.tar+gzip":{source:"iana"},"application/vnd.cncf.helm.chart.provenance.v1.prov":{source:"iana"},"application/vnd.cncf.helm.config.v1+json":{source:"iana",compressible:!0},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datalog":{source:"iana"},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.eln+zip":{source:"iana",compressible:!1},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.erofs":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"apache",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.freelog.comic":{source:"iana"},"application/vnd.frogans.fnc":{source:"apache",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"apache",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.ga4gh.passport+jwt":{source:"iana"},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.genozip":{source:"iana"},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.gentoo.catmetadata+xml":{source:"iana",compressible:!0},"application/vnd.gentoo.ebuild":{source:"iana"},"application/vnd.gentoo.eclass":{source:"iana"},"application/vnd.gentoo.gpkg":{source:"iana"},"application/vnd.gentoo.manifest":{source:"iana"},"application/vnd.gentoo.pkgmetadata+xml":{source:"iana",compressible:!0},"application/vnd.gentoo.xpak":{source:"iana"},"application/vnd.geo+json":{source:"apache",compressible:!0},"application/vnd.geocube+xml":{source:"apache",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana",extensions:["ggs"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.gnu.taler.exchange+json":{source:"iana",compressible:!0},"application/vnd.gnu.taler.merchant+json":{source:"iana",compressible:!0},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"apache",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0,extensions:["xdcf"]},"application/vnd.gpxsee.map+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.hsl":{source:"iana"},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"apache"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"apache",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"apache"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.ipfs.ipns-record":{source:"iana"},"application/vnd.ipld.car":{source:"iana"},"application/vnd.ipld.dag-cbor":{source:"iana"},"application/vnd.ipld.dag-json":{source:"iana"},"application/vnd.ipld.raw":{source:"iana"},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.ldev.productlicensing":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.mdl":{source:"iana"},"application/vnd.mdl-mbsdf":{source:"iana"},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.medicalholodeck.recordxr":{source:"iana"},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mermaid":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.modl":{source:"iana"},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msgpack":{source:"iana"},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.nato.bindingdataobject+cbor":{source:"iana"},"application/vnd.nato.bindingdataobject+json":{source:"iana",compressible:!0},"application/vnd.nato.bindingdataobject+xml":{source:"iana",compressible:!0,extensions:["bdo"]},"application/vnd.nato.openxmlformats-package.iepd+zip":{source:"iana",compressible:!1},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"apache",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oai.workflows":{source:"iana"},"application/vnd.oai.workflows+json":{source:"iana",compressible:!0},"application/vnd.oai.workflows+yaml":{source:"iana"},"application/vnd.oasis.opendocument.base":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"apache",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-master-template":{source:"iana"},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"apache",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"apache",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.onvif.metadata":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.pt.mundusmundi":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0,extensions:["xhtm"]},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.relpipe":{source:"iana"},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.smintio.portals.archive":{source:"iana"},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sybyl.mol2":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml","uo"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.wasmflow.wafl":{source:"iana"},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordlift":{source:"iana"},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xecrets-encrypted":{source:"iana"},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vp":{source:"iana"},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xfdf":{source:"iana",extensions:["xfdf"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yaml":{source:"iana"},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+cbor":{source:"iana"},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yang-sid+json":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana",extensions:["adts","aac"]},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flac":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/matroska":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/midi-clip":{source:"iana"},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"apache"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{source:"iana",compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp","dib"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/dpx":{source:"iana",extensions:["dpx"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/j2c":{source:"iana"},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm","jpgm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxl":{source:"iana",extensions:["jxl"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif","btf"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"iana",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/bhttp":{source:"iana"},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/mls":{source:"iana"},"message/news":{source:"apache"},"message/ohttp-req":{source:"iana"},"message/ohttp-res":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"apache"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"apache"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/jt":{source:"iana",extensions:["jt"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/prc":{source:"iana",extensions:["prc"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/u3d":{source:"iana",extensions:["u3d"]},"model/vnd.bary":{source:"iana",extensions:["bary"]},"model/vnd.cld":{source:"iana",extensions:["cld"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana",extensions:["pyo","pyox"]},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usda":{source:"iana",extensions:["usda"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"apache"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/hl7v2":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["md","markdown"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/prs.texi":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.exchangeable":{source:"iana"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"apache"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.vcf":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vnd.zoo.kcl":{source:"iana"},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/wgsl":{source:"iana",extensions:["wgsl"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/evc":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/h266":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/matroska":{source:"iana"},"video/matroska-3d":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts","m2t","m2ts","mts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"apache"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */var zd=P1,j1=O1(zd),Tl=ov({__proto__:null,default:j1},[zd]);function Hs(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function Jf(s,e){for(var t="",n=0,a=-1,r=0,o,m=0;m<=s.length;++m){if(m<s.length)o=s.charCodeAt(m);else{if(o===47)break;o=47}if(o===47){if(!(a===m-1||r===1))if(a!==m-1&&r===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var h=t.lastIndexOf("/");if(h!==t.length-1){h===-1?(t="",n=0):(t=t.slice(0,h),n=t.length-1-t.lastIndexOf("/")),a=m,r=0;continue}}else if(t.length===2||t.length===1){t="",n=0,a=m,r=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+s.slice(a+1,m):t=s.slice(a+1,m),n=m-a-1;a=m,r=0}else o===46&&r!==-1?++r:r=-1}return t}function U1(s,e){var t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+n:t+s+n:n}var ni={resolve:function(){for(var e="",t=!1,n,a=arguments.length-1;a>=-1&&!t;a--){var r;a>=0?r=arguments[a]:(n===void 0&&(n=process.cwd()),r=n),Hs(r),r.length!==0&&(e=r+"/"+e,t=r.charCodeAt(0)===47)}return e=Jf(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Hs(e),e.length===0)return".";var t=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Jf(e,!t),e.length===0&&!t&&(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Hs(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];Hs(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":ni.normalize(e)},relative:function(e,t){if(Hs(e),Hs(t),e===t||(e=ni.resolve(e),t=ni.resolve(t),e===t))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var a=e.length,r=a-n,o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var m=t.length,h=m-o,g=r<h?r:h,u=-1,k=0;k<=g;++k){if(k===g){if(h>g){if(t.charCodeAt(o+k)===47)return t.slice(o+k+1);if(k===0)return t.slice(o+k)}else r>g&&(e.charCodeAt(n+k)===47?u=k:k===0&&(u=0));break}var O=e.charCodeAt(n+k),w=t.charCodeAt(o+k);if(O!==w)break;O===47&&(u=k)}var N="";for(k=n+u+1;k<=a;++k)(k===a||e.charCodeAt(k)===47)&&(N.length===0?N+="..":N+="/..");return N.length>0?N+t.slice(o+u):(o+=u,t.charCodeAt(o)===47&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Hs(e),e.length===0)return".";for(var t=e.charCodeAt(0),n=t===47,a=-1,r=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!r){a=o;break}}else r=!1;return a===-1?n?"/":".":n&&a===1?"//":e.slice(0,a)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Hs(e);var n=0,a=-1,r=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var m=t.length-1,h=-1;for(o=e.length-1;o>=0;--o){var g=e.charCodeAt(o);if(g===47){if(!r){n=o+1;break}}else h===-1&&(r=!1,h=o+1),m>=0&&(g===t.charCodeAt(m)?--m===-1&&(a=o):(m=-1,a=h))}return n===a?a=h:a===-1&&(a=e.length),e.slice(n,a)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!r){n=o+1;break}}else a===-1&&(r=!1,a=o+1);return a===-1?"":e.slice(n,a)}},extname:function(e){Hs(e);for(var t=-1,n=0,a=-1,r=!0,o=0,m=e.length-1;m>=0;--m){var h=e.charCodeAt(m);if(h===47){if(!r){n=m+1;break}continue}a===-1&&(r=!1,a=m+1),h===46?t===-1?t=m:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||a===-1||o===0||o===1&&t===a-1&&t===n+1?"":e.slice(t,a)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return U1("/",e)},parse:function(e){Hs(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var n=e.charCodeAt(0),a=n===47,r;a?(t.root="/",r=1):r=0;for(var o=-1,m=0,h=-1,g=!0,u=e.length-1,k=0;u>=r;--u){if(n=e.charCodeAt(u),n===47){if(!g){m=u+1;break}continue}h===-1&&(g=!1,h=u+1),n===46?o===-1?o=u:k!==1&&(k=1):o!==-1&&(k=-1)}return o===-1||h===-1||k===0||k===1&&o===h-1&&o===m+1?h!==-1&&(m===0&&a?t.base=t.name=e.slice(1,h):t.base=t.name=e.slice(m,h)):(m===0&&a?(t.name=e.slice(1,o),t.base=e.slice(1,h)):(t.name=e.slice(m,o),t.base=e.slice(m,h)),t.ext=e.slice(o,h)),m>0?t.dir=e.slice(0,m-1):a&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};ni.posix=ni;var B1=ni;const z1=s=>{var n;if(!s||typeof s!="string")return!1;const e=/^\s*([^;\s]*)(?:;|\s|$)/.exec(s),t=e&&((n=Tl[e[1].toLowerCase()])==null?void 0:n.extensions);return!t||!t.length?!1:t[0]},W1=s=>{if(!s||typeof s!="string")return!1;const e=B1.extname("x."+s).toLowerCase().slice(1);if(!e)return!1;let t=Wd[e]||!1;return t&&t.startsWith("application/")&&t.endsWith("mp4")&&(t=t.replace("application/","video/")),t},H1=(s,e)=>{const t=["nginx","apache",void 0,"iana"];Object.keys(Tl).forEach(n=>{const a=Tl[n],r=a.extensions;if(!(!r||!r.length)){s[n]=r;for(let o=0;o<r.length;o++){const m=r[o];if(e[m]){const h=t.indexOf(Tl[e[m]].source),g=t.indexOf(a.source);if(e[m]!=="application/octet-stream"&&(h>g||h===g&&e[m].slice(0,12)==="application/"))continue}e[m]=n}}})},V1=Object.create(null),Wd=Object.create(null);H1(V1,Wd);const fp=s=>{let e=W1(s);return e?(e=e.split("/")[0],e):!1},G1="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE1IDJINkM1LjQ2OTU3IDIgNC45NjA4NiAyLjIxMDcxIDQuNTg1NzkgMi41ODU3OUM0LjIxMDcxIDIuOTYwODYgNCAzLjQ2OTU3IDQgNFYyMEM0IDIwLjUzMDQgNC4yMTA3MSAyMS4wMzkxIDQuNTg1NzkgMjEuNDE0MkM0Ljk2MDg2IDIxLjc4OTMgNS40Njk1NyAyMiA2IDIySDE4QzE4LjUzMDQgMjIgMTkuMDM5MSAyMS43ODkzIDE5LjQxNDIgMjEuNDE0MkMxOS43ODkzIDIxLjAzOTEgMjAgMjAuNTMwNCAyMCAyMFY3TDE1IDJaIiBzdHJva2U9IiNBQUFBQUEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNCAyVjZDMTQgNi41MzA0MyAxNC4yMTA3IDcuMDM5MTQgMTQuNTg1OCA3LjQxNDIxQzE0Ljk2MDkgNy43ODkyOSAxNS40Njk2IDggMTYgOEgyMCIgc3Ryb2tlPSIjQUFBQUFBIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTAgMTFMMTUgMTRMMTAgMTdWMTFaIiBzdHJva2U9IiNBQUFBQUEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",Q1="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3LjUgMjJIMThDMTguNTMwNCAyMiAxOS4wMzkxIDIxLjc4OTMgMTkuNDE0MiAyMS40MTQyQzE5Ljc4OTMgMjEuMDM5MSAyMCAyMC41MzA0IDIwIDIwVjdMMTUgMkg2QzUuNDY5NTcgMiA0Ljk2MDg2IDIuMjEwNzEgNC41ODU3OSAyLjU4NTc5QzQuMjEwNzEgMi45NjA4NiA0IDMuNDY5NTcgNCA0VjciIHN0cm9rZT0iI0FBQUFBQSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTE0IDJWNkMxNCA2LjUzMDQzIDE0LjIxMDcgNy4wMzkxNCAxNC41ODU4IDcuNDE0MjFDMTQuOTYwOSA3Ljc4OTI5IDE1LjQ2OTYgOCAxNiA4SDIwIiBzdHJva2U9IiNBQUFBQUEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0yIDE5QzIgMTguNDY5NiAyLjIxMDcxIDE3Ljk2MDkgMi41ODU3OSAxNy41ODU4QzIuOTYwODYgMTcuMjEwNyAzLjQ2OTU3IDE3IDQgMTdDNC41MzA0MyAxNyA1LjAzOTE0IDE3LjIxMDcgNS40MTQyMSAxNy41ODU4QzUuNzg5MjkgMTcuOTYwOSA2IDE4LjQ2OTYgNiAxOVYyMEM2IDIwLjUzMDQgNS43ODkyOSAyMS4wMzkxIDUuNDE0MjEgMjEuNDE0MkM1LjAzOTE0IDIxLjc4OTMgNC41MzA0MyAyMiA0IDIyQzMuNDY5NTcgMjIgMi45NjA4NiAyMS43ODkzIDIuNTg1NzkgMjEuNDE0MkMyLjIxMDcxIDIxLjAzOTEgMiAyMC41MzA0IDIgMjBWMTZDMiAxNC40MDg3IDIuNjMyMTQgMTIuODgyNiAzLjc1NzM2IDExLjc1NzRDNC44ODI1OCAxMC42MzIxIDYuNDA4NyAxMCA4IDEwQzkuNTkxMyAxMCAxMS4xMTc0IDEwLjYzMjEgMTIuMjQyNiAxMS43NTc0QzEzLjM2NzkgMTIuODgyNiAxNCAxNC40MDg3IDE0IDE2VjIwQzE0IDIwLjUzMDQgMTMuNzg5MyAyMS4wMzkxIDEzLjQxNDIgMjEuNDE0MkMxMy4wMzkxIDIxLjc4OTMgMTIuNTMwNCAyMiAxMiAyMkMxMS40Njk2IDIyIDEwLjk2MDkgMjEuNzg5MyAxMC41ODU4IDIxLjQxNDJDMTAuMjEwNyAyMS4wMzkxIDEwIDIwLjUzMDQgMTAgMjBWMTlDMTAgMTguNDY5NiAxMC4yMTA3IDE3Ljk2MDkgMTAuNTg1OCAxNy41ODU4QzEwLjk2MDkgMTcuMjEwNyAxMS40Njk2IDE3IDEyIDE3QzEyLjUzMDQgMTcgMTMuMDM5MSAxNy4yMTA3IDEzLjQxNDIgMTcuNTg1OEMxMy43ODkzIDE3Ljk2MDkgMTQgMTguNDY5NiAxNCAxOSIgc3Ryb2tlPSIjQUFBQUFBIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",Y1="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE1IDJINkM1LjQ2OTU3IDIgNC45NjA4NiAyLjIxMDcxIDQuNTg1NzkgMi41ODU3OUM0LjIxMDcxIDIuOTYwODYgNCAzLjQ2OTU3IDQgNFYyMEM0IDIwLjUzMDQgNC4yMTA3MSAyMS4wMzkxIDQuNTg1NzkgMjEuNDE0MkM0Ljk2MDg2IDIxLjc4OTMgNS40Njk1NyAyMiA2IDIySDE4QzE4LjUzMDQgMjIgMTkuMDM5MSAyMS43ODkzIDE5LjQxNDIgMjEuNDE0MkMxOS43ODkzIDIxLjAzOTEgMjAgMjAuNTMwNCAyMCAyMFY3TDE1IDJaIiBzdHJva2U9IiNBQUFBQUEiIHN0cm9rZS1vcGFjaXR5PSIwLjgiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNCAyVjZDMTQgNi41MzA0MyAxNC4yMTA3IDcuMDM5MTQgMTQuNTg1OCA3LjQxNDIxQzE0Ljk2MDkgNy43ODkyOSAxNS40Njk2IDggMTYgOEgyMCIgc3Ryb2tlPSIjQUFBQUFBIiBzdHJva2Utb3BhY2l0eT0iMC44IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",Zf=s=>{const e=fp(s);if(e!=="image")switch(e){case"audio":return Q1;case"video":return G1;default:return Y1}return s};var Hd=(s=>(s.OPFS="opfs",s.NFS="nfs",s))(Hd||{});const dp=async s=>{let e;switch(s){case"nfs":e=await Sp("kv","localPath");break;case"opfs":default:e=await navigator.storage.getDirectory();break}return e},J1=async s=>(await Sp("kv","externalFolders")).find(n=>n.name===s),Kn=async(s,e)=>{const t=[...s];let n;if(e)n=e;else{const a=await Sp("kv","fs");n=await dp(a)}for(let a of t)n=await n.getDirectoryHandle(a,{create:!0});return n};class Ul{constructor(e){ye(this,"rootDirHandle");ye(this,"isSameEntry",async e=>{var t;return(t=this.rootDirHandle)==null?void 0:t.isSameEntry(e)});ye(this,"getDirHandle",async e=>Kn(e,this.rootDirHandle));ye(this,"walk",async e=>{const t=await Kn(e,this.rootDirHandle),n=[],a=await Kn([],this.rootDirHandle);for await(let r of t.values())if(r.kind==="file"){const o=await(this.rootDirHandle||a).resolve(r);n.push(o)}else if(r.kind==="directory"){const o=await this.walk([...e,r.name]);n.push(...o)}return n});ye(this,"copyFile",async(e,t)=>{const n=[...e];if(n.length===0)throw new Error("paths can't be empty");const a=await this.getFile(n),r=n.slice(0,-1);await t.addFile(r,a)});ye(this,"copyTo",async(e,t,n)=>{const a=await this.walk([]),r=await e.walk([]),o=new Set(r.map(h=>h.join("/"))),m=a.length;for(let h of a){const g=a.indexOf(h)+1;if(h[0]===".opfs-sahpool"){n==null||n({current:g,total:m,msg:"ignore .opfs-sahpool"});continue}if(h[h.length-1]==="db.sqlite3")if(t!=null&&t.ignoreSqlite){n==null||n({current:g,total:m,msg:"ignore db.sqlite3"});continue}else await this.copyFile(h,e),n==null||n({current:g,total:m,msg:`copying ${h.join("/")}`});if(o.has(h.join("/"))){n==null||n({current:g,total:m,msg:`file exists ${h.join("/")}`});continue}await this.copyFile(h,e),n==null||n({current:g,total:m,msg:`copying ${h.join("/")}`})}console.log("copy done")});ye(this,"getFileUrlByPath",(e,t)=>{const n=e.split("/").slice(1);return t&&(n[0]=t),"/"+n.join("/")});ye(this,"getFileByURL",async e=>{const t=new URL(e).pathname,n=t.split("/").slice(0,-1).filter(Boolean),a=await Kn(["spaces",...n],this.rootDirHandle),r=t.split("/").pop(),o=decodeURIComponent(r);return(await a.getFileHandle(o)).getFile()});ye(this,"getFileByPath",async e=>{const t=e.split("/");return await this.getFile(t)});ye(this,"listDir",async e=>{const t=await Kn(e,this.rootDirHandle),n=[];for await(let a of t.values())n.push(a);return n});ye(this,"updateOrCreateDocFile",async(e,t)=>{const n=[...e];if(n.length===0)throw new Error("paths can't be empty");const a=n.pop(),m=await(await(await Kn(n,this.rootDirHandle)).getFileHandle(a,{create:!0})).createWritable();await m.write(t),await m.close(),console.log("update doc file",a)});ye(this,"checkFileExists",async e=>{const t=[...e];if(t.length===0)throw new Error("paths can't be empty");const n=t.pop(),a=await Kn(t,this.rootDirHandle);try{return await a.getFileHandle(n),!0}catch{return!1}});ye(this,"getFile",async(e,t)=>{const n=[...e.filter(Boolean)];if(n.length===0)throw new Error("paths can't be empty");const a=n.pop();return await(await(await Kn(n,this.rootDirHandle)).getFileHandle(a,t)).getFile()});ye(this,"getFileText",async e=>await(await this.getFile(e)).text());ye(this,"getDocContent",async e=>await(await this.getFile(e)).text());ye(this,"addDir",async(e,t)=>{const n=[...e];if(n.length===0)throw new Error("paths can't be empty");await(await Kn(n,this.rootDirHandle)).getDirectoryHandle(t,{create:!0})});ye(this,"addFile",async(e,t,n)=>{const a=[...e];if(a.length===0)throw new Error("paths can't be empty");const r=await Kn(a,this.rootDirHandle);console.log("dirHandle",r);const o=z1(t.type),m=n?`${n}.${o}`:t.name,h=await r.getFileHandle(m,{create:!0}),g=await h.createWritable();await g.write(t),await g.close();const u=await Kn([],this.rootDirHandle),k=await u.resolve(h);return console.log("relativePath",{rootDirHandle:u,fileHandle:h,relativePath:k}),k});ye(this,"deleteEntry",async(e,t=!1)=>{const n=[...e];if(n.length===0)throw new Error("paths can't be empty");if(t)await(await Kn(n,this.rootDirHandle)).remove({recursive:!0});else{const a=n.pop();await(await Kn(n,this.rootDirHandle)).removeEntry(a)}});ye(this,"renameFile",async(e,t)=>{const n=[...e];if(n.length===0)throw new Error("paths can't be empty");const a=n.pop();await(await(await Kn(n,this.rootDirHandle)).getFileHandle(a,{create:!0})).move(t)});e&&(this.rootDirHandle=e)}}const Z1=async s=>{const e=await J1(s);if(!e)throw new Error("external folder not found");return new Ul(e)};function Vd(s,e){const t=ss.parseFirst(s),n=t.name.name,a=`tmp_${n}`,o=ss.parseFirst(`
  CREATE TABLE tb_123(
    ${e}
  );`).columns,m=t.columns;t.columns=[...m,...o],t.name.name=a;const h=ss.toSql.statement(t);let g=h;return g+=`
;INSERT INTO ${a} (${m.map(u=>u.name.name).join(",")}) SELECT ${m.map(u=>u.name.name).join(",")} FROM ${n};`,g+=`DROP TABLE ${n};`,g+=`ALTER TABLE ${a} RENAME TO ${n};`,{newTmpTableSql:h,sql:g}}let $l;const X1=new Uint8Array(16);function K1(){if(!$l&&($l=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $l(X1)}const On=[];for(let s=0;s<256;++s)On.push((s+256).toString(16).slice(1));function e0(s,e=0){return(On[s[e+0]]+On[s[e+1]]+On[s[e+2]]+On[s[e+3]]+"-"+On[s[e+4]]+On[s[e+5]]+"-"+On[s[e+6]]+On[s[e+7]]+"-"+On[s[e+8]]+On[s[e+9]]+"-"+On[s[e+10]]+On[s[e+11]]+On[s[e+12]]+On[s[e+13]]+On[s[e+14]]+On[s[e+15]]).toLowerCase()}const t0=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Xf={randomUUID:t0};function Bl(s,e,t){if(Xf.randomUUID&&!e&&!s)return Xf.randomUUID();s=s||{};const n=s.random||(s.rng||K1)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,e0(n)}class n0{constructor(e){ye(this,"dataSpace");ye(this,"tableManager");this.table=e,this.dataSpace=this.table.dataSpace,this.tableManager=e}async createIndex(e,t,n){const a=Pd(this.table.rawTableName,e),r=`
      SELECT name FROM sqlite_master 
      WHERE type='index' AND name='${a}'`;try{(await this.dataSpace.syncExec2(r)).length===0?(t&&t(),this.dataSpace.exec(`CREATE INDEX ${a} ON ${this.table.rawTableName} (${e})`),n&&n(),console.log(`Index ${a} created.`)):console.log(`Index ${a} already exists.`)}catch(o){console.error(o)}}}class Sn{constructor(e,t){ye(this,"column");ye(this,"context");this.column=e,this.context=t}get entityFieldInstance(){return ci(this.column)}get isTransformable(){return!1}static getDefaultFieldProperty(){return{}}text2RawData(e){return e??null}}ye(Sn,"type");class Gd extends Sn{get compareOperators(){return[lt.IsEmpty,lt.IsNotEmpty]}rawData2JSON(e){return e}getCellContent(e){return{kind:bn.Boolean,data:!!e,allowOverlay:!1}}cellData2RawData(e){return{rawData:e.data?1:null}}}ye(Gd,"type",wt.Checkbox);class Qd extends Sn{rawData2JSON(e){return e}get compareOperators(){return[lt.Equal,lt.NotEqual,lt.IsEmpty,lt.IsNotEmpty]}getCellContent(e,t){const{userMap:n}=t||{},a=(n==null?void 0:n[e||""])||{name:"unknown"};return{kind:bn.Custom,data:{image:a.avatar||"",kind:"user-profile-cell",initial:a.name,tint:"#233",name:a.name},copyData:e||"",allowOverlay:!1,readonly:!0}}cellData2RawData(e){return{rawData:e.data||null}}}ye(Qd,"type",wt.CreatedBy);class Yd extends Sn{rawData2JSON(e){return e}get compareOperators(){return[lt.Equal,lt.NotEqual,lt.GreaterThan,lt.GreaterThanOrEqual,lt.LessThan,lt.LessThanOrEqual,lt.IsEmpty,lt.IsNotEmpty]}getCellContent(e){const t=e?new Date(e.split(" ").join("T")+".000Z").toLocaleString():"";return{kind:bn.Text,data:t,displayData:t,allowOverlay:!1,readonly:!0}}cellData2RawData(e){return{rawData:e.data||null}}}ye(Yd,"type",wt.CreatedTime);class Jd extends Sn{rawData2JSON(e){return e}get compareOperators(){return[lt.Equal,lt.NotEqual,lt.GreaterThan,lt.GreaterThanOrEqual,lt.LessThan,lt.LessThanOrEqual,lt.IsEmpty,lt.IsNotEmpty]}getCellContent(e){return{kind:bn.Custom,data:{kind:"date-picker-cell",date:e?new Date(e):void 0,displayDate:e?new Date(e).toLocaleDateString():"",format:"date"},copyData:e??"",allowOverlay:!0}}cellData2RawData(e){var t;return{rawData:((t=e.data.date)==null?void 0:t.toISOString())||null}}}ye(Jd,"type",wt.Date);class Zd extends Sn{constructor(){super(...arguments);ye(this,"getProxyData",t=>{var n,a;if((n=this.column.property)!=null&&n.proxyUrl){const r=(a=this.column.property)==null?void 0:a.proxyUrl;return t.map(o=>{const m=o.trim();return fp(m)!=="image"?Zf(m):m.startsWith("http")?r+m:m})}return t.filter(Boolean).map(r=>fp(r)!=="image"?Zf(r):r)})}rawData2JSON(t){return t}get compareOperators(){return[lt.IsEmpty,lt.IsNotEmpty]}static getDefaultFieldProperty(){return{proxyUrl:"https://proxy.eidos.space/?url="}}getCellContent(t){var a;const n=(t==null?void 0:t.split(",").filter(Boolean))??[];return{kind:bn.Custom,data:{kind:"file-cell",data:n,displayData:this.getProxyData(n),allowAdd:!0,proxyUrl:(a=this.column.property)==null?void 0:a.proxyUrl},copyData:t,allowOverlay:!0}}cellData2RawData(t){var n;return{rawData:((n=t.data.data)==null?void 0:n.join(","))||null}}}ye(Zd,"type",wt.File);class Xd extends Sn{get compareOperators(){return[]}rawData2JSON(e){return e}getCellContent(e){return{...ci({...this.column,type:this.column.property.displayType??wt.Text}).getCellContent(e),allowOverlay:!0,readonly:!0}}cellData2RawData(e){return{rawData:e.data||null}}}ye(Xd,"type",wt.Formula);class Kd extends Sn{rawData2JSON(e){return e}get compareOperators(){return[lt.Equal,lt.NotEqual,lt.IsEmpty,lt.IsNotEmpty]}getCellContent(e,t){const{userMap:n}=t||{},a=(n==null?void 0:n[e||""])||{name:"unknown"};return{kind:bn.Custom,data:{image:a.avatar||"",kind:"user-profile-cell",initial:a.name,tint:"#233",name:a.name},copyData:e||"",allowOverlay:!1,readonly:!0}}cellData2RawData(e){return{rawData:e.data||null}}}ye(Kd,"type",wt.LastEditedBy);class e_ extends Sn{rawData2JSON(e){return e}get compareOperators(){return[lt.Equal,lt.NotEqual,lt.GreaterThan,lt.GreaterThanOrEqual,lt.LessThan,lt.LessThanOrEqual,lt.IsEmpty,lt.IsNotEmpty]}getCellContent(e){const t=e?new Date((e||"").split(" ").join("T")+".000Z").toLocaleString():"";return{kind:bn.Text,data:t,displayData:t,allowOverlay:!1,readonly:!0}}cellData2RawData(e){return{rawData:e.data||null}}}ye(e_,"type",wt.LastEditedTime);var zl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */zl.exports;(function(s,e){(function(){var t,n="4.17.21",a=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",m="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",g=500,u="__lodash_placeholder__",k=1,O=2,w=4,N=1,Z=2,ae=1,Ae=2,Pe=4,ze=8,pe=16,he=32,Le=64,Ye=128,ut=256,c=512,I=30,d="...",j=800,X=16,ve=1,Je=2,Be=3,Oe=1/0,ht=9007199254740991,yt=17976931348623157e292,ct=NaN,Bt=4294967295,Pn=Bt-1,Ts=Bt>>>1,Ss=[["ary",Ye],["bind",ae],["bindKey",Ae],["curry",ze],["curryRight",pe],["flip",c],["partial",he],["partialRight",Le],["rearg",ut]],jn="[object Arguments]",vn="[object Array]",er="[object AsyncFunction]",Vn="[object Boolean]",yn="[object Date]",hs="[object DOMException]",Zr="[object Error]",$r="[object Function]",Xr="[object GeneratorFunction]",kn="[object Map]",Kr="[object Number]",vo="[object Null]",ln="[object Object]",di="[object Promise]",uc="[object Proxy]",ea="[object RegExp]",Et="[object Set]",rn="[object String]",vr="[object Symbol]",Ht="[object Undefined]",ta="[object WeakMap]",Is="[object WeakSet]",tr="[object ArrayBuffer]",Gn="[object DataView]",_i="[object Float32Array]",hi="[object Float64Array]",Sa="[object Int8Array]",St="[object Int16Array]",bi="[object Int32Array]",E="[object Uint8Array]",xt="[object Uint8ClampedArray]",yi="[object Uint16Array]",gi="[object Uint32Array]",pc=/\b__p \+= '';/g,mc=/\b(__p \+=) '' \+/g,fc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ko=/&(?:amp|lt|gt|quot|#39);/g,Eo=/[&<>"']/g,dc=RegExp(ko.source),_c=RegExp(Eo.source),Ao=/<%-([\s\S]+?)%>/g,hc=/<%([\s\S]+?)%>/g,To=/<%=([\s\S]+?)%>/g,bc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yc=/^\w*$/,gc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wi=/[\\^$.*+?()[\]{}|]/g,wc=RegExp(wi.source),xi=/^\s+/,xc=/\s/,$c=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,vc=/\{\n\/\* \[wrapped with (.+)\] \*/,$i=/,? & /,kc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ec=/[()=,{}\[\]\/\s]/,Ac=/\\(\\)?/g,Tc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,So=/\w*$/,Sc=/^[-+]0x[0-9a-f]+$/i,Ic=/^0b[01]+$/i,qc=/^\[object .+?Constructor\]$/,Rc=/^0o[0-7]+$/i,Oc=/^(?:0|[1-9]\d*)$/,Io=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ia=/($^)/,Cc=/['\n\r\u2028\u2029\\]/g,na="\\ud800-\\udfff",Nc="\\u0300-\\u036f",Lc="\\ufe20-\\ufe2f",Mc="\\u20d0-\\u20ff",qa=Nc+Lc+Mc,qo="\\u2700-\\u27bf",kr="a-z\\xdf-\\xf6\\xf8-\\xff",Dc="\\xac\\xb1\\xd7\\xf7",Fc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pc="\\u2000-\\u206f",jc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ro="A-Z\\xc0-\\xd6\\xd8-\\xde",Oo="\\ufe0e\\ufe0f",Co=Dc+Fc+Pc+jc,vi="[']",Uc="["+na+"]",No="["+Co+"]",Ra="["+qa+"]",ki="\\d+",Oa="["+qo+"]",sa="["+kr+"]",Ei="[^"+na+Co+ki+qo+kr+Ro+"]",Ca="\\ud83c[\\udffb-\\udfff]",Lo="(?:"+Ra+"|"+Ca+")",Ai="[^"+na+"]",Er="(?:\\ud83c[\\udde6-\\uddff]){2}",Na="[\\ud800-\\udbff][\\udc00-\\udfff]",_="["+Ro+"]",f="\\u200d",y="(?:"+sa+"|"+Ei+")",b="(?:"+_+"|"+Ei+")",x="(?:"+vi+"(?:d|ll|m|re|s|t|ve))?",A="(?:"+vi+"(?:D|LL|M|RE|S|T|VE))?",J=Lo+"?",ie="["+Oo+"]?",$e="(?:"+f+"(?:"+[Ai,Er,Na].join("|")+")"+ie+J+")*",Ue="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ze="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ft=ie+J+$e,fe="(?:"+[Oa,Er,Na].join("|")+")"+ft,B="(?:"+[Ai+Ra+"?",Ra,Er,Na,Uc].join("|")+")",V=RegExp(vi,"g"),ne=RegExp(Ra,"g"),ce=RegExp(Ca+"(?="+Ca+")|"+B+ft,"g"),ee=RegExp([_+"?"+sa+"+"+x+"(?="+[No,_,"$"].join("|")+")",b+"+"+A+"(?="+[No,_+y,"$"].join("|")+")",_+"?"+y+"+"+x,_+"+"+A,Ze,Ue,ki,fe].join("|"),"g"),we=RegExp("["+f+na+qa+Oo+"]"),De=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,je=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ve=-1,We={};We[_i]=We[hi]=We[Sa]=We[St]=We[bi]=We[E]=We[xt]=We[yi]=We[gi]=!0,We[jn]=We[vn]=We[tr]=We[Vn]=We[Gn]=We[yn]=We[Zr]=We[$r]=We[kn]=We[Kr]=We[ln]=We[ea]=We[Et]=We[rn]=We[ta]=!1;var L={};L[jn]=L[vn]=L[tr]=L[Gn]=L[Vn]=L[yn]=L[_i]=L[hi]=L[Sa]=L[St]=L[bi]=L[kn]=L[Kr]=L[ln]=L[ea]=L[Et]=L[rn]=L[vr]=L[E]=L[xt]=L[yi]=L[gi]=!0,L[Zr]=L[$r]=L[ta]=!1;var oe={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Me={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},te=parseFloat,R=parseInt,F=typeof ma=="object"&&ma&&ma.Object===Object&&ma,re=typeof self=="object"&&self&&self.Object===Object&&self,K=F||re||Function("return this")(),Ne=e&&!e.nodeType&&e,et=Ne&&!0&&s&&!s.nodeType&&s,_t=et&&et.exports===Ne,At=_t&&F.process,ot=function(){try{var de=et&&et.require&&et.require("util").types;return de||At&&At.binding&&At.binding("util")}catch{}}(),bt=ot&&ot.isArrayBuffer,qt=ot&&ot.isDate,Lt=ot&&ot.isMap,Yt=ot&&ot.isRegExp,Jt=ot&&ot.isSet,hn=ot&&ot.isTypedArray;function Ft(de,Se,ke){switch(ke.length){case 0:return de.call(Se);case 1:return de.call(Se,ke[0]);case 2:return de.call(Se,ke[0],ke[1]);case 3:return de.call(Se,ke[0],ke[1],ke[2])}return de.apply(Se,ke)}function ge(de,Se,ke,it){for(var Rt=-1,Zt=de==null?0:de.length;++Rt<Zt;){var gn=de[Rt];Se(it,gn,ke(gn),de)}return it}function Te(de,Se){for(var ke=-1,it=de==null?0:de.length;++ke<it&&Se(de[ke],ke,de)!==!1;);return de}function Ce(de,Se){for(var ke=de==null?0:de.length;ke--&&Se(de[ke],ke,de)!==!1;);return de}function Ke(de,Se){for(var ke=-1,it=de==null?0:de.length;++ke<it;)if(!Se(de[ke],ke,de))return!1;return!0}function Ge(de,Se){for(var ke=-1,it=de==null?0:de.length,Rt=0,Zt=[];++ke<it;){var gn=de[ke];Se(gn,ke,de)&&(Zt[Rt++]=gn)}return Zt}function tt(de,Se){var ke=de==null?0:de.length;return!!ke&&cn(de,Se,0)>-1}function Fe(de,Se,ke){for(var it=-1,Rt=de==null?0:de.length;++it<Rt;)if(ke(Se,de[it]))return!0;return!1}function G(de,Se){for(var ke=-1,it=de==null?0:de.length,Rt=Array(it);++ke<it;)Rt[ke]=Se(de[ke],ke,de);return Rt}function Q(de,Se){for(var ke=-1,it=Se.length,Rt=de.length;++ke<it;)de[Rt+ke]=Se[ke];return de}function me(de,Se,ke,it){var Rt=-1,Zt=de==null?0:de.length;for(it&&Zt&&(ke=de[++Rt]);++Rt<Zt;)ke=Se(ke,de[Rt],Rt,de);return ke}function be(de,Se,ke,it){var Rt=de==null?0:de.length;for(it&&Rt&&(ke=de[--Rt]);Rt--;)ke=Se(ke,de[Rt],Rt,de);return ke}function Ee(de,Se){for(var ke=-1,it=de==null?0:de.length;++ke<it;)if(Se(de[ke],ke,de))return!0;return!1}var Xe=Ti("length");function pt(de){return de.split("")}function It(de){return de.match(kc)||[]}function jt(de,Se,ke){var it;return ke(de,function(Rt,Zt,gn){if(Se(Rt,Zt,gn))return it=Zt,!1}),it}function En(de,Se,ke,it){for(var Rt=de.length,Zt=ke+(it?1:-1);it?Zt--:++Zt<Rt;)if(Se(de[Zt],Zt,de))return Zt;return-1}function cn(de,Se,ke){return Se===Se?Hh(de,Se,ke):En(de,Mo,ke)}function Bc(de,Se,ke,it){for(var Rt=ke-1,Zt=de.length;++Rt<Zt;)if(it(de[Rt],Se))return Rt;return-1}function Mo(de){return de!==de}function is(de,Se){var ke=de==null?0:de.length;return ke?zc(de,Se)/ke:ct}function Ti(de){return function(Se){return Se==null?t:Se[de]}}function La(de){return function(Se){return de==null?t:de[Se]}}function Ma(de,Se,ke,it,Rt){return Rt(de,function(Zt,gn,sn){ke=it?(it=!1,Zt):Se(ke,Zt,gn,sn)}),ke}function Lh(de,Se){var ke=de.length;for(de.sort(Se);ke--;)de[ke]=de[ke].value;return de}function zc(de,Se){for(var ke,it=-1,Rt=de.length;++it<Rt;){var Zt=Se(de[it]);Zt!==t&&(ke=ke===t?Zt:ke+Zt)}return ke}function Wc(de,Se){for(var ke=-1,it=Array(de);++ke<de;)it[ke]=Se(ke);return it}function Mh(de,Se){return G(Se,function(ke){return[ke,de[ke]]})}function Qp(de){return de&&de.slice(0,Xp(de)+1).replace(xi,"")}function os(de){return function(Se){return de(Se)}}function Hc(de,Se){return G(Se,function(ke){return de[ke]})}function Si(de,Se){return de.has(Se)}function Yp(de,Se){for(var ke=-1,it=de.length;++ke<it&&cn(Se,de[ke],0)>-1;);return ke}function Jp(de,Se){for(var ke=de.length;ke--&&cn(Se,de[ke],0)>-1;);return ke}function Dh(de,Se){for(var ke=de.length,it=0;ke--;)de[ke]===Se&&++it;return it}var Fh=La(oe),Ph=La(le);function jh(de){return"\\"+z[de]}function Uh(de,Se){return de==null?t:de[Se]}function Da(de){return we.test(de)}function Bh(de){return De.test(de)}function zh(de){for(var Se,ke=[];!(Se=de.next()).done;)ke.push(Se.value);return ke}function Vc(de){var Se=-1,ke=Array(de.size);return de.forEach(function(it,Rt){ke[++Se]=[Rt,it]}),ke}function Zp(de,Se){return function(ke){return de(Se(ke))}}function Ar(de,Se){for(var ke=-1,it=de.length,Rt=0,Zt=[];++ke<it;){var gn=de[ke];(gn===Se||gn===u)&&(de[ke]=u,Zt[Rt++]=ke)}return Zt}function Do(de){var Se=-1,ke=Array(de.size);return de.forEach(function(it){ke[++Se]=it}),ke}function Wh(de){var Se=-1,ke=Array(de.size);return de.forEach(function(it){ke[++Se]=[it,it]}),ke}function Hh(de,Se,ke){for(var it=ke-1,Rt=de.length;++it<Rt;)if(de[it]===Se)return it;return-1}function Vh(de,Se,ke){for(var it=ke+1;it--;)if(de[it]===Se)return it;return it}function Fa(de){return Da(de)?Qh(de):Xe(de)}function qs(de){return Da(de)?Yh(de):pt(de)}function Xp(de){for(var Se=de.length;Se--&&xc.test(de.charAt(Se)););return Se}var Gh=La(Me);function Qh(de){for(var Se=ce.lastIndex=0;ce.test(de);)++Se;return Se}function Yh(de){return de.match(ce)||[]}function Jh(de){return de.match(ee)||[]}var Zh=function de(Se){Se=Se==null?K:Pa.defaults(K.Object(),Se,Pa.pick(K,je));var ke=Se.Array,it=Se.Date,Rt=Se.Error,Zt=Se.Function,gn=Se.Math,sn=Se.Object,Gc=Se.RegExp,Xh=Se.String,bs=Se.TypeError,Fo=ke.prototype,Kh=Zt.prototype,ja=sn.prototype,Po=Se["__core-js_shared__"],jo=Kh.toString,Kt=ja.hasOwnProperty,eb=0,Kp=function(){var i=/[^.]+$/.exec(Po&&Po.keys&&Po.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),Uo=ja.toString,tb=jo.call(sn),nb=K._,sb=Gc("^"+jo.call(Kt).replace(wi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bo=_t?Se.Buffer:t,Tr=Se.Symbol,zo=Se.Uint8Array,em=Bo?Bo.allocUnsafe:t,Wo=Zp(sn.getPrototypeOf,sn),tm=sn.create,nm=ja.propertyIsEnumerable,Ho=Fo.splice,sm=Tr?Tr.isConcatSpreadable:t,Ii=Tr?Tr.iterator:t,ra=Tr?Tr.toStringTag:t,Vo=function(){try{var i=ca(sn,"defineProperty");return i({},"",{}),i}catch{}}(),rb=Se.clearTimeout!==K.clearTimeout&&Se.clearTimeout,ab=it&&it.now!==K.Date.now&&it.now,ib=Se.setTimeout!==K.setTimeout&&Se.setTimeout,Go=gn.ceil,Qo=gn.floor,Qc=sn.getOwnPropertySymbols,ob=Bo?Bo.isBuffer:t,rm=Se.isFinite,lb=Fo.join,cb=Zp(sn.keys,sn),wn=gn.max,Cn=gn.min,ub=it.now,pb=Se.parseInt,am=gn.random,mb=Fo.reverse,Yc=ca(Se,"DataView"),qi=ca(Se,"Map"),Jc=ca(Se,"Promise"),Ua=ca(Se,"Set"),Ri=ca(Se,"WeakMap"),Oi=ca(sn,"create"),Yo=Ri&&new Ri,Ba={},fb=ua(Yc),db=ua(qi),_b=ua(Jc),hb=ua(Ua),bb=ua(Ri),Jo=Tr?Tr.prototype:t,Ci=Jo?Jo.valueOf:t,im=Jo?Jo.toString:t;function C(i){if(un(i)&&!Ot(i)&&!(i instanceof zt)){if(i instanceof ys)return i;if(Kt.call(i,"__wrapped__"))return lf(i)}return new ys(i)}var za=function(){function i(){}return function(l){if(!an(l))return{};if(tm)return tm(l);i.prototype=l;var p=new i;return i.prototype=t,p}}();function Zo(){}function ys(i,l){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=t}C.templateSettings={escape:Ao,evaluate:hc,interpolate:To,variable:"",imports:{_:C}},C.prototype=Zo.prototype,C.prototype.constructor=C,ys.prototype=za(Zo.prototype),ys.prototype.constructor=ys;function zt(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bt,this.__views__=[]}function yb(){var i=new zt(this.__wrapped__);return i.__actions__=Qn(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Qn(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Qn(this.__views__),i}function gb(){if(this.__filtered__){var i=new zt(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function wb(){var i=this.__wrapped__.value(),l=this.__dir__,p=Ot(i),$=l<0,q=p?i.length:0,U=Oy(0,q,this.__views__),se=U.start,ue=U.end,_e=ue-se,Ie=$?ue:se-1,qe=this.__iteratees__,He=qe.length,nt=0,mt=Cn(_e,this.__takeCount__);if(!p||!$&&q==_e&&mt==_e)return qm(i,this.__actions__);var $t=[];e:for(;_e--&&nt<mt;){Ie+=l;for(var Mt=-1,vt=i[Ie];++Mt<He;){var Ut=qe[Mt],Wt=Ut.iteratee,us=Ut.type,zn=Wt(vt);if(us==Je)vt=zn;else if(!zn){if(us==ve)continue e;break e}}$t[nt++]=vt}return $t}zt.prototype=za(Zo.prototype),zt.prototype.constructor=zt;function aa(i){var l=-1,p=i==null?0:i.length;for(this.clear();++l<p;){var $=i[l];this.set($[0],$[1])}}function xb(){this.__data__=Oi?Oi(null):{},this.size=0}function $b(i){var l=this.has(i)&&delete this.__data__[i];return this.size-=l?1:0,l}function vb(i){var l=this.__data__;if(Oi){var p=l[i];return p===h?t:p}return Kt.call(l,i)?l[i]:t}function kb(i){var l=this.__data__;return Oi?l[i]!==t:Kt.call(l,i)}function Eb(i,l){var p=this.__data__;return this.size+=this.has(i)?0:1,p[i]=Oi&&l===t?h:l,this}aa.prototype.clear=xb,aa.prototype.delete=$b,aa.prototype.get=vb,aa.prototype.has=kb,aa.prototype.set=Eb;function nr(i){var l=-1,p=i==null?0:i.length;for(this.clear();++l<p;){var $=i[l];this.set($[0],$[1])}}function Ab(){this.__data__=[],this.size=0}function Tb(i){var l=this.__data__,p=Xo(l,i);if(p<0)return!1;var $=l.length-1;return p==$?l.pop():Ho.call(l,p,1),--this.size,!0}function Sb(i){var l=this.__data__,p=Xo(l,i);return p<0?t:l[p][1]}function Ib(i){return Xo(this.__data__,i)>-1}function qb(i,l){var p=this.__data__,$=Xo(p,i);return $<0?(++this.size,p.push([i,l])):p[$][1]=l,this}nr.prototype.clear=Ab,nr.prototype.delete=Tb,nr.prototype.get=Sb,nr.prototype.has=Ib,nr.prototype.set=qb;function sr(i){var l=-1,p=i==null?0:i.length;for(this.clear();++l<p;){var $=i[l];this.set($[0],$[1])}}function Rb(){this.size=0,this.__data__={hash:new aa,map:new(qi||nr),string:new aa}}function Ob(i){var l=ul(this,i).delete(i);return this.size-=l?1:0,l}function Cb(i){return ul(this,i).get(i)}function Nb(i){return ul(this,i).has(i)}function Lb(i,l){var p=ul(this,i),$=p.size;return p.set(i,l),this.size+=p.size==$?0:1,this}sr.prototype.clear=Rb,sr.prototype.delete=Ob,sr.prototype.get=Cb,sr.prototype.has=Nb,sr.prototype.set=Lb;function ia(i){var l=-1,p=i==null?0:i.length;for(this.__data__=new sr;++l<p;)this.add(i[l])}function Mb(i){return this.__data__.set(i,h),this}function Db(i){return this.__data__.has(i)}ia.prototype.add=ia.prototype.push=Mb,ia.prototype.has=Db;function Rs(i){var l=this.__data__=new nr(i);this.size=l.size}function Fb(){this.__data__=new nr,this.size=0}function Pb(i){var l=this.__data__,p=l.delete(i);return this.size=l.size,p}function jb(i){return this.__data__.get(i)}function Ub(i){return this.__data__.has(i)}function Bb(i,l){var p=this.__data__;if(p instanceof nr){var $=p.__data__;if(!qi||$.length<a-1)return $.push([i,l]),this.size=++p.size,this;p=this.__data__=new sr($)}return p.set(i,l),this.size=p.size,this}Rs.prototype.clear=Fb,Rs.prototype.delete=Pb,Rs.prototype.get=jb,Rs.prototype.has=Ub,Rs.prototype.set=Bb;function om(i,l){var p=Ot(i),$=!p&&pa(i),q=!p&&!$&&Or(i),U=!p&&!$&&!q&&Ga(i),se=p||$||q||U,ue=se?Wc(i.length,Xh):[],_e=ue.length;for(var Ie in i)(l||Kt.call(i,Ie))&&!(se&&(Ie=="length"||q&&(Ie=="offset"||Ie=="parent")||U&&(Ie=="buffer"||Ie=="byteLength"||Ie=="byteOffset")||or(Ie,_e)))&&ue.push(Ie);return ue}function lm(i){var l=i.length;return l?i[ou(0,l-1)]:t}function zb(i,l){return pl(Qn(i),oa(l,0,i.length))}function Wb(i){return pl(Qn(i))}function Zc(i,l,p){(p!==t&&!Os(i[l],p)||p===t&&!(l in i))&&rr(i,l,p)}function Ni(i,l,p){var $=i[l];(!(Kt.call(i,l)&&Os($,p))||p===t&&!(l in i))&&rr(i,l,p)}function Xo(i,l){for(var p=i.length;p--;)if(Os(i[p][0],l))return p;return-1}function Hb(i,l,p,$){return Sr(i,function(q,U,se){l($,q,p(q),se)}),$}function cm(i,l){return i&&zs(l,An(l),i)}function Vb(i,l){return i&&zs(l,Jn(l),i)}function rr(i,l,p){l=="__proto__"&&Vo?Vo(i,l,{configurable:!0,enumerable:!0,value:p,writable:!0}):i[l]=p}function Xc(i,l){for(var p=-1,$=l.length,q=ke($),U=i==null;++p<$;)q[p]=U?t:Ou(i,l[p]);return q}function oa(i,l,p){return i===i&&(p!==t&&(i=i<=p?i:p),l!==t&&(i=i>=l?i:l)),i}function gs(i,l,p,$,q,U){var se,ue=l&k,_e=l&O,Ie=l&w;if(p&&(se=q?p(i,$,q,U):p(i)),se!==t)return se;if(!an(i))return i;var qe=Ot(i);if(qe){if(se=Ny(i),!ue)return Qn(i,se)}else{var He=Nn(i),nt=He==$r||He==Xr;if(Or(i))return Cm(i,ue);if(He==ln||He==jn||nt&&!q){if(se=_e||nt?{}:Xm(i),!ue)return _e?vy(i,Vb(se,i)):$y(i,cm(se,i))}else{if(!L[He])return q?i:{};se=Ly(i,He,ue)}}U||(U=new Rs);var mt=U.get(i);if(mt)return mt;U.set(i,se),Sf(i)?i.forEach(function(vt){se.add(gs(vt,l,p,vt,i,U))}):Af(i)&&i.forEach(function(vt,Ut){se.set(Ut,gs(vt,l,p,Ut,i,U))});var $t=Ie?_e?yu:bu:_e?Jn:An,Mt=qe?t:$t(i);return Te(Mt||i,function(vt,Ut){Mt&&(Ut=vt,vt=i[Ut]),Ni(se,Ut,gs(vt,l,p,Ut,i,U))}),se}function Gb(i){var l=An(i);return function(p){return um(p,i,l)}}function um(i,l,p){var $=p.length;if(i==null)return!$;for(i=sn(i);$--;){var q=p[$],U=l[q],se=i[q];if(se===t&&!(q in i)||!U(se))return!1}return!0}function pm(i,l,p){if(typeof i!="function")throw new bs(o);return Ui(function(){i.apply(t,p)},l)}function Li(i,l,p,$){var q=-1,U=tt,se=!0,ue=i.length,_e=[],Ie=l.length;if(!ue)return _e;p&&(l=G(l,os(p))),$?(U=Fe,se=!1):l.length>=a&&(U=Si,se=!1,l=new ia(l));e:for(;++q<ue;){var qe=i[q],He=p==null?qe:p(qe);if(qe=$||qe!==0?qe:0,se&&He===He){for(var nt=Ie;nt--;)if(l[nt]===He)continue e;_e.push(qe)}else U(l,He,$)||_e.push(qe)}return _e}var Sr=Fm(Bs),mm=Fm(eu,!0);function Qb(i,l){var p=!0;return Sr(i,function($,q,U){return p=!!l($,q,U),p}),p}function Ko(i,l,p){for(var $=-1,q=i.length;++$<q;){var U=i[$],se=l(U);if(se!=null&&(ue===t?se===se&&!cs(se):p(se,ue)))var ue=se,_e=U}return _e}function Yb(i,l,p,$){var q=i.length;for(p=Nt(p),p<0&&(p=-p>q?0:q+p),$=$===t||$>q?q:Nt($),$<0&&($+=q),$=p>$?0:qf($);p<$;)i[p++]=l;return i}function fm(i,l){var p=[];return Sr(i,function($,q,U){l($,q,U)&&p.push($)}),p}function Rn(i,l,p,$,q){var U=-1,se=i.length;for(p||(p=Dy),q||(q=[]);++U<se;){var ue=i[U];l>0&&p(ue)?l>1?Rn(ue,l-1,p,$,q):Q(q,ue):$||(q[q.length]=ue)}return q}var Kc=Pm(),dm=Pm(!0);function Bs(i,l){return i&&Kc(i,l,An)}function eu(i,l){return i&&dm(i,l,An)}function el(i,l){return Ge(l,function(p){return lr(i[p])})}function la(i,l){l=qr(l,i);for(var p=0,$=l.length;i!=null&&p<$;)i=i[Ws(l[p++])];return p&&p==$?i:t}function _m(i,l,p){var $=l(i);return Ot(i)?$:Q($,p(i))}function Un(i){return i==null?i===t?Ht:vo:ra&&ra in sn(i)?Ry(i):Wy(i)}function tu(i,l){return i>l}function Jb(i,l){return i!=null&&Kt.call(i,l)}function Zb(i,l){return i!=null&&l in sn(i)}function Xb(i,l,p){return i>=Cn(l,p)&&i<wn(l,p)}function nu(i,l,p){for(var $=p?Fe:tt,q=i[0].length,U=i.length,se=U,ue=ke(U),_e=1/0,Ie=[];se--;){var qe=i[se];se&&l&&(qe=G(qe,os(l))),_e=Cn(qe.length,_e),ue[se]=!p&&(l||q>=120&&qe.length>=120)?new ia(se&&qe):t}qe=i[0];var He=-1,nt=ue[0];e:for(;++He<q&&Ie.length<_e;){var mt=qe[He],$t=l?l(mt):mt;if(mt=p||mt!==0?mt:0,!(nt?Si(nt,$t):$(Ie,$t,p))){for(se=U;--se;){var Mt=ue[se];if(!(Mt?Si(Mt,$t):$(i[se],$t,p)))continue e}nt&&nt.push($t),Ie.push(mt)}}return Ie}function Kb(i,l,p,$){return Bs(i,function(q,U,se){l($,p(q),U,se)}),$}function Mi(i,l,p){l=qr(l,i),i=nf(i,l);var $=i==null?i:i[Ws(xs(l))];return $==null?t:Ft($,i,p)}function hm(i){return un(i)&&Un(i)==jn}function ey(i){return un(i)&&Un(i)==tr}function ty(i){return un(i)&&Un(i)==yn}function Di(i,l,p,$,q){return i===l?!0:i==null||l==null||!un(i)&&!un(l)?i!==i&&l!==l:ny(i,l,p,$,Di,q)}function ny(i,l,p,$,q,U){var se=Ot(i),ue=Ot(l),_e=se?vn:Nn(i),Ie=ue?vn:Nn(l);_e=_e==jn?ln:_e,Ie=Ie==jn?ln:Ie;var qe=_e==ln,He=Ie==ln,nt=_e==Ie;if(nt&&Or(i)){if(!Or(l))return!1;se=!0,qe=!1}if(nt&&!qe)return U||(U=new Rs),se||Ga(i)?Ym(i,l,p,$,q,U):Iy(i,l,_e,p,$,q,U);if(!(p&N)){var mt=qe&&Kt.call(i,"__wrapped__"),$t=He&&Kt.call(l,"__wrapped__");if(mt||$t){var Mt=mt?i.value():i,vt=$t?l.value():l;return U||(U=new Rs),q(Mt,vt,p,$,U)}}return nt?(U||(U=new Rs),qy(i,l,p,$,q,U)):!1}function sy(i){return un(i)&&Nn(i)==kn}function su(i,l,p,$){var q=p.length,U=q,se=!$;if(i==null)return!U;for(i=sn(i);q--;){var ue=p[q];if(se&&ue[2]?ue[1]!==i[ue[0]]:!(ue[0]in i))return!1}for(;++q<U;){ue=p[q];var _e=ue[0],Ie=i[_e],qe=ue[1];if(se&&ue[2]){if(Ie===t&&!(_e in i))return!1}else{var He=new Rs;if($)var nt=$(Ie,qe,_e,i,l,He);if(!(nt===t?Di(qe,Ie,N|Z,$,He):nt))return!1}}return!0}function bm(i){if(!an(i)||Py(i))return!1;var l=lr(i)?sb:qc;return l.test(ua(i))}function ry(i){return un(i)&&Un(i)==ea}function ay(i){return un(i)&&Nn(i)==Et}function iy(i){return un(i)&&bl(i.length)&&!!We[Un(i)]}function ym(i){return typeof i=="function"?i:i==null?Zn:typeof i=="object"?Ot(i)?xm(i[0],i[1]):wm(i):Uf(i)}function ru(i){if(!ji(i))return cb(i);var l=[];for(var p in sn(i))Kt.call(i,p)&&p!="constructor"&&l.push(p);return l}function oy(i){if(!an(i))return zy(i);var l=ji(i),p=[];for(var $ in i)$=="constructor"&&(l||!Kt.call(i,$))||p.push($);return p}function au(i,l){return i<l}function gm(i,l){var p=-1,$=Yn(i)?ke(i.length):[];return Sr(i,function(q,U,se){$[++p]=l(q,U,se)}),$}function wm(i){var l=wu(i);return l.length==1&&l[0][2]?ef(l[0][0],l[0][1]):function(p){return p===i||su(p,i,l)}}function xm(i,l){return $u(i)&&Km(l)?ef(Ws(i),l):function(p){var $=Ou(p,i);return $===t&&$===l?Cu(p,i):Di(l,$,N|Z)}}function tl(i,l,p,$,q){i!==l&&Kc(l,function(U,se){if(q||(q=new Rs),an(U))ly(i,l,se,p,tl,$,q);else{var ue=$?$(ku(i,se),U,se+"",i,l,q):t;ue===t&&(ue=U),Zc(i,se,ue)}},Jn)}function ly(i,l,p,$,q,U,se){var ue=ku(i,p),_e=ku(l,p),Ie=se.get(_e);if(Ie){Zc(i,p,Ie);return}var qe=U?U(ue,_e,p+"",i,l,se):t,He=qe===t;if(He){var nt=Ot(_e),mt=!nt&&Or(_e),$t=!nt&&!mt&&Ga(_e);qe=_e,nt||mt||$t?Ot(ue)?qe=ue:fn(ue)?qe=Qn(ue):mt?(He=!1,qe=Cm(_e,!0)):$t?(He=!1,qe=Nm(_e,!0)):qe=[]:Bi(_e)||pa(_e)?(qe=ue,pa(ue)?qe=Rf(ue):(!an(ue)||lr(ue))&&(qe=Xm(_e))):He=!1}He&&(se.set(_e,qe),q(qe,_e,$,U,se),se.delete(_e)),Zc(i,p,qe)}function $m(i,l){var p=i.length;if(p)return l+=l<0?p:0,or(l,p)?i[l]:t}function vm(i,l,p){l.length?l=G(l,function(U){return Ot(U)?function(se){return la(se,U.length===1?U[0]:U)}:U}):l=[Zn];var $=-1;l=G(l,os(gt()));var q=gm(i,function(U,se,ue){var _e=G(l,function(Ie){return Ie(U)});return{criteria:_e,index:++$,value:U}});return Lh(q,function(U,se){return xy(U,se,p)})}function cy(i,l){return km(i,l,function(p,$){return Cu(i,$)})}function km(i,l,p){for(var $=-1,q=l.length,U={};++$<q;){var se=l[$],ue=la(i,se);p(ue,se)&&Fi(U,qr(se,i),ue)}return U}function uy(i){return function(l){return la(l,i)}}function iu(i,l,p,$){var q=$?Bc:cn,U=-1,se=l.length,ue=i;for(i===l&&(l=Qn(l)),p&&(ue=G(i,os(p)));++U<se;)for(var _e=0,Ie=l[U],qe=p?p(Ie):Ie;(_e=q(ue,qe,_e,$))>-1;)ue!==i&&Ho.call(ue,_e,1),Ho.call(i,_e,1);return i}function Em(i,l){for(var p=i?l.length:0,$=p-1;p--;){var q=l[p];if(p==$||q!==U){var U=q;or(q)?Ho.call(i,q,1):uu(i,q)}}return i}function ou(i,l){return i+Qo(am()*(l-i+1))}function py(i,l,p,$){for(var q=-1,U=wn(Go((l-i)/(p||1)),0),se=ke(U);U--;)se[$?U:++q]=i,i+=p;return se}function lu(i,l){var p="";if(!i||l<1||l>ht)return p;do l%2&&(p+=i),l=Qo(l/2),l&&(i+=i);while(l);return p}function Pt(i,l){return Eu(tf(i,l,Zn),i+"")}function my(i){return lm(Qa(i))}function fy(i,l){var p=Qa(i);return pl(p,oa(l,0,p.length))}function Fi(i,l,p,$){if(!an(i))return i;l=qr(l,i);for(var q=-1,U=l.length,se=U-1,ue=i;ue!=null&&++q<U;){var _e=Ws(l[q]),Ie=p;if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return i;if(q!=se){var qe=ue[_e];Ie=$?$(qe,_e,ue):t,Ie===t&&(Ie=an(qe)?qe:or(l[q+1])?[]:{})}Ni(ue,_e,Ie),ue=ue[_e]}return i}var Am=Yo?function(i,l){return Yo.set(i,l),i}:Zn,dy=Vo?function(i,l){return Vo(i,"toString",{configurable:!0,enumerable:!1,value:Lu(l),writable:!0})}:Zn;function _y(i){return pl(Qa(i))}function ws(i,l,p){var $=-1,q=i.length;l<0&&(l=-l>q?0:q+l),p=p>q?q:p,p<0&&(p+=q),q=l>p?0:p-l>>>0,l>>>=0;for(var U=ke(q);++$<q;)U[$]=i[$+l];return U}function hy(i,l){var p;return Sr(i,function($,q,U){return p=l($,q,U),!p}),!!p}function nl(i,l,p){var $=0,q=i==null?$:i.length;if(typeof l=="number"&&l===l&&q<=Ts){for(;$<q;){var U=$+q>>>1,se=i[U];se!==null&&!cs(se)&&(p?se<=l:se<l)?$=U+1:q=U}return q}return cu(i,l,Zn,p)}function cu(i,l,p,$){var q=0,U=i==null?0:i.length;if(U===0)return 0;l=p(l);for(var se=l!==l,ue=l===null,_e=cs(l),Ie=l===t;q<U;){var qe=Qo((q+U)/2),He=p(i[qe]),nt=He!==t,mt=He===null,$t=He===He,Mt=cs(He);if(se)var vt=$||$t;else Ie?vt=$t&&($||nt):ue?vt=$t&&nt&&($||!mt):_e?vt=$t&&nt&&!mt&&($||!Mt):mt||Mt?vt=!1:vt=$?He<=l:He<l;vt?q=qe+1:U=qe}return Cn(U,Pn)}function Tm(i,l){for(var p=-1,$=i.length,q=0,U=[];++p<$;){var se=i[p],ue=l?l(se):se;if(!p||!Os(ue,_e)){var _e=ue;U[q++]=se===0?0:se}}return U}function Sm(i){return typeof i=="number"?i:cs(i)?ct:+i}function ls(i){if(typeof i=="string")return i;if(Ot(i))return G(i,ls)+"";if(cs(i))return im?im.call(i):"";var l=i+"";return l=="0"&&1/i==-Oe?"-0":l}function Ir(i,l,p){var $=-1,q=tt,U=i.length,se=!0,ue=[],_e=ue;if(p)se=!1,q=Fe;else if(U>=a){var Ie=l?null:Ty(i);if(Ie)return Do(Ie);se=!1,q=Si,_e=new ia}else _e=l?[]:ue;e:for(;++$<U;){var qe=i[$],He=l?l(qe):qe;if(qe=p||qe!==0?qe:0,se&&He===He){for(var nt=_e.length;nt--;)if(_e[nt]===He)continue e;l&&_e.push(He),ue.push(qe)}else q(_e,He,p)||(_e!==ue&&_e.push(He),ue.push(qe))}return ue}function uu(i,l){return l=qr(l,i),i=nf(i,l),i==null||delete i[Ws(xs(l))]}function Im(i,l,p,$){return Fi(i,l,p(la(i,l)),$)}function sl(i,l,p,$){for(var q=i.length,U=$?q:-1;($?U--:++U<q)&&l(i[U],U,i););return p?ws(i,$?0:U,$?U+1:q):ws(i,$?U+1:0,$?q:U)}function qm(i,l){var p=i;return p instanceof zt&&(p=p.value()),me(l,function($,q){return q.func.apply(q.thisArg,Q([$],q.args))},p)}function pu(i,l,p){var $=i.length;if($<2)return $?Ir(i[0]):[];for(var q=-1,U=ke($);++q<$;)for(var se=i[q],ue=-1;++ue<$;)ue!=q&&(U[q]=Li(U[q]||se,i[ue],l,p));return Ir(Rn(U,1),l,p)}function Rm(i,l,p){for(var $=-1,q=i.length,U=l.length,se={};++$<q;){var ue=$<U?l[$]:t;p(se,i[$],ue)}return se}function mu(i){return fn(i)?i:[]}function fu(i){return typeof i=="function"?i:Zn}function qr(i,l){return Ot(i)?i:$u(i,l)?[i]:of(Xt(i))}var by=Pt;function Rr(i,l,p){var $=i.length;return p=p===t?$:p,!l&&p>=$?i:ws(i,l,p)}var Om=rb||function(i){return K.clearTimeout(i)};function Cm(i,l){if(l)return i.slice();var p=i.length,$=em?em(p):new i.constructor(p);return i.copy($),$}function du(i){var l=new i.constructor(i.byteLength);return new zo(l).set(new zo(i)),l}function yy(i,l){var p=l?du(i.buffer):i.buffer;return new i.constructor(p,i.byteOffset,i.byteLength)}function gy(i){var l=new i.constructor(i.source,So.exec(i));return l.lastIndex=i.lastIndex,l}function wy(i){return Ci?sn(Ci.call(i)):{}}function Nm(i,l){var p=l?du(i.buffer):i.buffer;return new i.constructor(p,i.byteOffset,i.length)}function Lm(i,l){if(i!==l){var p=i!==t,$=i===null,q=i===i,U=cs(i),se=l!==t,ue=l===null,_e=l===l,Ie=cs(l);if(!ue&&!Ie&&!U&&i>l||U&&se&&_e&&!ue&&!Ie||$&&se&&_e||!p&&_e||!q)return 1;if(!$&&!U&&!Ie&&i<l||Ie&&p&&q&&!$&&!U||ue&&p&&q||!se&&q||!_e)return-1}return 0}function xy(i,l,p){for(var $=-1,q=i.criteria,U=l.criteria,se=q.length,ue=p.length;++$<se;){var _e=Lm(q[$],U[$]);if(_e){if($>=ue)return _e;var Ie=p[$];return _e*(Ie=="desc"?-1:1)}}return i.index-l.index}function Mm(i,l,p,$){for(var q=-1,U=i.length,se=p.length,ue=-1,_e=l.length,Ie=wn(U-se,0),qe=ke(_e+Ie),He=!$;++ue<_e;)qe[ue]=l[ue];for(;++q<se;)(He||q<U)&&(qe[p[q]]=i[q]);for(;Ie--;)qe[ue++]=i[q++];return qe}function Dm(i,l,p,$){for(var q=-1,U=i.length,se=-1,ue=p.length,_e=-1,Ie=l.length,qe=wn(U-ue,0),He=ke(qe+Ie),nt=!$;++q<qe;)He[q]=i[q];for(var mt=q;++_e<Ie;)He[mt+_e]=l[_e];for(;++se<ue;)(nt||q<U)&&(He[mt+p[se]]=i[q++]);return He}function Qn(i,l){var p=-1,$=i.length;for(l||(l=ke($));++p<$;)l[p]=i[p];return l}function zs(i,l,p,$){var q=!p;p||(p={});for(var U=-1,se=l.length;++U<se;){var ue=l[U],_e=$?$(p[ue],i[ue],ue,p,i):t;_e===t&&(_e=i[ue]),q?rr(p,ue,_e):Ni(p,ue,_e)}return p}function $y(i,l){return zs(i,xu(i),l)}function vy(i,l){return zs(i,Jm(i),l)}function rl(i,l){return function(p,$){var q=Ot(p)?ge:Hb,U=l?l():{};return q(p,i,gt($,2),U)}}function Wa(i){return Pt(function(l,p){var $=-1,q=p.length,U=q>1?p[q-1]:t,se=q>2?p[2]:t;for(U=i.length>3&&typeof U=="function"?(q--,U):t,se&&Bn(p[0],p[1],se)&&(U=q<3?t:U,q=1),l=sn(l);++$<q;){var ue=p[$];ue&&i(l,ue,$,U)}return l})}function Fm(i,l){return function(p,$){if(p==null)return p;if(!Yn(p))return i(p,$);for(var q=p.length,U=l?q:-1,se=sn(p);(l?U--:++U<q)&&$(se[U],U,se)!==!1;);return p}}function Pm(i){return function(l,p,$){for(var q=-1,U=sn(l),se=$(l),ue=se.length;ue--;){var _e=se[i?ue:++q];if(p(U[_e],_e,U)===!1)break}return l}}function ky(i,l,p){var $=l&ae,q=Pi(i);function U(){var se=this&&this!==K&&this instanceof U?q:i;return se.apply($?p:this,arguments)}return U}function jm(i){return function(l){l=Xt(l);var p=Da(l)?qs(l):t,$=p?p[0]:l.charAt(0),q=p?Rr(p,1).join(""):l.slice(1);return $[i]()+q}}function Ha(i){return function(l){return me(Pf(Ff(l).replace(V,"")),i,"")}}function Pi(i){return function(){var l=arguments;switch(l.length){case 0:return new i;case 1:return new i(l[0]);case 2:return new i(l[0],l[1]);case 3:return new i(l[0],l[1],l[2]);case 4:return new i(l[0],l[1],l[2],l[3]);case 5:return new i(l[0],l[1],l[2],l[3],l[4]);case 6:return new i(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new i(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var p=za(i.prototype),$=i.apply(p,l);return an($)?$:p}}function Ey(i,l,p){var $=Pi(i);function q(){for(var U=arguments.length,se=ke(U),ue=U,_e=Va(q);ue--;)se[ue]=arguments[ue];var Ie=U<3&&se[0]!==_e&&se[U-1]!==_e?[]:Ar(se,_e);if(U-=Ie.length,U<p)return Hm(i,l,al,q.placeholder,t,se,Ie,t,t,p-U);var qe=this&&this!==K&&this instanceof q?$:i;return Ft(qe,this,se)}return q}function Um(i){return function(l,p,$){var q=sn(l);if(!Yn(l)){var U=gt(p,3);l=An(l),p=function(ue){return U(q[ue],ue,q)}}var se=i(l,p,$);return se>-1?q[U?l[se]:se]:t}}function Bm(i){return ir(function(l){var p=l.length,$=p,q=ys.prototype.thru;for(i&&l.reverse();$--;){var U=l[$];if(typeof U!="function")throw new bs(o);if(q&&!se&&cl(U)=="wrapper")var se=new ys([],!0)}for($=se?$:p;++$<p;){U=l[$];var ue=cl(U),_e=ue=="wrapper"?gu(U):t;_e&&vu(_e[0])&&_e[1]==(Ye|ze|he|ut)&&!_e[4].length&&_e[9]==1?se=se[cl(_e[0])].apply(se,_e[3]):se=U.length==1&&vu(U)?se[ue]():se.thru(U)}return function(){var Ie=arguments,qe=Ie[0];if(se&&Ie.length==1&&Ot(qe))return se.plant(qe).value();for(var He=0,nt=p?l[He].apply(this,Ie):qe;++He<p;)nt=l[He].call(this,nt);return nt}})}function al(i,l,p,$,q,U,se,ue,_e,Ie){var qe=l&Ye,He=l&ae,nt=l&Ae,mt=l&(ze|pe),$t=l&c,Mt=nt?t:Pi(i);function vt(){for(var Ut=arguments.length,Wt=ke(Ut),us=Ut;us--;)Wt[us]=arguments[us];if(mt)var zn=Va(vt),ps=Dh(Wt,zn);if($&&(Wt=Mm(Wt,$,q,mt)),U&&(Wt=Dm(Wt,U,se,mt)),Ut-=ps,mt&&Ut<Ie){var dn=Ar(Wt,zn);return Hm(i,l,al,vt.placeholder,p,Wt,dn,ue,_e,Ie-Ut)}var Cs=He?p:this,ur=nt?Cs[i]:i;return Ut=Wt.length,ue?Wt=Hy(Wt,ue):$t&&Ut>1&&Wt.reverse(),qe&&_e<Ut&&(Wt.length=_e),this&&this!==K&&this instanceof vt&&(ur=Mt||Pi(ur)),ur.apply(Cs,Wt)}return vt}function zm(i,l){return function(p,$){return Kb(p,i,l($),{})}}function il(i,l){return function(p,$){var q;if(p===t&&$===t)return l;if(p!==t&&(q=p),$!==t){if(q===t)return $;typeof p=="string"||typeof $=="string"?(p=ls(p),$=ls($)):(p=Sm(p),$=Sm($)),q=i(p,$)}return q}}function _u(i){return ir(function(l){return l=G(l,os(gt())),Pt(function(p){var $=this;return i(l,function(q){return Ft(q,$,p)})})})}function ol(i,l){l=l===t?" ":ls(l);var p=l.length;if(p<2)return p?lu(l,i):l;var $=lu(l,Go(i/Fa(l)));return Da(l)?Rr(qs($),0,i).join(""):$.slice(0,i)}function Ay(i,l,p,$){var q=l&ae,U=Pi(i);function se(){for(var ue=-1,_e=arguments.length,Ie=-1,qe=$.length,He=ke(qe+_e),nt=this&&this!==K&&this instanceof se?U:i;++Ie<qe;)He[Ie]=$[Ie];for(;_e--;)He[Ie++]=arguments[++ue];return Ft(nt,q?p:this,He)}return se}function Wm(i){return function(l,p,$){return $&&typeof $!="number"&&Bn(l,p,$)&&(p=$=t),l=cr(l),p===t?(p=l,l=0):p=cr(p),$=$===t?l<p?1:-1:cr($),py(l,p,$,i)}}function ll(i){return function(l,p){return typeof l=="string"&&typeof p=="string"||(l=$s(l),p=$s(p)),i(l,p)}}function Hm(i,l,p,$,q,U,se,ue,_e,Ie){var qe=l&ze,He=qe?se:t,nt=qe?t:se,mt=qe?U:t,$t=qe?t:U;l|=qe?he:Le,l&=~(qe?Le:he),l&Pe||(l&=~(ae|Ae));var Mt=[i,l,q,mt,He,$t,nt,ue,_e,Ie],vt=p.apply(t,Mt);return vu(i)&&sf(vt,Mt),vt.placeholder=$,rf(vt,i,l)}function hu(i){var l=gn[i];return function(p,$){if(p=$s(p),$=$==null?0:Cn(Nt($),292),$&&rm(p)){var q=(Xt(p)+"e").split("e"),U=l(q[0]+"e"+(+q[1]+$));return q=(Xt(U)+"e").split("e"),+(q[0]+"e"+(+q[1]-$))}return l(p)}}var Ty=Ua&&1/Do(new Ua([,-0]))[1]==Oe?function(i){return new Ua(i)}:Fu;function Vm(i){return function(l){var p=Nn(l);return p==kn?Vc(l):p==Et?Wh(l):Mh(l,i(l))}}function ar(i,l,p,$,q,U,se,ue){var _e=l&Ae;if(!_e&&typeof i!="function")throw new bs(o);var Ie=$?$.length:0;if(Ie||(l&=~(he|Le),$=q=t),se=se===t?se:wn(Nt(se),0),ue=ue===t?ue:Nt(ue),Ie-=q?q.length:0,l&Le){var qe=$,He=q;$=q=t}var nt=_e?t:gu(i),mt=[i,l,p,$,q,qe,He,U,se,ue];if(nt&&By(mt,nt),i=mt[0],l=mt[1],p=mt[2],$=mt[3],q=mt[4],ue=mt[9]=mt[9]===t?_e?0:i.length:wn(mt[9]-Ie,0),!ue&&l&(ze|pe)&&(l&=~(ze|pe)),!l||l==ae)var $t=ky(i,l,p);else l==ze||l==pe?$t=Ey(i,l,ue):(l==he||l==(ae|he))&&!q.length?$t=Ay(i,l,p,$):$t=al.apply(t,mt);var Mt=nt?Am:sf;return rf(Mt($t,mt),i,l)}function Gm(i,l,p,$){return i===t||Os(i,ja[p])&&!Kt.call($,p)?l:i}function Qm(i,l,p,$,q,U){return an(i)&&an(l)&&(U.set(l,i),tl(i,l,t,Qm,U),U.delete(l)),i}function Sy(i){return Bi(i)?t:i}function Ym(i,l,p,$,q,U){var se=p&N,ue=i.length,_e=l.length;if(ue!=_e&&!(se&&_e>ue))return!1;var Ie=U.get(i),qe=U.get(l);if(Ie&&qe)return Ie==l&&qe==i;var He=-1,nt=!0,mt=p&Z?new ia:t;for(U.set(i,l),U.set(l,i);++He<ue;){var $t=i[He],Mt=l[He];if($)var vt=se?$(Mt,$t,He,l,i,U):$($t,Mt,He,i,l,U);if(vt!==t){if(vt)continue;nt=!1;break}if(mt){if(!Ee(l,function(Ut,Wt){if(!Si(mt,Wt)&&($t===Ut||q($t,Ut,p,$,U)))return mt.push(Wt)})){nt=!1;break}}else if(!($t===Mt||q($t,Mt,p,$,U))){nt=!1;break}}return U.delete(i),U.delete(l),nt}function Iy(i,l,p,$,q,U,se){switch(p){case Gn:if(i.byteLength!=l.byteLength||i.byteOffset!=l.byteOffset)return!1;i=i.buffer,l=l.buffer;case tr:return!(i.byteLength!=l.byteLength||!U(new zo(i),new zo(l)));case Vn:case yn:case Kr:return Os(+i,+l);case Zr:return i.name==l.name&&i.message==l.message;case ea:case rn:return i==l+"";case kn:var ue=Vc;case Et:var _e=$&N;if(ue||(ue=Do),i.size!=l.size&&!_e)return!1;var Ie=se.get(i);if(Ie)return Ie==l;$|=Z,se.set(i,l);var qe=Ym(ue(i),ue(l),$,q,U,se);return se.delete(i),qe;case vr:if(Ci)return Ci.call(i)==Ci.call(l)}return!1}function qy(i,l,p,$,q,U){var se=p&N,ue=bu(i),_e=ue.length,Ie=bu(l),qe=Ie.length;if(_e!=qe&&!se)return!1;for(var He=_e;He--;){var nt=ue[He];if(!(se?nt in l:Kt.call(l,nt)))return!1}var mt=U.get(i),$t=U.get(l);if(mt&&$t)return mt==l&&$t==i;var Mt=!0;U.set(i,l),U.set(l,i);for(var vt=se;++He<_e;){nt=ue[He];var Ut=i[nt],Wt=l[nt];if($)var us=se?$(Wt,Ut,nt,l,i,U):$(Ut,Wt,nt,i,l,U);if(!(us===t?Ut===Wt||q(Ut,Wt,p,$,U):us)){Mt=!1;break}vt||(vt=nt=="constructor")}if(Mt&&!vt){var zn=i.constructor,ps=l.constructor;zn!=ps&&"constructor"in i&&"constructor"in l&&!(typeof zn=="function"&&zn instanceof zn&&typeof ps=="function"&&ps instanceof ps)&&(Mt=!1)}return U.delete(i),U.delete(l),Mt}function ir(i){return Eu(tf(i,t,pf),i+"")}function bu(i){return _m(i,An,xu)}function yu(i){return _m(i,Jn,Jm)}var gu=Yo?function(i){return Yo.get(i)}:Fu;function cl(i){for(var l=i.name+"",p=Ba[l],$=Kt.call(Ba,l)?p.length:0;$--;){var q=p[$],U=q.func;if(U==null||U==i)return q.name}return l}function Va(i){var l=Kt.call(C,"placeholder")?C:i;return l.placeholder}function gt(){var i=C.iteratee||Mu;return i=i===Mu?ym:i,arguments.length?i(arguments[0],arguments[1]):i}function ul(i,l){var p=i.__data__;return Fy(l)?p[typeof l=="string"?"string":"hash"]:p.map}function wu(i){for(var l=An(i),p=l.length;p--;){var $=l[p],q=i[$];l[p]=[$,q,Km(q)]}return l}function ca(i,l){var p=Uh(i,l);return bm(p)?p:t}function Ry(i){var l=Kt.call(i,ra),p=i[ra];try{i[ra]=t;var $=!0}catch{}var q=Uo.call(i);return $&&(l?i[ra]=p:delete i[ra]),q}var xu=Qc?function(i){return i==null?[]:(i=sn(i),Ge(Qc(i),function(l){return nm.call(i,l)}))}:Pu,Jm=Qc?function(i){for(var l=[];i;)Q(l,xu(i)),i=Wo(i);return l}:Pu,Nn=Un;(Yc&&Nn(new Yc(new ArrayBuffer(1)))!=Gn||qi&&Nn(new qi)!=kn||Jc&&Nn(Jc.resolve())!=di||Ua&&Nn(new Ua)!=Et||Ri&&Nn(new Ri)!=ta)&&(Nn=function(i){var l=Un(i),p=l==ln?i.constructor:t,$=p?ua(p):"";if($)switch($){case fb:return Gn;case db:return kn;case _b:return di;case hb:return Et;case bb:return ta}return l});function Oy(i,l,p){for(var $=-1,q=p.length;++$<q;){var U=p[$],se=U.size;switch(U.type){case"drop":i+=se;break;case"dropRight":l-=se;break;case"take":l=Cn(l,i+se);break;case"takeRight":i=wn(i,l-se);break}}return{start:i,end:l}}function Cy(i){var l=i.match(vc);return l?l[1].split($i):[]}function Zm(i,l,p){l=qr(l,i);for(var $=-1,q=l.length,U=!1;++$<q;){var se=Ws(l[$]);if(!(U=i!=null&&p(i,se)))break;i=i[se]}return U||++$!=q?U:(q=i==null?0:i.length,!!q&&bl(q)&&or(se,q)&&(Ot(i)||pa(i)))}function Ny(i){var l=i.length,p=new i.constructor(l);return l&&typeof i[0]=="string"&&Kt.call(i,"index")&&(p.index=i.index,p.input=i.input),p}function Xm(i){return typeof i.constructor=="function"&&!ji(i)?za(Wo(i)):{}}function Ly(i,l,p){var $=i.constructor;switch(l){case tr:return du(i);case Vn:case yn:return new $(+i);case Gn:return yy(i,p);case _i:case hi:case Sa:case St:case bi:case E:case xt:case yi:case gi:return Nm(i,p);case kn:return new $;case Kr:case rn:return new $(i);case ea:return gy(i);case Et:return new $;case vr:return wy(i)}}function My(i,l){var p=l.length;if(!p)return i;var $=p-1;return l[$]=(p>1?"& ":"")+l[$],l=l.join(p>2?", ":" "),i.replace($c,`{
/* [wrapped with `+l+`] */
`)}function Dy(i){return Ot(i)||pa(i)||!!(sm&&i&&i[sm])}function or(i,l){var p=typeof i;return l=l??ht,!!l&&(p=="number"||p!="symbol"&&Oc.test(i))&&i>-1&&i%1==0&&i<l}function Bn(i,l,p){if(!an(p))return!1;var $=typeof l;return($=="number"?Yn(p)&&or(l,p.length):$=="string"&&l in p)?Os(p[l],i):!1}function $u(i,l){if(Ot(i))return!1;var p=typeof i;return p=="number"||p=="symbol"||p=="boolean"||i==null||cs(i)?!0:yc.test(i)||!bc.test(i)||l!=null&&i in sn(l)}function Fy(i){var l=typeof i;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?i!=="__proto__":i===null}function vu(i){var l=cl(i),p=C[l];if(typeof p!="function"||!(l in zt.prototype))return!1;if(i===p)return!0;var $=gu(p);return!!$&&i===$[0]}function Py(i){return!!Kp&&Kp in i}var jy=Po?lr:ju;function ji(i){var l=i&&i.constructor,p=typeof l=="function"&&l.prototype||ja;return i===p}function Km(i){return i===i&&!an(i)}function ef(i,l){return function(p){return p==null?!1:p[i]===l&&(l!==t||i in sn(p))}}function Uy(i){var l=_l(i,function($){return p.size===g&&p.clear(),$}),p=l.cache;return l}function By(i,l){var p=i[1],$=l[1],q=p|$,U=q<(ae|Ae|Ye),se=$==Ye&&p==ze||$==Ye&&p==ut&&i[7].length<=l[8]||$==(Ye|ut)&&l[7].length<=l[8]&&p==ze;if(!(U||se))return i;$&ae&&(i[2]=l[2],q|=p&ae?0:Pe);var ue=l[3];if(ue){var _e=i[3];i[3]=_e?Mm(_e,ue,l[4]):ue,i[4]=_e?Ar(i[3],u):l[4]}return ue=l[5],ue&&(_e=i[5],i[5]=_e?Dm(_e,ue,l[6]):ue,i[6]=_e?Ar(i[5],u):l[6]),ue=l[7],ue&&(i[7]=ue),$&Ye&&(i[8]=i[8]==null?l[8]:Cn(i[8],l[8])),i[9]==null&&(i[9]=l[9]),i[0]=l[0],i[1]=q,i}function zy(i){var l=[];if(i!=null)for(var p in sn(i))l.push(p);return l}function Wy(i){return Uo.call(i)}function tf(i,l,p){return l=wn(l===t?i.length-1:l,0),function(){for(var $=arguments,q=-1,U=wn($.length-l,0),se=ke(U);++q<U;)se[q]=$[l+q];q=-1;for(var ue=ke(l+1);++q<l;)ue[q]=$[q];return ue[l]=p(se),Ft(i,this,ue)}}function nf(i,l){return l.length<2?i:la(i,ws(l,0,-1))}function Hy(i,l){for(var p=i.length,$=Cn(l.length,p),q=Qn(i);$--;){var U=l[$];i[$]=or(U,p)?q[U]:t}return i}function ku(i,l){if(!(l==="constructor"&&typeof i[l]=="function")&&l!="__proto__")return i[l]}var sf=af(Am),Ui=ib||function(i,l){return K.setTimeout(i,l)},Eu=af(dy);function rf(i,l,p){var $=l+"";return Eu(i,My($,Vy(Cy($),p)))}function af(i){var l=0,p=0;return function(){var $=ub(),q=X-($-p);if(p=$,q>0){if(++l>=j)return arguments[0]}else l=0;return i.apply(t,arguments)}}function pl(i,l){var p=-1,$=i.length,q=$-1;for(l=l===t?$:l;++p<l;){var U=ou(p,q),se=i[U];i[U]=i[p],i[p]=se}return i.length=l,i}var of=Uy(function(i){var l=[];return i.charCodeAt(0)===46&&l.push(""),i.replace(gc,function(p,$,q,U){l.push(q?U.replace(Ac,"$1"):$||p)}),l});function Ws(i){if(typeof i=="string"||cs(i))return i;var l=i+"";return l=="0"&&1/i==-Oe?"-0":l}function ua(i){if(i!=null){try{return jo.call(i)}catch{}try{return i+""}catch{}}return""}function Vy(i,l){return Te(Ss,function(p){var $="_."+p[0];l&p[1]&&!tt(i,$)&&i.push($)}),i.sort()}function lf(i){if(i instanceof zt)return i.clone();var l=new ys(i.__wrapped__,i.__chain__);return l.__actions__=Qn(i.__actions__),l.__index__=i.__index__,l.__values__=i.__values__,l}function Gy(i,l,p){(p?Bn(i,l,p):l===t)?l=1:l=wn(Nt(l),0);var $=i==null?0:i.length;if(!$||l<1)return[];for(var q=0,U=0,se=ke(Go($/l));q<$;)se[U++]=ws(i,q,q+=l);return se}function Qy(i){for(var l=-1,p=i==null?0:i.length,$=0,q=[];++l<p;){var U=i[l];U&&(q[$++]=U)}return q}function Yy(){var i=arguments.length;if(!i)return[];for(var l=ke(i-1),p=arguments[0],$=i;$--;)l[$-1]=arguments[$];return Q(Ot(p)?Qn(p):[p],Rn(l,1))}var Jy=Pt(function(i,l){return fn(i)?Li(i,Rn(l,1,fn,!0)):[]}),Zy=Pt(function(i,l){var p=xs(l);return fn(p)&&(p=t),fn(i)?Li(i,Rn(l,1,fn,!0),gt(p,2)):[]}),Xy=Pt(function(i,l){var p=xs(l);return fn(p)&&(p=t),fn(i)?Li(i,Rn(l,1,fn,!0),t,p):[]});function Ky(i,l,p){var $=i==null?0:i.length;return $?(l=p||l===t?1:Nt(l),ws(i,l<0?0:l,$)):[]}function eg(i,l,p){var $=i==null?0:i.length;return $?(l=p||l===t?1:Nt(l),l=$-l,ws(i,0,l<0?0:l)):[]}function tg(i,l){return i&&i.length?sl(i,gt(l,3),!0,!0):[]}function ng(i,l){return i&&i.length?sl(i,gt(l,3),!0):[]}function sg(i,l,p,$){var q=i==null?0:i.length;return q?(p&&typeof p!="number"&&Bn(i,l,p)&&(p=0,$=q),Yb(i,l,p,$)):[]}function cf(i,l,p){var $=i==null?0:i.length;if(!$)return-1;var q=p==null?0:Nt(p);return q<0&&(q=wn($+q,0)),En(i,gt(l,3),q)}function uf(i,l,p){var $=i==null?0:i.length;if(!$)return-1;var q=$-1;return p!==t&&(q=Nt(p),q=p<0?wn($+q,0):Cn(q,$-1)),En(i,gt(l,3),q,!0)}function pf(i){var l=i==null?0:i.length;return l?Rn(i,1):[]}function rg(i){var l=i==null?0:i.length;return l?Rn(i,Oe):[]}function ag(i,l){var p=i==null?0:i.length;return p?(l=l===t?1:Nt(l),Rn(i,l)):[]}function ig(i){for(var l=-1,p=i==null?0:i.length,$={};++l<p;){var q=i[l];$[q[0]]=q[1]}return $}function mf(i){return i&&i.length?i[0]:t}function og(i,l,p){var $=i==null?0:i.length;if(!$)return-1;var q=p==null?0:Nt(p);return q<0&&(q=wn($+q,0)),cn(i,l,q)}function lg(i){var l=i==null?0:i.length;return l?ws(i,0,-1):[]}var cg=Pt(function(i){var l=G(i,mu);return l.length&&l[0]===i[0]?nu(l):[]}),ug=Pt(function(i){var l=xs(i),p=G(i,mu);return l===xs(p)?l=t:p.pop(),p.length&&p[0]===i[0]?nu(p,gt(l,2)):[]}),pg=Pt(function(i){var l=xs(i),p=G(i,mu);return l=typeof l=="function"?l:t,l&&p.pop(),p.length&&p[0]===i[0]?nu(p,t,l):[]});function mg(i,l){return i==null?"":lb.call(i,l)}function xs(i){var l=i==null?0:i.length;return l?i[l-1]:t}function fg(i,l,p){var $=i==null?0:i.length;if(!$)return-1;var q=$;return p!==t&&(q=Nt(p),q=q<0?wn($+q,0):Cn(q,$-1)),l===l?Vh(i,l,q):En(i,Mo,q,!0)}function dg(i,l){return i&&i.length?$m(i,Nt(l)):t}var _g=Pt(ff);function ff(i,l){return i&&i.length&&l&&l.length?iu(i,l):i}function hg(i,l,p){return i&&i.length&&l&&l.length?iu(i,l,gt(p,2)):i}function bg(i,l,p){return i&&i.length&&l&&l.length?iu(i,l,t,p):i}var yg=ir(function(i,l){var p=i==null?0:i.length,$=Xc(i,l);return Em(i,G(l,function(q){return or(q,p)?+q:q}).sort(Lm)),$});function gg(i,l){var p=[];if(!(i&&i.length))return p;var $=-1,q=[],U=i.length;for(l=gt(l,3);++$<U;){var se=i[$];l(se,$,i)&&(p.push(se),q.push($))}return Em(i,q),p}function Au(i){return i==null?i:mb.call(i)}function wg(i,l,p){var $=i==null?0:i.length;return $?(p&&typeof p!="number"&&Bn(i,l,p)?(l=0,p=$):(l=l==null?0:Nt(l),p=p===t?$:Nt(p)),ws(i,l,p)):[]}function xg(i,l){return nl(i,l)}function $g(i,l,p){return cu(i,l,gt(p,2))}function vg(i,l){var p=i==null?0:i.length;if(p){var $=nl(i,l);if($<p&&Os(i[$],l))return $}return-1}function kg(i,l){return nl(i,l,!0)}function Eg(i,l,p){return cu(i,l,gt(p,2),!0)}function Ag(i,l){var p=i==null?0:i.length;if(p){var $=nl(i,l,!0)-1;if(Os(i[$],l))return $}return-1}function Tg(i){return i&&i.length?Tm(i):[]}function Sg(i,l){return i&&i.length?Tm(i,gt(l,2)):[]}function Ig(i){var l=i==null?0:i.length;return l?ws(i,1,l):[]}function qg(i,l,p){return i&&i.length?(l=p||l===t?1:Nt(l),ws(i,0,l<0?0:l)):[]}function Rg(i,l,p){var $=i==null?0:i.length;return $?(l=p||l===t?1:Nt(l),l=$-l,ws(i,l<0?0:l,$)):[]}function Og(i,l){return i&&i.length?sl(i,gt(l,3),!1,!0):[]}function Cg(i,l){return i&&i.length?sl(i,gt(l,3)):[]}var Ng=Pt(function(i){return Ir(Rn(i,1,fn,!0))}),Lg=Pt(function(i){var l=xs(i);return fn(l)&&(l=t),Ir(Rn(i,1,fn,!0),gt(l,2))}),Mg=Pt(function(i){var l=xs(i);return l=typeof l=="function"?l:t,Ir(Rn(i,1,fn,!0),t,l)});function Dg(i){return i&&i.length?Ir(i):[]}function Fg(i,l){return i&&i.length?Ir(i,gt(l,2)):[]}function Pg(i,l){return l=typeof l=="function"?l:t,i&&i.length?Ir(i,t,l):[]}function Tu(i){if(!(i&&i.length))return[];var l=0;return i=Ge(i,function(p){if(fn(p))return l=wn(p.length,l),!0}),Wc(l,function(p){return G(i,Ti(p))})}function df(i,l){if(!(i&&i.length))return[];var p=Tu(i);return l==null?p:G(p,function($){return Ft(l,t,$)})}var jg=Pt(function(i,l){return fn(i)?Li(i,l):[]}),Ug=Pt(function(i){return pu(Ge(i,fn))}),Bg=Pt(function(i){var l=xs(i);return fn(l)&&(l=t),pu(Ge(i,fn),gt(l,2))}),zg=Pt(function(i){var l=xs(i);return l=typeof l=="function"?l:t,pu(Ge(i,fn),t,l)}),Wg=Pt(Tu);function Hg(i,l){return Rm(i||[],l||[],Ni)}function Vg(i,l){return Rm(i||[],l||[],Fi)}var Gg=Pt(function(i){var l=i.length,p=l>1?i[l-1]:t;return p=typeof p=="function"?(i.pop(),p):t,df(i,p)});function _f(i){var l=C(i);return l.__chain__=!0,l}function Qg(i,l){return l(i),i}function ml(i,l){return l(i)}var Yg=ir(function(i){var l=i.length,p=l?i[0]:0,$=this.__wrapped__,q=function(U){return Xc(U,i)};return l>1||this.__actions__.length||!($ instanceof zt)||!or(p)?this.thru(q):($=$.slice(p,+p+(l?1:0)),$.__actions__.push({func:ml,args:[q],thisArg:t}),new ys($,this.__chain__).thru(function(U){return l&&!U.length&&U.push(t),U}))});function Jg(){return _f(this)}function Zg(){return new ys(this.value(),this.__chain__)}function Xg(){this.__values__===t&&(this.__values__=If(this.value()));var i=this.__index__>=this.__values__.length,l=i?t:this.__values__[this.__index__++];return{done:i,value:l}}function Kg(){return this}function ew(i){for(var l,p=this;p instanceof Zo;){var $=lf(p);$.__index__=0,$.__values__=t,l?q.__wrapped__=$:l=$;var q=$;p=p.__wrapped__}return q.__wrapped__=i,l}function tw(){var i=this.__wrapped__;if(i instanceof zt){var l=i;return this.__actions__.length&&(l=new zt(this)),l=l.reverse(),l.__actions__.push({func:ml,args:[Au],thisArg:t}),new ys(l,this.__chain__)}return this.thru(Au)}function nw(){return qm(this.__wrapped__,this.__actions__)}var sw=rl(function(i,l,p){Kt.call(i,p)?++i[p]:rr(i,p,1)});function rw(i,l,p){var $=Ot(i)?Ke:Qb;return p&&Bn(i,l,p)&&(l=t),$(i,gt(l,3))}function aw(i,l){var p=Ot(i)?Ge:fm;return p(i,gt(l,3))}var iw=Um(cf),ow=Um(uf);function lw(i,l){return Rn(fl(i,l),1)}function cw(i,l){return Rn(fl(i,l),Oe)}function uw(i,l,p){return p=p===t?1:Nt(p),Rn(fl(i,l),p)}function hf(i,l){var p=Ot(i)?Te:Sr;return p(i,gt(l,3))}function bf(i,l){var p=Ot(i)?Ce:mm;return p(i,gt(l,3))}var pw=rl(function(i,l,p){Kt.call(i,p)?i[p].push(l):rr(i,p,[l])});function mw(i,l,p,$){i=Yn(i)?i:Qa(i),p=p&&!$?Nt(p):0;var q=i.length;return p<0&&(p=wn(q+p,0)),yl(i)?p<=q&&i.indexOf(l,p)>-1:!!q&&cn(i,l,p)>-1}var fw=Pt(function(i,l,p){var $=-1,q=typeof l=="function",U=Yn(i)?ke(i.length):[];return Sr(i,function(se){U[++$]=q?Ft(l,se,p):Mi(se,l,p)}),U}),dw=rl(function(i,l,p){rr(i,p,l)});function fl(i,l){var p=Ot(i)?G:gm;return p(i,gt(l,3))}function _w(i,l,p,$){return i==null?[]:(Ot(l)||(l=l==null?[]:[l]),p=$?t:p,Ot(p)||(p=p==null?[]:[p]),vm(i,l,p))}var hw=rl(function(i,l,p){i[p?0:1].push(l)},function(){return[[],[]]});function bw(i,l,p){var $=Ot(i)?me:Ma,q=arguments.length<3;return $(i,gt(l,4),p,q,Sr)}function yw(i,l,p){var $=Ot(i)?be:Ma,q=arguments.length<3;return $(i,gt(l,4),p,q,mm)}function gw(i,l){var p=Ot(i)?Ge:fm;return p(i,hl(gt(l,3)))}function ww(i){var l=Ot(i)?lm:my;return l(i)}function xw(i,l,p){(p?Bn(i,l,p):l===t)?l=1:l=Nt(l);var $=Ot(i)?zb:fy;return $(i,l)}function $w(i){var l=Ot(i)?Wb:_y;return l(i)}function vw(i){if(i==null)return 0;if(Yn(i))return yl(i)?Fa(i):i.length;var l=Nn(i);return l==kn||l==Et?i.size:ru(i).length}function kw(i,l,p){var $=Ot(i)?Ee:hy;return p&&Bn(i,l,p)&&(l=t),$(i,gt(l,3))}var Ew=Pt(function(i,l){if(i==null)return[];var p=l.length;return p>1&&Bn(i,l[0],l[1])?l=[]:p>2&&Bn(l[0],l[1],l[2])&&(l=[l[0]]),vm(i,Rn(l,1),[])}),dl=ab||function(){return K.Date.now()};function Aw(i,l){if(typeof l!="function")throw new bs(o);return i=Nt(i),function(){if(--i<1)return l.apply(this,arguments)}}function yf(i,l,p){return l=p?t:l,l=i&&l==null?i.length:l,ar(i,Ye,t,t,t,t,l)}function gf(i,l){var p;if(typeof l!="function")throw new bs(o);return i=Nt(i),function(){return--i>0&&(p=l.apply(this,arguments)),i<=1&&(l=t),p}}var Su=Pt(function(i,l,p){var $=ae;if(p.length){var q=Ar(p,Va(Su));$|=he}return ar(i,$,l,p,q)}),wf=Pt(function(i,l,p){var $=ae|Ae;if(p.length){var q=Ar(p,Va(wf));$|=he}return ar(l,$,i,p,q)});function xf(i,l,p){l=p?t:l;var $=ar(i,ze,t,t,t,t,t,l);return $.placeholder=xf.placeholder,$}function $f(i,l,p){l=p?t:l;var $=ar(i,pe,t,t,t,t,t,l);return $.placeholder=$f.placeholder,$}function vf(i,l,p){var $,q,U,se,ue,_e,Ie=0,qe=!1,He=!1,nt=!0;if(typeof i!="function")throw new bs(o);l=$s(l)||0,an(p)&&(qe=!!p.leading,He="maxWait"in p,U=He?wn($s(p.maxWait)||0,l):U,nt="trailing"in p?!!p.trailing:nt);function mt(dn){var Cs=$,ur=q;return $=q=t,Ie=dn,se=i.apply(ur,Cs),se}function $t(dn){return Ie=dn,ue=Ui(Ut,l),qe?mt(dn):se}function Mt(dn){var Cs=dn-_e,ur=dn-Ie,Bf=l-Cs;return He?Cn(Bf,U-ur):Bf}function vt(dn){var Cs=dn-_e,ur=dn-Ie;return _e===t||Cs>=l||Cs<0||He&&ur>=U}function Ut(){var dn=dl();if(vt(dn))return Wt(dn);ue=Ui(Ut,Mt(dn))}function Wt(dn){return ue=t,nt&&$?mt(dn):($=q=t,se)}function us(){ue!==t&&Om(ue),Ie=0,$=_e=q=ue=t}function zn(){return ue===t?se:Wt(dl())}function ps(){var dn=dl(),Cs=vt(dn);if($=arguments,q=this,_e=dn,Cs){if(ue===t)return $t(_e);if(He)return Om(ue),ue=Ui(Ut,l),mt(_e)}return ue===t&&(ue=Ui(Ut,l)),se}return ps.cancel=us,ps.flush=zn,ps}var Tw=Pt(function(i,l){return pm(i,1,l)}),Sw=Pt(function(i,l,p){return pm(i,$s(l)||0,p)});function Iw(i){return ar(i,c)}function _l(i,l){if(typeof i!="function"||l!=null&&typeof l!="function")throw new bs(o);var p=function(){var $=arguments,q=l?l.apply(this,$):$[0],U=p.cache;if(U.has(q))return U.get(q);var se=i.apply(this,$);return p.cache=U.set(q,se)||U,se};return p.cache=new(_l.Cache||sr),p}_l.Cache=sr;function hl(i){if(typeof i!="function")throw new bs(o);return function(){var l=arguments;switch(l.length){case 0:return!i.call(this);case 1:return!i.call(this,l[0]);case 2:return!i.call(this,l[0],l[1]);case 3:return!i.call(this,l[0],l[1],l[2])}return!i.apply(this,l)}}function qw(i){return gf(2,i)}var Rw=by(function(i,l){l=l.length==1&&Ot(l[0])?G(l[0],os(gt())):G(Rn(l,1),os(gt()));var p=l.length;return Pt(function($){for(var q=-1,U=Cn($.length,p);++q<U;)$[q]=l[q].call(this,$[q]);return Ft(i,this,$)})}),Iu=Pt(function(i,l){var p=Ar(l,Va(Iu));return ar(i,he,t,l,p)}),kf=Pt(function(i,l){var p=Ar(l,Va(kf));return ar(i,Le,t,l,p)}),Ow=ir(function(i,l){return ar(i,ut,t,t,t,l)});function Cw(i,l){if(typeof i!="function")throw new bs(o);return l=l===t?l:Nt(l),Pt(i,l)}function Nw(i,l){if(typeof i!="function")throw new bs(o);return l=l==null?0:wn(Nt(l),0),Pt(function(p){var $=p[l],q=Rr(p,0,l);return $&&Q(q,$),Ft(i,this,q)})}function Lw(i,l,p){var $=!0,q=!0;if(typeof i!="function")throw new bs(o);return an(p)&&($="leading"in p?!!p.leading:$,q="trailing"in p?!!p.trailing:q),vf(i,l,{leading:$,maxWait:l,trailing:q})}function Mw(i){return yf(i,1)}function Dw(i,l){return Iu(fu(l),i)}function Fw(){if(!arguments.length)return[];var i=arguments[0];return Ot(i)?i:[i]}function Pw(i){return gs(i,w)}function jw(i,l){return l=typeof l=="function"?l:t,gs(i,w,l)}function Uw(i){return gs(i,k|w)}function Bw(i,l){return l=typeof l=="function"?l:t,gs(i,k|w,l)}function zw(i,l){return l==null||um(i,l,An(l))}function Os(i,l){return i===l||i!==i&&l!==l}var Ww=ll(tu),Hw=ll(function(i,l){return i>=l}),pa=hm(function(){return arguments}())?hm:function(i){return un(i)&&Kt.call(i,"callee")&&!nm.call(i,"callee")},Ot=ke.isArray,Vw=bt?os(bt):ey;function Yn(i){return i!=null&&bl(i.length)&&!lr(i)}function fn(i){return un(i)&&Yn(i)}function Gw(i){return i===!0||i===!1||un(i)&&Un(i)==Vn}var Or=ob||ju,Qw=qt?os(qt):ty;function Yw(i){return un(i)&&i.nodeType===1&&!Bi(i)}function Jw(i){if(i==null)return!0;if(Yn(i)&&(Ot(i)||typeof i=="string"||typeof i.splice=="function"||Or(i)||Ga(i)||pa(i)))return!i.length;var l=Nn(i);if(l==kn||l==Et)return!i.size;if(ji(i))return!ru(i).length;for(var p in i)if(Kt.call(i,p))return!1;return!0}function Zw(i,l){return Di(i,l)}function Xw(i,l,p){p=typeof p=="function"?p:t;var $=p?p(i,l):t;return $===t?Di(i,l,t,p):!!$}function qu(i){if(!un(i))return!1;var l=Un(i);return l==Zr||l==hs||typeof i.message=="string"&&typeof i.name=="string"&&!Bi(i)}function Kw(i){return typeof i=="number"&&rm(i)}function lr(i){if(!an(i))return!1;var l=Un(i);return l==$r||l==Xr||l==er||l==uc}function Ef(i){return typeof i=="number"&&i==Nt(i)}function bl(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=ht}function an(i){var l=typeof i;return i!=null&&(l=="object"||l=="function")}function un(i){return i!=null&&typeof i=="object"}var Af=Lt?os(Lt):sy;function ex(i,l){return i===l||su(i,l,wu(l))}function tx(i,l,p){return p=typeof p=="function"?p:t,su(i,l,wu(l),p)}function nx(i){return Tf(i)&&i!=+i}function sx(i){if(jy(i))throw new Rt(r);return bm(i)}function rx(i){return i===null}function ax(i){return i==null}function Tf(i){return typeof i=="number"||un(i)&&Un(i)==Kr}function Bi(i){if(!un(i)||Un(i)!=ln)return!1;var l=Wo(i);if(l===null)return!0;var p=Kt.call(l,"constructor")&&l.constructor;return typeof p=="function"&&p instanceof p&&jo.call(p)==tb}var Ru=Yt?os(Yt):ry;function ix(i){return Ef(i)&&i>=-ht&&i<=ht}var Sf=Jt?os(Jt):ay;function yl(i){return typeof i=="string"||!Ot(i)&&un(i)&&Un(i)==rn}function cs(i){return typeof i=="symbol"||un(i)&&Un(i)==vr}var Ga=hn?os(hn):iy;function ox(i){return i===t}function lx(i){return un(i)&&Nn(i)==ta}function cx(i){return un(i)&&Un(i)==Is}var ux=ll(au),px=ll(function(i,l){return i<=l});function If(i){if(!i)return[];if(Yn(i))return yl(i)?qs(i):Qn(i);if(Ii&&i[Ii])return zh(i[Ii]());var l=Nn(i),p=l==kn?Vc:l==Et?Do:Qa;return p(i)}function cr(i){if(!i)return i===0?i:0;if(i=$s(i),i===Oe||i===-Oe){var l=i<0?-1:1;return l*yt}return i===i?i:0}function Nt(i){var l=cr(i),p=l%1;return l===l?p?l-p:l:0}function qf(i){return i?oa(Nt(i),0,Bt):0}function $s(i){if(typeof i=="number")return i;if(cs(i))return ct;if(an(i)){var l=typeof i.valueOf=="function"?i.valueOf():i;i=an(l)?l+"":l}if(typeof i!="string")return i===0?i:+i;i=Qp(i);var p=Ic.test(i);return p||Rc.test(i)?R(i.slice(2),p?2:8):Sc.test(i)?ct:+i}function Rf(i){return zs(i,Jn(i))}function mx(i){return i?oa(Nt(i),-ht,ht):i===0?i:0}function Xt(i){return i==null?"":ls(i)}var fx=Wa(function(i,l){if(ji(l)||Yn(l)){zs(l,An(l),i);return}for(var p in l)Kt.call(l,p)&&Ni(i,p,l[p])}),Of=Wa(function(i,l){zs(l,Jn(l),i)}),gl=Wa(function(i,l,p,$){zs(l,Jn(l),i,$)}),dx=Wa(function(i,l,p,$){zs(l,An(l),i,$)}),_x=ir(Xc);function hx(i,l){var p=za(i);return l==null?p:cm(p,l)}var bx=Pt(function(i,l){i=sn(i);var p=-1,$=l.length,q=$>2?l[2]:t;for(q&&Bn(l[0],l[1],q)&&($=1);++p<$;)for(var U=l[p],se=Jn(U),ue=-1,_e=se.length;++ue<_e;){var Ie=se[ue],qe=i[Ie];(qe===t||Os(qe,ja[Ie])&&!Kt.call(i,Ie))&&(i[Ie]=U[Ie])}return i}),yx=Pt(function(i){return i.push(t,Qm),Ft(Cf,t,i)});function gx(i,l){return jt(i,gt(l,3),Bs)}function wx(i,l){return jt(i,gt(l,3),eu)}function xx(i,l){return i==null?i:Kc(i,gt(l,3),Jn)}function $x(i,l){return i==null?i:dm(i,gt(l,3),Jn)}function vx(i,l){return i&&Bs(i,gt(l,3))}function kx(i,l){return i&&eu(i,gt(l,3))}function Ex(i){return i==null?[]:el(i,An(i))}function Ax(i){return i==null?[]:el(i,Jn(i))}function Ou(i,l,p){var $=i==null?t:la(i,l);return $===t?p:$}function Tx(i,l){return i!=null&&Zm(i,l,Jb)}function Cu(i,l){return i!=null&&Zm(i,l,Zb)}var Sx=zm(function(i,l,p){l!=null&&typeof l.toString!="function"&&(l=Uo.call(l)),i[l]=p},Lu(Zn)),Ix=zm(function(i,l,p){l!=null&&typeof l.toString!="function"&&(l=Uo.call(l)),Kt.call(i,l)?i[l].push(p):i[l]=[p]},gt),qx=Pt(Mi);function An(i){return Yn(i)?om(i):ru(i)}function Jn(i){return Yn(i)?om(i,!0):oy(i)}function Rx(i,l){var p={};return l=gt(l,3),Bs(i,function($,q,U){rr(p,l($,q,U),$)}),p}function Ox(i,l){var p={};return l=gt(l,3),Bs(i,function($,q,U){rr(p,q,l($,q,U))}),p}var Cx=Wa(function(i,l,p){tl(i,l,p)}),Cf=Wa(function(i,l,p,$){tl(i,l,p,$)}),Nx=ir(function(i,l){var p={};if(i==null)return p;var $=!1;l=G(l,function(U){return U=qr(U,i),$||($=U.length>1),U}),zs(i,yu(i),p),$&&(p=gs(p,k|O|w,Sy));for(var q=l.length;q--;)uu(p,l[q]);return p});function Lx(i,l){return Nf(i,hl(gt(l)))}var Mx=ir(function(i,l){return i==null?{}:cy(i,l)});function Nf(i,l){if(i==null)return{};var p=G(yu(i),function($){return[$]});return l=gt(l),km(i,p,function($,q){return l($,q[0])})}function Dx(i,l,p){l=qr(l,i);var $=-1,q=l.length;for(q||(q=1,i=t);++$<q;){var U=i==null?t:i[Ws(l[$])];U===t&&($=q,U=p),i=lr(U)?U.call(i):U}return i}function Fx(i,l,p){return i==null?i:Fi(i,l,p)}function Px(i,l,p,$){return $=typeof $=="function"?$:t,i==null?i:Fi(i,l,p,$)}var Lf=Vm(An),Mf=Vm(Jn);function jx(i,l,p){var $=Ot(i),q=$||Or(i)||Ga(i);if(l=gt(l,4),p==null){var U=i&&i.constructor;q?p=$?new U:[]:an(i)?p=lr(U)?za(Wo(i)):{}:p={}}return(q?Te:Bs)(i,function(se,ue,_e){return l(p,se,ue,_e)}),p}function Ux(i,l){return i==null?!0:uu(i,l)}function Bx(i,l,p){return i==null?i:Im(i,l,fu(p))}function zx(i,l,p,$){return $=typeof $=="function"?$:t,i==null?i:Im(i,l,fu(p),$)}function Qa(i){return i==null?[]:Hc(i,An(i))}function Wx(i){return i==null?[]:Hc(i,Jn(i))}function Hx(i,l,p){return p===t&&(p=l,l=t),p!==t&&(p=$s(p),p=p===p?p:0),l!==t&&(l=$s(l),l=l===l?l:0),oa($s(i),l,p)}function Vx(i,l,p){return l=cr(l),p===t?(p=l,l=0):p=cr(p),i=$s(i),Xb(i,l,p)}function Gx(i,l,p){if(p&&typeof p!="boolean"&&Bn(i,l,p)&&(l=p=t),p===t&&(typeof l=="boolean"?(p=l,l=t):typeof i=="boolean"&&(p=i,i=t)),i===t&&l===t?(i=0,l=1):(i=cr(i),l===t?(l=i,i=0):l=cr(l)),i>l){var $=i;i=l,l=$}if(p||i%1||l%1){var q=am();return Cn(i+q*(l-i+te("1e-"+((q+"").length-1))),l)}return ou(i,l)}var Qx=Ha(function(i,l,p){return l=l.toLowerCase(),i+(p?Df(l):l)});function Df(i){return Nu(Xt(i).toLowerCase())}function Ff(i){return i=Xt(i),i&&i.replace(Io,Fh).replace(ne,"")}function Yx(i,l,p){i=Xt(i),l=ls(l);var $=i.length;p=p===t?$:oa(Nt(p),0,$);var q=p;return p-=l.length,p>=0&&i.slice(p,q)==l}function Jx(i){return i=Xt(i),i&&_c.test(i)?i.replace(Eo,Ph):i}function Zx(i){return i=Xt(i),i&&wc.test(i)?i.replace(wi,"\\$&"):i}var Xx=Ha(function(i,l,p){return i+(p?"-":"")+l.toLowerCase()}),Kx=Ha(function(i,l,p){return i+(p?" ":"")+l.toLowerCase()}),e$=jm("toLowerCase");function t$(i,l,p){i=Xt(i),l=Nt(l);var $=l?Fa(i):0;if(!l||$>=l)return i;var q=(l-$)/2;return ol(Qo(q),p)+i+ol(Go(q),p)}function n$(i,l,p){i=Xt(i),l=Nt(l);var $=l?Fa(i):0;return l&&$<l?i+ol(l-$,p):i}function s$(i,l,p){i=Xt(i),l=Nt(l);var $=l?Fa(i):0;return l&&$<l?ol(l-$,p)+i:i}function r$(i,l,p){return p||l==null?l=0:l&&(l=+l),pb(Xt(i).replace(xi,""),l||0)}function a$(i,l,p){return(p?Bn(i,l,p):l===t)?l=1:l=Nt(l),lu(Xt(i),l)}function i$(){var i=arguments,l=Xt(i[0]);return i.length<3?l:l.replace(i[1],i[2])}var o$=Ha(function(i,l,p){return i+(p?"_":"")+l.toLowerCase()});function l$(i,l,p){return p&&typeof p!="number"&&Bn(i,l,p)&&(l=p=t),p=p===t?Bt:p>>>0,p?(i=Xt(i),i&&(typeof l=="string"||l!=null&&!Ru(l))&&(l=ls(l),!l&&Da(i))?Rr(qs(i),0,p):i.split(l,p)):[]}var c$=Ha(function(i,l,p){return i+(p?" ":"")+Nu(l)});function u$(i,l,p){return i=Xt(i),p=p==null?0:oa(Nt(p),0,i.length),l=ls(l),i.slice(p,p+l.length)==l}function p$(i,l,p){var $=C.templateSettings;p&&Bn(i,l,p)&&(l=t),i=Xt(i),l=gl({},l,$,Gm);var q=gl({},l.imports,$.imports,Gm),U=An(q),se=Hc(q,U),ue,_e,Ie=0,qe=l.interpolate||Ia,He="__p += '",nt=Gc((l.escape||Ia).source+"|"+qe.source+"|"+(qe===To?Tc:Ia).source+"|"+(l.evaluate||Ia).source+"|$","g"),mt="//# sourceURL="+(Kt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ve+"]")+`
`;i.replace(nt,function(vt,Ut,Wt,us,zn,ps){return Wt||(Wt=us),He+=i.slice(Ie,ps).replace(Cc,jh),Ut&&(ue=!0,He+=`' +
__e(`+Ut+`) +
'`),zn&&(_e=!0,He+=`';
`+zn+`;
__p += '`),Wt&&(He+=`' +
((__t = (`+Wt+`)) == null ? '' : __t) +
'`),Ie=ps+vt.length,vt}),He+=`';
`;var $t=Kt.call(l,"variable")&&l.variable;if(!$t)He=`with (obj) {
`+He+`
}
`;else if(Ec.test($t))throw new Rt(m);He=(_e?He.replace(pc,""):He).replace(mc,"$1").replace(fc,"$1;"),He="function("+($t||"obj")+`) {
`+($t?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ue?", __e = _.escape":"")+(_e?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+He+`return __p
}`;var Mt=jf(function(){return Zt(U,mt+"return "+He).apply(t,se)});if(Mt.source=He,qu(Mt))throw Mt;return Mt}function m$(i){return Xt(i).toLowerCase()}function f$(i){return Xt(i).toUpperCase()}function d$(i,l,p){if(i=Xt(i),i&&(p||l===t))return Qp(i);if(!i||!(l=ls(l)))return i;var $=qs(i),q=qs(l),U=Yp($,q),se=Jp($,q)+1;return Rr($,U,se).join("")}function _$(i,l,p){if(i=Xt(i),i&&(p||l===t))return i.slice(0,Xp(i)+1);if(!i||!(l=ls(l)))return i;var $=qs(i),q=Jp($,qs(l))+1;return Rr($,0,q).join("")}function h$(i,l,p){if(i=Xt(i),i&&(p||l===t))return i.replace(xi,"");if(!i||!(l=ls(l)))return i;var $=qs(i),q=Yp($,qs(l));return Rr($,q).join("")}function b$(i,l){var p=I,$=d;if(an(l)){var q="separator"in l?l.separator:q;p="length"in l?Nt(l.length):p,$="omission"in l?ls(l.omission):$}i=Xt(i);var U=i.length;if(Da(i)){var se=qs(i);U=se.length}if(p>=U)return i;var ue=p-Fa($);if(ue<1)return $;var _e=se?Rr(se,0,ue).join(""):i.slice(0,ue);if(q===t)return _e+$;if(se&&(ue+=_e.length-ue),Ru(q)){if(i.slice(ue).search(q)){var Ie,qe=_e;for(q.global||(q=Gc(q.source,Xt(So.exec(q))+"g")),q.lastIndex=0;Ie=q.exec(qe);)var He=Ie.index;_e=_e.slice(0,He===t?ue:He)}}else if(i.indexOf(ls(q),ue)!=ue){var nt=_e.lastIndexOf(q);nt>-1&&(_e=_e.slice(0,nt))}return _e+$}function y$(i){return i=Xt(i),i&&dc.test(i)?i.replace(ko,Gh):i}var g$=Ha(function(i,l,p){return i+(p?" ":"")+l.toUpperCase()}),Nu=jm("toUpperCase");function Pf(i,l,p){return i=Xt(i),l=p?t:l,l===t?Bh(i)?Jh(i):It(i):i.match(l)||[]}var jf=Pt(function(i,l){try{return Ft(i,t,l)}catch(p){return qu(p)?p:new Rt(p)}}),w$=ir(function(i,l){return Te(l,function(p){p=Ws(p),rr(i,p,Su(i[p],i))}),i});function x$(i){var l=i==null?0:i.length,p=gt();return i=l?G(i,function($){if(typeof $[1]!="function")throw new bs(o);return[p($[0]),$[1]]}):[],Pt(function($){for(var q=-1;++q<l;){var U=i[q];if(Ft(U[0],this,$))return Ft(U[1],this,$)}})}function $$(i){return Gb(gs(i,k))}function Lu(i){return function(){return i}}function v$(i,l){return i==null||i!==i?l:i}var k$=Bm(),E$=Bm(!0);function Zn(i){return i}function Mu(i){return ym(typeof i=="function"?i:gs(i,k))}function A$(i){return wm(gs(i,k))}function T$(i,l){return xm(i,gs(l,k))}var S$=Pt(function(i,l){return function(p){return Mi(p,i,l)}}),I$=Pt(function(i,l){return function(p){return Mi(i,p,l)}});function Du(i,l,p){var $=An(l),q=el(l,$);p==null&&!(an(l)&&(q.length||!$.length))&&(p=l,l=i,i=this,q=el(l,An(l)));var U=!(an(p)&&"chain"in p)||!!p.chain,se=lr(i);return Te(q,function(ue){var _e=l[ue];i[ue]=_e,se&&(i.prototype[ue]=function(){var Ie=this.__chain__;if(U||Ie){var qe=i(this.__wrapped__),He=qe.__actions__=Qn(this.__actions__);return He.push({func:_e,args:arguments,thisArg:i}),qe.__chain__=Ie,qe}return _e.apply(i,Q([this.value()],arguments))})}),i}function q$(){return K._===this&&(K._=nb),this}function Fu(){}function R$(i){return i=Nt(i),Pt(function(l){return $m(l,i)})}var O$=_u(G),C$=_u(Ke),N$=_u(Ee);function Uf(i){return $u(i)?Ti(Ws(i)):uy(i)}function L$(i){return function(l){return i==null?t:la(i,l)}}var M$=Wm(),D$=Wm(!0);function Pu(){return[]}function ju(){return!1}function F$(){return{}}function P$(){return""}function j$(){return!0}function U$(i,l){if(i=Nt(i),i<1||i>ht)return[];var p=Bt,$=Cn(i,Bt);l=gt(l),i-=Bt;for(var q=Wc($,l);++p<i;)l(p);return q}function B$(i){return Ot(i)?G(i,Ws):cs(i)?[i]:Qn(of(Xt(i)))}function z$(i){var l=++eb;return Xt(i)+l}var W$=il(function(i,l){return i+l},0),H$=hu("ceil"),V$=il(function(i,l){return i/l},1),G$=hu("floor");function Q$(i){return i&&i.length?Ko(i,Zn,tu):t}function Y$(i,l){return i&&i.length?Ko(i,gt(l,2),tu):t}function J$(i){return is(i,Zn)}function Z$(i,l){return is(i,gt(l,2))}function X$(i){return i&&i.length?Ko(i,Zn,au):t}function K$(i,l){return i&&i.length?Ko(i,gt(l,2),au):t}var ev=il(function(i,l){return i*l},1),tv=hu("round"),nv=il(function(i,l){return i-l},0);function sv(i){return i&&i.length?zc(i,Zn):0}function rv(i,l){return i&&i.length?zc(i,gt(l,2)):0}return C.after=Aw,C.ary=yf,C.assign=fx,C.assignIn=Of,C.assignInWith=gl,C.assignWith=dx,C.at=_x,C.before=gf,C.bind=Su,C.bindAll=w$,C.bindKey=wf,C.castArray=Fw,C.chain=_f,C.chunk=Gy,C.compact=Qy,C.concat=Yy,C.cond=x$,C.conforms=$$,C.constant=Lu,C.countBy=sw,C.create=hx,C.curry=xf,C.curryRight=$f,C.debounce=vf,C.defaults=bx,C.defaultsDeep=yx,C.defer=Tw,C.delay=Sw,C.difference=Jy,C.differenceBy=Zy,C.differenceWith=Xy,C.drop=Ky,C.dropRight=eg,C.dropRightWhile=tg,C.dropWhile=ng,C.fill=sg,C.filter=aw,C.flatMap=lw,C.flatMapDeep=cw,C.flatMapDepth=uw,C.flatten=pf,C.flattenDeep=rg,C.flattenDepth=ag,C.flip=Iw,C.flow=k$,C.flowRight=E$,C.fromPairs=ig,C.functions=Ex,C.functionsIn=Ax,C.groupBy=pw,C.initial=lg,C.intersection=cg,C.intersectionBy=ug,C.intersectionWith=pg,C.invert=Sx,C.invertBy=Ix,C.invokeMap=fw,C.iteratee=Mu,C.keyBy=dw,C.keys=An,C.keysIn=Jn,C.map=fl,C.mapKeys=Rx,C.mapValues=Ox,C.matches=A$,C.matchesProperty=T$,C.memoize=_l,C.merge=Cx,C.mergeWith=Cf,C.method=S$,C.methodOf=I$,C.mixin=Du,C.negate=hl,C.nthArg=R$,C.omit=Nx,C.omitBy=Lx,C.once=qw,C.orderBy=_w,C.over=O$,C.overArgs=Rw,C.overEvery=C$,C.overSome=N$,C.partial=Iu,C.partialRight=kf,C.partition=hw,C.pick=Mx,C.pickBy=Nf,C.property=Uf,C.propertyOf=L$,C.pull=_g,C.pullAll=ff,C.pullAllBy=hg,C.pullAllWith=bg,C.pullAt=yg,C.range=M$,C.rangeRight=D$,C.rearg=Ow,C.reject=gw,C.remove=gg,C.rest=Cw,C.reverse=Au,C.sampleSize=xw,C.set=Fx,C.setWith=Px,C.shuffle=$w,C.slice=wg,C.sortBy=Ew,C.sortedUniq=Tg,C.sortedUniqBy=Sg,C.split=l$,C.spread=Nw,C.tail=Ig,C.take=qg,C.takeRight=Rg,C.takeRightWhile=Og,C.takeWhile=Cg,C.tap=Qg,C.throttle=Lw,C.thru=ml,C.toArray=If,C.toPairs=Lf,C.toPairsIn=Mf,C.toPath=B$,C.toPlainObject=Rf,C.transform=jx,C.unary=Mw,C.union=Ng,C.unionBy=Lg,C.unionWith=Mg,C.uniq=Dg,C.uniqBy=Fg,C.uniqWith=Pg,C.unset=Ux,C.unzip=Tu,C.unzipWith=df,C.update=Bx,C.updateWith=zx,C.values=Qa,C.valuesIn=Wx,C.without=jg,C.words=Pf,C.wrap=Dw,C.xor=Ug,C.xorBy=Bg,C.xorWith=zg,C.zip=Wg,C.zipObject=Hg,C.zipObjectDeep=Vg,C.zipWith=Gg,C.entries=Lf,C.entriesIn=Mf,C.extend=Of,C.extendWith=gl,Du(C,C),C.add=W$,C.attempt=jf,C.camelCase=Qx,C.capitalize=Df,C.ceil=H$,C.clamp=Hx,C.clone=Pw,C.cloneDeep=Uw,C.cloneDeepWith=Bw,C.cloneWith=jw,C.conformsTo=zw,C.deburr=Ff,C.defaultTo=v$,C.divide=V$,C.endsWith=Yx,C.eq=Os,C.escape=Jx,C.escapeRegExp=Zx,C.every=rw,C.find=iw,C.findIndex=cf,C.findKey=gx,C.findLast=ow,C.findLastIndex=uf,C.findLastKey=wx,C.floor=G$,C.forEach=hf,C.forEachRight=bf,C.forIn=xx,C.forInRight=$x,C.forOwn=vx,C.forOwnRight=kx,C.get=Ou,C.gt=Ww,C.gte=Hw,C.has=Tx,C.hasIn=Cu,C.head=mf,C.identity=Zn,C.includes=mw,C.indexOf=og,C.inRange=Vx,C.invoke=qx,C.isArguments=pa,C.isArray=Ot,C.isArrayBuffer=Vw,C.isArrayLike=Yn,C.isArrayLikeObject=fn,C.isBoolean=Gw,C.isBuffer=Or,C.isDate=Qw,C.isElement=Yw,C.isEmpty=Jw,C.isEqual=Zw,C.isEqualWith=Xw,C.isError=qu,C.isFinite=Kw,C.isFunction=lr,C.isInteger=Ef,C.isLength=bl,C.isMap=Af,C.isMatch=ex,C.isMatchWith=tx,C.isNaN=nx,C.isNative=sx,C.isNil=ax,C.isNull=rx,C.isNumber=Tf,C.isObject=an,C.isObjectLike=un,C.isPlainObject=Bi,C.isRegExp=Ru,C.isSafeInteger=ix,C.isSet=Sf,C.isString=yl,C.isSymbol=cs,C.isTypedArray=Ga,C.isUndefined=ox,C.isWeakMap=lx,C.isWeakSet=cx,C.join=mg,C.kebabCase=Xx,C.last=xs,C.lastIndexOf=fg,C.lowerCase=Kx,C.lowerFirst=e$,C.lt=ux,C.lte=px,C.max=Q$,C.maxBy=Y$,C.mean=J$,C.meanBy=Z$,C.min=X$,C.minBy=K$,C.stubArray=Pu,C.stubFalse=ju,C.stubObject=F$,C.stubString=P$,C.stubTrue=j$,C.multiply=ev,C.nth=dg,C.noConflict=q$,C.noop=Fu,C.now=dl,C.pad=t$,C.padEnd=n$,C.padStart=s$,C.parseInt=r$,C.random=Gx,C.reduce=bw,C.reduceRight=yw,C.repeat=a$,C.replace=i$,C.result=Dx,C.round=tv,C.runInContext=de,C.sample=ww,C.size=vw,C.snakeCase=o$,C.some=kw,C.sortedIndex=xg,C.sortedIndexBy=$g,C.sortedIndexOf=vg,C.sortedLastIndex=kg,C.sortedLastIndexBy=Eg,C.sortedLastIndexOf=Ag,C.startCase=c$,C.startsWith=u$,C.subtract=nv,C.sum=sv,C.sumBy=rv,C.template=p$,C.times=U$,C.toFinite=cr,C.toInteger=Nt,C.toLength=qf,C.toLower=m$,C.toNumber=$s,C.toSafeInteger=mx,C.toString=Xt,C.toUpper=f$,C.trim=d$,C.trimEnd=_$,C.trimStart=h$,C.truncate=b$,C.unescape=y$,C.uniqueId=z$,C.upperCase=g$,C.upperFirst=Nu,C.each=hf,C.eachRight=bf,C.first=mf,Du(C,function(){var i={};return Bs(C,function(l,p){Kt.call(C.prototype,p)||(i[p]=l)}),i}(),{chain:!1}),C.VERSION=n,Te(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){C[i].placeholder=C}),Te(["drop","take"],function(i,l){zt.prototype[i]=function(p){p=p===t?1:wn(Nt(p),0);var $=this.__filtered__&&!l?new zt(this):this.clone();return $.__filtered__?$.__takeCount__=Cn(p,$.__takeCount__):$.__views__.push({size:Cn(p,Bt),type:i+($.__dir__<0?"Right":"")}),$},zt.prototype[i+"Right"]=function(p){return this.reverse()[i](p).reverse()}}),Te(["filter","map","takeWhile"],function(i,l){var p=l+1,$=p==ve||p==Be;zt.prototype[i]=function(q){var U=this.clone();return U.__iteratees__.push({iteratee:gt(q,3),type:p}),U.__filtered__=U.__filtered__||$,U}}),Te(["head","last"],function(i,l){var p="take"+(l?"Right":"");zt.prototype[i]=function(){return this[p](1).value()[0]}}),Te(["initial","tail"],function(i,l){var p="drop"+(l?"":"Right");zt.prototype[i]=function(){return this.__filtered__?new zt(this):this[p](1)}}),zt.prototype.compact=function(){return this.filter(Zn)},zt.prototype.find=function(i){return this.filter(i).head()},zt.prototype.findLast=function(i){return this.reverse().find(i)},zt.prototype.invokeMap=Pt(function(i,l){return typeof i=="function"?new zt(this):this.map(function(p){return Mi(p,i,l)})}),zt.prototype.reject=function(i){return this.filter(hl(gt(i)))},zt.prototype.slice=function(i,l){i=Nt(i);var p=this;return p.__filtered__&&(i>0||l<0)?new zt(p):(i<0?p=p.takeRight(-i):i&&(p=p.drop(i)),l!==t&&(l=Nt(l),p=l<0?p.dropRight(-l):p.take(l-i)),p)},zt.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},zt.prototype.toArray=function(){return this.take(Bt)},Bs(zt.prototype,function(i,l){var p=/^(?:filter|find|map|reject)|While$/.test(l),$=/^(?:head|last)$/.test(l),q=C[$?"take"+(l=="last"?"Right":""):l],U=$||/^find/.test(l);q&&(C.prototype[l]=function(){var se=this.__wrapped__,ue=$?[1]:arguments,_e=se instanceof zt,Ie=ue[0],qe=_e||Ot(se),He=function(Ut){var Wt=q.apply(C,Q([Ut],ue));return $&&nt?Wt[0]:Wt};qe&&p&&typeof Ie=="function"&&Ie.length!=1&&(_e=qe=!1);var nt=this.__chain__,mt=!!this.__actions__.length,$t=U&&!nt,Mt=_e&&!mt;if(!U&&qe){se=Mt?se:new zt(this);var vt=i.apply(se,ue);return vt.__actions__.push({func:ml,args:[He],thisArg:t}),new ys(vt,nt)}return $t&&Mt?i.apply(this,ue):(vt=this.thru(He),$t?$?vt.value()[0]:vt.value():vt)})}),Te(["pop","push","shift","sort","splice","unshift"],function(i){var l=Fo[i],p=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",$=/^(?:pop|shift)$/.test(i);C.prototype[i]=function(){var q=arguments;if($&&!this.__chain__){var U=this.value();return l.apply(Ot(U)?U:[],q)}return this[p](function(se){return l.apply(Ot(se)?se:[],q)})}}),Bs(zt.prototype,function(i,l){var p=C[l];if(p){var $=p.name+"";Kt.call(Ba,$)||(Ba[$]=[]),Ba[$].push({name:l,func:p})}}),Ba[al(t,Ae).name]=[{name:"wrapper",func:t}],zt.prototype.clone=yb,zt.prototype.reverse=gb,zt.prototype.value=wb,C.prototype.at=Yg,C.prototype.chain=Jg,C.prototype.commit=Zg,C.prototype.next=Xg,C.prototype.plant=ew,C.prototype.reverse=tw,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=nw,C.prototype.first=C.prototype.head,Ii&&(C.prototype[Ii]=Kg),C},Pa=Zh();et?((et.exports=Pa)._=Pa,Ne._=Pa):K._=Pa}).call(ma)})(zl,zl.exports);var s0=zl.exports;class t_ extends Sn{rawData2JSON(e){return e}get compareOperators(){return[]}getCellContent(e,t){var o,m,h;const n=`${this.column.table_column_name}__title`,a=(e==null?void 0:e.split(","))||[],r=((m=(o=t==null?void 0:t.row)==null?void 0:o[n])==null?void 0:m.split(","))||[];return{kind:bn.Custom,data:{kind:"link-cell",value:s0.zip(a,r).map(([g,u])=>({id:g||"",title:u||"Untitled"})),linkTable:this.column.property.linkTableName},copyData:((h=t==null?void 0:t.row)==null?void 0:h[n])||"",allowOverlay:!0}}cellData2RawData(e){return{rawData:e.data.value.map(t=>t.id).join(",")||null}}}ye(t_,"type",wt.Link);class n_ extends Sn{getTargetFieldInstance(){var r,o,m,h,g;const{lookupTargetFieldId:e}=this.column.property,t=(m=(o=(r=this.context)==null?void 0:r.linkField)==null?void 0:o.property)==null?void 0:m.linkTableName,n=Tn(t||""),a=(g=(h=this.context)==null?void 0:h.lookupTargetFieldsMap[n])==null?void 0:g[e];return a?ci(a.field,a.context):null}get entityFieldInstance(){const e=this.getTargetFieldInstance();return e?e.column.type===wt.Lookup?e.entityFieldInstance:e:null}rawData2JSON(e){const t=this.entityFieldInstance;return(t==null?void 0:t.rawData2JSON(e))||null}get compareOperators(){const e=this.entityFieldInstance;return(e==null?void 0:e.compareOperators)||[]}getCellContent(e,t){const n=this.entityFieldInstance;if(!n)return{kind:bn.Text,data:"",displayData:"",allowOverlay:!1};let a;return"getCellContentViaLookup"in n?a=n.getCellContentViaLookup(e):a=n==null?void 0:n.getCellContent(e,t),{...a,allowOverlay:!1}}cellData2RawData(e){return{rawData:null}}}ye(n_,"type",wt.Link);const es=class es extends Sn{static getColorValue(e,t="light"){return`#${es.colorNameValueMap[t][e]}`}get compareOperators(){return[lt.Equal,lt.NotEqual,lt.IsEmpty,lt.IsNotEmpty]}get options(){var e;return((e=this.column.property)==null?void 0:e.options)??[]}rawData2JSON(e){var a;const n=(((a=this.column.property)==null?void 0:a.options)??[]).find(r=>r.id===e);return(n==null?void 0:n.name)||""}getCellContent(e){var n;const t=((n=this.column.property)==null?void 0:n.options)??[];return{kind:bn.Custom,data:{kind:"select-cell",value:e,allowedValues:t},copyData:e,allowOverlay:!0}}getCellContentViaLookup(e){return new po(this.column).getCellContent(e)}cellData2RawData(e){if(e.data.value==null)return{rawData:null};if(e.data.kind!=="select-cell")throw new Error("invalid cell data");return e.data.value.length===0?{rawData:e.data.value}:this.options.map(t=>t.id).includes(e.data.value)?{rawData:e.data.value}:{rawData:this.addOption(e.data.value)[0].id||null,shouldUpdateColumnProperty:!0}}static getDefaultFieldProperty(){return{options:[]}}static generateOptionsByNames(e){return e.map((t,n)=>({id:t,name:t,color:es.colors.light[n%es.colors.light.length].name}))}changeOptionName(e,t){var r;const n=((r=this.column.property)==null?void 0:r.options)??[],a=n.find(o=>o.id===e);a&&(a.name=t,a.id=t),this.column.property.options=n}changeOptionColor(e,t){var r;const n=((r=this.column.property)==null?void 0:r.options)??[],a=n.find(o=>o.id===e);a&&(a.color=t),this.column.property.options=n}static getNextAvailableColor(e){const t=es.colors.light.map(a=>a.name),n=new Set(e.map(a=>a.color));return t.find(a=>!n.has(a))||t[e.length%t.length]}addOption(e){var r;const t=((r=this.column.property)==null?void 0:r.options)??[],n=es.getNextAvailableColor(t),a=[{id:e,name:e,color:n},...t];return this.column.property.options=a,a}deleteOption(e){var a;const t=((a=this.column.property)==null?void 0:a.options)??[],n=t.findIndex(r=>r.id===e);n>=0&&t.splice(n,1),this.column.property.options=t}};ye(es,"type",wt.Select),ye(es,"colors",{light:[{name:"default",value:"cccccc"},{name:"gray",value:"eeeeee"},{name:"brown",value:"e6c9a8"},{name:"pink",value:"ffd3e6"},{name:"red",value:"ffadad"},{name:"orange",value:"ffd6a5"},{name:"yellow",value:"fdffb6"},{name:"green",value:"caffbf"},{name:"cyan",value:"9bf6ff"},{name:"blue",value:"a0c4ff"},{name:"purple",value:"bdb2ff"}],dark:[{name:"default",value:"333333"},{name:"gray",value:"555555"},{name:"brown",value:"5b4d3d"},{name:"pink",value:"9a3f5e"},{name:"red",value:"a63232"},{name:"orange",value:"ff9f4d"},{name:"yellow",value:"6e6620"},{name:"green",value:"23563b"},{name:"cyan",value:"1c5858"},{name:"blue",value:"3168a8"},{name:"purple",value:"6e33b4"}]}),ye(es,"defaultColor",es.colors.light[0].name),ye(es,"colorNameValueMap",{light:es.colors.light.reduce((e,t)=>(e[t.name]=t.value,e),{}),dark:es.colors.dark.reduce((e,t)=>(e[t.name]=t.value,e),{})});let li=es;const Zl=class Zl extends Sn{get compareOperators(){return[lt.Contains,lt.NotContains,lt.IsEmpty,lt.IsNotEmpty]}get type(){return Zl.type}get options(){var e;return((e=this.column.property)==null?void 0:e.options)??[]}addOption(e){var r;const t=((r=this.column.property)==null?void 0:r.options)??[],n=li.getNextAvailableColor(t),a=[{id:e,name:e,color:n},...t];return this.column.property.options=a,a}rawData2JSON(e){var r;const t=((r=this.column.property)==null?void 0:r.options)??[];return(e?e.split(",").map(o=>o.trim()):[]).map(o=>{const m=t.find(h=>h.id===o);return(m==null?void 0:m.name)||""})}getCellContent(e){var t;return{kind:bn.Custom,data:{kind:"multi-select-cell",allowedValues:((t=this.column.property)==null?void 0:t.options)??[],values:e?e.split(",").map(n=>n.trim()):[]},copyData:e,allowOverlay:!0}}cellData2RawData(e){if(e.data.values==null)return{rawData:null};const t=new Set(this.options.map(r=>r.id)),n=[];let a=!1;for(const r of e.data.values)if(t.has(r))n.push(r);else{const o=this.addOption(r);n.push(o[0].id),a=!0}return{rawData:n.join(",")||null,shouldUpdateColumnProperty:a}}createFieldProperty(){return{options:[]}}};ye(Zl,"type",wt.MultiSelect);let po=Zl;class s_ extends Sn{get compareOperators(){return Bd}rawData2JSON(e){return e}getCellContent(e){var t,n,a,r;return e==null?{kind:bn.Number,data:void 0,displayData:"",allowOverlay:!0}:((t=this.column.property)==null?void 0:t.showAs)==="bar"?{kind:bn.Custom,data:{kind:"range-cell",min:0,max:((n=this.column.property)==null?void 0:n.divideBy)||100,step:1,label:(a=this.column.property)!=null&&a.showNumber?(e==null?void 0:e.toString())??"":"",value:e??0,color:(r=this.column.property)==null?void 0:r.color},copyData:(e==null?void 0:e.toString())??"",allowOverlay:!0}:{kind:bn.Number,data:e,displayData:e==null?"":`${e}`,allowOverlay:!0}}cellData2RawData(e){return e.kind===bn.Custom?{rawData:e.data.value}:{rawData:e.data??null}}}ye(s_,"type",wt.Number);class r_ extends Sn{get compareOperators(){return Bd}rawData2JSON(e){return e}getCellContent(e){return{kind:bn.Custom,data:{kind:"rating-cell",rating:e},copyData:`${e}`,allowOverlay:!0}}cellData2RawData(e){return{rawData:e.data.rating??null}}}ye(r_,"type",wt.Rating);class a_ extends Sn{get compareOperators(){return Rp}rawData2JSON(e){return e}getCellContent(e){return{kind:bn.Text,data:e?e+"":"",displayData:e?e+"":"",allowOverlay:!0}}cellData2RawData(e){return{rawData:e.data||null}}}ye(a_,"type",wt.Text);class i_ extends Sn{get compareOperators(){return Rp}rawData2JSON(e){return e}getCellContent(e){return{kind:bn.Text,data:e??"",displayData:e??"",allowOverlay:!0}}cellData2RawData(e){return{rawData:e.data||null}}}ye(i_,"type",wt.Title);class o_ extends Sn{get compareOperators(){return Rp}rawData2JSON(e){return e}getCellContent(e){return{kind:bn.Uri,data:e??"",allowOverlay:!0,hoverEffect:!0,onClickUri:t=>{window.open(e,"_blank")}}}cellData2RawData(e){return{rawData:e.data||null}}}ye(o_,"type",wt.URL);const r0=[Gd,Jd,Zd,po,s_,r_,li,a_,i_,o_,Xd,t_,Yd,e_,Qd,Kd],l_=r0.reduce((s,e)=>(s[e.type]=e,s),{[wt.Lookup]:n_});function ci(s,e){const t=l_[s.type];return new t(s,e)}const Sl={currentCallUserId:null};class c_{constructor(){ye(this,"filename")}}class mo{constructor(e){ye(this,"dataSpace");ye(this,"fieldMap");ye(this,"tableManager");ye(this,"updateCellSideEffect",async(e,t,n)=>{switch(e==null?void 0:e.type){case wt.Select:await this.tableManager.fields.select.updateFieldPropertyIfNeed(e,n);break;case wt.MultiSelect:await this.tableManager.fields.multiSelect.updateFieldPropertyIfNeed(e,n);break;case wt.Link:const a=await this.tableManager.rows.get(t,{raw:!0}),r=a==null?void 0:a[e.table_column_name];await this.tableManager.fields.link.updateLinkRelation(e,t,n,r);break}});this.table=e,this.dataSpace=this.table.dataSpace,this.tableManager=e}static getReadableRows(e,t){const n=t.reduce((a,r)=>(a[r.table_column_name]=r,a),{});return e.map(a=>{const r={};return Object.entries(a).forEach(([o,m])=>{const h=n[o];if(o.startsWith("cl_")&&h){const g=h.name;r[g]=m}else r[o]=m}),r})}async getFieldMap(){if(this.fieldMap)return this.fieldMap;const e=await this.dataSpace.column.list({table_name:this.table.rawTableName}),t=e.reduce((a,r)=>(a[r.table_column_name]=r,a),{}),n=e.reduce((a,r)=>(a[r.name]=r.table_column_name,a),{});return this.fieldMap={fieldRawColumnNameFieldMap:t,fieldNameRawColumnNameMap:n},this.fieldMap}static rawData2Json(e,t){const n={};return Object.entries(e).forEach(([a,r])=>{if(a!=="rowid")if(a==="_id")n[a]=r;else{const o=t[a];if(!o)return;const m=ci(o);n[o.name]=m.rawData2JSON(r)}}),n}transformData(e,t,n){const{fieldRawColumnNameFieldMap:a,fieldNameRawColumnNameMap:r}=t,o=[];Object.keys(e).forEach(h=>{const g=n!=null&&n.useFieldId?h:r[h];if(!(h==="_id"||h.startsWith("cl_")&&h.length>7))if(!g)delete e[h],o.push(h);else{const u=a[g],k=ci(u);e[h]=k.text2RawData(e[h])}});const m=[];return Object.entries(e).forEach(([h,g])=>{if(h==="_id")m.push([h,g]);else{const u=n!=null&&n.useFieldId?h:r[h];m.push([u,g])}}),{notExistKeys:o,rawData:Object.fromEntries(m)}}async get(e,t){const{fieldRawColumnNameFieldMap:n}=await this.getFieldMap();let a=`SELECT * FROM ${this.table.rawTableName} WHERE _id = ?`;t!=null&&t.withRowId&&(a=`SELECT rowid, * FROM ${this.table.rawTableName} WHERE _id = ?`);const r=await this.dataSpace.exec2(a,[e]);return r.length===0?null:t!=null&&t.raw?r[0]:mo.rawData2Json(r[0],n)}async query(e={},t){const{fieldRawColumnNameFieldMap:n,fieldNameRawColumnNameMap:a}=await this.getFieldMap();let r=[];if(t!=null&&t.rawQuery)r=await this.dataSpace.exec2(t.rawQuery);else if(t!=null&&t.viewId){const o=await this.dataSpace.view.get(t.viewId);if(!o)throw new Error("view not found");r=await this.dataSpace.exec2(o.query)}else{const{rawData:o,notExistKeys:m}=this.transformData(e||{},{fieldNameRawColumnNameMap:a,fieldRawColumnNameFieldMap:n});if(m.length>0)throw new Error(`not exist keys: ${m.join(",")}`);const h=Object.keys(o).length>0,g=`SELECT * FROM ${this.table.rawTableName} ${h?"WHERE":""} ${Object.keys(o).map(k=>`${k} = ?`).join(" AND ")} ${t!=null&&t.limit?`LIMIT ${t.limit}`:""} ${t!=null&&t.offset?`OFFSET ${t.offset}`:""}`,u=Object.values(o);r=await this.dataSpace.exec2(g,u)}return t!=null&&t.raw?r:r.map(o=>mo.rawData2Json(o,n))}getCreateData(e){return{_id:co(),_created_by:Sl.currentCallUserId,_last_edited_by:Sl.currentCallUserId,...e}}getUpdateData(e){const{_id:t,_created_by:n,_created_time:a,...r}=e;return{...r,_last_edited_time:new Date().toISOString().slice(0,19).replace("T"," ").replace("Z",""),_last_edited_by:Sl.currentCallUserId}}batchSyncCreate(e,t,n){const{fieldRawColumnNameFieldMap:a,fieldNameRawColumnNameMap:r}=t,o=e.map(k=>{const{rawData:O,notExistKeys:w}=this.transformData(k,{fieldNameRawColumnNameMap:r,fieldRawColumnNameFieldMap:a},{useFieldId:n==null?void 0:n.useFieldId});if(w.length>0)throw new Error(`not exist keys: ${w.join(",")}`);return this.getCreateData(O)}),m=Object.keys(o[0]).join(","),h=o.map(k=>Object.values(k)),g=Array(h[0].length).fill("?").join(","),u=this.dataSpace.db.prepare(`
      INSERT INTO ${this.table.rawTableName} (${m}) VALUES (${g})`);if(this.dataSpace.db instanceof c_)for(const k of h)u.run(k);else this.dataSpace.db.transaction(async()=>{for(const k of h)u.bind(k).step(),u.reset();u.finalize()});return o}async create(e,t){const{fieldRawColumnNameFieldMap:n,fieldNameRawColumnNameMap:a}=await this.getFieldMap(),{rawData:r,notExistKeys:o}=this.transformData(e,{fieldNameRawColumnNameMap:a,fieldRawColumnNameFieldMap:n},{useFieldId:t==null?void 0:t.useFieldId});if(o.length>0)throw new Error(`not exist keys: ${o.join(",")}`);const m=this.getCreateData(r),h=Object.keys(m).join(","),g=Object.values(m),u=Array(g.length).fill("?").join(","),k=`INSERT INTO ${this.table.rawTableName} (${h}) VALUES (${u})`;return await this.dataSpace.exec2(k,g),this.dataSpace.undoRedoManager.event(),m}async delete(e){try{return await this.dataSpace.exec2(`DELETE FROM ${this.table.rawTableName} WHERE _id = ?`,[e]),!0}catch{return!1}}async batchDelete(e){try{const t=`DELETE FROM ${this.table.rawTableName} WHERE _id IN (${e.map(()=>"?").join(",")})`;return console.log(t),await this.dataSpace.exec2(t,e),!0}catch{return!1}}async update(e,t,n){const{fieldRawColumnNameFieldMap:a,fieldNameRawColumnNameMap:r}=await this.getFieldMap(),{rawData:o,notExistKeys:m}=this.transformData(t,{fieldNameRawColumnNameMap:r,fieldRawColumnNameFieldMap:a},{useFieldId:n==null?void 0:n.useFieldId});if(m.length>0)throw new Error(`not exist keys: ${m.join(",")}`);const h=this.getUpdateData(o);for(const[O,w]of Object.entries(h)){const N=a[O];N&&await this.updateCellSideEffect(N,e,w)}const g=Object.values(h),u=`UPDATE ${this.table.rawTableName} SET ${Object.keys(h).map(O=>`${O} = ?`).join(",")} WHERE _id = ?`,k=[...g,e];return await this.dataSpace.exec2(u,k),this.dataSpace.undoRedoManager.event(),{id:e,...h}}async highlight(e){postMessage({type:_n.HighlightRow,payload:{tableId:this.table.id,rowId:e}})}}class a0{constructor(e){ye(this,"dataSpace");ye(this,"db");ye(this,"getEffectRowsByRelationDeleted",async(e,t,n=this.dataSpace.db)=>{const[a,r]=e.replace("lk_","").split("__",2),o=await this.dataSpace.syncExec2(`SELECT * FROM ${e} WHERE self = ? AND link_field_id = ?`,[t.self,t.link_field_id],n);return{[a]:o.reduce((m,h)=>{const g=h.link_field_id;return m[g]||(m[g]=new Set),m[g].add(h.self),m},{[t.link_field_id]:new Set([t.self])})}});ye(this,"getDiff",(e,t)=>{const n=(e==null?void 0:e.split(/,/))||[],a=(t==null?void 0:t.split(/,/))||[],r=(n==null?void 0:n.filter(m=>!(a!=null&&a.includes(m))))||[],o=(a==null?void 0:a.filter(m=>!(n!=null&&n.includes(m))))||[];return{added:r,removed:o}});ye(this,"getEffectRows",async(e,t,n=this.dataSpace.db)=>{const r=(await n.selectObjects(`SELECT name FROM sqlite_master WHERE type='table' AND name LIKE 'lk_tb_%${e}%'`)).map(m=>m.name),o={};return r.forEach(async m=>{const h=`SELECT self FROM ${m} WHERE ref IN (${t.map(()=>"?").join(",")})`,g=[...t],u=await n.selectObjects(h,g),k=m.replace(`__${e}`,"").replace("lk_",""),O=u.map(w=>w.self);o[k]||(o[k]=[]),o[k]=[...o[k],...O]}),o});ye(this,"getTableNodeName",async e=>{const t=Tn(e),n=await this.dataSpace.tree.get(t);return(n==null?void 0:n.name)||"Untitled"});ye(this,"getPairedLinkField",async e=>{const{table_name:t,table_column_name:n}=e,a={linkTableName:t,linkColumnName:n},r=await this.getTableNodeName(t),o=Math.random().toString(36).slice(2,8);return{name:`${r}_${o}`,type:wt.Link,table_name:e.property.linkTableName,table_column_name:e.property.linkColumnName,property:a}});ye(this,"getRelationTableName",e=>{const{table_name:t,property:n}=e;return`lk_${t}__${n.linkTableName}`});ye(this,"getParentRelationTableName",e=>{const{table_name:t,property:n}=e;return`lk_${n.linkTableName}__${t}`});ye(this,"getLinkCellTitle",async(e,t)=>{const{property:n}=e;if(!t)return null;const a=(t==null?void 0:t.split(","))||[],r=`SELECT _id,title FROM ${n.linkTableName} WHERE _id IN (${a.map(()=>"?").join(",")})`,o=[...a],m=await this.dataSpace.exec2(r,o),h=m.reduce((g,u)=>(g[u._id]=u.title,g),{});return m.map(g=>h[g._id]).join(",")});ye(this,"getLinkCellValue",async(e,t,n=this.dataSpace.db)=>{const r=`SELECT * FROM ${this.getRelationTableName(e)} WHERE link_field_id = ? AND self IN (${t.map(()=>"?").join(",")}) ORDER BY rowid ASC`,o=[e.table_column_name,...t];return(await this.dataSpace.syncExec2(r,o,n)).reduce((g,u)=>{const k=u.self;return g[k]||(g[k]=[]),g[k].push(u.ref),g},{})});ye(this,"updateLinkCell",async(e,t,n)=>{const a=await this.dataSpace.column.getColumn(e,t);if(!a)return;const r=await this.getLinkCellValue(a,n);n.forEach(async m=>{var u;const h=((u=r[m])==null?void 0:u.join(","))||null,g=await this.getLinkCellTitle(a,h);this.dataSpace.db.exec({sql:`UPDATE ${e} SET ${t} = ?, ${t}__title = ? WHERE _id = ?`,bind:[h,g,m]})}),(await this.dataSpace.reference.getEffectedFields(e,t)).forEach(async m=>{this.table.fields.lookup.updateColumn({tableName:m.table_name,tableColumnName:m.table_column_name,rowIds:n})})});ye(this,"updateLinkRelation",async(e,t,n,a)=>{const{added:r,removed:o}=this.getDiff(n,a),m=this.getRelationTableName(e),h=this.getParentRelationTableName(e);this.dataSpace.db.transaction(async g=>{o.length&&g.exec({sql:`DELETE FROM ${m} WHERE self = ? AND ref IN (${o.map(()=>"?").join(",")})`,bind:[t,...o]}),o.forEach(u=>{g.exec({sql:`DELETE FROM ${h} WHERE self = ? AND ref = ? AND link_field_id = ?`,bind:[u,t,e.property.linkColumnName]})}),r.forEach(u=>{g.exec({sql:`INSERT INTO ${m} (self,ref,link_field_id) VALUES (?,?,?)`,bind:[t,u,e.table_column_name]}),g.exec({sql:`INSERT INTO ${h} (self,ref,link_field_id) VALUES (?,?,?)`,bind:[u,t,e.property.linkColumnName]})})})});ye(this,"addField",async(e,t=this.dataSpace.db)=>{const{table_name:n,table_column_name:a}=e,r=await this.getPairedLinkField(e);console.log("pairedField",r,e),this.dataSpace.syncExec2(`INSERT INTO ${$n} (name,type,table_name,table_column_name,property) VALUES (?,?,?,?,?)`,[r.name,r.type,r.table_name,r.table_column_name,JSON.stringify(r.property)],t),t.exec(`ALTER TABLE ${n} ADD COLUMN ${a} TEXT;
        ALTER TABLE ${n} ADD COLUMN ${a}__title TEXT;
        ALTER TABLE ${r.table_name} ADD COLUMN ${r.table_column_name} TEXT;
        ALTER TABLE ${r.table_name} ADD COLUMN ${r.table_column_name}__title TEXT;
        `),t.exec("PRAGMA foreign_keys = OFF;"),await this.dataSpace.reference.add({self_table_name:n,self_table_column_name:`${a}__title`,ref_table_name:r.table_name,ref_table_column_name:"title",link_table_name:n,link_table_column_name:a},t),await this.dataSpace.reference.add({self_table_name:r.table_name,self_table_column_name:`${r.table_column_name}__title`,ref_table_name:n,ref_table_column_name:"title",link_table_name:r.table_name,link_table_column_name:r.table_column_name},t),t.exec("PRAGMA foreign_keys = ON;");const o=`lk_${n}__${r.table_name}`,m=`lk_${r.table_name}__${n}`;return t.exec(`CREATE TABLE IF NOT EXISTS ${o} (
          self TEXT,
          ref TEXT,
          link_field_id TEXT,
          PRIMARY KEY (self,ref,link_field_id),
          FOREIGN KEY (self) REFERENCES ${n}(_id) ON DELETE CASCADE,
          FOREIGN KEY (ref) REFERENCES ${r.table_name}(_id) ON DELETE CASCADE
        );

        CREATE TRIGGER IF NOT EXISTS data_delete_trigger_${o}
        AFTER DELETE ON ${o}
        FOR EACH ROW
        BEGIN
            SELECT eidos_data_event_delete('${o}', json_object('self',OLD.self,'ref',OLD.ref,'link_field_id',OLD.link_field_id));
        END;

        CREATE TRIGGER IF NOT EXISTS data_insert_trigger_${o}
        AFTER INSERT ON ${o}
        FOR EACH ROW
        BEGIN
            SELECT eidos_data_event_insert('${o}', json_object('self',NEW.self,'ref',NEW.ref,'link_field_id',NEW.link_field_id));
        END;

        CREATE TABLE IF NOT EXISTS ${m} (
          self TEXT,
          ref TEXT,
          link_field_id TEXT,
          PRIMARY KEY (self,ref,link_field_id),
          FOREIGN KEY (self) REFERENCES ${r.table_name}(_id) ON DELETE CASCADE,
          FOREIGN KEY (ref) REFERENCES ${n}(_id) ON DELETE CASCADE
        );

        CREATE TRIGGER IF NOT EXISTS data_delete_trigger_${m}
        AFTER DELETE ON ${m}
        FOR EACH ROW
        BEGIN
            SELECT eidos_data_event_delete('${m}', json_object('self',OLD.self,'ref',OLD.ref,'link_field_id',OLD.link_field_id));
        END;

        CREATE TRIGGER IF NOT EXISTS data_insert_trigger_${m}
        AFTER INSERT ON ${m}
        FOR EACH ROW
        BEGIN
            SELECT eidos_data_event_insert('${m}', json_object('self',NEW.self,'ref',NEW.ref,'link_field_id',NEW.link_field_id));
        END;
        `),t});this.table=e,this.dataSpace=this.table.dataSpace,this.db=this.table.db||this.dataSpace.db}async beforeDeleteTable(e,t=this.dataSpace.db){(await t.selectObjects(`SELECT name FROM sqlite_master WHERE type='table' AND (name LIKE 'lk_${e}__%' OR name LIKE 'lk_%__${e}')`)).forEach(async a=>{const{name:r}=a;(await t.selectObjects("SELECT name FROM sqlite_master WHERE type='trigger' AND tbl_name = ?",[r])).forEach(m=>{t.exec(`DROP TRIGGER ${m.name}`)}),t.exec(`DROP TABLE ${r}`)}),await this.dataSpace.reference.delBy({self_table_name:e},t)}async beforeDeleteColumn(e,t,n=this.dataSpace.db){const a=await this.dataSpace.column.getColumn(e,t);if(!a)return;const r=await this.getPairedLinkField(a),o=`lk_${e}__${r.table_name}`,m=`lk_${r.table_name}__${e}`;n.exec({sql:`DELETE FROM ${o} WHERE link_field_id = ?`,bind:[t]}),n.exec({sql:`DELETE FROM ${m} WHERE link_field_id = ?`,bind:[r.table_column_name]})}}class i0{constructor(e){ye(this,"dataSpace");ye(this,"getLookupContext",async(e,t)=>{const n=await this.dataSpace.column.getColumn(e,t);if(!n)return null;const a=n,{linkFieldId:r,lookupTargetFieldId:o}=a.property,m=await this.dataSpace.column.getColumn(e,r);if(!m)return null;const h=await this.dataSpace.column.getColumn(m.property.linkTableName,o);if(!h)return null;let g=null;return h.type===wt.Lookup&&(g=await this.getLookupContext(m.property.linkTableName,o)),{linkField:m,lookupTargetFieldsMap:{[Tn(m.property.linkTableName)]:{[o]:{field:h,context:g}}}}});ye(this,"onPropertyChange",async(e,t)=>{if(!e)return;const{table_name:n,table_column_name:a}=e,{linkFieldId:r,lookupTargetFieldId:o}=e.property;if(r===t.linkFieldId&&o===t.lookupTargetFieldId)return;const m=await this.dataSpace.column.getColumn(n,r);if(!m)return;let h=m;if(r!==t.linkFieldId){const g=await this.dataSpace.column.getColumn(n,t.linkFieldId);if(!g)return;h=g}r===t.linkFieldId&&o!==t.lookupTargetFieldId&&await this.dataSpace.reference.delBy({self_table_name:n,self_table_column_name:a,ref_table_name:m.property.linkTableName,ref_table_column_name:o,link_table_name:n,link_table_column_name:r}),await this.dataSpace.reference.add({self_table_name:n,self_table_column_name:a,ref_table_name:h.property.linkTableName,ref_table_column_name:t.lookupTargetFieldId,link_table_name:h.table_name,link_table_column_name:h.table_column_name})});ye(this,"getLinkTitleContext",async(e,t)=>{const n=await this.dataSpace.column.getColumn(e,t.replace("__title",""));if(n)return{targetTableColumnName:"title",targetTableName:n.property.linkTableName,linkFieldId:n.table_column_name}});ye(this,"_getLookupContext",async(e,t)=>{const n=await this.dataSpace.column.getColumn(e,t);if(!n)return;const a=await this.getLookupContext(e,t),o=ci(n,a).getTargetFieldInstance();if(!o)return;const{table_column_name:m,table_name:h}=o.column;return{targetTableColumnName:m,targetTableName:h,linkFieldId:n.property.linkFieldId}});ye(this,"getFieldContext",(e,t)=>t.endsWith("__title")?this.getLinkTitleContext(e,t):this._getLookupContext(e,t));ye(this,"updateColumn",async e=>{const{tableName:t,tableColumnName:n,db:a=this.dataSpace.db,rowIds:r}=e,o=await this.getFieldContext(t,n);if(!o)return;const{targetTableColumnName:m,targetTableName:h,linkFieldId:g}=o;let u=`
    UPDATE ${t}
    SET ${n} = (
        SELECT GROUP_CONCAT(b.${m})
        FROM ${h} as b
        WHERE ',' || ${t}.${g} || ',' LIKE '%,' || b._id || ',%'
    )`;r!=null&&r.length?(u+=` WHERE ${t}._id IN (${r.map(()=>"?").join(",")})`,this.dataSpace.syncExec2(u,[...r],a)):this.dataSpace.syncExec2(u,[],a)});this.table=e,this.dataSpace=this.table.dataSpace}}class o0{constructor(e){ye(this,"dataSpace");ye(this,"updateFieldPropertyIfNeed",async(e,t)=>{const n=new po(e),a=n.getCellContent(t),{shouldUpdateColumnProperty:r}=n.cellData2RawData(a);r&&await this.dataSpace.updateColumnProperty({tableColumnName:e.table_column_name,tableName:e.table_name,property:n.column.property,type:e.type})});ye(this,"updateSelectOptionName",async(e,t)=>{const{from:n,to:a}=t,{table_column_name:r,table_name:o}=e;this.dataSpace.exec(`
    UPDATE ${o}
    SET ${r} = 
      CASE
        WHEN ${r} = '${n}' THEN '${a}'
        ELSE
          CASE
            WHEN instr(${r}, ',${n},') > 0 THEN replace(${r}, ',${n},', ',${a},')
            WHEN substr(${r}, 1, length('${n}')) = '${n}' THEN replace(${r}, '${n},', '${a},')
            WHEN substr(${r}, -length('${n}')) = '${n}' THEN replace(${r}, ',${n}', ',${a}')
          END
      END
    WHERE ${r} LIKE '%${n}%'
  `)});ye(this,"deleteSelectOption",async(e,t)=>{const{table_column_name:n,table_name:a}=e;this.dataSpace.exec(`
    UPDATE ${a}
    SET ${n} = 
      CASE
        WHEN ${n} = '${t}' THEN NULL
        ELSE
          CASE
            WHEN instr(${n}, ',${t},') > 0 THEN replace(${n}, ',${t},', ',')
            WHEN substr(${n}, 1, length('${t}')) = '${t}' THEN replace(${n}, '${t},', '')
            WHEN substr(${n}, -length('${t}')) = '${t}' THEN replace(${n}, ',${t}', '')
          END
      END
    WHERE ${n} LIKE '%${t}%'
  `)});this.table=e,this.dataSpace=this.table.dataSpace}}const Gi=class Gi{constructor(e){ye(this,"dataSpace");ye(this,"updateFieldPropertyIfNeed",async(e,t)=>{const n=new li(e),a=n.getCellContent(t),{shouldUpdateColumnProperty:r}=n.cellData2RawData(a);r&&await this.dataSpace.updateColumnProperty({tableColumnName:e.table_column_name,tableName:e.table_name,property:n.column.property,type:e.type})});ye(this,"updateSelectOptionName",async(e,t)=>{const{from:n,to:a}=t,{table_column_name:r,table_name:o}=e;this.dataSpace.exec(`UPDATE ${o} SET ${r} = '${a}' WHERE ${r} = '${n}'`)});ye(this,"deleteSelectOption",async(e,t)=>{const{table_column_name:n,table_name:a}=e;this.dataSpace.exec(`UPDATE ${a} SET ${n} = NULL WHERE ${n} = '${t}'`)});ye(this,"beforeConvert",async(e,t=this.dataSpace.db)=>{const{table_column_name:n,table_name:a}=e,o=(await this.dataSpace.syncExec2(`SELECT DISTINCT ${n} FROM ${a}`,[],t)).map(h=>h[n]).filter(g1);if(o.length>Gi.MAX_SELECT_OPTIONS){const h=new Error(`The select field ${e.name} in table ${a} has more than ${Gi.MAX_SELECT_OPTIONS} options(${o.length}), please reduce the options first.`);throw postMessage({type:_n.Error,data:{message:h.message}}),h}return li.generateOptionsByNames(o)});this.table=e,this.dataSpace=this.table.dataSpace}};ye(Gi,"MAX_SELECT_OPTIONS",512);let _p=Gi;class l0{constructor(e){ye(this,"dataSpace");this.table=e,this.dataSpace=this.table.dataSpace,this.table=e}get lookup(){return new i0(this.table)}get select(){return new _p(this.table)}get multiSelect(){return new o0(this.table)}get link(){return new a0(this.table)}}class c0{constructor(e){ye(this,"updateEffectCells",async e=>{const{table:t,rowId:n,diffKeys:a}=e,r=Tn(t),m=await new ns(r,this.dataSpace).fields.link.getEffectRows(t,[n]),g=(await Promise.all(a.map(u=>this.dataSpace.reference.getEffectedFields(t,u)))).flat().reduce((u,k)=>(u[k.table_name]||(u[k.table_name]=[]),u[k.table_name].push(k.table_column_name),u),{});Object.entries(m).forEach(([u,k])=>{var w;const O=new ns(Tn(u),this.dataSpace);(w=g[u])==null||w.forEach(N=>{O.fields.lookup.updateColumn({tableName:u,tableColumnName:N,rowIds:k})})})});this.dataSpace=e}}const u0=(s,e,t)=>`
        ALTER TABLE ${s} ADD COLUMN ${e}_new ${t};
        UPDATE ${s} SET ${e}_new = ${e};
        ALTER TABLE ${s} RENAME COLUMN ${e} TO ${e}_old;
        ALTER TABLE ${s} RENAME COLUMN ${e}_new TO ${e};
        ALTER TABLE ${s} DROP COLUMN ${e}_old;

    `;class Us{constructor(e){ye(this,"name","");ye(this,"JSONFields",[]);ye(this,"toJson",e=>(Object.entries(e).forEach(([t,n])=>{this.JSONFields.includes(t)&&n&&(e[t]=JSON.parse(n))}),e));ye(this,"transformData",e=>{const t=Object.entries(e).map(([h,g])=>(typeof g=="object"&&g!=null&&(g=JSON.stringify(g)),[h,g])),n=t.map(([h,g])=>`${h} = ?`).join(", "),a=t.map(([h])=>h).join(", "),r=t.map(()=>"?").join(", "),o=t.map(([h])=>`${h} = ?`).join(" AND "),m=t.map(([,h])=>h);return{kv:t,updateKPlaceholder:n,insertKPlaceholder:a,insertVPlaceholder:r,deleteKPlaceholder:o,values:m}});this.dataSpace=e}initTable(e){this.dataSpace.exec(e)}async del(e,t=this.dataSpace.db){return this.dataSpace.syncExec2(`DELETE FROM ${this.name} WHERE id = ?;`,[e],t),!0}async delBy(e,t=this.dataSpace.db){const{deleteKPlaceholder:n,values:a}=this.transformData(e);return this.dataSpace.syncExec2(`DELETE FROM ${this.name} WHERE ${n};`,a,t),!0}async get(e){const t=await this.dataSpace.exec2(`SELECT * FROM ${this.name} where id = ?;`,[e]);if(t.length===0)return null;const n=t[0];return this.toJson(n)}async add(e,t=this.dataSpace.db){const{insertKPlaceholder:n,insertVPlaceholder:a,values:r}=this.transformData(e);return this.dataSpace.syncExec2(`INSERT INTO ${this.name} (${n}) VALUES (${a});`,r,t),e}async set(e,t){const{updateKPlaceholder:n,values:a}=this.transformData(t);return await this.dataSpace.exec2(`UPDATE ${this.name} SET ${n} WHERE id = ?`,[...a,e]),!0}async list(e,t){var o;let n=[],a=`SELECT ${((o=t==null?void 0:t.fields)==null?void 0:o.join(", "))||"*"} FROM ${this.name}`,r=[];if(e&&Object.keys(e).length>0){const m=Object.entries(e),h=m.map(([g,u])=>u==null?`${g} IS NULL`:`${g} = ?`).join(" AND ");r=m.filter(([,g])=>g!=null).map(([,g])=>g),a+=` WHERE ${h}`}return t!=null&&t.orderBy&&(a+=` ORDER BY ${t.orderBy} ${t.order||"ASC"}`),t!=null&&t.limit&&(a+=` LIMIT ${t.limit}`),t!=null&&t.offset&&(a+=` OFFSET ${t.offset}`),a+=";",n=await this.dataSpace.exec2(a,r),n.map(m=>this.toJson(m))}}const p0=new BroadcastChannel(Tp);class Pr extends Us{constructor(){super(...arguments);ye(this,"name",$n);ye(this,"createTableSql",`
  CREATE TABLE IF NOT EXISTS ${$n} (
    name TEXT,
    type TEXT,
    table_name TEXT,
    table_column_name TEXT,
    property TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(table_name, table_column_name)
  );

  CREATE TRIGGER IF NOT EXISTS column_insert_trigger_${$n}
  AFTER INSERT ON ${$n}
  FOR EACH ROW
  BEGIN
      SELECT eidos_column_event_insert(new.table_name, json_object('name', new.name, 'type', new.type, 'table_name', new.table_name, 'table_column_name', new.table_column_name, 'property', new.property));
  END;

  CREATE TRIGGER IF NOT EXISTS column_update_trigger_${$n}
  AFTER UPDATE ON ${$n}
  FOR EACH ROW
  BEGIN
      SELECT eidos_column_event_update(new.table_name, json_object('name', new.name, 'type', new.type, 'table_name', new.table_name, 'table_column_name', new.table_column_name, 'property', new.property), json_object('name', old.name, 'type', old.type, 'table_name', old.table_name, 'table_column_name', old.table_column_name, 'property', old.property));
  END;
`);ye(this,"JSONFields",["property"])}static getColumnTypeByFieldType(t){return{[wt.Checkbox]:"BOOLEAN",[wt.Number]:"REAL",[wt.Rating]:"INT"}[t]??"TEXT"}async add(t){const{name:n,type:a,table_name:r,table_column_name:o,property:m}=t,h=Pr.getColumnTypeByFieldType(a),g=Tn(r);return await this.dataSpace.db.transaction(async u=>{let k=m;switch(a===wt.Formula&&(k={formula:"upper(title)"}),this.dataSpace.syncExec2(`INSERT INTO ${$n} (name,type,table_name,table_column_name,property) VALUES (?,?,?,?,?)`,[n,a,r,o,JSON.stringify(k)],u),a){case wt.CreatedBy:this.dataSpace.syncExec2(`ALTER TABLE ${r} ADD COLUMN ${o} GENERATED ALWAYS AS (_created_by);`,[],u);break;case wt.LastEditedBy:this.dataSpace.syncExec2(`ALTER TABLE ${r} ADD COLUMN ${o} GENERATED ALWAYS AS (_last_edited_by);`,[],u);break;case wt.LastEditedTime:this.dataSpace.syncExec2(`ALTER TABLE ${r} ADD COLUMN ${o} GENERATED ALWAYS AS (_last_edited_time);`,[],u);break;case wt.CreatedTime:this.dataSpace.syncExec2(`ALTER TABLE ${r} ADD COLUMN ${o} GENERATED ALWAYS AS (_created_time);`,[],u);break;case wt.Formula:this.dataSpace.syncExec2(`ALTER TABLE ${r} ADD COLUMN ${o} GENERATED ALWAYS AS (upper(title));`,[],u);break;case wt.Link:await new ns(g,this.dataSpace).fields.link.addField(t,u);break;default:this.dataSpace.syncExec2(`ALTER TABLE ${r} ADD COLUMN ${o} ${h};`,[],u);break}}),t}async addField(t){const n=await this.add(t);return await this.dataSpace.onTableChange(this.dataSpace.dbName,t.table_name),n}async getColumn(t,n){const a=await this.dataSpace.exec2(`SELECT * FROM ${$n} WHERE table_name=? AND table_column_name=?`,[t,n]);return a.length===0?null:this.toJson(a[0])}set(t,n){throw new Error("Method not implemented.")}del(t){throw new Error("Method not implemented.")}async deleteField(t,n){const a=[t];try{await this.dataSpace.db.transaction(async r=>{const o=async(h,g)=>{await this.dataSpace.tableFullTextSearch.updateTrigger(h,[g]),await this.dataSpace.onTableChange(this.dataSpace.dbName,h,[g]),this.dataSpace.syncExec2(`DELETE FROM ${$n} WHERE table_column_name = ? AND table_name = ?;`,[g,h],r),this.dataSpace.syncExec2(`ALTER TABLE ${h} DROP COLUMN ${g};`,[],r)},m=await this.getColumn(t,n);if((m==null?void 0:m.type)===wt.Link){const h=new ns(Tn(t),this.dataSpace),g=await h.fields.link.getPairedLinkField(m);a.push(g.table_name),await h.fields.link.beforeDeleteColumn(t,n,r),await o(g.table_name,g.table_column_name)}await o(t,n)})}catch(r){console.error(r),this.dataSpace.notify({title:"Error",description:"Failed to delete column, because it is referenced by other fields"})}return a}async deleteByRawTableName(t,n=this.dataSpace.db){this.dataSpace.syncExec2(`DELETE FROM ${$n} WHERE table_name=?;`,[t],n)}async updateProperty(t){const{tableName:n,tableColumnName:a,property:r,type:o}=t;await this.dataSpace.db.transaction(async m=>{const h=await this.getColumn(n,a);if(h)switch(await this.dataSpace.sql`UPDATE ${Symbol($n)} SET property = ${JSON.stringify(r)} WHERE table_column_name = ${a} AND table_name = ${n};`,o){case wt.Lookup:await new ns(Tn(n),this.dataSpace).fields.lookup.onPropertyChange(h,r);break;case wt.Link:const u=await this.getColumn(n,a),k=r.linkTableName;(u==null?void 0:u.property.linkTableName)!==k&&console.log("update link title column");break;case wt.Formula:const w=await this.list({table_name:n}),N=F1(a,w);m.exec(`
            ALTER TABLE ${n} DROP COLUMN ${a};
            ALTER TABLE ${n} ADD COLUMN ${a} GENERATED ALWAYS AS ${N};
            `),p0.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.UpdateColumn,table:n,column:t}});break}})}async list(t){return(await super.list(t)).filter(a=>!a.table_column_name.startsWith("_"))}static isColumnTypeChanged(t,n){return Pr.getColumnTypeByFieldType(t)!==Pr.getColumnTypeByFieldType(n)}async changeType(t,n,a){const r=l_[a].getDefaultFieldProperty();let o=r;const m=await this.getColumn(t,n);if(!m)return;const h=Pr.getColumnTypeByFieldType(m.type),g=Pr.getColumnTypeByFieldType(a),u=h!==g;if(await this.dataSpace.db.transaction(async k=>{if(u){this.dataSpace.blockUIMsg("Changing column type"),await this.dataSpace.dataChangeTrigger.unRegisterTrigger(this.dataSpace.dbName,t),this.dataSpace.activeUndoManager&&this.dataSpace.undoRedoManager.deactivate();let O=`DROP TRIGGER IF EXISTS data_update_trigger_${t};
        DROP TRIGGER IF EXISTS data_insert_trigger_${t};
        DROP TRIGGER IF EXISTS data_delete_trigger_${t};`;O+=`DROP INDEX IF EXISTS ${Pd(t,n)};`,O+=u0(t,n,g),this.dataSpace.syncExec2(O,[],k)}switch(a){case wt.MultiSelect:case wt.Select:const w=await new ns(Tn(t),this.dataSpace).fields.select.beforeConvert(m,k);o={...r,options:w};break}this.dataSpace.syncExec2(`UPDATE ${$n} SET type = ?, property = ? WHERE table_column_name = ? AND table_name = ?;`,[a,JSON.stringify(o),n,t],k)}),this.dataSpace.blockUIMsg(null),u){const k=await this.dataSpace.listRawColumns(t);await this.dataSpace.dataChangeTrigger.setTrigger(this.dataSpace,t,k)}}}class ns{constructor(e,t){ye(this,"rawTableName");ye(this,"db");this.id=e,this.dataSpace=t,this.rawTableName=br(e),this.db=t.db}get compute(){return new c0(this.dataSpace)}get rows(){return new mo(this)}get fields(){return new l0(this)}get index(){return new n0(this)}async isExist(e){return!!await this.dataSpace.getTreeNode(e)}async get(e){const t=await this.dataSpace.listViews(e),n=await this.dataSpace.getTreeNode(e);return n?{id:n.id,name:n.name,views:t}:null}async del(e){const t=`tb_${e}`;return await this.dataSpace.db.transaction(async n=>{this.fields.link.beforeDeleteTable(t,n),n.exec(`DROP TABLE ${t}`),await this.dataSpace.column.deleteByRawTableName(t,n),await this.dataSpace.view.deleteByTableId(e,n),await this.dataSpace.tree.del(e,n)}),!0}async hasSystemColumn(e,t){return(await this.dataSpace.exec2(`PRAGMA table_info(tb_${e})`)).map(r=>r.name).includes(t)}async fixTable(e){if(!await this.hasSystemColumn(e,"_created_time")){const a=(await this.dataSpace.exec2(`SELECT sql FROM sqlite_master WHERE type='table' AND name='tb_${e}'`))[0].sql,{sql:r}=Vd(a,`
      _created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      _last_edited_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      _created_by TEXT DEFAULT 'unknown',
      _last_edited_by TEXT DEFAULT 'unknown'
  `);console.log(r);const o=await this.dataSpace.exec2(r);console.log(o)}}static generateCreateTableSql(e){const t=Bl().split("-").join(""),n=br(t),a=e.filter(m=>m.name.toLowerCase()!=="title"),r=a.map((m,h)=>jd());let o=`
CREATE TABLE ${n} (
  _id TEXT PRIMARY KEY NOT NULL,
  title TEXT NULL,
  _created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  _last_edited_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  _created_by TEXT DEFAULT 'unknown',
  _last_edited_by TEXT DEFAULT 'unknown',
`;return r.forEach((m,h)=>{const g=a[h],u=Pr.getColumnTypeByFieldType(g.type),k=h===r.length-1;o+=`${m} ${u} NULL`+(k?`
`:`,
`)}),o+=");",o+=`
    --- insert ui-column to table
    INSERT INTO ${$n}(name, type, table_name, table_column_name) VALUES ('_id', 'row-id', '${n}', '_id');
    INSERT INTO ${$n}(name, type, table_name, table_column_name) VALUES ('title', 'title', '${n}', 'title');
    `,a.forEach((m,h)=>{const g=r[h],u=m.name.replace(/'/g,"''");o+=`INSERT INTO ${$n}(name, type, table_name, table_column_name) VALUES ('${u}', '${m.type}', '${n}', '${g}');`}),{tableId:t,createTableSql:o}}}const m0=new BroadcastChannel(Tp),Xl=class Xl{constructor(e){ye(this,"handleLinkRelationChange",async e=>{const{table:t,_old:n,_new:a}=e,r=Tn(t),m=await new ns(r,this.dataSpace).fields.link.getEffectRowsByRelationDeleted(t,n||a);Object.entries(m).forEach(([h,g])=>{Object.entries(g).forEach(([u,k])=>{Array.from(k).forEach(O=>{this.dataSpace.linkRelationUpdater.addCell(h,u,O)})})})});this.dataSpace=e,m0.onmessage=async t=>{const{type:n,payload:a}=t.data;if(n===Wn.DataUpdateSignalType){const{_new:r,_old:o,table:m}=a;if(m.startsWith("lk_")){switch(a.type){case xn.Insert:case xn.Delete:this.handleLinkRelationChange({table:m,_old:o,_new:r});break}return}switch(a.type){case xn.Insert:case xn.Update:const h=Xl.getDiff(o,r),g=Object.keys(h),u={table:m,rowId:r._id,diff:h,diffKeys:g};if(g.length===0)return;const k=Tn(m);await new ns(k,this.dataSpace).compute.updateEffectCells(u);break;case xn.Delete:break}}}}};ye(Xl,"getDiff",(e,t)=>{const n={};return Object.entries(t).forEach(([a,r])=>{e!=null&&e.hasOwnProperty(a)&&e[a]!==r&&(n[a]={old:e[a],new:r}),e!=null&&e.hasOwnProperty(a)||(n[a]={old:void 0,new:r})}),n});let hp=Xl;class f0{constructor(){ye(this,"triggerMap");this.triggerMap=new Map}getRowJSONObj(e,t){let n="json_object(";for(const a of e){const r=a.name;n+=`'${r}', ${t}.${r}, `}return n+=`'rowid', ${t}.rowid)`,n}async registerTrigger(e,t,n){const a=`${e}::${t}`;this.triggerMap.set(a,n)}async unRegisterTrigger(e,t){const n=`${e}::${t}`;this.triggerMap.delete(n)}isTriggerChanged(e,t,n){const a=`${e}::${t}`,r=this.triggerMap.get(a);return r?r.update!==n.update||r.insert!==n.insert||r.delete!==n.delete:!0}async setTrigger(e,t,n,a){console.log("setTrigger",t);const r=n.filter(k=>a?!a.includes(k.name):!0),o=this.getRowJSONObj(r,"new"),m=this.getRowJSONObj(r,"old"),h=`CREATE TEMP TRIGGER data_update_trigger_${t}
    AFTER UPDATE ON ${t}
    FOR EACH ROW
    BEGIN
        SELECT eidos_data_event_update('${t}', ${o}, ${m});
    END;`,g=`CREATE TEMP TRIGGER data_insert_trigger_${t}
    AFTER INSERT ON ${t}
    FOR EACH ROW
    BEGIN
        SELECT eidos_data_event_insert('${t}', ${o});
    END;`,u=`CREATE TEMP TRIGGER data_delete_trigger_${t}
    AFTER DELETE ON ${t}
    FOR EACH ROW
    BEGIN
        SELECT eidos_data_event_delete('${t}', ${m});
    END;`;this.isTriggerChanged(e.dbName,t,{update:h,insert:g,delete:u})&&(e.db.transaction(k=>{k.exec(`DROP TRIGGER IF EXISTS data_update_trigger_${t}`),k.exec(`DROP TRIGGER IF EXISTS data_insert_trigger_${t}`),k.exec(`DROP TRIGGER IF EXISTS data_delete_trigger_${t}`),k.exec(h),k.exec(g),k.exec(u)}),this.registerTrigger(e.dbName,t,{update:h,insert:g,delete:u}))}}class d0{constructor(e,t){ye(this,"needUpdateCell");ye(this,"updateCells",async()=>{for(const e in this.needUpdateCell){console.log("updateCells",e);const t=Tn(e),n=new ns(t,this.dataSpace);for(const a in this.needUpdateCell[e]){const r=Array.from(this.needUpdateCell[e][a]);await n.fields.link.updateLinkCell(e,a,r)}}this.needUpdateCell={}});ye(this,"addCell",(e,t,n)=>{this.needUpdateCell[e]||(this.needUpdateCell[e]={}),this.needUpdateCell[e][t]||(this.needUpdateCell[e][t]=new Set),this.needUpdateCell[e][t].add(n),console.log("addCell",this.needUpdateCell)});this.dataSpace=e,this.needUpdateCell={},t&&t(()=>{this.updateCells()},100)}}class _0{constructor(e){ye(this,"undo");ye(this,"db");ye(this,"triggerNames",[]);this.db=e,this.undo={active:!1,undostack:[],redostack:[],firstlog:1}}activate(e){this.undo.active||(this.deactivate(),this.createTriggers(this.db,e),this.undo.active=!0,this.undo.undostack=[],this.undo.redostack=[],this.undo.freeze=-1,this._start_interval())}deactivate(){this.undo.active&&(this._drop_triggers(),this.undo.undostack=[],this.undo.redostack=[],this.undo.active=!1,this.undo.freeze=-1)}freeze(){var e;if(this.undo.freeze){if(this.undo.freeze>=0)throw new Error("recursive call to SQLiteUndoRedo.freeze");this.undo.freeze=(e=this.db)==null?void 0:e.execute("SELECT coalesce(max(seq),0) FROM undolog").fetchone()[0]}}unfreeze(){if(this.undo.freeze){if(this.undo.freeze<0)throw new Error("called unfreeze while not frozen");this.db.exec("DELETE FROM undolog WHERE seq > ?",[this.undo.freeze]),this.undo.freeze=-1}}event(){this.undo.pending||(this.undo.pending=setTimeout(()=>this.barrier(),300))}async barrier(){if(clearTimeout(this.undo.pending),this.undo.pending=void 0,!this.undo.active){this.refresh();return}const e=this.db.execute("SELECT coalesce(max(seq),0) FROM undolog").fetchone()[0];this.undo.undostack.push({begin:this.undo.firstlog,end:e}),this._start_interval(),this.refresh()}callUndo(){ms.info("undo"),this._step(this.undo.undostack,this.undo.redostack)}callRedo(){ms.info("redo"),this._step(this.undo.redostack,this.undo.undostack)}refresh(){}reload_all(){ms.info("not implemented, but should be")}async _makeTriggersForTbl(e,t){const n=await e.sql`pragma table_info(${Symbol(t)})`;let a=`CREATE TEMP TRIGGER _${t}_it AFTER INSERT ON ${t} BEGIN
`;a+="  INSERT INTO undolog VALUES(NULL,",a+=`'DELETE FROM ${t} WHERE rowid='||new.rowid);
END;
`,a+=`CREATE TEMP TRIGGER _${t}_ut AFTER UPDATE ON ${t} BEGIN
`,a+="  INSERT INTO undolog VALUES(NULL,",a+=`'UPDATE ${t} `;let r="SET ";for(const o of n){const m=o[1];a+=`${r}${m}='||quote(old.${m})||'`,r=","}a+=` WHERE rowid='||old.rowid);
END;
`,a+=`CREATE TEMP TRIGGER _${t}_dt BEFORE DELETE ON ${t} BEGIN
`,a+="  INSERT INTO undolog VALUES(NULL,",a+=`'INSERT INTO ${t}(rowid`;for(const o of n){const m=o[1];a+=`,${m}`}a+=") VALUES('||old.rowid||'";for(const o of n){const m=o[1];a+=`,'||quote(old.${m})||'`}return a+=`)');
END;
`,ms.debug(`Creating triggers for ${t}`,a),a}async createTriggers(e,t){try{e.exec("DROP TABLE IF EXISTS undolog")}catch{}e.exec("CREATE TEMP TABLE undolog(seq integer primary key, sql text)");for(const n of t)try{const a=await this._makeTriggersForTbl(e,n);e.exec(a),this.triggerNames.push(`_${n}_it`),this.triggerNames.push(`_${n}_ut`),this.triggerNames.push(`_${n}_dt`)}catch(a){ms.info(`Error creating triggers for ${n}`,a)}}_drop_triggers(){for(const e of this.triggerNames)this.db.exec(`DROP TRIGGER IF EXISTS ${e}`)}_start_interval(){const e=this.db.execute("SELECT coalesce(max(seq),0)+1 FROM undolog").fetchone()[0];e>this.undo.firstlog&&(this.undo.firstlog=e)}_step(e,t){if(e.length===0)return;const{begin:n,end:a}=e.pop(),r=this.db.execute("SELECT coalesce(max(seq),0)+1 FROM undolog").fetchone()[0],o=`SELECT sql FROM undolog WHERE seq>=${n} AND seq<=${a} ORDER BY seq DESC`,h=this.db.execute(o).fetchall().map(u=>u[0]).join(`;
`);this.db.exec(h);const g=this.db.execute("SELECT coalesce(max(seq),0) FROM undolog").fetchone()[0];t.push({begin:r,end:g}),this.db.onUpdate()}}class h0{constructor(e,t,n=!1){this.db=e,this.draftDb=t,this.allowDeletions=n}async compareTables(){const e=await this.db.syncExec2("select * from sqlite_schema where type='table' AND name  like 'eidos__%';"),t=await this.draftDb.syncExec2("select * from sqlite_schema where type='table' AND name  like 'eidos__%';"),n=t.filter(r=>!e.find(m=>m.name===r.name)),a=e.filter(r=>!t.find(m=>m.name===r.name));return{tables:e,newTables:n,removedTables:a}}async compareColumns(e){const t=await this.db.syncExec2(`PRAGMA table_info(${e});`),n=await this.draftDb.syncExec2(`PRAGMA table_info(${e});`),a=n.filter(o=>!t.find(h=>h.name.toLocaleLowerCase()===o.name.toLocaleLowerCase())),r=t.filter(o=>!n.find(h=>h.name===o.name));return{newColumns:a,removedColumns:r}}async migrateTables(){const{newTables:e,removedTables:t}=await this.compareTables();return{newTables:e,removedTables:t}}async migrateTable(e){const{newColumns:t,removedColumns:n}=await this.compareColumns(e);t.length&&console.log(`migrateTable ${e} start`);for(const a of t){const{name:r,type:o,notnull:m,dflt_value:h}=a;let g=`ALTER TABLE ${e} ADD COLUMN `,u=` ${r} ${o}`;h!=null&&(u+=` DEFAULT ${h}`),m&&(u+=" NOT NULL "),g+=u;try{console.log(g),this.db.syncExec2(g),console.log(`migrateTable ${e} add column ${r}`)}catch(k){if(k.message.includes("Cannot add a column with non-constant default")){console.warn(`migrateTable ${e} add column ${r} failed`);const w=this.db.syncExec2(`SELECT sql FROM sqlite_master WHERE type='table' AND name='${e}'`)[0].sql,N=Vd(w,u);console.log("use newSql to migrate",N.sql),this.db.syncExec2(N.sql)}else console.log(k)}}t.length&&console.log(`migrateTable ${e} done`)}async migrate(){if(this.db.hasMigrated){console.log("db has migrated");return}const{removedTables:e}=await this.migrateTables(),t=await this.db.syncExec2("select * from sqlite_schema where type='table' AND name  like 'eidos__%';");for(const n of t)e.find(r=>r.name===n.name)||await this.migrateTable(n.name);this.cleanDraftDb()}async cleanDraftDb(){this.draftDb.db.close()}}function xr(s){return function(e,t,n){const a=n.value;return n.value=function(...r){const o=performance.now(),m=a.apply(this,r),g=performance.now()-o;return g>s&&console.debug(`%cCall to ${t} took ${g} milliseconds with args:`,"color: purple; font-weight: bold;",r),m},n}}class u_{}var ui=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Vs=[],vs=[],b0=typeof Uint8Array<"u"?Uint8Array:Array,Op=!1;function p_(){Op=!0;for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=s.length;e<t;++e)Vs[e]=s[e],vs[s.charCodeAt(e)]=e;vs[45]=62,vs[95]=63}function y0(s){Op||p_();var e,t,n,a,r,o,m=s.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");r=s[m-2]==="="?2:s[m-1]==="="?1:0,o=new b0(m*3/4-r),n=r>0?m-4:m;var h=0;for(e=0,t=0;e<n;e+=4,t+=3)a=vs[s.charCodeAt(e)]<<18|vs[s.charCodeAt(e+1)]<<12|vs[s.charCodeAt(e+2)]<<6|vs[s.charCodeAt(e+3)],o[h++]=a>>16&255,o[h++]=a>>8&255,o[h++]=a&255;return r===2?(a=vs[s.charCodeAt(e)]<<2|vs[s.charCodeAt(e+1)]>>4,o[h++]=a&255):r===1&&(a=vs[s.charCodeAt(e)]<<10|vs[s.charCodeAt(e+1)]<<4|vs[s.charCodeAt(e+2)]>>2,o[h++]=a>>8&255,o[h++]=a&255),o}function g0(s){return Vs[s>>18&63]+Vs[s>>12&63]+Vs[s>>6&63]+Vs[s&63]}function w0(s,e,t){for(var n,a=[],r=e;r<t;r+=3)n=(s[r]<<16)+(s[r+1]<<8)+s[r+2],a.push(g0(n));return a.join("")}function Kf(s){Op||p_();for(var e,t=s.length,n=t%3,a="",r=[],o=16383,m=0,h=t-n;m<h;m+=o)r.push(w0(s,m,m+o>h?h:m+o));return n===1?(e=s[t-1],a+=Vs[e>>2],a+=Vs[e<<4&63],a+="=="):n===2&&(e=(s[t-2]<<8)+s[t-1],a+=Vs[e>>10],a+=Vs[e>>4&63],a+=Vs[e<<2&63],a+="="),r.push(a),r.join("")}function ec(s,e,t,n,a){var r,o,m=a*8-n-1,h=(1<<m)-1,g=h>>1,u=-7,k=t?a-1:0,O=t?-1:1,w=s[e+k];for(k+=O,r=w&(1<<-u)-1,w>>=-u,u+=m;u>0;r=r*256+s[e+k],k+=O,u-=8);for(o=r&(1<<-u)-1,r>>=-u,u+=n;u>0;o=o*256+s[e+k],k+=O,u-=8);if(r===0)r=1-g;else{if(r===h)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-g}return(w?-1:1)*o*Math.pow(2,r-n)}function m_(s,e,t,n,a,r){var o,m,h,g=r*8-a-1,u=(1<<g)-1,k=u>>1,O=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:r-1,N=n?1:-1,Z=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(m=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+k>=1?e+=O/h:e+=O*Math.pow(2,1-k),e*h>=2&&(o++,h/=2),o+k>=u?(m=0,o=u):o+k>=1?(m=(e*h-1)*Math.pow(2,a),o=o+k):(m=e*Math.pow(2,k-1)*Math.pow(2,a),o=0));a>=8;s[t+w]=m&255,w+=N,m/=256,a-=8);for(o=o<<a|m,g+=a;g>0;s[t+w]=o&255,w+=N,o/=256,g-=8);s[t+w-N]|=Z*128}var x0={}.toString,f_=Array.isArray||function(s){return x0.call(s)=="[object Array]"},$0=50;xe.TYPED_ARRAY_SUPPORT=ui.TYPED_ARRAY_SUPPORT!==void 0?ui.TYPED_ARRAY_SUPPORT:!0;Wl();function Wl(){return xe.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function fr(s,e){if(Wl()<e)throw new RangeError("Invalid typed array length");return xe.TYPED_ARRAY_SUPPORT?(s=new Uint8Array(e),s.__proto__=xe.prototype):(s===null&&(s=new xe(e)),s.length=e),s}function xe(s,e,t){if(!xe.TYPED_ARRAY_SUPPORT&&!(this instanceof xe))return new xe(s,e,t);if(typeof s=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Cp(this,s)}return d_(this,s,e,t)}xe.poolSize=8192;xe._augment=function(s){return s.__proto__=xe.prototype,s};function d_(s,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?E0(s,e,t,n):typeof e=="string"?k0(s,e,t):A0(s,e)}xe.from=function(s,e,t){return d_(null,s,e,t)};xe.TYPED_ARRAY_SUPPORT&&(xe.prototype.__proto__=Uint8Array.prototype,xe.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&xe[Symbol.species]);function __(s){if(typeof s!="number")throw new TypeError('"size" argument must be a number');if(s<0)throw new RangeError('"size" argument must not be negative')}function v0(s,e,t,n){return __(e),e<=0?fr(s,e):t!==void 0?typeof n=="string"?fr(s,e).fill(t,n):fr(s,e).fill(t):fr(s,e)}xe.alloc=function(s,e,t){return v0(null,s,e,t)};function Cp(s,e){if(__(e),s=fr(s,e<0?0:Np(e)|0),!xe.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)s[t]=0;return s}xe.allocUnsafe=function(s){return Cp(null,s)};xe.allocUnsafeSlow=function(s){return Cp(null,s)};function k0(s,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!xe.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=h_(e,t)|0;s=fr(s,n);var a=s.write(e,t);return a!==n&&(s=s.slice(0,a)),s}function bp(s,e){var t=e.length<0?0:Np(e.length)|0;s=fr(s,t);for(var n=0;n<t;n+=1)s[n]=e[n]&255;return s}function E0(s,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),xe.TYPED_ARRAY_SUPPORT?(s=e,s.__proto__=xe.prototype):s=bp(s,e),s}function A0(s,e){if(Zs(e)){var t=Np(e.length)|0;return s=fr(s,t),s.length===0||e.copy(s,0,0,t),s}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||H0(e.length)?fr(s,0):bp(s,e);if(e.type==="Buffer"&&f_(e.data))return bp(s,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Np(s){if(s>=Wl())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Wl().toString(16)+" bytes");return s|0}xe.isBuffer=ts;function Zs(s){return!!(s!=null&&s._isBuffer)}xe.compare=function(e,t){if(!Zs(e)||!Zs(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,r=0,o=Math.min(n,a);r<o;++r)if(e[r]!==t[r]){n=e[r],a=t[r];break}return n<a?-1:a<n?1:0};xe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};xe.concat=function(e,t){if(!f_(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return xe.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=xe.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!Zs(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(a,r),r+=o.length}return a};function h_(s,e){if(Zs(s))return s.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(s)||s instanceof ArrayBuffer))return s.byteLength;typeof s!="string"&&(s=""+s);var t=s.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Hl(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return v_(s).length;default:if(n)return Hl(s).length;e=(""+e).toLowerCase(),n=!0}}xe.byteLength=h_;function T0(s,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(s||(s="utf8");;)switch(s){case"hex":return D0(this,e,t);case"utf8":case"utf-8":return g_(this,e,t);case"ascii":return L0(this,e,t);case"latin1":case"binary":return M0(this,e,t);case"base64":return C0(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F0(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),n=!0}}xe.prototype._isBuffer=!0;function da(s,e,t){var n=s[e];s[e]=s[t],s[t]=n}xe.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)da(this,t,t+1);return this};xe.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)da(this,t,t+3),da(this,t+1,t+2);return this};xe.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)da(this,t,t+7),da(this,t+1,t+6),da(this,t+2,t+5),da(this,t+3,t+4);return this};xe.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?g_(this,0,e):T0.apply(this,arguments)};xe.prototype.equals=function(e){if(!Zs(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:xe.compare(this,e)===0};xe.prototype.inspect=function(){var e="",t=$0;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};xe.prototype.compare=function(e,t,n,a,r){if(!Zs(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),a===void 0&&(a=0),r===void 0&&(r=this.length),t<0||n>e.length||a<0||r>this.length)throw new RangeError("out of range index");if(a>=r&&t>=n)return 0;if(a>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,a>>>=0,r>>>=0,this===e)return 0;for(var o=r-a,m=n-t,h=Math.min(o,m),g=this.slice(a,r),u=e.slice(t,n),k=0;k<h;++k)if(g[k]!==u[k]){o=g[k],m=u[k];break}return o<m?-1:m<o?1:0};function b_(s,e,t,n,a){if(s.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=a?0:s.length-1),t<0&&(t=s.length+t),t>=s.length){if(a)return-1;t=s.length-1}else if(t<0)if(a)t=0;else return-1;if(typeof e=="string"&&(e=xe.from(e,n)),Zs(e))return e.length===0?-1:ed(s,e,t,n,a);if(typeof e=="number")return e=e&255,xe.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(s,e,t):Uint8Array.prototype.lastIndexOf.call(s,e,t):ed(s,[e],t,n,a);throw new TypeError("val must be string, number or Buffer")}function ed(s,e,t,n,a){var r=1,o=s.length,m=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(s.length<2||e.length<2)return-1;r=2,o/=2,m/=2,t/=2}function h(w,N){return r===1?w[N]:w.readUInt16BE(N*r)}var g;if(a){var u=-1;for(g=t;g<o;g++)if(h(s,g)===h(e,u===-1?0:g-u)){if(u===-1&&(u=g),g-u+1===m)return u*r}else u!==-1&&(g-=g-u),u=-1}else for(t+m>o&&(t=o-m),g=t;g>=0;g--){for(var k=!0,O=0;O<m;O++)if(h(s,g+O)!==h(e,O)){k=!1;break}if(k)return g}return-1}xe.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};xe.prototype.indexOf=function(e,t,n){return b_(this,e,t,n,!0)};xe.prototype.lastIndexOf=function(e,t,n){return b_(this,e,t,n,!1)};function S0(s,e,t,n){t=Number(t)||0;var a=s.length-t;n?(n=Number(n),n>a&&(n=a)):n=a;var r=e.length;if(r%2!==0)throw new TypeError("Invalid hex string");n>r/2&&(n=r/2);for(var o=0;o<n;++o){var m=parseInt(e.substr(o*2,2),16);if(isNaN(m))return o;s[t+o]=m}return o}function I0(s,e,t,n){return sc(Hl(e,s.length-t),s,t,n)}function y_(s,e,t,n){return sc(z0(e),s,t,n)}function q0(s,e,t,n){return y_(s,e,t,n)}function R0(s,e,t,n){return sc(v_(e),s,t,n)}function O0(s,e,t,n){return sc(W0(e,s.length-t),s,t,n)}xe.prototype.write=function(e,t,n,a){if(t===void 0)a="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")a=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,a===void 0&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r=this.length-t;if((n===void 0||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var o=!1;;)switch(a){case"hex":return S0(this,e,t,n);case"utf8":case"utf-8":return I0(this,e,t,n);case"ascii":return y_(this,e,t,n);case"latin1":case"binary":return q0(this,e,t,n);case"base64":return R0(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O0(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0}};xe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C0(s,e,t){return e===0&&t===s.length?Kf(s):Kf(s.slice(e,t))}function g_(s,e,t){t=Math.min(s.length,t);for(var n=[],a=e;a<t;){var r=s[a],o=null,m=r>239?4:r>223?3:r>191?2:1;if(a+m<=t){var h,g,u,k;switch(m){case 1:r<128&&(o=r);break;case 2:h=s[a+1],(h&192)===128&&(k=(r&31)<<6|h&63,k>127&&(o=k));break;case 3:h=s[a+1],g=s[a+2],(h&192)===128&&(g&192)===128&&(k=(r&15)<<12|(h&63)<<6|g&63,k>2047&&(k<55296||k>57343)&&(o=k));break;case 4:h=s[a+1],g=s[a+2],u=s[a+3],(h&192)===128&&(g&192)===128&&(u&192)===128&&(k=(r&15)<<18|(h&63)<<12|(g&63)<<6|u&63,k>65535&&k<1114112&&(o=k))}}o===null?(o=65533,m=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),a+=m}return N0(n)}var td=4096;function N0(s){var e=s.length;if(e<=td)return String.fromCharCode.apply(String,s);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,s.slice(n,n+=td));return t}function L0(s,e,t){var n="";t=Math.min(s.length,t);for(var a=e;a<t;++a)n+=String.fromCharCode(s[a]&127);return n}function M0(s,e,t){var n="";t=Math.min(s.length,t);for(var a=e;a<t;++a)n+=String.fromCharCode(s[a]);return n}function D0(s,e,t){var n=s.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var a="",r=e;r<t;++r)a+=B0(s[r]);return a}function F0(s,e,t){for(var n=s.slice(e,t),a="",r=0;r<n.length;r+=2)a+=String.fromCharCode(n[r]+n[r+1]*256);return a}xe.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var a;if(xe.TYPED_ARRAY_SUPPORT)a=this.subarray(e,t),a.__proto__=xe.prototype;else{var r=t-e;a=new xe(r,void 0);for(var o=0;o<r;++o)a[o]=this[o+e]}return a};function In(s,e,t){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+e>t)throw new RangeError("Trying to access beyond buffer length")}xe.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||In(e,t,this.length);for(var a=this[e],r=1,o=0;++o<t&&(r*=256);)a+=this[e+o]*r;return a};xe.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||In(e,t,this.length);for(var a=this[e+--t],r=1;t>0&&(r*=256);)a+=this[e+--t]*r;return a};xe.prototype.readUInt8=function(e,t){return t||In(e,1,this.length),this[e]};xe.prototype.readUInt16LE=function(e,t){return t||In(e,2,this.length),this[e]|this[e+1]<<8};xe.prototype.readUInt16BE=function(e,t){return t||In(e,2,this.length),this[e]<<8|this[e+1]};xe.prototype.readUInt32LE=function(e,t){return t||In(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};xe.prototype.readUInt32BE=function(e,t){return t||In(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};xe.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||In(e,t,this.length);for(var a=this[e],r=1,o=0;++o<t&&(r*=256);)a+=this[e+o]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a};xe.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||In(e,t,this.length);for(var a=t,r=1,o=this[e+--a];a>0&&(r*=256);)o+=this[e+--a]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o};xe.prototype.readInt8=function(e,t){return t||In(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};xe.prototype.readInt16LE=function(e,t){t||In(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};xe.prototype.readInt16BE=function(e,t){t||In(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};xe.prototype.readInt32LE=function(e,t){return t||In(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};xe.prototype.readInt32BE=function(e,t){return t||In(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};xe.prototype.readFloatLE=function(e,t){return t||In(e,4,this.length),ec(this,e,!0,23,4)};xe.prototype.readFloatBE=function(e,t){return t||In(e,4,this.length),ec(this,e,!1,23,4)};xe.prototype.readDoubleLE=function(e,t){return t||In(e,8,this.length),ec(this,e,!0,52,8)};xe.prototype.readDoubleBE=function(e,t){return t||In(e,8,this.length),ec(this,e,!1,52,8)};function rs(s,e,t,n,a,r){if(!Zs(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<r)throw new RangeError('"value" argument is out of bounds');if(t+n>s.length)throw new RangeError("Index out of range")}xe.prototype.writeUIntLE=function(e,t,n,a){if(e=+e,t=t|0,n=n|0,!a){var r=Math.pow(2,8*n)-1;rs(this,e,t,n,r,0)}var o=1,m=0;for(this[t]=e&255;++m<n&&(o*=256);)this[t+m]=e/o&255;return t+n};xe.prototype.writeUIntBE=function(e,t,n,a){if(e=+e,t=t|0,n=n|0,!a){var r=Math.pow(2,8*n)-1;rs(this,e,t,n,r,0)}var o=n-1,m=1;for(this[t+o]=e&255;--o>=0&&(m*=256);)this[t+o]=e/m&255;return t+n};xe.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,1,255,0),xe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function tc(s,e,t,n){e<0&&(e=65535+e+1);for(var a=0,r=Math.min(s.length-t,2);a<r;++a)s[t+a]=(e&255<<8*(n?a:1-a))>>>(n?a:1-a)*8}xe.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,2,65535,0),xe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):tc(this,e,t,!0),t+2};xe.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,2,65535,0),xe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):tc(this,e,t,!1),t+2};function nc(s,e,t,n){e<0&&(e=4294967295+e+1);for(var a=0,r=Math.min(s.length-t,4);a<r;++a)s[t+a]=e>>>(n?a:3-a)*8&255}xe.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,4,4294967295,0),xe.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):nc(this,e,t,!0),t+4};xe.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,4,4294967295,0),xe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):nc(this,e,t,!1),t+4};xe.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t=t|0,!a){var r=Math.pow(2,8*n-1);rs(this,e,t,n,r-1,-r)}var o=0,m=1,h=0;for(this[t]=e&255;++o<n&&(m*=256);)e<0&&h===0&&this[t+o-1]!==0&&(h=1),this[t+o]=(e/m>>0)-h&255;return t+n};xe.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t=t|0,!a){var r=Math.pow(2,8*n-1);rs(this,e,t,n,r-1,-r)}var o=n-1,m=1,h=0;for(this[t+o]=e&255;--o>=0&&(m*=256);)e<0&&h===0&&this[t+o+1]!==0&&(h=1),this[t+o]=(e/m>>0)-h&255;return t+n};xe.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,1,127,-128),xe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};xe.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,2,32767,-32768),xe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):tc(this,e,t,!0),t+2};xe.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,2,32767,-32768),xe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):tc(this,e,t,!1),t+2};xe.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,4,2147483647,-2147483648),xe.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):nc(this,e,t,!0),t+4};xe.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||rs(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),xe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):nc(this,e,t,!1),t+4};function w_(s,e,t,n,a,r){if(t+n>s.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function x_(s,e,t,n,a){return a||w_(s,e,t,4),m_(s,e,t,n,23,4),t+4}xe.prototype.writeFloatLE=function(e,t,n){return x_(this,e,t,!0,n)};xe.prototype.writeFloatBE=function(e,t,n){return x_(this,e,t,!1,n)};function $_(s,e,t,n,a){return a||w_(s,e,t,8),m_(s,e,t,n,52,8),t+8}xe.prototype.writeDoubleLE=function(e,t,n){return $_(this,e,t,!0,n)};xe.prototype.writeDoubleBE=function(e,t,n){return $_(this,e,t,!1,n)};xe.prototype.copy=function(e,t,n,a){if(n||(n=0),!a&&a!==0&&(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var r=a-n,o;if(this===e&&n<t&&t<a)for(o=r-1;o>=0;--o)e[o+t]=this[o+n];else if(r<1e3||!xe.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r};xe.prototype.fill=function(e,t,n,a){if(typeof e=="string"){if(typeof t=="string"?(a=t,t=0,n=this.length):typeof n=="string"&&(a=n,n=this.length),e.length===1){var r=e.charCodeAt(0);r<256&&(e=r)}if(a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!xe.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{var m=Zs(e)?e:Hl(new xe(e,a).toString()),h=m.length;for(o=0;o<n-t;++o)this[o+t]=m[o%h]}return this};var P0=/[^+\/0-9A-Za-z-_]/g;function j0(s){if(s=U0(s).replace(P0,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function U0(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function B0(s){return s<16?"0"+s.toString(16):s.toString(16)}function Hl(s,e){e=e||1/0;for(var t,n=s.length,a=null,r=[],o=0;o<n;++o){if(t=s.charCodeAt(o),t>55295&&t<57344){if(!a){if(t>56319){(e-=3)>-1&&r.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&r.push(239,191,189);continue}a=t;continue}if(t<56320){(e-=3)>-1&&r.push(239,191,189),a=t;continue}t=(a-55296<<10|t-56320)+65536}else a&&(e-=3)>-1&&r.push(239,191,189);if(a=null,t<128){if((e-=1)<0)break;r.push(t)}else if(t<2048){if((e-=2)<0)break;r.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;r.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;r.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return r}function z0(s){for(var e=[],t=0;t<s.length;++t)e.push(s.charCodeAt(t)&255);return e}function W0(s,e){for(var t,n,a,r=[],o=0;o<s.length&&!((e-=2)<0);++o)t=s.charCodeAt(o),n=t>>8,a=t%256,r.push(a),r.push(n);return r}function v_(s){return y0(j0(s))}function sc(s,e,t,n){for(var a=0;a<n&&!(a+t>=e.length||a>=s.length);++a)e[a+t]=s[a];return a}function H0(s){return s!==s}function ts(s){return s!=null&&(!!s._isBuffer||k_(s)||V0(s))}function k_(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function V0(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&k_(s.slice(0,0))}var G0;function Br(){}Br.prototype=Object.create(null);function Gt(){Gt.init.call(this)}Gt.EventEmitter=Gt;Gt.usingDomains=!1;Gt.prototype.domain=void 0;Gt.prototype._events=void 0;Gt.prototype._maxListeners=void 0;Gt.defaultMaxListeners=10;Gt.init=function(){this.domain=null,Gt.usingDomains&&G0.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Br,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Gt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function E_(s){return s._maxListeners===void 0?Gt.defaultMaxListeners:s._maxListeners}Gt.prototype.getMaxListeners=function(){return E_(this)};function Q0(s,e,t){if(e)s.call(t);else for(var n=s.length,a=bo(s,n),r=0;r<n;++r)a[r].call(t)}function Y0(s,e,t,n){if(e)s.call(t,n);else for(var a=s.length,r=bo(s,a),o=0;o<a;++o)r[o].call(t,n)}function J0(s,e,t,n,a){if(e)s.call(t,n,a);else for(var r=s.length,o=bo(s,r),m=0;m<r;++m)o[m].call(t,n,a)}function Z0(s,e,t,n,a,r){if(e)s.call(t,n,a,r);else for(var o=s.length,m=bo(s,o),h=0;h<o;++h)m[h].call(t,n,a,r)}function X0(s,e,t,n){if(e)s.apply(t,n);else for(var a=s.length,r=bo(s,a),o=0;o<a;++o)r[o].apply(t,n)}Gt.prototype.emit=function(e){var t,n,a,r,o,m,h,g=e==="error";if(m=this._events,m)g=g&&m.error==null;else if(!g)return!1;if(h=this.domain,g){if(t=arguments[1],h)t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=h,t.domainThrown=!1,h.emit("error",t);else{if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return!1}if(n=m[e],!n)return!1;var k=typeof n=="function";switch(a=arguments.length,a){case 1:Q0(n,k,this);break;case 2:Y0(n,k,this,arguments[1]);break;case 3:J0(n,k,this,arguments[1],arguments[2]);break;case 4:Z0(n,k,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(a-1),o=1;o<a;o++)r[o-1]=arguments[o];X0(n,k,this,r)}return!0};function A_(s,e,t,n){var a,r,o;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(r=s._events,r?(r.newListener&&(s.emit("newListener",e,t.listener?t.listener:t),r=s._events),o=r[e]):(r=s._events=new Br,s._eventsCount=0),!o)o=r[e]=t,++s._eventsCount;else if(typeof o=="function"?o=r[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),!o.warned&&(a=E_(s),a&&a>0&&o.length>a)){o.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=s,m.type=e,m.count=o.length,K0(m)}return s}function K0(s){typeof console.warn=="function"?console.warn(s):console.log(s)}Gt.prototype.addListener=function(e,t){return A_(this,e,t,!1)};Gt.prototype.on=Gt.prototype.addListener;Gt.prototype.prependListener=function(e,t){return A_(this,e,t,!0)};function T_(s,e,t){var n=!1;function a(){s.removeListener(e,a),n||(n=!0,t.apply(s,arguments))}return a.listener=t,a}Gt.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,T_(this,e,t)),this};Gt.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,T_(this,e,t)),this};Gt.prototype.removeListener=function(e,t){var n,a,r,o,m;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(a=this._events,!a)return this;if(n=a[e],!n)return this;if(n===t||n.listener&&n.listener===t)--this._eventsCount===0?this._events=new Br:(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(r=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){m=n[o].listener,r=o;break}if(r<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Br,this;delete a[e]}else ek(n,r);a.removeListener&&this.emit("removeListener",e,m||t)}return this};Gt.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Br,this._eventsCount=0):n[e]&&(--this._eventsCount===0?this._events=new Br:delete n[e]),this;if(arguments.length===0){for(var a=Object.keys(n),r=0,o;r<a.length;++r)o=a[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new Br,this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};Gt.prototype.listeners=function(e){var t,n,a=this._events;return a?(t=a[e],t?typeof t=="function"?n=[t.listener||t]:n=tk(t):n=[]):n=[],n};Gt.listenerCount=function(s,e){return typeof s.listenerCount=="function"?s.listenerCount(e):S_.call(s,e)};Gt.prototype.listenerCount=S_;function S_(s){var e=this._events;if(e){var t=e[s];if(typeof t=="function")return 1;if(t)return t.length}return 0}Gt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function ek(s,e){for(var t=e,n=t+1,a=s.length;n<a;t+=1,n+=1)s[t]=s[n];s.pop()}function bo(s,e){for(var t=new Array(e);e--;)t[e]=s[e];return t}function tk(s){for(var e=new Array(s.length),t=0;t<e.length;++t)e[t]=s[t].listener||s[t];return e}function I_(){throw new Error("setTimeout has not been defined")}function q_(){throw new Error("clearTimeout has not been defined")}var Nr=I_,Lr=q_;typeof ui.setTimeout=="function"&&(Nr=setTimeout);typeof ui.clearTimeout=="function"&&(Lr=clearTimeout);function R_(s){if(Nr===setTimeout)return setTimeout(s,0);if((Nr===I_||!Nr)&&setTimeout)return Nr=setTimeout,setTimeout(s,0);try{return Nr(s,0)}catch{try{return Nr.call(null,s,0)}catch{return Nr.call(this,s,0)}}}function nk(s){if(Lr===clearTimeout)return clearTimeout(s);if((Lr===q_||!Lr)&&clearTimeout)return Lr=clearTimeout,clearTimeout(s);try{return Lr(s)}catch{try{return Lr.call(null,s)}catch{return Lr.call(this,s)}}}var dr=[],si=!1,_a,Il=-1;function sk(){!si||!_a||(si=!1,_a.length?dr=_a.concat(dr):Il=-1,dr.length&&O_())}function O_(){if(!si){var s=R_(sk);si=!0;for(var e=dr.length;e;){for(_a=dr,dr=[];++Il<e;)_a&&_a[Il].run();Il=-1,e=dr.length}_a=null,si=!1,nk(s)}}function ds(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];dr.push(new C_(s,e)),dr.length===1&&!si&&R_(O_)}function C_(s,e){this.fun=s,this.array=e}C_.prototype.run=function(){this.fun.apply(null,this.array)};var rk="browser",ak="browser",ik=!0,ok={},lk=[],ck="",uk={},pk={},mk={};function ka(){}var fk=ka,dk=ka,_k=ka,hk=ka,bk=ka,yk=ka,gk=ka;function wk(s){throw new Error("process.binding is not supported")}function xk(){return"/"}function $k(s){throw new Error("process.chdir is not supported")}function vk(){return 0}var Xa=ui.performance||{},kk=Xa.now||Xa.mozNow||Xa.msNow||Xa.oNow||Xa.webkitNow||function(){return new Date().getTime()};function Ek(s){var e=kk.call(Xa)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return s&&(t=t-s[0],n=n-s[1],n<0&&(t--,n+=1e9)),[t,n]}var Ak=new Date;function Tk(){var s=new Date,e=s-Ak;return e/1e3}var ql={nextTick:ds,title:rk,browser:ik,env:ok,argv:lk,version:ck,versions:uk,on:fk,addListener:dk,once:_k,off:hk,removeListener:bk,removeAllListeners:yk,emit:gk,binding:wk,cwd:xk,chdir:$k,umask:vk,hrtime:Ek,platform:ak,release:pk,config:mk,uptime:Tk},yp;typeof Object.create=="function"?yp=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:yp=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var mi=yp,Sk=/%[sdj%]/g;function Ik(s){if(!Mp(s)){for(var e=[],t=0;t<arguments.length;t++)e.push(zr(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,a=n.length,r=String(s).replace(Sk,function(m){if(m==="%%")return"%";if(t>=a)return m;switch(m){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return m}}),o=n[t];t<a;o=n[++t])Lp(o)||!yo(o)?r+=" "+o:r+=" "+zr(o);return r}function N_(s,e){if(jr(ui.process))return function(){return N_(s,e).apply(this,arguments)};if(ql.noDeprecation===!0)return s;var t=!1;function n(){if(!t){if(ql.throwDeprecation)throw new Error(e);ql.traceDeprecation?console.trace(e):console.error(e),t=!0}return s.apply(this,arguments)}return n}var vl={},Vu;function qk(s){if(jr(Vu)&&(Vu=ql.env.NODE_DEBUG||""),s=s.toUpperCase(),!vl[s])if(new RegExp("\\b"+s+"\\b","i").test(Vu)){var e=0;vl[s]=function(){var t=Ik.apply(null,arguments);console.error("%s %d: %s",s,e,t)}}else vl[s]=function(){};return vl[s]}function zr(s,e){var t={seen:[],stylize:Ok};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),L_(e)?t.showHidden=e:e&&Pk(t,e),jr(t.showHidden)&&(t.showHidden=!1),jr(t.depth)&&(t.depth=2),jr(t.colors)&&(t.colors=!1),jr(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=Rk),Vl(t,s,t.depth)}zr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};zr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Rk(s,e){var t=zr.styles[e];return t?"\x1B["+zr.colors[t][0]+"m"+s+"\x1B["+zr.colors[t][1]+"m":s}function Ok(s,e){return s}function Ck(s){var e={};return s.forEach(function(t,n){e[t]=!0}),e}function Vl(s,e,t){if(s.customInspect&&e&&Ju(e.inspect)&&e.inspect!==zr&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,s);return Mp(n)||(n=Vl(s,n,t)),n}var a=Nk(s,e);if(a)return a;var r=Object.keys(e),o=Ck(r);if(s.showHidden&&(r=Object.getOwnPropertyNames(e)),Yu(e)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return Gu(e);if(r.length===0){if(Ju(e)){var m=e.name?": "+e.name:"";return s.stylize("[Function"+m+"]","special")}if(Qu(e))return s.stylize(RegExp.prototype.toString.call(e),"regexp");if(nd(e))return s.stylize(Date.prototype.toString.call(e),"date");if(Yu(e))return Gu(e)}var h="",g=!1,u=["{","}"];if(Dk(e)&&(g=!0,u=["[","]"]),Ju(e)){var k=e.name?": "+e.name:"";h=" [Function"+k+"]"}if(Qu(e)&&(h=" "+RegExp.prototype.toString.call(e)),nd(e)&&(h=" "+Date.prototype.toUTCString.call(e)),Yu(e)&&(h=" "+Gu(e)),r.length===0&&(!g||e.length==0))return u[0]+h+u[1];if(t<0)return Qu(e)?s.stylize(RegExp.prototype.toString.call(e),"regexp"):s.stylize("[Object]","special");s.seen.push(e);var O;return g?O=Lk(s,e,t,o,r):O=r.map(function(w){return gp(s,e,t,o,w,g)}),s.seen.pop(),Mk(O,h,u)}function Nk(s,e){if(jr(e))return s.stylize("undefined","undefined");if(Mp(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return s.stylize(t,"string")}if(Fk(e))return s.stylize(""+e,"number");if(L_(e))return s.stylize(""+e,"boolean");if(Lp(e))return s.stylize("null","null")}function Gu(s){return"["+Error.prototype.toString.call(s)+"]"}function Lk(s,e,t,n,a){for(var r=[],o=0,m=e.length;o<m;++o)M_(e,String(o))?r.push(gp(s,e,t,n,String(o),!0)):r.push("");return a.forEach(function(h){h.match(/^\d+$/)||r.push(gp(s,e,t,n,h,!0))}),r}function gp(s,e,t,n,a,r){var o,m,h;if(h=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]},h.get?h.set?m=s.stylize("[Getter/Setter]","special"):m=s.stylize("[Getter]","special"):h.set&&(m=s.stylize("[Setter]","special")),M_(n,a)||(o="["+a+"]"),m||(s.seen.indexOf(h.value)<0?(Lp(t)?m=Vl(s,h.value,null):m=Vl(s,h.value,t-1),m.indexOf(`
`)>-1&&(r?m=m.split(`
`).map(function(g){return"  "+g}).join(`
`).substr(2):m=`
`+m.split(`
`).map(function(g){return"   "+g}).join(`
`))):m=s.stylize("[Circular]","special")),jr(o)){if(r&&a.match(/^\d+$/))return m;o=JSON.stringify(""+a),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=s.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=s.stylize(o,"string"))}return o+": "+m}function Mk(s,e,t){var n=s.reduce(function(a,r){return r.indexOf(`
`)>=0,a+r.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+s.join(`,
  `)+" "+t[1]:t[0]+e+" "+s.join(", ")+" "+t[1]}function Dk(s){return Array.isArray(s)}function L_(s){return typeof s=="boolean"}function Lp(s){return s===null}function Fk(s){return typeof s=="number"}function Mp(s){return typeof s=="string"}function jr(s){return s===void 0}function Qu(s){return yo(s)&&Dp(s)==="[object RegExp]"}function yo(s){return typeof s=="object"&&s!==null}function nd(s){return yo(s)&&Dp(s)==="[object Date]"}function Yu(s){return yo(s)&&(Dp(s)==="[object Error]"||s instanceof Error)}function Ju(s){return typeof s=="function"}function Dp(s){return Object.prototype.toString.call(s)}function Pk(s,e){if(!e||!yo(e))return s;for(var t=Object.keys(e),n=t.length;n--;)s[t[n]]=e[t[n]];return s}function M_(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Ea(){this.head=null,this.tail=null,this.length=0}Ea.prototype.push=function(s){var e={data:s,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};Ea.prototype.unshift=function(s){var e={data:s,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};Ea.prototype.shift=function(){if(this.length!==0){var s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}};Ea.prototype.clear=function(){this.head=this.tail=null,this.length=0};Ea.prototype.join=function(s){if(this.length===0)return"";for(var e=this.head,t=""+e.data;e=e.next;)t+=s+e.data;return t};Ea.prototype.concat=function(s){if(this.length===0)return xe.alloc(0);if(this.length===1)return this.head.data;for(var e=xe.allocUnsafe(s>>>0),t=this.head,n=0;t;)t.data.copy(e,n),n+=t.data.length,t=t.next;return e};var jk=xe.isEncoding||function(s){switch(s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Uk(s){if(s&&!jk(s))throw new Error("Unknown encoding: "+s)}function go(s){switch(this.encoding=(s||"utf8").toLowerCase().replace(/[-_]/,""),Uk(s),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=zk;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Wk;break;default:this.write=Bk;return}this.charBuffer=new xe(6),this.charReceived=0,this.charLength=0}go.prototype.write=function(s){for(var e="";this.charLength;){var t=s.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:s.length;if(s.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";s=s.slice(t,s.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var a=e.charCodeAt(e.length-1);if(a>=55296&&a<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,s.length===0)return e;break}this.detectIncompleteChar(s);var n=s.length;this.charLength&&(s.copy(this.charBuffer,0,s.length-this.charReceived,n),n-=this.charReceived),e+=s.toString(this.encoding,0,n);var n=e.length-1,a=e.charCodeAt(n);if(a>=55296&&a<=56319){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),s.copy(this.charBuffer,0,0,r),e.substring(0,n)}return e};go.prototype.detectIncompleteChar=function(s){for(var e=s.length>=3?3:s.length;e>0;e--){var t=s[s.length-e];if(e==1&&t>>5==6){this.charLength=2;break}if(e<=2&&t>>4==14){this.charLength=3;break}if(e<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=e};go.prototype.end=function(s){var e="";if(s&&s.length&&(e=this.write(s)),this.charReceived){var t=this.charReceived,n=this.charBuffer,a=this.encoding;e+=n.slice(0,t).toString(a)}return e};function Bk(s){return s.toString(this.encoding)}function zk(s){this.charReceived=s.length%2,this.charLength=this.charReceived?2:0}function Wk(s){this.charReceived=s.length%3,this.charLength=this.charReceived?3:0}pn.ReadableState=D_;var tn=qk("stream");mi(pn,Gt);function Hk(s,e,t){if(typeof s.prependListener=="function")return s.prependListener(e,t);!s._events||!s._events[e]?s.on(e,t):Array.isArray(s._events[e])?s._events[e].unshift(t):s._events[e]=[t,s._events[e]]}function Vk(s,e){return s.listeners(e).length}function D_(s,e){s=s||{},this.objectMode=!!s.objectMode,e instanceof Es&&(this.objectMode=this.objectMode||!!s.readableObjectMode);var t=s.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Ea,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=s.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,s.encoding&&(this.decoder=new go(s.encoding),this.encoding=s.encoding)}function pn(s){if(!(this instanceof pn))return new pn(s);this._readableState=new D_(s,this),this.readable=!0,s&&typeof s.read=="function"&&(this._read=s.read),Gt.call(this)}pn.prototype.push=function(s,e){var t=this._readableState;return!t.objectMode&&typeof s=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(s=xe.from(s,e),e="")),F_(this,t,s,e,!1)};pn.prototype.unshift=function(s){var e=this._readableState;return F_(this,e,s,"",!0)};pn.prototype.isPaused=function(){return this._readableState.flowing===!1};function F_(s,e,t,n,a){var r=Yk(e,t);if(r)s.emit("error",r);else if(t===null)e.reading=!1,Jk(s,e);else if(e.objectMode||t&&t.length>0)if(e.ended&&!a){var o=new Error("stream.push() after EOF");s.emit("error",o)}else if(e.endEmitted&&a){var m=new Error("stream.unshift() after end event");s.emit("error",m)}else{var h;e.decoder&&!a&&!n&&(t=e.decoder.write(t),h=!e.objectMode&&t.length===0),a||(e.reading=!1),h||(e.flowing&&e.length===0&&!e.sync?(s.emit("data",t),s.read(0)):(e.length+=e.objectMode?1:t.length,a?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&rc(s))),Zk(s,e)}else a||(e.reading=!1);return Gk(e)}function Gk(s){return!s.ended&&(s.needReadable||s.length<s.highWaterMark||s.length===0)}pn.prototype.setEncoding=function(s){return this._readableState.decoder=new go(s),this._readableState.encoding=s,this};var sd=8388608;function Qk(s){return s>=sd?s=sd:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s}function rd(s,e){return s<=0||e.length===0&&e.ended?0:e.objectMode?1:s!==s?e.flowing&&e.length?e.buffer.head.data.length:e.length:(s>e.highWaterMark&&(e.highWaterMark=Qk(s)),s<=e.length?s:e.ended?e.length:(e.needReadable=!0,0))}pn.prototype.read=function(s){tn("read",s),s=parseInt(s,10);var e=this._readableState,t=s;if(s!==0&&(e.emittedReadable=!1),s===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return tn("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Zu(this):rc(this),null;if(s=rd(s,e),s===0&&e.ended)return e.length===0&&Zu(this),null;var n=e.needReadable;tn("need readable",n),(e.length===0||e.length-s<e.highWaterMark)&&(n=!0,tn("length less than watermark",n)),e.ended||e.reading?(n=!1,tn("reading or ended",n)):n&&(tn("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(s=rd(t,e)));var a;return s>0?a=P_(s,e):a=null,a===null?(e.needReadable=!0,s=0):e.length-=s,e.length===0&&(e.ended||(e.needReadable=!0),t!==s&&e.ended&&Zu(this)),a!==null&&this.emit("data",a),a};function Yk(s,e){var t=null;return!ts(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!s.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function Jk(s,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,rc(s)}}function rc(s){var e=s._readableState;e.needReadable=!1,e.emittedReadable||(tn("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?ds(ad,s):ad(s))}function ad(s){tn("emit readable"),s.emit("readable"),Fp(s)}function Zk(s,e){e.readingMore||(e.readingMore=!0,ds(Xk,s,e))}function Xk(s,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(tn("maybeReadMore read 0"),s.read(0),t!==e.length);)t=e.length;e.readingMore=!1}pn.prototype._read=function(s){this.emit("error",new Error("not implemented"))};pn.prototype.pipe=function(s,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=s;break;case 1:n.pipes=[n.pipes,s];break;default:n.pipes.push(s);break}n.pipesCount+=1,tn("pipe count=%d opts=%j",n.pipesCount,e);var a=!e||e.end!==!1,r=a?m:u;n.endEmitted?ds(r):t.once("end",r),s.on("unpipe",o);function o(Ae){tn("onunpipe"),Ae===t&&u()}function m(){tn("onend"),s.end()}var h=Kk(t);s.on("drain",h);var g=!1;function u(){tn("cleanup"),s.removeListener("close",N),s.removeListener("finish",Z),s.removeListener("drain",h),s.removeListener("error",w),s.removeListener("unpipe",o),t.removeListener("end",m),t.removeListener("end",u),t.removeListener("data",O),g=!0,n.awaitDrain&&(!s._writableState||s._writableState.needDrain)&&h()}var k=!1;t.on("data",O);function O(Ae){tn("ondata"),k=!1;var Pe=s.write(Ae);Pe===!1&&!k&&((n.pipesCount===1&&n.pipes===s||n.pipesCount>1&&j_(n.pipes,s)!==-1)&&!g&&(tn("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,k=!0),t.pause())}function w(Ae){tn("onerror",Ae),ae(),s.removeListener("error",w),Vk(s,"error")===0&&s.emit("error",Ae)}Hk(s,"error",w);function N(){s.removeListener("finish",Z),ae()}s.once("close",N);function Z(){tn("onfinish"),s.removeListener("close",N),ae()}s.once("finish",Z);function ae(){tn("unpipe"),t.unpipe(s)}return s.emit("pipe",t),n.flowing||(tn("pipe resume"),t.resume()),s};function Kk(s){return function(){var e=s._readableState;tn("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&s.listeners("data").length&&(e.flowing=!0,Fp(s))}}pn.prototype.unpipe=function(s){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return s&&s!==e.pipes?this:(s||(s=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,s&&s.emit("unpipe",this),this);if(!s){var t=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)t[a].emit("unpipe",this);return this}var r=j_(e.pipes,s);return r===-1?this:(e.pipes.splice(r,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),s.emit("unpipe",this),this)};pn.prototype.on=function(s,e){var t=Gt.prototype.on.call(this,s,e);if(s==="data")this._readableState.flowing!==!1&&this.resume();else if(s==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&rc(this):ds(eE,this))}return t};pn.prototype.addListener=pn.prototype.on;function eE(s){tn("readable nexttick read 0"),s.read(0)}pn.prototype.resume=function(){var s=this._readableState;return s.flowing||(tn("resume"),s.flowing=!0,tE(this,s)),this};function tE(s,e){e.resumeScheduled||(e.resumeScheduled=!0,ds(nE,s,e))}function nE(s,e){e.reading||(tn("resume read 0"),s.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,s.emit("resume"),Fp(s),e.flowing&&!e.reading&&s.read(0)}pn.prototype.pause=function(){return tn("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(tn("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Fp(s){var e=s._readableState;for(tn("flow",e.flowing);e.flowing&&s.read()!==null;);}pn.prototype.wrap=function(s){var e=this._readableState,t=!1,n=this;s.on("end",function(){if(tn("wrapped end"),e.decoder&&!e.ended){var o=e.decoder.end();o&&o.length&&n.push(o)}n.push(null)}),s.on("data",function(o){if(tn("wrapped data"),e.decoder&&(o=e.decoder.write(o)),!(e.objectMode&&o==null)&&!(!e.objectMode&&(!o||!o.length))){var m=n.push(o);m||(t=!0,s.pause())}});for(var a in s)this[a]===void 0&&typeof s[a]=="function"&&(this[a]=function(o){return function(){return s[o].apply(s,arguments)}}(a));var r=["error","close","destroy","pause","resume"];return oE(r,function(o){s.on(o,n.emit.bind(n,o))}),n._read=function(o){tn("wrapped _read",o),t&&(t=!1,s.resume())},n};pn._fromList=P_;function P_(s,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!s||s>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=sE(s,e.buffer,e.decoder),t}function sE(s,e,t){var n;return s<e.head.data.length?(n=e.head.data.slice(0,s),e.head.data=e.head.data.slice(s)):s===e.head.data.length?n=e.shift():n=t?rE(s,e):aE(s,e),n}function rE(s,e){var t=e.head,n=1,a=t.data;for(s-=a.length;t=t.next;){var r=t.data,o=s>r.length?r.length:s;if(o===r.length?a+=r:a+=r.slice(0,s),s-=o,s===0){o===r.length?(++n,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=r.slice(o));break}++n}return e.length-=n,a}function aE(s,e){var t=xe.allocUnsafe(s),n=e.head,a=1;for(n.data.copy(t),s-=n.data.length;n=n.next;){var r=n.data,o=s>r.length?r.length:s;if(r.copy(t,t.length-s,0,o),s-=o,s===0){o===r.length?(++a,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=r.slice(o));break}++a}return e.length-=a,t}function Zu(s){var e=s._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,ds(iE,e,s))}function iE(s,e){!s.endEmitted&&s.length===0&&(s.endEmitted=!0,e.readable=!1,e.emit("end"))}function oE(s,e){for(var t=0,n=s.length;t<n;t++)e(s[t],t)}function j_(s,e){for(var t=0,n=s.length;t<n;t++)if(s[t]===e)return t;return-1}Dn.WritableState=Pp;mi(Dn,Gt);function lE(){}function cE(s,e,t){this.chunk=s,this.encoding=e,this.callback=t,this.next=null}function Pp(s,e){Object.defineProperty(this,"buffer",{get:N_(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),s=s||{},this.objectMode=!!s.objectMode,e instanceof Es&&(this.objectMode=this.objectMode||!!s.writableObjectMode);var t=s.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=s.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=s.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(r){hE(e,r)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new W_(this)}Pp.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function Dn(s){if(!(this instanceof Dn)&&!(this instanceof Es))return new Dn(s);this._writableState=new Pp(s,this),this.writable=!0,s&&(typeof s.write=="function"&&(this._write=s.write),typeof s.writev=="function"&&(this._writev=s.writev)),Gt.call(this)}Dn.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function uE(s,e){var t=new Error("write after end");s.emit("error",t),ds(e,t)}function pE(s,e,t,n){var a=!0,r=!1;return t===null?r=new TypeError("May not write null values to stream"):!xe.isBuffer(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r&&(s.emit("error",r),ds(n,r),a=!1),a}Dn.prototype.write=function(s,e,t){var n=this._writableState,a=!1;return typeof e=="function"&&(t=e,e=null),xe.isBuffer(s)?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=lE),n.ended?uE(this,t):pE(this,n,s,t)&&(n.pendingcb++,a=fE(this,n,s,e,t)),a};Dn.prototype.cork=function(){var s=this._writableState;s.corked++};Dn.prototype.uncork=function(){var s=this._writableState;s.corked&&(s.corked--,!s.writing&&!s.corked&&!s.finished&&!s.bufferProcessing&&s.bufferedRequest&&U_(this,s))};Dn.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function mE(s,e,t){return!s.objectMode&&s.decodeStrings!==!1&&typeof e=="string"&&(e=xe.from(e,t)),e}function fE(s,e,t,n,a){t=mE(e,t,n),xe.isBuffer(t)&&(n="buffer");var r=e.objectMode?1:t.length;e.length+=r;var o=e.length<e.highWaterMark;if(o||(e.needDrain=!0),e.writing||e.corked){var m=e.lastBufferedRequest;e.lastBufferedRequest=new cE(t,n,a),m?m.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else wp(s,e,!1,r,t,n,a);return o}function wp(s,e,t,n,a,r,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,t?s._writev(a,e.onwrite):s._write(a,r,e.onwrite),e.sync=!1}function dE(s,e,t,n,a){--e.pendingcb,t?ds(a,n):a(n),s._writableState.errorEmitted=!0,s.emit("error",n)}function _E(s){s.writing=!1,s.writecb=null,s.length-=s.writelen,s.writelen=0}function hE(s,e){var t=s._writableState,n=t.sync,a=t.writecb;if(_E(t),e)dE(s,t,n,e,a);else{var r=B_(t);!r&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&U_(s,t),n?ds(id,s,t,r,a):id(s,t,r,a)}}function id(s,e,t,n){t||bE(s,e),e.pendingcb--,n(),z_(s,e)}function bE(s,e){e.length===0&&e.needDrain&&(e.needDrain=!1,s.emit("drain"))}function U_(s,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(s._writev&&t&&t.next){var n=e.bufferedRequestCount,a=new Array(n),r=e.corkedRequestsFree;r.entry=t;for(var o=0;t;)a[o]=t,t=t.next,o+=1;wp(s,e,!0,e.length,a,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new W_(e)}else{for(;t;){var m=t.chunk,h=t.encoding,g=t.callback,u=e.objectMode?1:m.length;if(wp(s,e,!1,u,m,h,g),t=t.next,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}Dn.prototype._write=function(s,e,t){t(new Error("not implemented"))};Dn.prototype._writev=null;Dn.prototype.end=function(s,e,t){var n=this._writableState;typeof s=="function"?(t=s,s=null,e=null):typeof e=="function"&&(t=e,e=null),s!=null&&this.write(s,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&yE(this,n,t)};function B_(s){return s.ending&&s.length===0&&s.bufferedRequest===null&&!s.finished&&!s.writing}function od(s,e){e.prefinished||(e.prefinished=!0,s.emit("prefinish"))}function z_(s,e){var t=B_(e);return t&&(e.pendingcb===0?(od(s,e),e.finished=!0,s.emit("finish")):od(s,e)),t}function yE(s,e,t){e.ending=!0,z_(s,e),t&&(e.finished?ds(t):s.once("finish",t)),e.ended=!0,s.writable=!1}function W_(s){var e=this;this.next=null,this.entry=null,this.finish=function(t){var n=e.entry;for(e.entry=null;n;){var a=n.callback;s.pendingcb--,a(t),n=n.next}s.corkedRequestsFree?s.corkedRequestsFree.next=e:s.corkedRequestsFree=e}}mi(Es,pn);var ld=Object.keys(Dn.prototype);for(var Xu=0;Xu<ld.length;Xu++){var Ku=ld[Xu];Es.prototype[Ku]||(Es.prototype[Ku]=Dn.prototype[Ku])}function Es(s){if(!(this instanceof Es))return new Es(s);pn.call(this,s),Dn.call(this,s),s&&s.readable===!1&&(this.readable=!1),s&&s.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,s&&s.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",gE)}function gE(){this.allowHalfOpen||this._writableState.ended||ds(wE,this)}function wE(s){s.end()}mi(Ps,Es);function xE(s){this.afterTransform=function(e,t){return $E(s,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function $E(s,e,t){var n=s._transformState;n.transforming=!1;var a=n.writecb;if(!a)return s.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&s.push(t),a(e);var r=s._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&s._read(r.highWaterMark)}function Ps(s){if(!(this instanceof Ps))return new Ps(s);Es.call(this,s),this._transformState=new xE(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){cd(e,t)}):cd(e)})}Ps.prototype.push=function(s,e){return this._transformState.needTransform=!1,Es.prototype.push.call(this,s,e)};Ps.prototype._transform=function(s,e,t){throw new Error("Not implemented")};Ps.prototype._write=function(s,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=s,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};Ps.prototype._read=function(s){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function cd(s,e){if(e)return s.emit("error",e);var t=s._writableState,n=s._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return s.push(null)}mi(fo,Ps);function fo(s){if(!(this instanceof fo))return new fo(s);Ps.call(this,s)}fo.prototype._transform=function(s,e,t){t(null,s)};mi(gr,Gt);gr.Readable=pn;gr.Writable=Dn;gr.Duplex=Es;gr.Transform=Ps;gr.PassThrough=fo;gr.Stream=gr;function gr(){Gt.call(this)}gr.prototype.pipe=function(s,e){var t=this;function n(u){s.writable&&s.write(u)===!1&&t.pause&&t.pause()}t.on("data",n);function a(){t.readable&&t.resume&&t.resume()}s.on("drain",a),!s._isStdio&&(!e||e.end!==!1)&&(t.on("end",o),t.on("close",m));var r=!1;function o(){r||(r=!0,s.end())}function m(){r||(r=!0,typeof s.destroy=="function"&&s.destroy())}function h(u){if(g(),Gt.listenerCount(this,"error")===0)throw u}t.on("error",h),s.on("error",h);function g(){t.removeListener("data",n),s.removeListener("drain",a),t.removeListener("end",o),t.removeListener("close",m),t.removeListener("error",h),s.removeListener("error",h),t.removeListener("end",g),t.removeListener("close",g),s.removeListener("close",g)}return t.on("end",g),t.on("close",g),s.on("close",g),s.emit("pipe",t),s};const H_=function(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)};let en=class V_ extends Error{constructor(e,t,n,...a){Array.isArray(t)&&(t=t.join(" ").trim()),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,V_),this.code=e;for(const r of a)for(const o in r){const m=r[o];this[o]=ts(m)?m.toString(n.encoding):m==null?m:JSON.parse(JSON.stringify(m))}}};const G_=function(s){const e=[];for(let t=0,n=s.length;t<n;t++){const a=s[t];if(a==null||a===!1)e[t]={disabled:!0};else if(typeof a=="string")e[t]={name:a};else if(H_(a)){if(typeof a.name!="string")throw new en("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);e[t]=a}else throw new en("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(a)} at position ${t}`])}return e};class ud{constructor(e=100){this.size=e,this.length=0,this.buf=xe.allocUnsafe(e)}prepend(e){if(ts(e)){const t=this.length+e.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");const n=this.buf;this.buf=xe.allocUnsafe(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{const t=this.length++;t===this.size&&this.resize();const n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,t)}}append(e){const t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}clone(){return xe.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const t=xe.allocUnsafe(this.size);this.buf.copy(t,0,0,e),this.buf=t}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const vE=12,kE=13,EE=10,AE=32,TE=9,SE=function(s){return{bomSkipped:!1,bufBytesStart:0,castField:s.cast_function,commenting:!1,error:void 0,enabled:s.from_line===1,escaping:!1,escapeIsQuote:ts(s.escape)&&ts(s.quote)&&xe.compare(s.escape,s.quote)===0,expectedRecordLength:Array.isArray(s.columns)?s.columns.length:void 0,field:new ud(20),firstLineToHeaders:s.cast_first_line_to_header,needMoreDataSize:Math.max(s.comment!==null?s.comment.length:0,...s.delimiter.map(e=>e.length),s.quote!==null?s.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new ud(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:s.record_delimiter.length===0?0:Math.max(...s.record_delimiter.map(e=>e.length)),trimChars:[xe.from(" ",s.encoding)[0],xe.from("	",s.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[xe.from(xe.from([kE],"utf8").toString(),s.encoding),xe.from(xe.from([EE],"utf8").toString(),s.encoding),xe.from(xe.from([vE],"utf8").toString(),s.encoding),xe.from(xe.from([AE],"utf8").toString(),s.encoding),xe.from(xe.from([TE],"utf8").toString(),s.encoding)]}},IE=function(s){return s.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},pd=function(s){const e={};for(const n in s)e[IE(n)]=s[n];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new en("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new en("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new en("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(n){const a=Date.parse(n);return isNaN(a)?n:new Date(a)};else if(typeof e.cast_date!="function")throw new en("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=G_(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new en("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new en("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new en("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=xe.from(e.comment,e.encoding)),!ts(e.comment))throw new en("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new en("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const t=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new en("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);if(e.delimiter=e.delimiter.map(function(n){if(n==null||n===!1)return xe.from(",",e.encoding);if(typeof n=="string"&&(n=xe.from(n,e.encoding)),!ts(n)||n.length===0)throw new en("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);return n}),e.escape===void 0||e.escape===!0?e.escape=xe.from('"',e.encoding):typeof e.escape=="string"?e.escape=xe.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!ts(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(s.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(s.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(s.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new en("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new en("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(ts(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new en("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=xe.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=xe.from(e.quote,e.encoding)),!ts(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||ts(e.record_delimiter)){if(e.record_delimiter.length===0)throw new en("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new en("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(n,a){if(typeof n!="string"&&!ts(n))throw new en("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${a},`,`got ${JSON.stringify(n)}`],e);if(n.length===0)throw new en("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${a},`,`got ${JSON.stringify(n)}`],e);return typeof n=="string"&&(n=xe.from(n,e.encoding)),n}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&s.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&s.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(s.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(s.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(s.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(s.to_line)}`);return e},md=function(s){return s.every(e=>e==null||e.toString&&e.toString().trim()==="")},qE=13,RE=10,Ya={utf8:xe.from([239,187,191]),utf16le:xe.from([255,254])},OE=function(s={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=pd(s);return{info:e,original_options:s,options:t,state:SE(t),__needMoreData:function(n,a,r){if(r)return!1;const{encoding:o,escape:m,quote:h}=this.options,{quoting:g,needMoreDataSize:u,recordDelimiterMaxLength:k}=this.state,O=a-n-1,w=Math.max(u,k===0?xe.from(`\r
`,o).length:k,g?(m===null?0:m.length)+h.length:0,g?h.length+k:0);return O<w},parse:function(n,a,r,o){const{bom:m,comment_no_infix:h,encoding:g,from_line:u,ltrim:k,max_record_size:O,raw:w,relax_quotes:N,rtrim:Z,skip_empty_lines:ae,to:Ae,to_line:Pe}=this.options;let{comment:ze,escape:pe,quote:he,record_delimiter:Le}=this.options;const{bomSkipped:Ye,previousBuf:ut,rawBuffer:c,escapeIsQuote:I}=this.state;let d;if(ut===void 0)if(n===void 0){o();return}else d=n;else ut!==void 0&&n===void 0?d=ut:d=xe.concat([ut,n]);if(Ye===!1)if(m===!1)this.state.bomSkipped=!0;else if(d.length<3){if(a===!1){this.state.previousBuf=d;return}}else{for(const ve in Ya)if(Ya[ve].compare(d,0,Ya[ve].length)===0){const Je=Ya[ve].length;this.state.bufBytesStart+=Je,d=d.slice(Je),this.options=pd({...this.original_options,encoding:ve}),{comment:ze,escape:pe,quote:he}=this.options;break}this.state.bomSkipped=!0}const j=d.length;let X;for(X=0;X<j&&!this.__needMoreData(X,j,a);X++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),Pe!==-1&&this.info.lines>Pe){this.state.stop=!0,o();return}this.state.quoting===!1&&Le.length===0&&this.__autoDiscoverRecordDelimiter(d,X)&&(Le=this.options.record_delimiter);const ve=d[X];if(w===!0&&c.append(ve),(ve===qE||ve===RE)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(pe!==null&&this.state.quoting===!0&&this.__isEscape(d,X,ve)&&X+pe.length<j)if(I){if(this.__isQuote(d,X+pe.length)){this.state.escaping=!0,X+=pe.length-1;continue}}else{this.state.escaping=!0,X+=pe.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(d,X))if(this.state.quoting===!0){const Oe=d[X+he.length],ht=Z&&this.__isCharTrimable(d,X+he.length),yt=ze!==null&&this.__compareBytes(ze,d,X+he.length,Oe),ct=this.__isDelimiter(d,X+he.length,Oe),Bt=Le.length===0?this.__autoDiscoverRecordDelimiter(d,X+he.length):this.__isRecordDelimiter(Oe,d,X+he.length);if(pe!==null&&this.__isEscape(d,X,ve)&&this.__isQuote(d,X+pe.length))X+=pe.length-1;else if(!Oe||ct||Bt||yt||ht){this.state.quoting=!1,this.state.wasQuoting=!0,X+=he.length-1;continue}else if(N===!1){const Pn=this.__error(new en("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(Oe)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(Pn!==void 0)return Pn}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(he),X+=he.length-1}else if(this.state.field.length!==0){if(N===!1){const Oe=this.__infoField(),ht=Object.keys(Ya).map(ct=>Ya[ct].equals(this.state.field.toString())?ct:!1).filter(Boolean)[0],yt=this.__error(new en("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(Oe.column)} at line ${Oe.lines}, value is ${JSON.stringify(this.state.field.toString(g))}`,ht?`(${ht} bom)`:void 0],this.options,Oe,{field:this.state.field}));if(yt!==void 0)return yt}}else{this.state.quoting=!0,X+=he.length-1;continue}if(this.state.quoting===!1){const Oe=this.__isRecordDelimiter(ve,d,X);if(Oe!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=u){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),X+=Oe-1;continue}if(ae===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,X+=Oe-1;continue}this.info.bytes=this.state.bufBytesStart+X;const ct=this.__onField();if(ct!==void 0)return ct;this.info.bytes=this.state.bufBytesStart+X+Oe;const Bt=this.__onRecord(r);if(Bt!==void 0)return Bt;if(Ae!==-1&&this.info.records>=Ae){this.state.stop=!0,o();return}}this.state.commenting=!1,X+=Oe-1;continue}if(this.state.commenting)continue;if(ze!==null&&(h===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(ze,d,X,ve)!==0){this.state.commenting=!0;continue}const ht=this.__isDelimiter(d,X,ve);if(ht!==0){this.info.bytes=this.state.bufBytesStart+X;const yt=this.__onField();if(yt!==void 0)return yt;X+=ht-1;continue}}}if(this.state.commenting===!1&&O!==0&&this.state.record_length+this.state.field.length>O)return this.__error(new en("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${O}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const Je=k===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(d,X),Be=Z===!1||this.state.wasQuoting===!1;if(Je===!0&&Be===!0)this.state.field.append(ve);else{if(Z===!0&&!this.__isCharTrimable(d,X))return this.__error(new en("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));Je===!1&&(X+=this.__isCharTrimable(d,X)-1);continue}}if(a===!0)if(this.state.quoting===!0){const ve=this.__error(new en("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(ve!==void 0)return ve}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+X;const ve=this.__onField();if(ve!==void 0)return ve;const Je=this.__onRecord(r);if(Je!==void 0)return Je}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=X,this.state.previousBuf=d.slice(X);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(n){const{columns:a,group_columns_by_name:r,encoding:o,info:m,from:h,relax_column_count:g,relax_column_count_less:u,relax_column_count_more:k,raw:O,skip_records_with_empty_values:w}=this.options,{enabled:N,record:Z}=this.state;if(N===!1)return this.__resetRecord();const ae=Z.length;if(a===!0){if(w===!0&&md(Z)){this.__resetRecord();return}return this.__firstLineToColumns(Z)}if(a===!1&&this.info.records===0&&(this.state.expectedRecordLength=ae),ae!==this.state.expectedRecordLength){const Ae=a===!1?new en("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${ae} on line ${this.info.lines}`],this.options,this.__infoField(),{record:Z}):new en("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${a.length},`,`got ${ae} on line ${this.info.lines}`],this.options,this.__infoField(),{record:Z});if(g===!0||u===!0&&ae<this.state.expectedRecordLength||k===!0&&ae>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=Ae;else{const Pe=this.__error(Ae);if(Pe)return Pe}}if(w===!0&&md(Z)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,h===1||this.info.records>=h){const{objname:Ae}=this.options;if(a!==!1){const Pe={};for(let ze=0,pe=Z.length;ze<pe;ze++)a[ze]===void 0||a[ze].disabled||(r===!0&&Pe[a[ze].name]!==void 0?Array.isArray(Pe[a[ze].name])?Pe[a[ze].name]=Pe[a[ze].name].concat(Z[ze]):Pe[a[ze].name]=[Pe[a[ze].name],Z[ze]]:Pe[a[ze].name]=Z[ze]);if(O===!0||m===!0){const ze=Object.assign({record:Pe},O===!0?{raw:this.state.rawBuffer.toString(o)}:{},m===!0?{info:this.__infoRecord()}:{}),pe=this.__push(Ae===void 0?ze:[Pe[Ae],ze],n);if(pe)return pe}else{const ze=this.__push(Ae===void 0?Pe:[Pe[Ae],Pe],n);if(ze)return ze}}else if(O===!0||m===!0){const Pe=Object.assign({record:Z},O===!0?{raw:this.state.rawBuffer.toString(o)}:{},m===!0?{info:this.__infoRecord()}:{}),ze=this.__push(Ae===void 0?Pe:[Z[Ae],Pe],n);if(ze)return ze}else{const Pe=this.__push(Ae===void 0?Z:[Z[Ae],Z],n);if(Pe)return Pe}}this.__resetRecord()},__firstLineToColumns:function(n){const{firstLineToHeaders:a}=this.state;try{const r=a===void 0?n:a.call(null,n);if(!Array.isArray(r))return this.__error(new en("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(r)}`],this.options,this.__infoField(),{headers:r}));const o=G_(r);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(r){return r}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:n,encoding:a,rtrim:r,max_record_size:o}=this.options,{enabled:m,wasQuoting:h}=this.state;if(m===!1)return this.__resetField();let g=this.state.field.toString(a);if(r===!0&&h===!1&&(g=g.trimRight()),n===!0){const[u,k]=this.__cast(g);if(u!==void 0)return u;g=k}this.state.record.push(g),o!==0&&typeof g=="string"&&(this.state.record_length+=g.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(n,a){const{on_record:r}=this.options;if(r!==void 0){const o=this.__infoRecord();try{n=r.call(null,n,o)}catch(m){return m}if(n==null)return}a(n)},__cast:function(n){const{columns:a,relax_column_count:r}=this.options;if(Array.isArray(a)===!0&&r&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const m=this.__infoField();return[void 0,this.state.castField.call(null,n,m)]}catch(m){return[m]}if(this.__isFloat(n))return[void 0,parseFloat(n)];if(this.options.cast_date!==!1){const m=this.__infoField();return[void 0,this.options.cast_date.call(null,n,m)]}return[void 0,n]},__isCharTrimable:function(n,a){return((o,m)=>{const{timchars:h}=this.state;e:for(let g=0;g<h.length;g++){const u=h[g];for(let k=0;k<u.length;k++)if(u[k]!==o[m+k])continue e;return u.length}return 0})(n,a)},__isFloat:function(n){return n-parseFloat(n)+1>=0},__compareBytes:function(n,a,r,o){if(n[0]!==o)return 0;const m=n.length;for(let h=1;h<m;h++)if(n[h]!==a[r+h])return 0;return m},__isDelimiter:function(n,a,r){const{delimiter:o,ignore_last_delimiters:m}=this.options;if(m===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(m!==!1&&typeof m=="number"&&this.state.record.length===m-1)return 0;e:for(let h=0;h<o.length;h++){const g=o[h];if(g[0]===r){for(let u=1;u<g.length;u++)if(g[u]!==n[a+u])continue e;return g.length}}return 0},__isRecordDelimiter:function(n,a,r){const{record_delimiter:o}=this.options,m=o.length;e:for(let h=0;h<m;h++){const g=o[h],u=g.length;if(g[0]===n){for(let k=1;k<u;k++)if(g[k]!==a[r+k])continue e;return g.length}}return 0},__isEscape:function(n,a,r){const{escape:o}=this.options;if(o===null)return!1;const m=o.length;if(o[0]===r){for(let h=0;h<m;h++)if(o[h]!==n[a+h])return!1;return!0}return!1},__isQuote:function(n,a){const{quote:r}=this.options;if(r===null)return!1;const o=r.length;for(let m=0;m<o;m++)if(r[m]!==n[a+m])return!1;return!0},__autoDiscoverRecordDelimiter:function(n,a){const{encoding:r}=this.options,o=[xe.from(`\r
`,r),xe.from(`
`,r),xe.from("\r",r)];e:for(let m=0;m<o.length;m++){const h=o[m].length;for(let g=0;g<h;g++)if(o[m][g]!==n[a+g])continue e;return this.options.record_delimiter.push(o[m]),this.state.recordDelimiterMaxLength=o[m].length,o[m].length}return 0},__error:function(n){const{encoding:a,raw:r,skip_records_with_error:o}=this.options,m=typeof n=="string"?new Error(n):n;if(o){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(m,r?this.state.rawBuffer.toString(a):void 0);return}else return m},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:n,raw:a,encoding:r}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:n===!0,index:this.state.record.length,raw:a?this.state.rawBuffer.toString(r):void 0}},__infoField:function(){const{columns:n}=this.options,a=Array.isArray(n);return{...this.__infoRecord(),column:a===!0?n.length>this.state.record.length?n[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};class CE extends Ps{constructor(e={}){super({readableObjectMode:!0,...e,encoding:null}),this.api=OE({on_skip:(t,n)=>{this.emit("skip",t,n)},...e}),this.state=this.api.state,this.options=this.api.options,this.info=this.api.info}_transform(e,t,n){if(this.state.stop===!0)return;const a=this.api.parse(e,!1,r=>{this.push(r)},()=>{this.push(null),this.end(),this.on("end",this.destroy)});a!==void 0&&(this.state.stop=!0),n(a)}_flush(e){if(this.state.stop===!0)return;const t=this.api.parse(void 0,!0,n=>{this.push(n)},()=>{this.push(null),this.on("end",this.destroy)});e(t)}}const ep=function(){let s,e,t;for(const a in arguments){const r=arguments[a],o=typeof r;if(s===void 0&&(typeof r=="string"||ts(r)))s=r;else if(e===void 0&&H_(r))e=r;else if(t===void 0&&o==="function")t=r;else throw new en("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(r)} at index ${a}`],e||{})}const n=new CE(e);if(t){const a=e===void 0||e.objname===void 0?[]:{};n.on("readable",function(){let r;for(;(r=this.read())!==null;)e===void 0||e.objname===void 0?a.push(r):a[r[0]]=r[1]}),n.on("error",function(r){t(r,void 0,n.api.__infoDataSet())}),n.on("end",function(){t(void 0,a,n.api.__infoDataSet())})}if(s!==void 0){const a=function(){n.write(s),n.end()};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}return n};var NE;function Wr(){}Wr.prototype=Object.create(null);function Qt(){Qt.init.call(this)}Qt.EventEmitter=Qt;Qt.usingDomains=!1;Qt.prototype.domain=void 0;Qt.prototype._events=void 0;Qt.prototype._maxListeners=void 0;Qt.defaultMaxListeners=10;Qt.init=function(){this.domain=null,Qt.usingDomains&&NE.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Wr,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Qt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function Q_(s){return s._maxListeners===void 0?Qt.defaultMaxListeners:s._maxListeners}Qt.prototype.getMaxListeners=function(){return Q_(this)};function LE(s,e,t){if(e)s.call(t);else for(var n=s.length,a=wo(s,n),r=0;r<n;++r)a[r].call(t)}function ME(s,e,t,n){if(e)s.call(t,n);else for(var a=s.length,r=wo(s,a),o=0;o<a;++o)r[o].call(t,n)}function DE(s,e,t,n,a){if(e)s.call(t,n,a);else for(var r=s.length,o=wo(s,r),m=0;m<r;++m)o[m].call(t,n,a)}function FE(s,e,t,n,a,r){if(e)s.call(t,n,a,r);else for(var o=s.length,m=wo(s,o),h=0;h<o;++h)m[h].call(t,n,a,r)}function PE(s,e,t,n){if(e)s.apply(t,n);else for(var a=s.length,r=wo(s,a),o=0;o<a;++o)r[o].apply(t,n)}Qt.prototype.emit=function(e){var t,n,a,r,o,m,h,g=e==="error";if(m=this._events,m)g=g&&m.error==null;else if(!g)return!1;if(h=this.domain,g){if(t=arguments[1],h)t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=h,t.domainThrown=!1,h.emit("error",t);else{if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return!1}if(n=m[e],!n)return!1;var k=typeof n=="function";switch(a=arguments.length,a){case 1:LE(n,k,this);break;case 2:ME(n,k,this,arguments[1]);break;case 3:DE(n,k,this,arguments[1],arguments[2]);break;case 4:FE(n,k,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(a-1),o=1;o<a;o++)r[o-1]=arguments[o];PE(n,k,this,r)}return!0};function Y_(s,e,t,n){var a,r,o;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(r=s._events,r?(r.newListener&&(s.emit("newListener",e,t.listener?t.listener:t),r=s._events),o=r[e]):(r=s._events=new Wr,s._eventsCount=0),!o)o=r[e]=t,++s._eventsCount;else if(typeof o=="function"?o=r[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),!o.warned&&(a=Q_(s),a&&a>0&&o.length>a)){o.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=s,m.type=e,m.count=o.length,jE(m)}return s}function jE(s){typeof console.warn=="function"?console.warn(s):console.log(s)}Qt.prototype.addListener=function(e,t){return Y_(this,e,t,!1)};Qt.prototype.on=Qt.prototype.addListener;Qt.prototype.prependListener=function(e,t){return Y_(this,e,t,!0)};function J_(s,e,t){var n=!1;function a(){s.removeListener(e,a),n||(n=!0,t.apply(s,arguments))}return a.listener=t,a}Qt.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,J_(this,e,t)),this};Qt.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,J_(this,e,t)),this};Qt.prototype.removeListener=function(e,t){var n,a,r,o,m;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(a=this._events,!a)return this;if(n=a[e],!n)return this;if(n===t||n.listener&&n.listener===t)--this._eventsCount===0?this._events=new Wr:(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(r=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){m=n[o].listener,r=o;break}if(r<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Wr,this;delete a[e]}else UE(n,r);a.removeListener&&this.emit("removeListener",e,m||t)}return this};Qt.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Wr,this._eventsCount=0):n[e]&&(--this._eventsCount===0?this._events=new Wr:delete n[e]),this;if(arguments.length===0){for(var a=Object.keys(n),r=0,o;r<a.length;++r)o=a[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new Wr,this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};Qt.prototype.listeners=function(e){var t,n,a=this._events;return a?(t=a[e],t?typeof t=="function"?n=[t.listener||t]:n=BE(t):n=[]):n=[],n};Qt.listenerCount=function(s,e){return typeof s.listenerCount=="function"?s.listenerCount(e):Z_.call(s,e)};Qt.prototype.listenerCount=Z_;function Z_(s){var e=this._events;if(e){var t=e[s];if(typeof t=="function")return 1;if(t)return t.length}return 0}Qt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function UE(s,e){for(var t=e,n=t+1,a=s.length;n<a;t+=1,n+=1)s[t]=s[n];s.pop()}function wo(s,e){for(var t=new Array(e);e--;)t[e]=s[e];return t}function BE(s){for(var e=new Array(s.length),t=0;t<e.length;++t)e[t]=s[t].listener||s[t];return e}var pi=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Gs=[],ks=[],zE=typeof Uint8Array<"u"?Uint8Array:Array,jp=!1;function X_(){jp=!0;for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=s.length;e<t;++e)Gs[e]=s[e],ks[s.charCodeAt(e)]=e;ks[45]=62,ks[95]=63}function WE(s){jp||X_();var e,t,n,a,r,o,m=s.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");r=s[m-2]==="="?2:s[m-1]==="="?1:0,o=new zE(m*3/4-r),n=r>0?m-4:m;var h=0;for(e=0,t=0;e<n;e+=4,t+=3)a=ks[s.charCodeAt(e)]<<18|ks[s.charCodeAt(e+1)]<<12|ks[s.charCodeAt(e+2)]<<6|ks[s.charCodeAt(e+3)],o[h++]=a>>16&255,o[h++]=a>>8&255,o[h++]=a&255;return r===2?(a=ks[s.charCodeAt(e)]<<2|ks[s.charCodeAt(e+1)]>>4,o[h++]=a&255):r===1&&(a=ks[s.charCodeAt(e)]<<10|ks[s.charCodeAt(e+1)]<<4|ks[s.charCodeAt(e+2)]>>2,o[h++]=a>>8&255,o[h++]=a&255),o}function HE(s){return Gs[s>>18&63]+Gs[s>>12&63]+Gs[s>>6&63]+Gs[s&63]}function VE(s,e,t){for(var n,a=[],r=e;r<t;r+=3)n=(s[r]<<16)+(s[r+1]<<8)+s[r+2],a.push(HE(n));return a.join("")}function fd(s){jp||X_();for(var e,t=s.length,n=t%3,a="",r=[],o=16383,m=0,h=t-n;m<h;m+=o)r.push(VE(s,m,m+o>h?h:m+o));return n===1?(e=s[t-1],a+=Gs[e>>2],a+=Gs[e<<4&63],a+="=="):n===2&&(e=(s[t-2]<<8)+s[t-1],a+=Gs[e>>10],a+=Gs[e>>4&63],a+=Gs[e<<2&63],a+="="),r.push(a),r.join("")}function ac(s,e,t,n,a){var r,o,m=a*8-n-1,h=(1<<m)-1,g=h>>1,u=-7,k=t?a-1:0,O=t?-1:1,w=s[e+k];for(k+=O,r=w&(1<<-u)-1,w>>=-u,u+=m;u>0;r=r*256+s[e+k],k+=O,u-=8);for(o=r&(1<<-u)-1,r>>=-u,u+=n;u>0;o=o*256+s[e+k],k+=O,u-=8);if(r===0)r=1-g;else{if(r===h)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-g}return(w?-1:1)*o*Math.pow(2,r-n)}function K_(s,e,t,n,a,r){var o,m,h,g=r*8-a-1,u=(1<<g)-1,k=u>>1,O=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:r-1,N=n?1:-1,Z=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(m=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+k>=1?e+=O/h:e+=O*Math.pow(2,1-k),e*h>=2&&(o++,h/=2),o+k>=u?(m=0,o=u):o+k>=1?(m=(e*h-1)*Math.pow(2,a),o=o+k):(m=e*Math.pow(2,k-1)*Math.pow(2,a),o=0));a>=8;s[t+w]=m&255,w+=N,m/=256,a-=8);for(o=o<<a|m,g+=a;g>0;s[t+w]=o&255,w+=N,o/=256,g-=8);s[t+w-N]|=Z*128}var GE={}.toString,eh=Array.isArray||function(s){return GE.call(s)=="[object Array]"},QE=50;Re.TYPED_ARRAY_SUPPORT=pi.TYPED_ARRAY_SUPPORT!==void 0?pi.TYPED_ARRAY_SUPPORT:!0;Gl();function Gl(){return Re.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _r(s,e){if(Gl()<e)throw new RangeError("Invalid typed array length");return Re.TYPED_ARRAY_SUPPORT?(s=new Uint8Array(e),s.__proto__=Re.prototype):(s===null&&(s=new Re(e)),s.length=e),s}function Re(s,e,t){if(!Re.TYPED_ARRAY_SUPPORT&&!(this instanceof Re))return new Re(s,e,t);if(typeof s=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Up(this,s)}return th(this,s,e,t)}Re.poolSize=8192;Re._augment=function(s){return s.__proto__=Re.prototype,s};function th(s,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?ZE(s,e,t,n):typeof e=="string"?JE(s,e,t):XE(s,e)}Re.from=function(s,e,t){return th(null,s,e,t)};Re.TYPED_ARRAY_SUPPORT&&(Re.prototype.__proto__=Uint8Array.prototype,Re.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Re[Symbol.species]);function nh(s){if(typeof s!="number")throw new TypeError('"size" argument must be a number');if(s<0)throw new RangeError('"size" argument must not be negative')}function YE(s,e,t,n){return nh(e),e<=0?_r(s,e):t!==void 0?typeof n=="string"?_r(s,e).fill(t,n):_r(s,e).fill(t):_r(s,e)}Re.alloc=function(s,e,t){return YE(null,s,e,t)};function Up(s,e){if(nh(e),s=_r(s,e<0?0:Bp(e)|0),!Re.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)s[t]=0;return s}Re.allocUnsafe=function(s){return Up(null,s)};Re.allocUnsafeSlow=function(s){return Up(null,s)};function JE(s,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Re.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=sh(e,t)|0;s=_r(s,n);var a=s.write(e,t);return a!==n&&(s=s.slice(0,a)),s}function xp(s,e){var t=e.length<0?0:Bp(e.length)|0;s=_r(s,t);for(var n=0;n<t;n+=1)s[n]=e[n]&255;return s}function ZE(s,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),Re.TYPED_ARRAY_SUPPORT?(s=e,s.__proto__=Re.prototype):s=xp(s,e),s}function XE(s,e){if(Xs(e)){var t=Bp(e.length)|0;return s=_r(s,t),s.length===0||e.copy(s,0,0,t),s}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||bA(e.length)?_r(s,0):xp(s,e);if(e.type==="Buffer"&&eh(e.data))return xp(s,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Bp(s){if(s>=Gl())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Gl().toString(16)+" bytes");return s|0}Re.isBuffer=ba;function Xs(s){return!!(s!=null&&s._isBuffer)}Re.compare=function(e,t){if(!Xs(e)||!Xs(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,r=0,o=Math.min(n,a);r<o;++r)if(e[r]!==t[r]){n=e[r],a=t[r];break}return n<a?-1:a<n?1:0};Re.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Re.concat=function(e,t){if(!eh(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Re.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=Re.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!Xs(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(a,r),r+=o.length}return a};function sh(s,e){if(Xs(s))return s.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(s)||s instanceof ArrayBuffer))return s.byteLength;typeof s!="string"&&(s=""+s);var t=s.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Ql(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return uh(s).length;default:if(n)return Ql(s).length;e=(""+e).toLowerCase(),n=!0}}Re.byteLength=sh;function KE(s,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(s||(s="utf8");;)switch(s){case"hex":return cA(this,e,t);case"utf8":case"utf-8":return ih(this,e,t);case"ascii":return oA(this,e,t);case"latin1":case"binary":return lA(this,e,t);case"base64":return aA(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uA(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),n=!0}}Re.prototype._isBuffer=!0;function ha(s,e,t){var n=s[e];s[e]=s[t],s[t]=n}Re.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ha(this,t,t+1);return this};Re.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ha(this,t,t+3),ha(this,t+1,t+2);return this};Re.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ha(this,t,t+7),ha(this,t+1,t+6),ha(this,t+2,t+5),ha(this,t+3,t+4);return this};Re.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?ih(this,0,e):KE.apply(this,arguments)};Re.prototype.equals=function(e){if(!Xs(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Re.compare(this,e)===0};Re.prototype.inspect=function(){var e="",t=QE;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};Re.prototype.compare=function(e,t,n,a,r){if(!Xs(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),a===void 0&&(a=0),r===void 0&&(r=this.length),t<0||n>e.length||a<0||r>this.length)throw new RangeError("out of range index");if(a>=r&&t>=n)return 0;if(a>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,a>>>=0,r>>>=0,this===e)return 0;for(var o=r-a,m=n-t,h=Math.min(o,m),g=this.slice(a,r),u=e.slice(t,n),k=0;k<h;++k)if(g[k]!==u[k]){o=g[k],m=u[k];break}return o<m?-1:m<o?1:0};function rh(s,e,t,n,a){if(s.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=a?0:s.length-1),t<0&&(t=s.length+t),t>=s.length){if(a)return-1;t=s.length-1}else if(t<0)if(a)t=0;else return-1;if(typeof e=="string"&&(e=Re.from(e,n)),Xs(e))return e.length===0?-1:dd(s,e,t,n,a);if(typeof e=="number")return e=e&255,Re.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(s,e,t):Uint8Array.prototype.lastIndexOf.call(s,e,t):dd(s,[e],t,n,a);throw new TypeError("val must be string, number or Buffer")}function dd(s,e,t,n,a){var r=1,o=s.length,m=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(s.length<2||e.length<2)return-1;r=2,o/=2,m/=2,t/=2}function h(w,N){return r===1?w[N]:w.readUInt16BE(N*r)}var g;if(a){var u=-1;for(g=t;g<o;g++)if(h(s,g)===h(e,u===-1?0:g-u)){if(u===-1&&(u=g),g-u+1===m)return u*r}else u!==-1&&(g-=g-u),u=-1}else for(t+m>o&&(t=o-m),g=t;g>=0;g--){for(var k=!0,O=0;O<m;O++)if(h(s,g+O)!==h(e,O)){k=!1;break}if(k)return g}return-1}Re.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Re.prototype.indexOf=function(e,t,n){return rh(this,e,t,n,!0)};Re.prototype.lastIndexOf=function(e,t,n){return rh(this,e,t,n,!1)};function eA(s,e,t,n){t=Number(t)||0;var a=s.length-t;n?(n=Number(n),n>a&&(n=a)):n=a;var r=e.length;if(r%2!==0)throw new TypeError("Invalid hex string");n>r/2&&(n=r/2);for(var o=0;o<n;++o){var m=parseInt(e.substr(o*2,2),16);if(isNaN(m))return o;s[t+o]=m}return o}function tA(s,e,t,n){return lc(Ql(e,s.length-t),s,t,n)}function ah(s,e,t,n){return lc(_A(e),s,t,n)}function nA(s,e,t,n){return ah(s,e,t,n)}function sA(s,e,t,n){return lc(uh(e),s,t,n)}function rA(s,e,t,n){return lc(hA(e,s.length-t),s,t,n)}Re.prototype.write=function(e,t,n,a){if(t===void 0)a="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")a=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,a===void 0&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r=this.length-t;if((n===void 0||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var o=!1;;)switch(a){case"hex":return eA(this,e,t,n);case"utf8":case"utf-8":return tA(this,e,t,n);case"ascii":return ah(this,e,t,n);case"latin1":case"binary":return nA(this,e,t,n);case"base64":return sA(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rA(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0}};Re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function aA(s,e,t){return e===0&&t===s.length?fd(s):fd(s.slice(e,t))}function ih(s,e,t){t=Math.min(s.length,t);for(var n=[],a=e;a<t;){var r=s[a],o=null,m=r>239?4:r>223?3:r>191?2:1;if(a+m<=t){var h,g,u,k;switch(m){case 1:r<128&&(o=r);break;case 2:h=s[a+1],(h&192)===128&&(k=(r&31)<<6|h&63,k>127&&(o=k));break;case 3:h=s[a+1],g=s[a+2],(h&192)===128&&(g&192)===128&&(k=(r&15)<<12|(h&63)<<6|g&63,k>2047&&(k<55296||k>57343)&&(o=k));break;case 4:h=s[a+1],g=s[a+2],u=s[a+3],(h&192)===128&&(g&192)===128&&(u&192)===128&&(k=(r&15)<<18|(h&63)<<12|(g&63)<<6|u&63,k>65535&&k<1114112&&(o=k))}}o===null?(o=65533,m=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),a+=m}return iA(n)}var _d=4096;function iA(s){var e=s.length;if(e<=_d)return String.fromCharCode.apply(String,s);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,s.slice(n,n+=_d));return t}function oA(s,e,t){var n="";t=Math.min(s.length,t);for(var a=e;a<t;++a)n+=String.fromCharCode(s[a]&127);return n}function lA(s,e,t){var n="";t=Math.min(s.length,t);for(var a=e;a<t;++a)n+=String.fromCharCode(s[a]);return n}function cA(s,e,t){var n=s.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var a="",r=e;r<t;++r)a+=dA(s[r]);return a}function uA(s,e,t){for(var n=s.slice(e,t),a="",r=0;r<n.length;r+=2)a+=String.fromCharCode(n[r]+n[r+1]*256);return a}Re.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var a;if(Re.TYPED_ARRAY_SUPPORT)a=this.subarray(e,t),a.__proto__=Re.prototype;else{var r=t-e;a=new Re(r,void 0);for(var o=0;o<r;++o)a[o]=this[o+e]}return a};function qn(s,e,t){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+e>t)throw new RangeError("Trying to access beyond buffer length")}Re.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||qn(e,t,this.length);for(var a=this[e],r=1,o=0;++o<t&&(r*=256);)a+=this[e+o]*r;return a};Re.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||qn(e,t,this.length);for(var a=this[e+--t],r=1;t>0&&(r*=256);)a+=this[e+--t]*r;return a};Re.prototype.readUInt8=function(e,t){return t||qn(e,1,this.length),this[e]};Re.prototype.readUInt16LE=function(e,t){return t||qn(e,2,this.length),this[e]|this[e+1]<<8};Re.prototype.readUInt16BE=function(e,t){return t||qn(e,2,this.length),this[e]<<8|this[e+1]};Re.prototype.readUInt32LE=function(e,t){return t||qn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Re.prototype.readUInt32BE=function(e,t){return t||qn(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Re.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||qn(e,t,this.length);for(var a=this[e],r=1,o=0;++o<t&&(r*=256);)a+=this[e+o]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a};Re.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||qn(e,t,this.length);for(var a=t,r=1,o=this[e+--a];a>0&&(r*=256);)o+=this[e+--a]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o};Re.prototype.readInt8=function(e,t){return t||qn(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Re.prototype.readInt16LE=function(e,t){t||qn(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Re.prototype.readInt16BE=function(e,t){t||qn(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Re.prototype.readInt32LE=function(e,t){return t||qn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Re.prototype.readInt32BE=function(e,t){return t||qn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Re.prototype.readFloatLE=function(e,t){return t||qn(e,4,this.length),ac(this,e,!0,23,4)};Re.prototype.readFloatBE=function(e,t){return t||qn(e,4,this.length),ac(this,e,!1,23,4)};Re.prototype.readDoubleLE=function(e,t){return t||qn(e,8,this.length),ac(this,e,!0,52,8)};Re.prototype.readDoubleBE=function(e,t){return t||qn(e,8,this.length),ac(this,e,!1,52,8)};function as(s,e,t,n,a,r){if(!Xs(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<r)throw new RangeError('"value" argument is out of bounds');if(t+n>s.length)throw new RangeError("Index out of range")}Re.prototype.writeUIntLE=function(e,t,n,a){if(e=+e,t=t|0,n=n|0,!a){var r=Math.pow(2,8*n)-1;as(this,e,t,n,r,0)}var o=1,m=0;for(this[t]=e&255;++m<n&&(o*=256);)this[t+m]=e/o&255;return t+n};Re.prototype.writeUIntBE=function(e,t,n,a){if(e=+e,t=t|0,n=n|0,!a){var r=Math.pow(2,8*n)-1;as(this,e,t,n,r,0)}var o=n-1,m=1;for(this[t+o]=e&255;--o>=0&&(m*=256);)this[t+o]=e/m&255;return t+n};Re.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,1,255,0),Re.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function ic(s,e,t,n){e<0&&(e=65535+e+1);for(var a=0,r=Math.min(s.length-t,2);a<r;++a)s[t+a]=(e&255<<8*(n?a:1-a))>>>(n?a:1-a)*8}Re.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,2,65535,0),Re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):ic(this,e,t,!0),t+2};Re.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,2,65535,0),Re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):ic(this,e,t,!1),t+2};function oc(s,e,t,n){e<0&&(e=4294967295+e+1);for(var a=0,r=Math.min(s.length-t,4);a<r;++a)s[t+a]=e>>>(n?a:3-a)*8&255}Re.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,4,4294967295,0),Re.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):oc(this,e,t,!0),t+4};Re.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,4,4294967295,0),Re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):oc(this,e,t,!1),t+4};Re.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t=t|0,!a){var r=Math.pow(2,8*n-1);as(this,e,t,n,r-1,-r)}var o=0,m=1,h=0;for(this[t]=e&255;++o<n&&(m*=256);)e<0&&h===0&&this[t+o-1]!==0&&(h=1),this[t+o]=(e/m>>0)-h&255;return t+n};Re.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t=t|0,!a){var r=Math.pow(2,8*n-1);as(this,e,t,n,r-1,-r)}var o=n-1,m=1,h=0;for(this[t+o]=e&255;--o>=0&&(m*=256);)e<0&&h===0&&this[t+o+1]!==0&&(h=1),this[t+o]=(e/m>>0)-h&255;return t+n};Re.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,1,127,-128),Re.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};Re.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,2,32767,-32768),Re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):ic(this,e,t,!0),t+2};Re.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,2,32767,-32768),Re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):ic(this,e,t,!1),t+2};Re.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,4,2147483647,-2147483648),Re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):oc(this,e,t,!0),t+4};Re.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||as(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):oc(this,e,t,!1),t+4};function oh(s,e,t,n,a,r){if(t+n>s.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function lh(s,e,t,n,a){return a||oh(s,e,t,4),K_(s,e,t,n,23,4),t+4}Re.prototype.writeFloatLE=function(e,t,n){return lh(this,e,t,!0,n)};Re.prototype.writeFloatBE=function(e,t,n){return lh(this,e,t,!1,n)};function ch(s,e,t,n,a){return a||oh(s,e,t,8),K_(s,e,t,n,52,8),t+8}Re.prototype.writeDoubleLE=function(e,t,n){return ch(this,e,t,!0,n)};Re.prototype.writeDoubleBE=function(e,t,n){return ch(this,e,t,!1,n)};Re.prototype.copy=function(e,t,n,a){if(n||(n=0),!a&&a!==0&&(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var r=a-n,o;if(this===e&&n<t&&t<a)for(o=r-1;o>=0;--o)e[o+t]=this[o+n];else if(r<1e3||!Re.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r};Re.prototype.fill=function(e,t,n,a){if(typeof e=="string"){if(typeof t=="string"?(a=t,t=0,n=this.length):typeof n=="string"&&(a=n,n=this.length),e.length===1){var r=e.charCodeAt(0);r<256&&(e=r)}if(a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!Re.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{var m=Xs(e)?e:Ql(new Re(e,a).toString()),h=m.length;for(o=0;o<n-t;++o)this[o+t]=m[o%h]}return this};var pA=/[^+\/0-9A-Za-z-_]/g;function mA(s){if(s=fA(s).replace(pA,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function fA(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function dA(s){return s<16?"0"+s.toString(16):s.toString(16)}function Ql(s,e){e=e||1/0;for(var t,n=s.length,a=null,r=[],o=0;o<n;++o){if(t=s.charCodeAt(o),t>55295&&t<57344){if(!a){if(t>56319){(e-=3)>-1&&r.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&r.push(239,191,189);continue}a=t;continue}if(t<56320){(e-=3)>-1&&r.push(239,191,189),a=t;continue}t=(a-55296<<10|t-56320)+65536}else a&&(e-=3)>-1&&r.push(239,191,189);if(a=null,t<128){if((e-=1)<0)break;r.push(t)}else if(t<2048){if((e-=2)<0)break;r.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;r.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;r.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return r}function _A(s){for(var e=[],t=0;t<s.length;++t)e.push(s.charCodeAt(t)&255);return e}function hA(s,e){for(var t,n,a,r=[],o=0;o<s.length&&!((e-=2)<0);++o)t=s.charCodeAt(o),n=t>>8,a=t%256,r.push(a),r.push(n);return r}function uh(s){return WE(mA(s))}function lc(s,e,t,n){for(var a=0;a<n&&!(a+t>=e.length||a>=s.length);++a)e[a+t]=s[a];return a}function bA(s){return s!==s}function ba(s){return s!=null&&(!!s._isBuffer||ph(s)||yA(s))}function ph(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function yA(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&ph(s.slice(0,0))}function mh(){throw new Error("setTimeout has not been defined")}function fh(){throw new Error("clearTimeout has not been defined")}var Mr=mh,Dr=fh;typeof pi.setTimeout=="function"&&(Mr=setTimeout);typeof pi.clearTimeout=="function"&&(Dr=clearTimeout);function dh(s){if(Mr===setTimeout)return setTimeout(s,0);if((Mr===mh||!Mr)&&setTimeout)return Mr=setTimeout,setTimeout(s,0);try{return Mr(s,0)}catch{try{return Mr.call(null,s,0)}catch{return Mr.call(this,s,0)}}}function gA(s){if(Dr===clearTimeout)return clearTimeout(s);if((Dr===fh||!Dr)&&clearTimeout)return Dr=clearTimeout,clearTimeout(s);try{return Dr(s)}catch{try{return Dr.call(null,s)}catch{return Dr.call(this,s)}}}var hr=[],ri=!1,ya,Rl=-1;function wA(){!ri||!ya||(ri=!1,ya.length?hr=ya.concat(hr):Rl=-1,hr.length&&_h())}function _h(){if(!ri){var s=dh(wA);ri=!0;for(var e=hr.length;e;){for(ya=hr,hr=[];++Rl<e;)ya&&ya[Rl].run();Rl=-1,e=hr.length}ya=null,ri=!1,gA(s)}}function _s(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];hr.push(new hh(s,e)),hr.length===1&&!ri&&dh(_h)}function hh(s,e){this.fun=s,this.array=e}hh.prototype.run=function(){this.fun.apply(null,this.array)};var xA="browser",$A="browser",vA=!0,kA={},EA=[],AA="",TA={},SA={},IA={};function Aa(){}var qA=Aa,RA=Aa,OA=Aa,CA=Aa,NA=Aa,LA=Aa,MA=Aa;function DA(s){throw new Error("process.binding is not supported")}function FA(){return"/"}function PA(s){throw new Error("process.chdir is not supported")}function jA(){return 0}var Ka=pi.performance||{},UA=Ka.now||Ka.mozNow||Ka.msNow||Ka.oNow||Ka.webkitNow||function(){return new Date().getTime()};function BA(s){var e=UA.call(Ka)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return s&&(t=t-s[0],n=n-s[1],n<0&&(t--,n+=1e9)),[t,n]}var zA=new Date;function WA(){var s=new Date,e=s-zA;return e/1e3}var Ol={nextTick:_s,title:xA,browser:vA,env:kA,argv:EA,version:AA,versions:TA,on:qA,addListener:RA,once:OA,off:CA,removeListener:NA,removeAllListeners:LA,emit:MA,binding:DA,cwd:FA,chdir:PA,umask:jA,hrtime:BA,platform:$A,release:SA,config:IA,uptime:WA},$p;typeof Object.create=="function"?$p=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:$p=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var fi=$p,HA=/%[sdj%]/g;function VA(s){if(!Wp(s)){for(var e=[],t=0;t<arguments.length;t++)e.push(Hr(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,a=n.length,r=String(s).replace(HA,function(m){if(m==="%%")return"%";if(t>=a)return m;switch(m){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return m}}),o=n[t];t<a;o=n[++t])zp(o)||!xo(o)?r+=" "+o:r+=" "+Hr(o);return r}function bh(s,e){if(Ur(pi.process))return function(){return bh(s,e).apply(this,arguments)};if(Ol.noDeprecation===!0)return s;var t=!1;function n(){if(!t){if(Ol.throwDeprecation)throw new Error(e);Ol.traceDeprecation?console.trace(e):console.error(e),t=!0}return s.apply(this,arguments)}return n}var kl={},tp;function GA(s){if(Ur(tp)&&(tp=Ol.env.NODE_DEBUG||""),s=s.toUpperCase(),!kl[s])if(new RegExp("\\b"+s+"\\b","i").test(tp)){var e=0;kl[s]=function(){var t=VA.apply(null,arguments);console.error("%s %d: %s",s,e,t)}}else kl[s]=function(){};return kl[s]}function Hr(s,e){var t={seen:[],stylize:YA};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),yh(e)?t.showHidden=e:e&&nT(t,e),Ur(t.showHidden)&&(t.showHidden=!1),Ur(t.depth)&&(t.depth=2),Ur(t.colors)&&(t.colors=!1),Ur(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=QA),Yl(t,s,t.depth)}Hr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Hr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function QA(s,e){var t=Hr.styles[e];return t?"\x1B["+Hr.colors[t][0]+"m"+s+"\x1B["+Hr.colors[t][1]+"m":s}function YA(s,e){return s}function JA(s){var e={};return s.forEach(function(t,n){e[t]=!0}),e}function Yl(s,e,t){if(s.customInspect&&e&&ap(e.inspect)&&e.inspect!==Hr&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,s);return Wp(n)||(n=Yl(s,n,t)),n}var a=ZA(s,e);if(a)return a;var r=Object.keys(e),o=JA(r);if(s.showHidden&&(r=Object.getOwnPropertyNames(e)),rp(e)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return np(e);if(r.length===0){if(ap(e)){var m=e.name?": "+e.name:"";return s.stylize("[Function"+m+"]","special")}if(sp(e))return s.stylize(RegExp.prototype.toString.call(e),"regexp");if(hd(e))return s.stylize(Date.prototype.toString.call(e),"date");if(rp(e))return np(e)}var h="",g=!1,u=["{","}"];if(eT(e)&&(g=!0,u=["[","]"]),ap(e)){var k=e.name?": "+e.name:"";h=" [Function"+k+"]"}if(sp(e)&&(h=" "+RegExp.prototype.toString.call(e)),hd(e)&&(h=" "+Date.prototype.toUTCString.call(e)),rp(e)&&(h=" "+np(e)),r.length===0&&(!g||e.length==0))return u[0]+h+u[1];if(t<0)return sp(e)?s.stylize(RegExp.prototype.toString.call(e),"regexp"):s.stylize("[Object]","special");s.seen.push(e);var O;return g?O=XA(s,e,t,o,r):O=r.map(function(w){return vp(s,e,t,o,w,g)}),s.seen.pop(),KA(O,h,u)}function ZA(s,e){if(Ur(e))return s.stylize("undefined","undefined");if(Wp(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return s.stylize(t,"string")}if(tT(e))return s.stylize(""+e,"number");if(yh(e))return s.stylize(""+e,"boolean");if(zp(e))return s.stylize("null","null")}function np(s){return"["+Error.prototype.toString.call(s)+"]"}function XA(s,e,t,n,a){for(var r=[],o=0,m=e.length;o<m;++o)gh(e,String(o))?r.push(vp(s,e,t,n,String(o),!0)):r.push("");return a.forEach(function(h){h.match(/^\d+$/)||r.push(vp(s,e,t,n,h,!0))}),r}function vp(s,e,t,n,a,r){var o,m,h;if(h=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]},h.get?h.set?m=s.stylize("[Getter/Setter]","special"):m=s.stylize("[Getter]","special"):h.set&&(m=s.stylize("[Setter]","special")),gh(n,a)||(o="["+a+"]"),m||(s.seen.indexOf(h.value)<0?(zp(t)?m=Yl(s,h.value,null):m=Yl(s,h.value,t-1),m.indexOf(`
`)>-1&&(r?m=m.split(`
`).map(function(g){return"  "+g}).join(`
`).substr(2):m=`
`+m.split(`
`).map(function(g){return"   "+g}).join(`
`))):m=s.stylize("[Circular]","special")),Ur(o)){if(r&&a.match(/^\d+$/))return m;o=JSON.stringify(""+a),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=s.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=s.stylize(o,"string"))}return o+": "+m}function KA(s,e,t){var n=s.reduce(function(a,r){return r.indexOf(`
`)>=0,a+r.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+s.join(`,
  `)+" "+t[1]:t[0]+e+" "+s.join(", ")+" "+t[1]}function eT(s){return Array.isArray(s)}function yh(s){return typeof s=="boolean"}function zp(s){return s===null}function tT(s){return typeof s=="number"}function Wp(s){return typeof s=="string"}function Ur(s){return s===void 0}function sp(s){return xo(s)&&Hp(s)==="[object RegExp]"}function xo(s){return typeof s=="object"&&s!==null}function hd(s){return xo(s)&&Hp(s)==="[object Date]"}function rp(s){return xo(s)&&(Hp(s)==="[object Error]"||s instanceof Error)}function ap(s){return typeof s=="function"}function Hp(s){return Object.prototype.toString.call(s)}function nT(s,e){if(!e||!xo(e))return s;for(var t=Object.keys(e),n=t.length;n--;)s[t[n]]=e[t[n]];return s}function gh(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Ta(){this.head=null,this.tail=null,this.length=0}Ta.prototype.push=function(s){var e={data:s,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};Ta.prototype.unshift=function(s){var e={data:s,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};Ta.prototype.shift=function(){if(this.length!==0){var s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}};Ta.prototype.clear=function(){this.head=this.tail=null,this.length=0};Ta.prototype.join=function(s){if(this.length===0)return"";for(var e=this.head,t=""+e.data;e=e.next;)t+=s+e.data;return t};Ta.prototype.concat=function(s){if(this.length===0)return Re.alloc(0);if(this.length===1)return this.head.data;for(var e=Re.allocUnsafe(s>>>0),t=this.head,n=0;t;)t.data.copy(e,n),n+=t.data.length,t=t.next;return e};var sT=Re.isEncoding||function(s){switch(s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function rT(s){if(s&&!sT(s))throw new Error("Unknown encoding: "+s)}function $o(s){switch(this.encoding=(s||"utf8").toLowerCase().replace(/[-_]/,""),rT(s),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=iT;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=oT;break;default:this.write=aT;return}this.charBuffer=new Re(6),this.charReceived=0,this.charLength=0}$o.prototype.write=function(s){for(var e="";this.charLength;){var t=s.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:s.length;if(s.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";s=s.slice(t,s.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var a=e.charCodeAt(e.length-1);if(a>=55296&&a<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,s.length===0)return e;break}this.detectIncompleteChar(s);var n=s.length;this.charLength&&(s.copy(this.charBuffer,0,s.length-this.charReceived,n),n-=this.charReceived),e+=s.toString(this.encoding,0,n);var n=e.length-1,a=e.charCodeAt(n);if(a>=55296&&a<=56319){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),s.copy(this.charBuffer,0,0,r),e.substring(0,n)}return e};$o.prototype.detectIncompleteChar=function(s){for(var e=s.length>=3?3:s.length;e>0;e--){var t=s[s.length-e];if(e==1&&t>>5==6){this.charLength=2;break}if(e<=2&&t>>4==14){this.charLength=3;break}if(e<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=e};$o.prototype.end=function(s){var e="";if(s&&s.length&&(e=this.write(s)),this.charReceived){var t=this.charReceived,n=this.charBuffer,a=this.encoding;e+=n.slice(0,t).toString(a)}return e};function aT(s){return s.toString(this.encoding)}function iT(s){this.charReceived=s.length%2,this.charLength=this.charReceived?2:0}function oT(s){this.charReceived=s.length%3,this.charLength=this.charReceived?3:0}mn.ReadableState=wh;var nn=GA("stream");fi(mn,Qt);function lT(s,e,t){if(typeof s.prependListener=="function")return s.prependListener(e,t);!s._events||!s._events[e]?s.on(e,t):Array.isArray(s._events[e])?s._events[e].unshift(t):s._events[e]=[t,s._events[e]]}function cT(s,e){return s.listeners(e).length}function wh(s,e){s=s||{},this.objectMode=!!s.objectMode,e instanceof As&&(this.objectMode=this.objectMode||!!s.readableObjectMode);var t=s.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Ta,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=s.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,s.encoding&&(this.decoder=new $o(s.encoding),this.encoding=s.encoding)}function mn(s){if(!(this instanceof mn))return new mn(s);this._readableState=new wh(s,this),this.readable=!0,s&&typeof s.read=="function"&&(this._read=s.read),Qt.call(this)}mn.prototype.push=function(s,e){var t=this._readableState;return!t.objectMode&&typeof s=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(s=Re.from(s,e),e="")),xh(this,t,s,e,!1)};mn.prototype.unshift=function(s){var e=this._readableState;return xh(this,e,s,"",!0)};mn.prototype.isPaused=function(){return this._readableState.flowing===!1};function xh(s,e,t,n,a){var r=mT(e,t);if(r)s.emit("error",r);else if(t===null)e.reading=!1,fT(s,e);else if(e.objectMode||t&&t.length>0)if(e.ended&&!a){var o=new Error("stream.push() after EOF");s.emit("error",o)}else if(e.endEmitted&&a){var m=new Error("stream.unshift() after end event");s.emit("error",m)}else{var h;e.decoder&&!a&&!n&&(t=e.decoder.write(t),h=!e.objectMode&&t.length===0),a||(e.reading=!1),h||(e.flowing&&e.length===0&&!e.sync?(s.emit("data",t),s.read(0)):(e.length+=e.objectMode?1:t.length,a?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&cc(s))),dT(s,e)}else a||(e.reading=!1);return uT(e)}function uT(s){return!s.ended&&(s.needReadable||s.length<s.highWaterMark||s.length===0)}mn.prototype.setEncoding=function(s){return this._readableState.decoder=new $o(s),this._readableState.encoding=s,this};var bd=8388608;function pT(s){return s>=bd?s=bd:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s}function yd(s,e){return s<=0||e.length===0&&e.ended?0:e.objectMode?1:s!==s?e.flowing&&e.length?e.buffer.head.data.length:e.length:(s>e.highWaterMark&&(e.highWaterMark=pT(s)),s<=e.length?s:e.ended?e.length:(e.needReadable=!0,0))}mn.prototype.read=function(s){nn("read",s),s=parseInt(s,10);var e=this._readableState,t=s;if(s!==0&&(e.emittedReadable=!1),s===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return nn("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?ip(this):cc(this),null;if(s=yd(s,e),s===0&&e.ended)return e.length===0&&ip(this),null;var n=e.needReadable;nn("need readable",n),(e.length===0||e.length-s<e.highWaterMark)&&(n=!0,nn("length less than watermark",n)),e.ended||e.reading?(n=!1,nn("reading or ended",n)):n&&(nn("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(s=yd(t,e)));var a;return s>0?a=$h(s,e):a=null,a===null?(e.needReadable=!0,s=0):e.length-=s,e.length===0&&(e.ended||(e.needReadable=!0),t!==s&&e.ended&&ip(this)),a!==null&&this.emit("data",a),a};function mT(s,e){var t=null;return!ba(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!s.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function fT(s,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,cc(s)}}function cc(s){var e=s._readableState;e.needReadable=!1,e.emittedReadable||(nn("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?_s(gd,s):gd(s))}function gd(s){nn("emit readable"),s.emit("readable"),Vp(s)}function dT(s,e){e.readingMore||(e.readingMore=!0,_s(_T,s,e))}function _T(s,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(nn("maybeReadMore read 0"),s.read(0),t!==e.length);)t=e.length;e.readingMore=!1}mn.prototype._read=function(s){this.emit("error",new Error("not implemented"))};mn.prototype.pipe=function(s,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=s;break;case 1:n.pipes=[n.pipes,s];break;default:n.pipes.push(s);break}n.pipesCount+=1,nn("pipe count=%d opts=%j",n.pipesCount,e);var a=!e||e.end!==!1,r=a?m:u;n.endEmitted?_s(r):t.once("end",r),s.on("unpipe",o);function o(Ae){nn("onunpipe"),Ae===t&&u()}function m(){nn("onend"),s.end()}var h=hT(t);s.on("drain",h);var g=!1;function u(){nn("cleanup"),s.removeListener("close",N),s.removeListener("finish",Z),s.removeListener("drain",h),s.removeListener("error",w),s.removeListener("unpipe",o),t.removeListener("end",m),t.removeListener("end",u),t.removeListener("data",O),g=!0,n.awaitDrain&&(!s._writableState||s._writableState.needDrain)&&h()}var k=!1;t.on("data",O);function O(Ae){nn("ondata"),k=!1;var Pe=s.write(Ae);Pe===!1&&!k&&((n.pipesCount===1&&n.pipes===s||n.pipesCount>1&&vh(n.pipes,s)!==-1)&&!g&&(nn("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,k=!0),t.pause())}function w(Ae){nn("onerror",Ae),ae(),s.removeListener("error",w),cT(s,"error")===0&&s.emit("error",Ae)}lT(s,"error",w);function N(){s.removeListener("finish",Z),ae()}s.once("close",N);function Z(){nn("onfinish"),s.removeListener("close",N),ae()}s.once("finish",Z);function ae(){nn("unpipe"),t.unpipe(s)}return s.emit("pipe",t),n.flowing||(nn("pipe resume"),t.resume()),s};function hT(s){return function(){var e=s._readableState;nn("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&s.listeners("data").length&&(e.flowing=!0,Vp(s))}}mn.prototype.unpipe=function(s){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return s&&s!==e.pipes?this:(s||(s=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,s&&s.emit("unpipe",this),this);if(!s){var t=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)t[a].emit("unpipe",this);return this}var r=vh(e.pipes,s);return r===-1?this:(e.pipes.splice(r,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),s.emit("unpipe",this),this)};mn.prototype.on=function(s,e){var t=Qt.prototype.on.call(this,s,e);if(s==="data")this._readableState.flowing!==!1&&this.resume();else if(s==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&cc(this):_s(bT,this))}return t};mn.prototype.addListener=mn.prototype.on;function bT(s){nn("readable nexttick read 0"),s.read(0)}mn.prototype.resume=function(){var s=this._readableState;return s.flowing||(nn("resume"),s.flowing=!0,yT(this,s)),this};function yT(s,e){e.resumeScheduled||(e.resumeScheduled=!0,_s(gT,s,e))}function gT(s,e){e.reading||(nn("resume read 0"),s.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,s.emit("resume"),Vp(s),e.flowing&&!e.reading&&s.read(0)}mn.prototype.pause=function(){return nn("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(nn("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Vp(s){var e=s._readableState;for(nn("flow",e.flowing);e.flowing&&s.read()!==null;);}mn.prototype.wrap=function(s){var e=this._readableState,t=!1,n=this;s.on("end",function(){if(nn("wrapped end"),e.decoder&&!e.ended){var o=e.decoder.end();o&&o.length&&n.push(o)}n.push(null)}),s.on("data",function(o){if(nn("wrapped data"),e.decoder&&(o=e.decoder.write(o)),!(e.objectMode&&o==null)&&!(!e.objectMode&&(!o||!o.length))){var m=n.push(o);m||(t=!0,s.pause())}});for(var a in s)this[a]===void 0&&typeof s[a]=="function"&&(this[a]=function(o){return function(){return s[o].apply(s,arguments)}}(a));var r=["error","close","destroy","pause","resume"];return kT(r,function(o){s.on(o,n.emit.bind(n,o))}),n._read=function(o){nn("wrapped _read",o),t&&(t=!1,s.resume())},n};mn._fromList=$h;function $h(s,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!s||s>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=wT(s,e.buffer,e.decoder),t}function wT(s,e,t){var n;return s<e.head.data.length?(n=e.head.data.slice(0,s),e.head.data=e.head.data.slice(s)):s===e.head.data.length?n=e.shift():n=t?xT(s,e):$T(s,e),n}function xT(s,e){var t=e.head,n=1,a=t.data;for(s-=a.length;t=t.next;){var r=t.data,o=s>r.length?r.length:s;if(o===r.length?a+=r:a+=r.slice(0,s),s-=o,s===0){o===r.length?(++n,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=r.slice(o));break}++n}return e.length-=n,a}function $T(s,e){var t=Re.allocUnsafe(s),n=e.head,a=1;for(n.data.copy(t),s-=n.data.length;n=n.next;){var r=n.data,o=s>r.length?r.length:s;if(r.copy(t,t.length-s,0,o),s-=o,s===0){o===r.length?(++a,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=r.slice(o));break}++a}return e.length-=a,t}function ip(s){var e=s._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,_s(vT,e,s))}function vT(s,e){!s.endEmitted&&s.length===0&&(s.endEmitted=!0,e.readable=!1,e.emit("end"))}function kT(s,e){for(var t=0,n=s.length;t<n;t++)e(s[t],t)}function vh(s,e){for(var t=0,n=s.length;t<n;t++)if(s[t]===e)return t;return-1}Fn.WritableState=Gp;fi(Fn,Qt);function ET(){}function AT(s,e,t){this.chunk=s,this.encoding=e,this.callback=t,this.next=null}function Gp(s,e){Object.defineProperty(this,"buffer",{get:bh(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),s=s||{},this.objectMode=!!s.objectMode,e instanceof As&&(this.objectMode=this.objectMode||!!s.writableObjectMode);var t=s.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=s.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=s.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(r){CT(e,r)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Th(this)}Gp.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function Fn(s){if(!(this instanceof Fn)&&!(this instanceof As))return new Fn(s);this._writableState=new Gp(s,this),this.writable=!0,s&&(typeof s.write=="function"&&(this._write=s.write),typeof s.writev=="function"&&(this._writev=s.writev)),Qt.call(this)}Fn.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function TT(s,e){var t=new Error("write after end");s.emit("error",t),_s(e,t)}function ST(s,e,t,n){var a=!0,r=!1;return t===null?r=new TypeError("May not write null values to stream"):!Re.isBuffer(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r&&(s.emit("error",r),_s(n,r),a=!1),a}Fn.prototype.write=function(s,e,t){var n=this._writableState,a=!1;return typeof e=="function"&&(t=e,e=null),Re.isBuffer(s)?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=ET),n.ended?TT(this,t):ST(this,n,s,t)&&(n.pendingcb++,a=qT(this,n,s,e,t)),a};Fn.prototype.cork=function(){var s=this._writableState;s.corked++};Fn.prototype.uncork=function(){var s=this._writableState;s.corked&&(s.corked--,!s.writing&&!s.corked&&!s.finished&&!s.bufferProcessing&&s.bufferedRequest&&kh(this,s))};Fn.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function IT(s,e,t){return!s.objectMode&&s.decodeStrings!==!1&&typeof e=="string"&&(e=Re.from(e,t)),e}function qT(s,e,t,n,a){t=IT(e,t,n),Re.isBuffer(t)&&(n="buffer");var r=e.objectMode?1:t.length;e.length+=r;var o=e.length<e.highWaterMark;if(o||(e.needDrain=!0),e.writing||e.corked){var m=e.lastBufferedRequest;e.lastBufferedRequest=new AT(t,n,a),m?m.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else kp(s,e,!1,r,t,n,a);return o}function kp(s,e,t,n,a,r,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,t?s._writev(a,e.onwrite):s._write(a,r,e.onwrite),e.sync=!1}function RT(s,e,t,n,a){--e.pendingcb,t?_s(a,n):a(n),s._writableState.errorEmitted=!0,s.emit("error",n)}function OT(s){s.writing=!1,s.writecb=null,s.length-=s.writelen,s.writelen=0}function CT(s,e){var t=s._writableState,n=t.sync,a=t.writecb;if(OT(t),e)RT(s,t,n,e,a);else{var r=Eh(t);!r&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&kh(s,t),n?_s(wd,s,t,r,a):wd(s,t,r,a)}}function wd(s,e,t,n){t||NT(s,e),e.pendingcb--,n(),Ah(s,e)}function NT(s,e){e.length===0&&e.needDrain&&(e.needDrain=!1,s.emit("drain"))}function kh(s,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(s._writev&&t&&t.next){var n=e.bufferedRequestCount,a=new Array(n),r=e.corkedRequestsFree;r.entry=t;for(var o=0;t;)a[o]=t,t=t.next,o+=1;kp(s,e,!0,e.length,a,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new Th(e)}else{for(;t;){var m=t.chunk,h=t.encoding,g=t.callback,u=e.objectMode?1:m.length;if(kp(s,e,!1,u,m,h,g),t=t.next,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}Fn.prototype._write=function(s,e,t){t(new Error("not implemented"))};Fn.prototype._writev=null;Fn.prototype.end=function(s,e,t){var n=this._writableState;typeof s=="function"?(t=s,s=null,e=null):typeof e=="function"&&(t=e,e=null),s!=null&&this.write(s,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&LT(this,n,t)};function Eh(s){return s.ending&&s.length===0&&s.bufferedRequest===null&&!s.finished&&!s.writing}function xd(s,e){e.prefinished||(e.prefinished=!0,s.emit("prefinish"))}function Ah(s,e){var t=Eh(e);return t&&(e.pendingcb===0?(xd(s,e),e.finished=!0,s.emit("finish")):xd(s,e)),t}function LT(s,e,t){e.ending=!0,Ah(s,e),t&&(e.finished?_s(t):s.once("finish",t)),e.ended=!0,s.writable=!1}function Th(s){var e=this;this.next=null,this.entry=null,this.finish=function(t){var n=e.entry;for(e.entry=null;n;){var a=n.callback;s.pendingcb--,a(t),n=n.next}s.corkedRequestsFree?s.corkedRequestsFree.next=e:s.corkedRequestsFree=e}}fi(As,mn);var $d=Object.keys(Fn.prototype);for(var op=0;op<$d.length;op++){var lp=$d[op];As.prototype[lp]||(As.prototype[lp]=Fn.prototype[lp])}function As(s){if(!(this instanceof As))return new As(s);mn.call(this,s),Fn.call(this,s),s&&s.readable===!1&&(this.readable=!1),s&&s.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,s&&s.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",MT)}function MT(){this.allowHalfOpen||this._writableState.ended||_s(DT,this)}function DT(s){s.end()}fi(js,As);function FT(s){this.afterTransform=function(e,t){return PT(s,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function PT(s,e,t){var n=s._transformState;n.transforming=!1;var a=n.writecb;if(!a)return s.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&s.push(t),a(e);var r=s._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&s._read(r.highWaterMark)}function js(s){if(!(this instanceof js))return new js(s);As.call(this,s),this._transformState=new FT(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){vd(e,t)}):vd(e)})}js.prototype.push=function(s,e){return this._transformState.needTransform=!1,As.prototype.push.call(this,s,e)};js.prototype._transform=function(s,e,t){throw new Error("Not implemented")};js.prototype._write=function(s,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=s,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};js.prototype._read=function(s){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function vd(s,e){if(e)return s.emit("error",e);var t=s._writableState,n=s._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return s.push(null)}fi(_o,js);function _o(s){if(!(this instanceof _o))return new _o(s);js.call(this,s)}_o.prototype._transform=function(s,e,t){t(null,s)};fi(wr,Qt);wr.Readable=mn;wr.Writable=Fn;wr.Duplex=As;wr.Transform=js;wr.PassThrough=_o;wr.Stream=wr;function wr(){Qt.call(this)}wr.prototype.pipe=function(s,e){var t=this;function n(u){s.writable&&s.write(u)===!1&&t.pause&&t.pause()}t.on("data",n);function a(){t.readable&&t.resume&&t.resume()}s.on("drain",a),!s._isStdio&&(!e||e.end!==!1)&&(t.on("end",o),t.on("close",m));var r=!1;function o(){r||(r=!0,s.end())}function m(){r||(r=!0,typeof s.destroy=="function"&&s.destroy())}function h(u){if(g(),Qt.listenerCount(this,"error")===0)throw u}t.on("error",h),s.on("error",h);function g(){t.removeListener("data",n),s.removeListener("drain",a),t.removeListener("end",o),t.removeListener("close",m),t.removeListener("error",h),s.removeListener("error",h),t.removeListener("end",g),t.removeListener("close",g),s.removeListener("close",g)}return t.on("end",g),t.on("close",g),s.on("close",g),s.emit("pipe",t),s};class ga extends Error{constructor(e,t,...n){Array.isArray(t)&&(t=t.join(" ")),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,ga),this.code=e;for(const a of n)for(const r in a){const o=a[r];this[r]=ba(o)?o.toString():o==null?o:JSON.parse(JSON.stringify(o))}}}const Sh=function(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)},jT=46,UT=/\\(\\)?/g,BT=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),zT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,WT=/^\w*$/,HT=function(s){return Object.prototype.toString.call(s)},Ih=function(s){const e=typeof s;return e==="symbol"||e==="object"&&s&&HT(s)==="[object Symbol]"},VT=function(s,e){if(Array.isArray(s))return!1;const t=typeof s;return t==="number"||t==="symbol"||t==="boolean"||!s||Ih(s)?!0:WT.test(s)||!zT.test(s)||e!=null&&s in Object(e)},GT=function(s){const e=[];return s.charCodeAt(0)===jT&&e.push(""),s.replace(BT,function(t,n,a,r){let o=t;a?o=r.replace(UT,"$1"):n&&(o=n.trim()),e.push(o)}),e},QT=function(s,e){return Array.isArray(s)?s:VT(s,e)?[s]:GT(s)},YT=function(s){if(typeof s=="string"||Ih(s))return s;const e=`${s}`;return e=="0"&&1/s==-INFINITY?"-0":e},JT=function(s,e){e=QT(e,s);let t=0;const n=e.length;for(;s!=null&&t<n;)s=s[YT(e[t++])];return t&&t===n?s:void 0},qh=function(s){if(s==null)return[void 0,void 0];if(typeof s!="object")return[Error('Invalid option "columns": expect an array or an object')];if(Array.isArray(s)){const e=[];for(const t of s)if(typeof t=="string")e.push({key:t,header:t});else if(typeof t=="object"&&t!==null&&!Array.isArray(t)){if(!t.key)return[Error('Invalid column definition: property "key" is required')];t.header===void 0&&(t.header=t.key),e.push(t)}else return[Error("Invalid column definition: expect a string or an object")];s=e}else{const e=[];for(const t in s)e.push({key:t,header:s[t]});s=e}return[void 0,s]},ZT=function(s){return s.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},Rh=function(s){const e={};for(const a in s)e[ZT(a)]=s[a];if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)return[new ga("CSV_OPTION_BOOLEAN_INVALID_TYPE",["option `bom` is optional and must be a boolean value,",`got ${JSON.stringify(e.bom)}`])];if(e.delimiter===void 0||e.delimiter===null)e.delimiter=",";else if(ba(e.delimiter))e.delimiter=e.delimiter.toString();else if(typeof e.delimiter!="string")return[new ga("CSV_OPTION_DELIMITER_INVALID_TYPE",["option `delimiter` must be a buffer or a string,",`got ${JSON.stringify(e.delimiter)}`])];if(e.quote===void 0||e.quote===null)e.quote='"';else if(e.quote===!0)e.quote='"';else if(e.quote===!1)e.quote="";else if(ba(e.quote))e.quote=e.quote.toString();else if(typeof e.quote!="string")return[new ga("CSV_OPTION_QUOTE_INVALID_TYPE",["option `quote` must be a boolean, a buffer or a string,",`got ${JSON.stringify(e.quote)}`])];if((e.quoted===void 0||e.quoted===null)&&(e.quoted=!1),e.escape_formulas===void 0||e.escape_formulas===null)e.escape_formulas=!1;else if(typeof e.escape_formulas!="boolean")return[new ga("CSV_OPTION_ESCAPE_FORMULAS_INVALID_TYPE",["option `escape_formulas` must be a boolean,",`got ${JSON.stringify(e.escape_formulas)}`])];if((e.quoted_empty===void 0||e.quoted_empty===null)&&(e.quoted_empty=void 0),e.quoted_match===void 0||e.quoted_match===null||e.quoted_match===!1?e.quoted_match=null:Array.isArray(e.quoted_match)||(e.quoted_match=[e.quoted_match]),e.quoted_match)for(const a of e.quoted_match){const r=typeof a=="string",o=a instanceof RegExp;if(!r&&!o)return[Error(`Invalid Option: quoted_match must be a string or a regex, got ${JSON.stringify(a)}`)]}if((e.quoted_string===void 0||e.quoted_string===null)&&(e.quoted_string=!1),(e.eof===void 0||e.eof===null)&&(e.eof=!0),e.escape===void 0||e.escape===null)e.escape='"';else if(ba(e.escape))e.escape=e.escape.toString();else if(typeof e.escape!="string")return[Error(`Invalid Option: escape must be a buffer or a string, got ${JSON.stringify(e.escape)}`)];if(e.escape.length>1)return[Error(`Invalid Option: escape must be one character, got ${e.escape.length} characters`)];(e.header===void 0||e.header===null)&&(e.header=!1);const[t,n]=qh(e.columns);if(t!==void 0)return[t];if(e.columns=n,(e.quoted===void 0||e.quoted===null)&&(e.quoted=!1),(e.cast===void 0||e.cast===null)&&(e.cast={}),(e.cast.bigint===void 0||e.cast.bigint===null)&&(e.cast.bigint=a=>""+a),(e.cast.boolean===void 0||e.cast.boolean===null)&&(e.cast.boolean=a=>a?"1":""),(e.cast.date===void 0||e.cast.date===null)&&(e.cast.date=a=>""+a.getTime()),(e.cast.number===void 0||e.cast.number===null)&&(e.cast.number=a=>""+a),(e.cast.object===void 0||e.cast.object===null)&&(e.cast.object=a=>JSON.stringify(a)),(e.cast.string===void 0||e.cast.string===null)&&(e.cast.string=function(a){return a}),e.on_record!==void 0&&typeof e.on_record!="function")return[Error('Invalid Option: "on_record" must be a function.')];if(e.record_delimiter===void 0||e.record_delimiter===null)e.record_delimiter=`
`;else if(ba(e.record_delimiter))e.record_delimiter=e.record_delimiter.toString();else if(typeof e.record_delimiter!="string")return[Error(`Invalid Option: record_delimiter must be a buffer or a string, got ${JSON.stringify(e.record_delimiter)}`)];switch(e.record_delimiter){case"unix":e.record_delimiter=`
`;break;case"mac":e.record_delimiter="\r";break;case"windows":e.record_delimiter=`\r
`;break;case"ascii":e.record_delimiter="";break;case"unicode":e.record_delimiter="\u2028";break}return[void 0,e]},XT=Re.from([239,187,191]),KT=function(s,e,t){return{options:s,state:e,info:t,__transform:function(n,a){if(!Array.isArray(n)&&typeof n!="object")return Error(`Invalid Record: expect an array or an object, got ${JSON.stringify(n)}`);if(this.info.records===0){if(Array.isArray(n)){if(this.options.header===!0&&this.options.columns===void 0)return Error("Undiscoverable Columns: header option requires column option or object records")}else if(this.options.columns===void 0){const[m,h]=qh(Object.keys(n));if(m)return;this.options.columns=h}}if(this.info.records===0){this.bom(a);const m=this.headers(a);if(m)return m}try{this.options.on_record&&this.options.on_record(n,this.info.records)}catch(m){return m}let r,o;if(this.options.eof){if([r,o]=this.stringify(n),r)return r;if(o===void 0)return;o=o+this.options.record_delimiter}else{if([r,o]=this.stringify(n),r)return r;if(o===void 0)return;(this.options.header||this.info.records)&&(o=this.options.record_delimiter+o)}this.info.records++,a(o)},stringify:function(n,a=!1){if(typeof n!="object")return[void 0,n];const{columns:r}=this.options,o=[];if(Array.isArray(n)){r&&n.splice(r.length);for(let h=0;h<n.length;h++){const g=n[h],[u,k]=this.__cast(g,{index:h,column:h,records:this.info.records,header:a});if(u)return[u];o[h]=[k,g]}}else for(let h=0;h<r.length;h++){const g=JT(n,r[h].key),[u,k]=this.__cast(g,{index:h,column:r[h].key,records:this.info.records,header:a});if(u)return[u];o[h]=[k,g]}let m="";for(let h=0;h<o.length;h++){let g,u,[k,O]=o[h];if(typeof k=="string")g=this.options;else if(Sh(k)){if(g=k,k=g.value,delete g.value,typeof k!="string"&&k!==void 0&&k!==null&&u)return[Error(`Invalid Casting Value: returned value must return a string, null or undefined, got ${JSON.stringify(k)}`)];if(g={...this.options,...g},[u,g]=Rh(g),u!==void 0)return[u]}else if(k==null)g=this.options;else return[Error(`Invalid Casting Value: returned value must return a string, an object, null or undefined, got ${JSON.stringify(k)}`)];const{delimiter:w,escape:N,quote:Z,quoted:ae,quoted_empty:Ae,quoted_string:Pe,quoted_match:ze,record_delimiter:pe,escape_formulas:he}=g;if(k===""&&O===""){let Le=ze&&ze.filter(ut=>typeof ut=="string"?k.indexOf(ut)!==-1:ut.test(k));Le=Le&&Le.length>0,(Le||Ae===!0||Pe===!0&&Ae!==!1)===!0&&(k=Z+k+Z),m+=k}else if(k){if(typeof k!="string")return[Error(`Formatter must return a string, null or undefined, got ${JSON.stringify(k)}`)];const Le=w.length&&k.indexOf(w)>=0,Ye=Z!==""&&k.indexOf(Z)>=0,ut=k.indexOf(N)>=0&&N!==Z,c=k.indexOf(pe)>=0,I=Pe&&typeof O=="string";let d=ze&&ze.filter(X=>typeof X=="string"?k.indexOf(X)!==-1:X.test(k));if(d=d&&d.length>0,he)switch(k[0]){case"=":case"+":case"-":case"@":case"	":case"\r":case"":case"":case"":case"":k=`'${k}`;break}const j=Ye===!0||Le||c||ae||I||d;if(j===!0&&ut===!0){const X=N==="\\"?new RegExp(N+N,"g"):new RegExp(N,"g");k=k.replace(X,N+N)}if(Ye===!0){const X=new RegExp(Z,"g");k=k.replace(X,N+Z)}j===!0&&(k=Z+k+Z),m+=k}else(Ae===!0||O===""&&Pe===!0&&Ae!==!1)&&(m+=Z+Z);h!==o.length-1&&(m+=w)}return[void 0,m]},bom:function(n){this.options.bom===!0&&n(XT)},headers:function(n){if(this.options.header===!1||this.options.columns===void 0)return;let a,r=this.options.columns.map(o=>o.header);if(this.options.eof?([a,r]=this.stringify(r,!0),r+=this.options.record_delimiter):[a,r]=this.stringify(r),a)return a;n(r)},__cast:function(n,a){const r=typeof n;try{return r==="string"?[void 0,this.options.cast.string(n,a)]:r==="bigint"?[void 0,this.options.cast.bigint(n,a)]:r==="number"?[void 0,this.options.cast.number(n,a)]:r==="boolean"?[void 0,this.options.cast.boolean(n,a)]:n instanceof Date?[void 0,this.options.cast.date(n,a)]:r==="object"&&n!==null?[void 0,this.options.cast.object(n,a)]:[void 0,n,n]}catch(o){return[o]}}}};class eS extends js{constructor(e={}){super({writableObjectMode:!0,...e});const[t,n]=Rh(e);if(t!==void 0)throw t;this.options=n,this.state={stop:!1},this.info={records:0},this.api=KT(this.options,this.state,this.info),this.api.options.on_record=(...a)=>{this.emit("record",...a)}}_transform(e,t,n){if(this.state.stop===!0)return;const a=this.api.__transform(e,this.push.bind(this));a!==void 0&&(this.state.stop=!0),n(a)}_flush(e){if(this.state.stop!==!0){if(this.info.records===0){this.api.bom(this.push.bind(this));const t=this.api.headers(this.push.bind(this));t&&e(t)}e()}}}const tS=function(){let s,e,t;for(const a in arguments){const r=arguments[a],o=typeof r;if(s===void 0&&Array.isArray(r))s=r;else if(e===void 0&&Sh(r))e=r;else if(t===void 0&&o==="function")t=r;else throw new ga("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(r)} at index ${a}`])}const n=new eS(e);if(t){const a=[];n.on("readable",function(){let r;for(;(r=this.read())!==null;)a.push(r)}),n.on("error",function(r){t(r)}),n.on("end",function(){try{t(void 0,a.join(""))}catch(r){t(r);return}})}if(s!==void 0){const a=function(){for(const r of s)n.write(r);n.end()};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}return n},nS=s=>new Promise(e=>setTimeout(e,s));class kd extends u_{async guessColumnType(e){const t=ep(e,{columns:!0,skip_empty_lines:!0,to:1e3}),n=Math.min(10,t.length),a=[],r=new Set;for(;a.length<n;){const m=Math.floor(Math.random()*t.length);r.has(m)||(r.add(m),a.push(t[m]))}const o={};for(let m=0;m<Object.keys(a[0]).length;m++){const h=Object.keys(a[0])[m];let g="String";const u=a.map(O=>O[h]).filter(O=>O!=null);if(u.length===0){o[h]=g;continue}u.every(O=>!isNaN(Number(O)))&&(g="Number"),o[h]=g}return o}async import(e,t){var h;t.blockUIMsg("Starting import...");const n=(h=e.name)==null?void 0:h.replace(/\.[^/.]+$/,""),a=Bl().split("-").join("");let r=new ns(a,t);const o=2e4,m=performance.now();try{if(!e.content.trim())throw new Error("CSV file is empty");const g=ep(e.content,{columns:j=>j.map((X,ve)=>(X||"").trim()||`unknown${ve}`),skip_empty_lines:!0,to:1});if(console.log("Parse result:",g),console.log("Header row:",g[0]),!Array.isArray(g)||g.length===0)throw new Error("Failed to parse CSV header");const u=g[0];if(!u||typeof u!="object")throw new Error("Invalid CSV header format");let k=Object.keys(u);if(k.length===0)throw new Error("No columns found in CSV");const O=e.content.split(`
`).slice(0,1001).join(`
`);t.blockUIMsg("Analyzing file structure...");const w=await this.guessColumnType(O),N=e.content.split(`
`).filter(j=>j.trim());if(N.length<2)throw new Error("CSV file must contain at least one data row");const Z=N[0],ae=br(a);let Ae=k.map(j=>jd()),Pe=`
CREATE TABLE ${ae} (
  _id TEXT PRIMARY KEY NOT NULL,
  title TEXT  NULL,
  _created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  _last_edited_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  _created_by TEXT DEFAULT 'unknown',
  _last_edited_by TEXT DEFAULT 'unknown',
  
`;Ae.forEach((j,X)=>{const ve=w[k[X]],Je=X===Ae.length-1;Pe+=`${j} ${ve==="Number"?"REAL":"TEXT"} NULL`+(Je?`
`:`,
`)}),Pe+=");";const ze={String:wt.Text,Number:wt.Number,Date:wt.Date};k.forEach((j,X)=>{const ve=w[j],Je=X===0,Be=Je?"title":ze[ve]||wt.Text,Oe=Je?"title":Ae[X],ht=j.replace(/'/g,"''");Pe+=`INSERT INTO ${$n}(name, type, table_name, table_column_name) VALUES ('${ht}', '${Be}', '${ae}', '${Oe}');`}),t.blockUIMsg("Creating table..."),await t.createTableViaSchema(a,n,Pe),await nS(1e3);const pe=await r.rows.getFieldMap(),he=2*1024*1024;await t.db.exec("PRAGMA synchronous = 0;"),await t.db.exec(`PRAGMA cache_size = ${he};`),await t.db.exec("PRAGMA locking_mode = EXCLUSIVE;"),await t.db.exec("PRAGMA temp_store = MEMORY;"),console.log("locksInfo:",await t.sql`PRAGMA locking_mode`);const Le=N.slice(1),Ye=Le.length;let ut=0,c=Date.now();const I=500;t.blockUIMsg("Importing data...");for(let j=0;j<Le.length;j+=o){const ve=[Z,...Le.slice(j,j+o)].join(`
`);let Je;try{Je=ep(ve,{columns:Oe=>Oe.map((ht,yt)=>(ht||"").trim()||`unknown${yt}`),skip_empty_lines:!0,relax_column_count:!0}),Je.shift(),Je=Je.filter(Oe=>Oe&&typeof Oe=="object"&&Object.keys(Oe).length>0&&!Object.keys(Oe).includes("")),Je.length>0&&(await r.rows.batchSyncCreate(Je,pe),ut+=Je.length)}catch(Oe){console.warn(`Error processing batch at index ${j}:`,Oe);continue}const Be=Date.now();Be-c>=I&&(t.blockUIMsg("Importing data...",{progress:ut/Ye*100}),c=Be,await new Promise(Oe=>setTimeout(Oe,0))),j%(o*5)===0&&await new Promise(Oe=>setTimeout(Oe,50))}const d=performance.now();return console.log("import csv file done",d-m),t.blockUIMsg(null),a}catch(g){throw console.error("CSV import error:",g),t.blockUIMsg(null),g}finally{await t.db.exec("PRAGMA journal_mode = WAL;"),await t.db.exec("PRAGMA synchronous = 1;"),await t.db.exec("PRAGMA locking_mode = NORMAL;")}}async export(e,t){const n=br(e),r=(await t.column.list({table_name:n})).map(g=>g.name),m=await new ns(e,t).rows.query(),h=tS(m,{header:!0,columns:r});return typeof h=="string"?h:new Promise((g,u)=>{const k=[];h.on("data",O=>k.push(O.toString())).on("error",u).on("end",()=>g(k.join("")))})}}class Ed extends u_{async import(e,t){const n=co().split("-").join(""),a=e.name.replace(/\.[^/.]+$/,"");return await t.createOrUpdateDocWithMarkdown(n,e.content,void 0,a),n}async export(e,t){return await t.getTreeNode(e),await t.getDocMarkdown(e)}}class sS extends Us{constructor(){super(...arguments);ye(this,"name",T1);ye(this,"createTableSql",`
  CREATE TABLE IF NOT EXISTS ${this.name} (
    id TEXT PRIMARY KEY,
    name TEXT,
    params TEXT,
    nodes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );
`);ye(this,"JSONFields",["params","nodes"])}add(t){return this.dataSpace.exec2(`INSERT INTO ${this.name} VALUES (?, ?, ?, ?)`,[t.id,t.name,JSON.stringify(t.params),JSON.stringify(t.nodes)]),Promise.resolve(t)}set(t,n){return this.dataSpace.exec2(`UPDATE ${this.name} SET name = ?, nodes = ? WHERE id = ?`,[n.name,JSON.stringify(n.nodes),t]),Promise.resolve(!0)}del(t){return this.dataSpace.exec2(`DELETE FROM ${this.name} WHERE id = ?`,[t]),Promise.resolve(!0)}}const Qi=class Qi extends Us{constructor(){super(...arguments);ye(this,"name",A1);ye(this,"createFTSSql",this.dataSpace.hasLoadExtension?`
  CREATE VIRTUAL TABLE IF NOT EXISTS fts_docs USING fts5(id,markdown, content='${this.name}',tokenize = 'simple');
  `:`CREATE VIRTUAL TABLE IF NOT EXISTS fts_docs USING fts5(id,markdown, content='${this.name}');`);ye(this,"createTableSql",`
  CREATE TABLE IF NOT EXISTS ${this.name} (
    id TEXT PRIMARY KEY,
    content TEXT,
    is_day_page BOOLEAN DEFAULT 0,
    markdown TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );


  CREATE TRIGGER IF NOT EXISTS update_time_trigger__${this.name}
  AFTER UPDATE ON ${this.name}
  FOR EACH ROW
  BEGIN
    UPDATE ${this.name} SET updated_at = CURRENT_TIMESTAMP WHERE id = NEW.id;
  END;
    ${this.createFTSSql}    
  CREATE TEMP TRIGGER IF NOT EXISTS ${this.name}_ai AFTER INSERT ON ${this.name} BEGIN
    INSERT INTO fts_docs(rowid,id, markdown) VALUES (new.rowid, new.id, new.markdown);
  END;

  CREATE TEMP TRIGGER IF NOT EXISTS ${this.name}_ad AFTER DELETE ON ${this.name} BEGIN
    INSERT INTO fts_docs(fts_docs, rowid, id,markdown) VALUES('delete', old.rowid, old.id, old.markdown);
  END;
  
  CREATE TEMP TRIGGER IF NOT EXISTS ${this.name}_au AFTER UPDATE ON ${this.name} BEGIN
    INSERT INTO fts_docs(fts_docs, rowid, id, markdown) VALUES('delete', old.rowid, old.id, old.markdown);
    INSERT INTO fts_docs(rowid, id, markdown) VALUES (new.rowid, new.id, new.markdown);
  END;
`);ye(this,"callMain",(t,n)=>{var a,r;return(r=(a=this.dataSpace).callRenderer)==null?void 0:r.call(a,t,n)})}async rebuildIndex(t){const{refillNullMarkdown:n,recreateFtsTable:a}=t;if(a&&(await this.dataSpace.db.exec(`
        DROP TRIGGER IF EXISTS ${this.name}_ai;
        DROP TRIGGER IF EXISTS ${this.name}_ad;
        DROP TRIGGER IF EXISTS ${this.name}_au;
      `),await this.dataSpace.exec2("DROP TABLE IF EXISTS fts_docs;"),await this.dataSpace.exec2(this.createFTSSql),console.log(`Recreated fts_docs table and triggers for ${this.dataSpace.dbName}`)),await this.dataSpace.exec2("INSERT INTO fts_docs(fts_docs) VALUES('rebuild');"),n){const r=await this.dataSpace.exec2(`SELECT id, markdown FROM ${this.name}`);for(const o of r)if(o.markdown==null){const m=await this.getMarkdown(o.id);try{await this.dataSpace.exec2(`UPDATE ${this.name} SET markdown = ? WHERE id = ?`,[m,o.id]),console.log(`update ${o.id} markdown`)}catch(h){console.warn(`update ${o.id} markdown error`,h)}}}await this.dataSpace.exec2("INSERT INTO fts_docs(fts_docs) VALUES('rebuild');"),console.log(`rebuild ${this.dataSpace.dbName} index`)}async listAllDayPages(){return(await this.dataSpace.exec2(`SELECT id FROM ${this.name} WHERE is_day_page = 1 AND markdown != '' ORDER BY id DESC`)).map(n=>({id:n.id}))}async listDayPage(t=0){return(await this.dataSpace.exec2(`SELECT id FROM ${this.name} WHERE is_day_page = 1 ORDER BY id DESC LIMIT ?,?`,[t*7,7])).map(r=>({id:r.id}))}async del(t){return this.dataSpace.exec(`DELETE FROM ${this.name} WHERE id = ?`,[t]),!0}async getMarkdown(t){const n=await this.get(t);return(n==null?void 0:n.markdown)||""}async getBaseInfo(t){return(await this.dataSpace.exec2(`SELECT id, created_at, updated_at FROM ${this.name} WHERE id = ?`,[t]))[0]}async search(t){return(await this.dataSpace.exec2("SELECT id, snippet(fts_docs, 1, '<b>', '</b>','...',127) as result FROM fts_docs(?);",[t])).reverse()}async createOrUpdateWithMarkdown(t,n){const a=await this.callMain(_n.ConvertMarkdown2State,n);return this._createOrUpdate(t,a,n)}async createOrUpdate(t){const{id:n,text:a,type:r,mode:o="replace"}=t;switch(r){case"html":const m=await this.callMain(_n.ConvertHtml2State,a),h=await this.callMain(_n.GetDocMarkdown,m);return this._createOrUpdate(n,m,h,o);case"markdown":const g=await this.callMain(_n.ConvertMarkdown2State,a);return this._createOrUpdate(n,g,a,o);case"email":const u=await this.callMain(_n.ConvertEmail2State,{space:this.dataSpace.dbName,email:a}),k=await this.callMain(_n.GetDocMarkdown,u);return this._createOrUpdate(n,u,k,o);default:throw new Error(`unknown type ${r}`)}}async _createOrUpdate(t,n,a,r="replace"){let o=/^\d{4}-\d{2}-\d{2}$/.test(t);const m=await this.get(t);try{if(!m)await this.add({id:t,content:n,is_day_page:o,markdown:a});else switch(r){case"replace":await this.set(t,{id:t,is_day_page:o,content:n,markdown:a});break;case"prepend":await this.set(t,{id:t,is_day_page:o,content:Qi.mergeState(n,m.content),markdown:a+`
`+m.markdown});break;case"append":await this.set(t,{id:t,is_day_page:o,content:Qi.mergeState(m.content,n),markdown:m.markdown+`
`+a});break;default:throw new Error(`unknown mode ${r}`)}return{id:t,success:!0}}catch(h){return console.error(h),{id:t,success:!1,msg:`${JSON.stringify(h)}`}}}};ye(Qi,"mergeState",(t,n)=>{const a=JSON.parse(t),r=JSON.parse(n);return a.root.children.push(...r.root.children),JSON.stringify(a)});let Ep=Qi;class rS extends Us{constructor(){super(...arguments);ye(this,"name",q1);ye(this,"createTableSql",`
CREATE TABLE IF NOT EXISTS ${this.name} (
    id TEXT PRIMARY KEY,
    embedding TEXT,
    model TEXT,
    raw_content TEXT,
    source_type TEXT,
    source TEXT
);
`)}add(t){return this.dataSpace.exec(`INSERT INTO ${this.name} (id, embedding, model, raw_content, source_type, source) VALUES (?, ?, ?, ?, ?, ?)`,[t.id,t.embedding,t.model,t.raw_content,t.source_type,t.source]),Promise.resolve(t)}get(t){throw new Error("Method not implemented.")}set(t,n){throw new Error("Method not implemented.")}del(t){throw new Error("Method not implemented.")}}class aS extends Us{constructor(){super(...arguments);ye(this,"name",E1);ye(this,"createTableSql",`
CREATE TABLE IF NOT EXISTS ${this.name} (
    id TEXT PRIMARY KEY,
    name TEXT,
    path TEXT UNIQUE,
    size INTEGER,
    mime TEXT,
    is_vectorized INTEGER DEFAULT 0 NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);  
`)}async saveFile2EFS(t,n,a){var r;if(typeof t=="string"){const o=xa(),m=await fetch(t).then(Ae=>Ae.blob()),h=a||t.split("/").pop(),g=new File([m],h,{type:m.type}),k=["spaces",this.dataSpace.dbName,"files",...n],O=await((r=this.dataSpace.efsManager)==null?void 0:r.addFile(k,g,a||o));if(!O)throw new Error("add file failed");const w=O.join("/"),N=g.size,Z=await this.getFileByPath(w);return Z||this.add({id:o,name:h,path:w,size:N,mime:g.type})}return null}async add(t){return this.dataSpace.exec(`INSERT INTO ${this.name} (id,name,path,size,mime) VALUES (? , ? , ? , ? , ?);`,[t.id,t.name,t.path,t.size,t.mime]),t}async getFileByPath(t){const n=await this.dataSpace.exec2(`SELECT * FROM ${this.name} WHERE path = ?;`,[t]);return n.length===0?null:n[0]}async deleteFileByPathPrefix(t){try{return this.dataSpace.exec(`DELETE FROM ${this.name} WHERE path LIKE ?;`,[`${t}%`]),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}async updateVectorized(t,n){try{return this.dataSpace.exec(`UPDATE ${this.name} SET is_vectorized = ? WHERE id = ?;`,[n?1:0,t]),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}async get(t){const n=await this.dataSpace.exec2(`SELECT * FROM ${this.name} WHERE id = ?;`,[t]);return n.length===0?null:n[0]}del(t){try{return this.dataSpace.exec(`DELETE FROM ${this.name} WHERE id = ?;`,[t]),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}async getBlobURL(t){const n=await this.get(t);if(!n)throw new Error("file not found");return this.getBlobURLbyPath(n.path)}async getBlobURLbyPath(t){var a;const n=await((a=this.dataSpace.efsManager)==null?void 0:a.getFileByPath(t));if(!n)throw new Error("file not found");return URL.createObjectURL(n)}async getBlobByPath(t){let n=this.dataSpace.efsManager,a=null;if(t.startsWith("/@/")){const o=t.split("/")[2];n=await Z1(o);const m=decodeURIComponent(t).split("/").filter(Boolean).slice(2);a=await n.getFile(m)}else{if(!n)throw new Error("file manager not found");a=await n.getFileByPath(t)}return new Blob([a],{type:a.type})}async walk(){const t=this.dataSpace.efsManager;if(!t)throw new Error("file manager not found");const n=await t.walk(["spaces",this.dataSpace.dbName,"files"]);return console.log("allFiles",n),n}async transformFileSystem(t,n){const a=async r=>{console.log(`current: ${r.current}/${r.total} ${r.msg}`),this.dataSpace.blockUIMsg(`current: ${r.current}/${r.total} ${r.msg}`,{progress:r.current/r.total*100}),r.current===r.total&&this.dataSpace.blockUIMsg(null)};if(t!==n){const r=new Ul(await dp(t)),o=new Ul(await dp(n)),m=n===Hd.OPFS;await r.copyTo(o,{ignoreSqlite:m},a)}}async uploadDir(t,n,a,r){const o=this.dataSpace.dbName;let m=r||["spaces",o,"files"];if(!this.dataSpace.efsManager)throw new Error("file manager not found");await this.dataSpace.efsManager.addDir(m,t.name),m=[...m,t.name];for await(const[h,g]of t.entries())if(g.kind==="directory")await this.uploadDir(g,n,a,m);else if(g.kind==="file")try{const u=await g.getFile(),k=xa(),O=await this.dataSpace.efsManager.addFile(m,u);if(!O)throw new Error("add file failed");const{name:w,size:N,type:Z}=u,ae=O.join("/"),Ae={id:k,name:w,size:N,mime:Z,path:ae};await this.add(Ae)}catch{}finally{a++,this.dataSpace.blockUIMsg(`uploading ${name}`,{progress:a/n*100})}}async upload(t,n,a,r){const h=[...["spaces",this.dataSpace.dbName,"files"],...r||[]];if(!this.dataSpace.efsManager)throw new Error("file manager not found");const g=xa(),u=typeof t=="string"?new Blob([Buffer.from(t,"base64")],{type:a}):new Blob([t],{type:a}),k=new File([u],n,{type:a}),O=await this.dataSpace.efsManager.addFile(h,k);if(!O)throw new Error("add file failed");const w=O.join("/"),N={id:g,name:n,size:k.size,mime:a,path:w};return{...await this.add(N),publicUrl:this.dataSpace.efsManager.getFileUrlByPath(w)}}}class iS extends Us{constructor(){super(...arguments);ye(this,"name",R1);ye(this,"createTableSql",`
  CREATE TABLE IF NOT EXISTS ${this.name} (
    self_table_name TEXT,
    self_table_column_name TEXT,
    ref_table_name TEXT,
    ref_table_column_name TEXT,
    link_table_name TEXT,
    link_table_column_name TEXT,
    self GENERATED ALWAYS AS (self_table_name || '.' || self_table_column_name) STORED,
    ref GENERATED ALWAYS AS (ref_table_name || '.' || ref_table_column_name) STORED,
    link GENERATED ALWAYS AS (link_table_name || '.' || link_table_column_name) STORED,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (self_table_name, self_table_column_name, ref_table_name, ref_table_column_name, link_table_name, link_table_column_name),
    FOREIGN KEY (self_table_name, self_table_column_name) REFERENCES ${$n}(table_name, table_column_name) ON DELETE CASCADE
  );
`);ye(this,"getEffectedFields",async(t,n)=>{const a=`
      SELECT * FROM ${this.name} WHERE (
        (ref_table_name = ? AND ref_table_column_name = ?) OR (link_table_name = ? AND link_table_column_name = ?)
      )
    `;return(await this.dataSpace.syncExec2(a,[t,n,t,n])).map(o=>({table_name:o.self_table_name,table_column_name:o.self_table_column_name}))})}del(t){throw new Error("Method not implemented.")}}class oS extends Us{constructor(){super(...arguments);ye(this,"name",S1);ye(this,"createTableSql",`
    CREATE TABLE IF NOT EXISTS ${this.name} (
        id TEXT PRIMARY KEY,
        name TEXT,
        description TEXT,
        type TEXT DEFAULT 'script',
        version TEXT,
        code TEXT,
        ts_code TEXT,
        model TEXT,
        prompt_config TEXT,
        commands TEXT,
        tables TEXT,
        envs TEXT,
        env_map TEXT,
        fields_map TEXT,
        enabled BOOLEAN DEFAULT 0,
        bindings TEXT,
        dependencies TEXT,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    );
`);ye(this,"JSONFields",["commands","tables","envs","env_map","fields_map","prompt_config","bindings","dependencies"])}async del(t){return await this.dataSpace.db.transaction(async()=>{await this.dataSpace.exec2(`DELETE FROM ${this.name} WHERE id = ?`,[t]);const n=await this.dataSpace.chat.getChatIdsByProjectId(t);await Promise.all(n.map(a=>this.dataSpace.chat.delete(a)))}),!0}async enable(t){return this.dataSpace.exec2(`UPDATE ${this.name} SET enabled = 1 WHERE id = ?`,[t]),Promise.resolve(!0)}async disable(t){return this.dataSpace.exec2(`UPDATE ${this.name} SET enabled = 0 WHERE id = ?`,[t]),Promise.resolve(!0)}async updateEnvMap(t,n){return this.dataSpace.exec2(`UPDATE ${this.name} SET env_map = ? WHERE id = ?`,[JSON.stringify(n),t]),Promise.resolve(!0)}}class lS extends Us{constructor(){super(...arguments);ye(this,"name",Ln);ye(this,"createTableSql",`
  CREATE TABLE IF NOT EXISTS ${Ln} (
    id TEXT PRIMARY KEY NOT NULL,
    name TEXT,
    type TEXT,
    parent_id TEXT NULL,
    is_pinned BOOLEAN DEFAULT 0,
    is_full_width BOOLEAN DEFAULT 0,
    is_locked BOOLEAN DEFAULT 0,
    icon TEXT NULL,
    cover TEXT NULL,
    is_deleted BOOLEAN DEFAULT 0,
    hide_properties BOOLEAN DEFAULT 0,
    position REAL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );
  
  CREATE TEMP TRIGGER IF NOT EXISTS ${Ln}_insert_trigger
  AFTER INSERT ON ${Ln}
  BEGIN
    SELECT eidos_meta_table_event_insert(
      '${Ln}',
      json_object(
        'id', new.id,
        'name', new.name,
        'type', new.type,
        'parent_id', new.parent_id,
        'is_pinned', new.is_pinned,
        'is_full_width', new.is_full_width,
        'is_locked', new.is_locked,
        'icon', new.icon,
        'cover', new.cover,
        'is_deleted', new.is_deleted,
        'hide_properties', new.hide_properties,
        'position', new.position,
        'created_at', new.created_at,
        'updated_at', new.updated_at
      )
    );
  END;
  `);ye(this,"getNextRowId",async()=>(await this.dataSpace.exec2(`SELECT max(rowid) as maxId from ${Ln};`))[0].maxId+1)}async add(t){const n=await this.getNextRowId();return this.dataSpace.exec(`INSERT INTO ${Ln} (id,name,type,parent_id,position) VALUES (? , ? , ? , ?,?);`,[t.id,t.name,t.type,t.parent_id,n]),Promise.resolve({...t,position:n})}async get(t){const n=await this.dataSpace.exec2(`SELECT * FROM ${Ln} where id = ?;`,[t]);return n.length===0?null:n[0]}async updateName(t,n){try{return await this.dataSpace.exec2(`UPDATE ${Ln} SET name = ? WHERE id = ?;`,[n,t]),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}async pin(t,n){return await this.dataSpace.exec2(`UPDATE ${Ln} SET is_pinned = ? WHERE id = ?;`,[n,t]),Promise.resolve(!0)}async del(t,n=this.dataSpace.db){return this.dataSpace.syncExec2(`DELETE FROM ${Ln} WHERE id = ?`,[t],n),!0}makeProxyRow(t){const n=this.dataSpace;return new Proxy(t,{get(a,r,o){return r==="children"?[]:Reflect.get(a,r,o)},set(a,r,o,m){return n.exec(`UPDATE ${Ln} SET ${r} = ? WHERE id = ?;`,[o,a.id]),Reflect.set(a,r,o,m)}})}async query(t){const{query:n,withSubNode:a}=t;let r=`SELECT * FROM ${Ln} `;n&&(r+=" WHERE name like ?"),n&&!a&&(r+=" AND parent_id is null"),r+=" ORDER BY position DESC;";const o=n?[`%${n}%`]:void 0;return(await this.dataSpace.exec2(r,o)).map(h=>h)}async moveIntoTable(t,n,a){try{return await this.dataSpace.db.transaction(async r=>{var h;this.dataSpace.syncExec2(`UPDATE ${Ln} SET parent_id = ? WHERE id = ?;`,[n,t],r);const o=br(n),m=(h=await this.get(t))==null?void 0:h.name;if(a){const g=br(a);this.dataSpace.syncExec2(`DELETE FROM ${g} WHERE _id = ?;`,[jl(t)],r)}this.dataSpace.syncExec2(`INSERT INTO ${o} (_id,title) VALUES (?,?);`,[jl(t),m],r)}),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}async getNode(t){const n=await this.dataSpace.exec2(`SELECT * FROM ${Ln} WHERE id = ? OR substr(id, -8) = ?;`,[t,t]);return n.length>0?n[0]:null}async checkLoop(t,n){if(t===n)throw new Error("Can't move into a child node");{const a=await this.getAdjacencyList(),r=new Set;if(this.dfs(a,r,t,n))throw new Error("Can't move into a child node")}}async getAdjacencyList(){const t=await this.dataSpace.exec2(`SELECT id, parent_id FROM ${Ln}`),n=new Map;for(const a of t)n.has(a.parent_id)||n.set(a.parent_id,[]),n.get(a.parent_id).push(a.id);return n}dfs(t,n,a,r){if(a===r)return!0;n.add(a);const o=t.get(a)||[];for(const m of o)if(!n.has(m)&&this.dfs(t,n,m,r))return!0;return!1}async getPosition(t){const{parentId:n,targetId:a,targetDirection:r}=t,o=await this.list({parent_id:n||null},{orderBy:"position",order:"DESC"}),m=o.findIndex(w=>w.id===a),h=r==="up"?m-1:m,g=r==="up"?m:m+1,u=o[h],k=o[g];return h===-1?(k==null?void 0:k.position)+.5:k?(((u==null?void 0:u.position)||0)+(k==null?void 0:k.position))/2:(u==null?void 0:u.position)/2}}const cS=(s,e)=>{var a;const n=ss.parseFirst(s);return(a=n.from)==null||a.forEach(r=>{if(r.type==="table"){const o=r.name.name;r.name.name=e[o]??o}}),ss.toSql.statement(n)},uS=(s,e)=>{var r;const n=ss.parseFirst(s);(r=n.columns)!=null&&r.length&&n.columns.push({expr:{type:"call",function:{name:"row_number"},args:[],over:{orderBy:n.orderBy}},alias:{name:"_index_in_view"}});let a=ss.toSql.statement(n);return a=`WITH RankedResults AS (
${a}
)
SELECT
  _index_in_view
FROM
  RankedResults
WHERE
  _id = '${e}';`,a};var Oh=(s=>(s.Grid="grid",s.Gallery="gallery",s.DocList="doc_list",s))(Oh||{}),pS=Object.defineProperty,mS=Object.getOwnPropertyDescriptor,fS=(s,e,t,n)=>{for(var a=mS(e,t),r=s.length-1,o;r>=0;r--)(o=s[r])&&(a=o(e,t,a)||a);return a&&pS(e,t,a),a};class Ch extends Us{constructor(){super(...arguments);ye(this,"name",I1);ye(this,"createTableSql",`
CREATE TABLE IF NOT EXISTS ${this.name} (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  type TEXT NOT NULL,
  table_id TEXT NOT NULL,
  query TEXT NOT NULL,
  properties TEXT,
  filter TEXT,
  order_map TEXT,
  hidden_fields TEXT,
  position REAL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
`);ye(this,"JSONFields",["properties","filter","order_map","hidden_fields"])}async add(t){const n=await this.getLastPosition()+1;return await this.dataSpace.exec2(`INSERT INTO ${this.name} (id,name,type,table_id,query,position) VALUES (? , ? , ? , ? , ?, ?);`,[t.id,t.name,t.type,t.table_id,t.query,n]),{...t,position:n}}async del(t){try{return await this.dataSpace.exec2(`DELETE FROM ${this.name} WHERE id = ?`,[t]),!0}catch(n){return console.warn(n),!1}}async deleteByTableId(t,n=this.dataSpace.db){this.dataSpace.syncExec2(`DELETE FROM ${this.name} WHERE table_id = ?`,[t],n)}async updateQuery(t,n){await this.dataSpace.exec2(`UPDATE ${this.name} SET query = ? WHERE id = ?`,[n,t])}async createDefaultView(t){return await this.add({id:xa(),name:"New View",type:Oh.Grid,table_id:t,query:`SELECT * FROM tb_${t}`})}async isRowExistInQuery(t,n,a){const r=`temp_table_${xa().slice(0,8)}`,o=`tb_${t}`;let m=!1;try{await this.dataSpace.exec2(`CREATE TEMPORARY TABLE ${r} AS SELECT * FROM ${o} WHERE _id = ?`,[n]);const h=cS(a,{[o]:r});m=(await this.dataSpace.exec2(h)).length>0}catch{}finally{await this.dataSpace.exec2(`DROP TABLE ${r}`)}return m}async findRowIndexInQuery(t,n,a){const r=`tb_${t}`;console.log("findRowIndexInQuery",r,n,a);try{const o=uS(a,n),m=await this.dataSpace.exec2(o);return console.log("result",a,m),m[0]._index_in_view}catch(o){console.error(o)}finally{}return 1}async recompute(t,n){const a=`tb_${t}`,r=n.map(()=>"?").join(",");return await this.dataSpace.exec2(`SELECT * FROM ${a} where _id in (${r})`,n)}async getLastPosition(){return(await this.dataSpace.exec2(`SELECT COALESCE(MAX(position), 0) as maxPosition from ${this.name};`))[0].maxPosition}async getPosition(t){const{tableId:n,targetId:a,targetDirection:r}=t,o=1,m=await this.list({table_id:n},{orderBy:"position",order:"ASC"}),h=m.findIndex(w=>w.id===a),g=r==="up"?h-1:h,u=r==="up"?h:h+1,k=m[g],O=m[u];if(g===-1)return O?O.position-o:1;if(!O)return k.position+o;if(O.position-k.position<=1){const w=[...m];let N=1;for(const Z of w)await this.updatePosition(Z.id,N++);return this.getPosition(t)}return Math.floor((k.position+O.position)/2)}async updatePosition(t,n){await this.dataSpace.exec2(`UPDATE ${this.name} SET position = ? WHERE id = ?`,[n,t])}async movePosition(t){const{dragId:n,targetId:a,direction:r,tableId:o}=t;if(n!==a)try{const m=await this.getPosition({tableId:o,targetId:a,targetDirection:r});console.log(m,n),await this.updatePosition(n,m)}catch(m){throw console.error("Failed to move view position:",m),new Error("Failed to update view position")}}async reorderViews(t){if(t.length!==0)try{await this.dataSpace.db.transaction(async n=>{let a=t.length*1e3;for(const r of t)this.dataSpace.syncExec2(`UPDATE ${this.name} SET position = ? WHERE id = ?`,[a,r],n),a-=1e3})}catch(n){throw console.error("Failed to reorder views:",n),new Error("Failed to reorder views")}}}fS([xr(100)],Ch.prototype,"recompute");const dS=s=>({ALL_UDF:[{name:"twice",xFunc:function(c,I){return I+I},deterministic:!0},{name:"props",xFunc:function(c,I){return I},deterministic:!0},{name:"today",xFunc:function(c){return new Date().toISOString().slice(0,10)},deterministic:!0},{name:"uuidv4",xFunc:function(c){return Bl()},deterministic:!1},{name:"uuidv7",xFunc:function(c){return co()},deterministic:!1},{name:"eidos_data_event_update",xFunc:function(c,I,d,j){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.Update,table:I,_new:JSON.parse(d),_old:JSON.parse(j)}})}},{name:"eidos_data_event_insert",xFunc:function(c,I,d){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.Insert,table:I,_new:JSON.parse(d)}})}},{name:"eidos_data_event_delete",xFunc:function(c,I,d){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.Delete,table:I,_old:JSON.parse(d)}})}},{name:"eidos_column_event_insert",xFunc:function(c,I,d){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.AddColumn,table:I,_new:JSON.parse(d)}})}},{name:"eidos_column_event_update",xFunc:function(c,I,d,j){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.UpdateColumn,table:I,_new:JSON.parse(d),_old:JSON.parse(j)}})}},{name:"eidos_meta_table_event_insert",xFunc:function(c,I,d){s.postMessage({type:Wn.MetaTableUpdateSignalType,payload:{type:xn.Insert,table:I,_new:JSON.parse(d)}})}}],ALL_UDF_NO_CTX:[{name:"twice",xFunc:function(c){return c+c},deterministic:!0},{name:"props",xFunc:function(c){return c},deterministic:!0},{name:"today",xFunc:function(){return new Date().toISOString().slice(0,10)},deterministic:!0},{name:"uuidv4",xFunc:function(){return Bl()},deterministic:!1},{name:"uuidv7",xFunc:function(){return co()},deterministic:!1},{name:"eidos_data_event_update",xFunc:function(c,I,d){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.Update,table:c,_new:JSON.parse(I),_old:JSON.parse(d)}})}},{name:"eidos_data_event_insert",xFunc:function(c,I){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.Insert,table:c,_new:JSON.parse(I)}})}},{name:"eidos_data_event_delete",xFunc:function(c,I){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.Delete,table:c,_old:JSON.parse(I)}})}},{name:"eidos_column_event_insert",xFunc:function(c,I){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.AddColumn,table:c,_new:JSON.parse(I)}})}},{name:"eidos_column_event_update",xFunc:function(c,I,d){s.postMessage({type:Wn.DataUpdateSignalType,payload:{type:xn.UpdateColumn,table:c,_new:JSON.parse(I),_old:JSON.parse(d)}})}},{name:"eidos_meta_table_event_insert",xFunc:function(c,I){s.postMessage({type:Wn.MetaTableUpdateSignalType,payload:{type:xn.Insert,table:c,_new:JSON.parse(I)}})}}]});class _S extends Us{constructor(){super(...arguments);ye(this,"name",Za);ye(this,"createTableSql",`
  CREATE TABLE IF NOT EXISTS ${Za} (
    id TEXT PRIMARY KEY,
    title TEXT,
    user_id TEXT,
    project_id TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );

  CREATE TEMP TRIGGER IF NOT EXISTS ${Za}_insert_trigger
  AFTER INSERT ON ${Za}
  BEGIN
    SELECT eidos_meta_table_event_insert(
      '${Za}',
      json_object(
        'id', new.id,
        'title', new.title,
        'user_id', new.user_id,
        'project_id', new.project_id,
        'created_at', new.created_at
      )
    );
  END;
  `)}async getChatIdsByProjectId(t){const n=`SELECT id FROM ${this.name} WHERE project_id = ?`;return(await this.dataSpace.exec2(n,[t])).map(r=>r.id)}async delete(t){await this.dataSpace.db.transaction(async()=>{await this.dataSpace.message.deleteMessagesByChatId(t);const n=`DELETE FROM ${this.name} WHERE id = ?`;await this.dataSpace.exec2(n,[t])})}}class hS extends Us{constructor(){super(...arguments);ye(this,"name",zi);ye(this,"createTableSql",`
  CREATE TABLE IF NOT EXISTS ${zi} (
    id TEXT PRIMARY KEY,
    chat_id TEXT,
    role TEXT,
    content TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(chat_id) REFERENCES ${Za}(id)
  );

  CREATE TEMP TRIGGER IF NOT EXISTS ${zi}_insert_trigger
  AFTER INSERT ON ${zi}
  BEGIN
    SELECT eidos_meta_table_event_insert(
      '${zi}',
      json_object(
        'id', new.id,
        'chat_id', new.chat_id,
        'role', new.role,
        'content', new.content,
        'created_at', new.created_at
      )
    );
  END;
  `)}async deleteMessagesByChatId(t){const n=`DELETE FROM ${this.name} WHERE chat_id = ?`;await this.dataSpace.exec2(n,[t])}async clearMessages(t){const n=`DELETE FROM ${this.name} WHERE chat_id = ?`;await this.dataSpace.exec2(n,[t])}}uo.And,uo.Or,lt.Equal,lt.NotEqual,lt.GreaterThan,lt.GreaterThanOrEqual,lt.LessThan,lt.LessThanOrEqual,lt.NotContains,lt.IsEmpty,lt.IsNotEmpty;uo.And+"",uo.Or+"",lt.Equal+"",lt.NotEqual+"",lt.GreaterThan+"",lt.GreaterThanOrEqual+"",lt.LessThan+"",lt.LessThanOrEqual+"",lt.Contains+"",lt.StartsWith+"",lt.EndsWith+"",lt.NotContains+"",lt.IsEmpty+"",lt.IsNotEmpty+"";class bS{constructor(e){this.dataspace=e}async createDynamicFTS(e,t=!1,n=!1){throw await this.dataspace.db.selectObjects(`PRAGMA table_info(${e})`),new Error("Full text search is not supported in web mode")}async createTriggers(e,t){const n=`fts_${e}`,a=[`CREATE TRIGGER IF NOT EXISTS fts_${e}_ai AFTER INSERT ON ${e} BEGIN
                INSERT INTO ${n}(rowid, ${t}) 
                VALUES (new.rowid, ${t.split(",").map(r=>`new.${r.trim()}`).join(",")});
            END;`,`CREATE TRIGGER IF NOT EXISTS fts_${e}_ad AFTER DELETE ON ${e} BEGIN
                INSERT INTO ${n}(${n}, rowid) VALUES('delete', old.rowid);
            END;`,`CREATE TRIGGER IF NOT EXISTS fts_${e}_au AFTER UPDATE ON ${e} BEGIN
                INSERT INTO ${n}(${n}, rowid) VALUES('delete', old.rowid);
                INSERT INTO ${n}(rowid, ${t})
                VALUES (new.rowid, ${t.split(",").map(r=>`new.${r.trim()}`).join(",")});
            END;`];for(const r of a)await this.dataspace.db.exec(r)}async search(e,t,n,a=1,r=20){throw new Error("Full text search is not supported in web mode")}async updateTrigger(e,t){const n=[`fts_${e}_ai`,`fts_${e}_ad`,`fts_${e}_au`];for(const o of n)await this.dataspace.db.exec(`DROP TRIGGER IF EXISTS ${o}`);const r=(await this.dataspace.db.selectObjects(`PRAGMA table_info(${e})`)).map(o=>o.name).filter(o=>o.toLowerCase()!=="rowid"&&!t.includes(o)).join(", ");await this.createTriggers(e,r)}async clearFTS(e){throw new Error("Full text search is not supported in web mode")}async dropFTS(e){throw new Error("Full text search is not supported in web mode")}async hasFTS(e){throw new Error("Full text search is not supported in web mode")}async rebuildFTS(e){throw new Error("Full text search is not supported in web mode")}}var yS=Object.defineProperty,gS=Object.getOwnPropertyDescriptor,Jr=(s,e,t,n)=>{for(var a=gS(e,t),r=s.length-1,o;r>=0;r--)(o=s[r])&&(a=o(e,t,a)||a);return a&&yS(e,t,a),a};class Ks{constructor(e){ye(this,"db");ye(this,"draftDb");ye(this,"sqlite3");ye(this,"undoRedoManager");ye(this,"activeUndoManager");ye(this,"dbName");ye(this,"doc");ye(this,"action");ye(this,"script");ye(this,"tree");ye(this,"view");ye(this,"column");ye(this,"reference");ye(this,"embedding");ye(this,"chat");ye(this,"message");ye(this,"file");ye(this,"dataChangeTrigger");ye(this,"linkRelationUpdater");ye(this,"allTables",[]);ye(this,"hasLoadExtension",!1);ye(this,"postMessage");ye(this,"callRenderer");ye(this,"dataEventChannel");ye(this,"eventHandler");ye(this,"efsManager");ye(this,"hasMigrated",!1);ye(this,"tableFullTextSearch");ye(this,"isServer",!1);ye(this,"deleteSelectOption",async(e,t)=>{const n=Tn(e.table_name),a=this.table(n);if(e.type===wt.Select)return await a.fields.select.deleteSelectOption(e,t);if(e.type===wt.MultiSelect)return await a.fields.multiSelect.deleteSelectOption(e,t)});ye(this,"updateSelectOptionName",async(e,t)=>{if(t.from==t.to)return;const n=Tn(e.table_name),a=this.table(n);if(e.type===wt.Select)return await a.fields.select.updateSelectOptionName(e,t);if(e.type===wt.MultiSelect)return await a.fields.multiSelect.updateSelectOptionName(e,t)});ye(this,"sql2",this.sql);ye(this,"sqlQuery",this.sql4mainThread);const{db:t,activeUndoManager:n,dbName:a,sqlite3:r,draftDb:o,context:m,createUDF:h,postMessage:g,efsManager:u,dataEventChannel:k,hasLoadExtension:O,callRenderer:w,cacheSize:N,isServer:Z}=e;this.db=t,this.isServer=Z||t instanceof c_,this.hasLoadExtension=!!O,N&&this.setCacheSize(N),k?this.dataEventChannel=k:this.dataEventChannel=new BroadcastChannel(Tp),w?this.callRenderer=w:this.callRenderer=(ae,Ae)=>{const Pe=new MessageChannel;return self.postMessage({type:ae,data:Ae},[Pe.port2]),new Promise(ze=>{Pe.port1.onmessage=pe=>{ze(pe.data)}})},this.sqlite3=r,this.draftDb=o,this.dbName=a,this.postMessage=g,this.efsManager=u,this.initUDF(),this.eventHandler=new hp(this),this.dataChangeTrigger=new f0,this.linkRelationUpdater=new d0(this,m.setInterval),this.doc=new Ep(this),this.action=new sS(this),this.script=new oS(this),this.tree=new lS(this),this.view=new Ch(this),this.file=new aS(this),this.column=new Pr(this),this.embedding=new rS(this),this.reference=new iS(this),this.chat=new _S(this),this.message=new hS(this),this.allTables=[this.doc,this.action,this.script,this.tree,this.view,this.column,this.embedding,this.file,this.reference,this.chat,this.message],this.initMetaTable(),this.draftDb&&new h0(this,this.draftDb).migrate().then(()=>{this.hasMigrated=!0}),h&&h(this.db),this.undoRedoManager=new _0(this),this.activeUndoManager=n,this.tableFullTextSearch=new bS(this)}closeDb(){this.db.close()}setCacheSize(e){this.exec(`PRAGMA cache_size = ${e}`)}initUDF(){const e=dS(this.dataEventChannel);this.isServer?e.ALL_UDF_NO_CTX.forEach(t=>{this.db.createFunction(t)}):e.ALL_UDF.forEach(t=>{this.db.createFunction(t)})}initMetaTable(){this.allTables.forEach(e=>{this.db.exec(e.createTableSql)})}async onTableChange(e,t,n){if(e===this.dbName){const a=await this.listRawColumns(t);await this.dataChangeTrigger.setTrigger(this,t,a,n),this.activeUndoManager&&this.activeTablesUndoRedo([t])}}async addEmbedding(e){return await this.embedding.add(e)}table(e){return new ns(e,this)}createTableIndex(e,t){this.table(e).index.createIndex(t,()=>{this.blockUIMsg("You are operating on a large table; auto indexing, please wait.")},()=>{this.blockUIMsg(null)})}async getLookupContext(e,t){const n=Tn(e);return this.table(n).fields.lookup.getLookupContext(e,t)}updateLookupColumn(e,t){const n=Tn(e);return this.table(n).fields.lookup.updateColumn({tableName:e,tableColumnName:t})}async setRow(e,t,n){return await this.table(e).rows.update(t,n,{useFieldId:!0})}async setCell(e){const n=await this.table(e.tableId).rows.get(e.rowId,{raw:!0});if((n==null?void 0:n[e.fieldId])!==e.value){await this.table(e.tableId).rows.update(e.rowId,{[e.fieldId]:e.value},{useFieldId:!0});return}}async getRow(e,t){const a=await this.table(e).rows.query({_id:t},{limit:1,raw:!0});return a.length===0?null:a[0]}async deleteRowsByIds(e,t){const n=Tn(t);await this.table(n).rows.batchDelete(e),this.undoRedoManager.event()}async deleteRowsByRange(e,t,n){var r;((r=n.toLowerCase().match(/order by/g))==null?void 0:r[0])!=="order by"&&(n+=" ORDER BY _id");const a=`DELETE FROM ${t} WHERE _id in (SELECT _id FROM (${n}) LIMIT ? OFFSET ?)`;await this.db.transaction(async o=>{for(const m of e.reverse()){const h=[m.endIndex-m.startIndex,m.startIndex];this.syncExec2(a,h,o)}}),this.undoRedoManager.event()}async addFile(e){return await this.file.add(e)}async uploadDir(e,t){const n=new Ul(e);console.log(n);const a=await n.walk([]);console.log(a);const r=a.length;console.log(r),await this.file.uploadDir(e,r,0,t),this.blockUIMsg(null)}async getFileById(e){return await this.file.get(e)}async getFileByPath(e){return await this.file.getFileByPath(e)}async delFile(e){return await this.file.del(e)}async delFileByPath(e){const t=await this.file.getFileByPath(e);if(t)return await this.file.del(t.id)}async deleteFileByPathPrefix(e){return await this.file.deleteFileByPathPrefix(e)}async updateFileVectorized(e,t){return await this.file.updateVectorized(e,t)}async saveFile2EFS(e,t=[],n){return await this.file.saveFile2EFS(e,t,n)}async listFiles(){return await this.file.list()}async walkFiles(){return await this.file.walk()}async transformFileSystem(e,t){return await this.file.transformFileSystem(e,t)}async listViews(e){return await this.view.list({table_id:e},{order:"ASC",orderBy:"position"})}async addView(e){return await this.view.add(e)}async delView(e){return await this.view.del(e)}async updateView(e,t){return await this.view.set(e,t)}async createDefaultView(e){return await this.view.createDefaultView(e)}async isRowExistInQuery(e,t,n){return await this.view.isRowExistInQuery(e,t,n)}async getRecomputeRows(e,t){return await this.view.recompute(e,t)}async addField(e){return await this.column.addField(e)}async deleteField(e,t){this.blockUIMsg("Deleting column, please wait.");const n=await this.column.deleteField(e,t);return this.blockUIMsg(null),n}async changeColumnType(e,t,n){return await this.column.changeType(e,t,n)}async listRawColumns(e){return await this.db.selectObjects(`PRAGMA table_info(${e})`)}async updateColumnProperty(e){return await this.column.updateProperty(e)}async addRow(e,t){const n=Tn(e),a=new ns(n,this),r=await a.rows.create(t);return await a.rows.get(r._id,{raw:!0,withRowId:!0})}async addAction(e){await this.action.add(e)}async listActions(){return this.action.list()}async addScript(e){await this.script.add(e)}async listScripts(e="all"){const t=e==="all"?void 0:{enabled:e==="enabled"};return this.script.list(t,{orderBy:"created_at",order:"DESC"})}async callScript(e,t){return await this.script.call(e,t)}async getScript(e){return this.script.get(e)}async deleteScript(e){await this.script.del(e)}async updateScript(e){await this.script.set(e.id,e)}async enableScript(e){await this.script.enable(e)}async disableScript(e){await this.script.disable(e)}async rebuildIndex(e=!1){await this.doc.rebuildIndex({refillNullMarkdown:e})}async rebuildFTS(e){this.blockUIMsg("Rebuilding FTS table, please wait.");const t=br(e);await this.tableFullTextSearch.rebuildFTS(t),this.blockUIMsg(null)}async addDoc(e,t,n,a=!1){await this.doc.add({id:e,content:t,markdown:n,is_day_page:a})}async getDocBaseInfo(e){return this.doc.getBaseInfo(e)}async updateDoc(e,t,n,a=!1){const r=await this.doc.get(e),o=a||/^\d{4}-\d{2}-\d{2}$/g.test(e);r?(r.content!==t||r.markdown!==n)&&(console.log("doc really changed",e),await this.doc.set(e,{id:e,content:t,markdown:n,is_day_page:o})):await this.doc.add({id:e,content:t,markdown:n,is_day_page:o})}async getDoc(e){const t=await this.doc.get(e);return t==null?void 0:t.content}async getDocMarkdown(e){return this.doc.getMarkdown(e)}async createOrUpdateDocWithMarkdown(e,t,n,a,r){return this.createOrUpdateDoc({docId:e,content:t,type:"markdown",parent_id:n,title:a,mode:r})}async createOrUpdateDoc(e){return x1(e.docId)?this.doc.createOrUpdate({id:e.docId,text:e.content,type:e.type,mode:e.mode}):this.db.transaction(async()=>(await this.getOrCreateTreeNode({id:e.docId,name:e.title||e.docId,parent_id:e.parent_id,type:"doc"}),await this.doc.createOrUpdate({id:e.docId,text:e.content,type:e.type,mode:e.mode})))}async deleteDoc(e){await this.doc.del(e)}async listAllDocIds(){return(await this.doc.list({},{fields:["id"]})).map(t=>t.id)}async fullTextSearch(e){return this.doc.search(e)}async createTable(e,t){const{createTableSql:n,tableId:a}=ns.generateCreateTableSql(e);return console.log("create table sql: ",n),await this.createTableViaSchema(a,t,n),a}async createTableViaSchema(e,t,n,a){this.db.transaction(async r=>{await this.addTreeNode({id:e,name:t,type:"table",parent_id:a}),r.exec(n),await this.createDefaultView(e)})}async importCsv(e){const t=new kd;return console.log("importing csv file",e),await t.import(e,this)}async exportCsv(e){return await new kd().export(e,this)}async importMarkdown(e){return await new Ed().import(e,this)}async exportMarkdown(e){return await new Ed().export(e,this)}async fixTable(e){return await this.table(e).fixTable(e)}async hasSystemColumn(e,t){return await this.table(e).hasSystemColumn(e,t)}async restoreNode(e){await this.tree.set(e,{is_deleted:!1})}async deleteNode(e){await this.tree.set(e,{is_deleted:!0})}async isTableExist(e){return await this.table(e).isExist(e)}async deleteTable(e){await this.table(e).del(e)}async listDays(e){return await this.doc.listDayPage(e)}async listAllDays(){return await this.doc.listAllDayPages()}syncExec2(e,t=[],n=this.db){const a=[];if(this.isServer)try{return n.exec({sql:e,bind:t,returnValue:"resultRows",rowMode:"object"})}catch(r){r.toString().includes("SqliteError")&&this.notify({title:"SqliteError",description:r.toString()}),console.log(r)}return n.exec({sql:e,bind:t,returnValue:"resultRows",rowMode:"object",callback:r=>{a.push(r)}}),a}async exec2(e,t=[]){return this.syncExec2(e,t)}async runAIgeneratedSQL(e,t){const n=M1(e)||t,a=await this.column.list({table_name:n}),r=D1(e,a),o=await this.exec2(r);return mo.getReadableRows(o,a)}async listTreeNodes(e,t){return this.tree.query({query:e,withSubNode:t})}async updateTreeNodePosition(e,t){return this.tree.set(e,{position:t})}async pinNode(e,t){return this.tree.pin(e,t)}async toggleNodeFullWidth(e,t){return this.tree.set(e,{is_full_width:t})}async toggleNodeLock(e,t){return this.tree.set(e,{is_locked:t})}async updateTreeNodeName(e,t){const n=await this.tree.get(e);if((n==null?void 0:n.name)!==t)return this.db.transaction(async()=>{if(await this.tree.updateName(e,t),n!=null&&n.parent_id){const a=await this.tree.get(n.parent_id);if(a&&a.type==="table"){const r=br(a.id);await this.exec2(`UPDATE ${r} SET title = ? WHERE _id = ?`,[t,jl(e)])}}})}async addTreeNode(e){return this.tree.add(e)}async getOrCreateTreeNode(e){const t=await this.tree.get(e.id),n={...e},a=e.parent_id&&await this.tree.getNode(e.parent_id);if(a&&a.type==="table"){const r=br(a.id);n.parent_id=a.id,await this.exec2(`INSERT OR IGNORE INTO ${r} (_id,title) VALUES (?,?);`,[jl(e.id),e.name])}return t||this.tree.add(n)}async getTreeNode(e){return this.tree.get(e)}async moveDraftIntoTable(e,t,n){return this.tree.moveIntoTable(e,t,n)}async nodeChangeParent(e,t,n){t&&await this.tree.checkLoop(e,t);let a={parent_id:t};if(n){const r=await this.tree.getPosition({parentId:t,targetId:n.targetId,targetDirection:n.targetDirection});a={...a,position:r}}return await this.tree.set(e,a),a}async listUiColumns(e){return this.column.list({table_name:e})}async listAllUiColumns(){return this.exec2(`SELECT * FROM ${$n} ;`)}undo(){if(!this.activeUndoManager)throw new Error("undoRedo not active");this.undoRedoManager.callUndo()}redo(){if(!this.activeUndoManager)throw new Error("undoRedo not active");this.undoRedoManager.callRedo()}async activeTablesUndoRedo(e){e&&(this.undoRedoManager.deactivate(),this.undoRedoManager.activate(e))}execute(e,t=[]){const n=[];return this.db.exec({sql:e,bind:t,callback:a=>{n.push(a)}}),{fetchone:()=>n[0],fetchall:()=>n}}exec(e,t=[]){console.debug(e,t),this.db.exec({sql:e,bind:t,callback:n=>{}})}execSqlWithBind(e,t=[],n="array"){var r;const a=[];if(this.isServer)return this.db.exec({sql:e,bind:t,returnValue:"resultRows",rowMode:n});try{this.db.exec({sql:e,bind:t,returnValue:"resultRows",rowMode:n,callback:o=>{a.push(o)}})}catch(o){throw ms.error(o),ms.error({sql:e,bind:t}),(r=this.postMessage)==null||r.call(this,{type:_n.Error,data:{message:o.message,context:{sql:e,bind:t}}}),o}return a}async sql(e,...t){const{sql:n,bind:a}=L1(e,...t),r=this.execSqlWithBind(n,a);return Yf(n)||setTimeout(()=>this.undoRedoManager.event(),0),r}async sql4mainThread(e,t=[],n="array"){const a=await this.execSqlWithBind(e,t,n);return Yf(e)||setTimeout(()=>this.undoRedoManager.event(),30),a}async sql4mainThread2(e,t=[]){return this.execSqlWithBind(e,t,"object")}onUpdate(){var e;(e=this.postMessage)==null||e.call(this,{type:_n.DataUpdateSignal,data:{database:this.dbName}}),console.debug("onUpdate")}notify(e){var t;(t=this.postMessage)==null||t.call(this,{type:_n.Notify,data:e})}blockUIMsg(e,t){var n;console.log("blockUIMsg",e,t),(n=this.postMessage)==null||n.call(this,{type:_n.BlockUIMsg,data:{msg:e,data:t}})}email(e){}async createTableFTS(e,t=!1){return await this.tableFullTextSearch.createDynamicFTS(e,t)}async searchTableFTS(e,t,n,a=1,r=20){return await this.tableFullTextSearch.search(e,t,n,a,r)}async hasTableFTS(e){return await this.tableFullTextSearch.hasFTS(e)}}Jr([xr(100)],Ks.prototype,"addRow");Jr([xr(100)],Ks.prototype,"addDoc");Jr([xr(100)],Ks.prototype,"createTableViaSchema");Jr([xr(100)],Ks.prototype,"syncExec2");Jr([xr(100)],Ks.prototype,"execute");Jr([xr(100)],Ks.prototype,"exec");Jr([xr(100)],Ks.prototype,"execSqlWithBind");Jr([xr(100)],Ks.prototype,"sql4mainThread");const El=ms.info,Ad=ms.error;class wS{constructor(){ye(this,"sqlite3");ye(this,"getSQLite3",async function(){return El("Loading and initializing SQLite3 module..."),new Promise((e,t)=>{k1({print:El,printErr:Ad}).then(n=>{try{El("Running SQLite3 version",n.version.libVersion),n.capi.sqlite3_vfs_find("opfs")&&El("opfs vfs found"),e(n)}catch(a){Ad(a.name,a.message),t(a)}})})})}async init(){this.sqlite3=await this.getSQLite3()}async draftDb(){if(!this.sqlite3)throw new Error("sqlite3 not initialized");const e=new this.sqlite3.oo1.DB(":memory:","c");return new Ks({db:e,activeUndoManager:!1,dbName:"draft",sqlite3:this.sqlite3,context:{setInterval}})}async db(e){const{name:t,flags:n,vfs:a,path:r,draftDb:o}=e;if(!this.sqlite3)throw new Error("sqlite3 not initialized");const m=new this.sqlite3.oo1.OpfsDb(r,n);m.exec("PRAGMA foreign_keys = ON;");const h=await Sd("config-experiment");async function g(u){const k=new Map;(await u.selectObjects("SELECT DISTINCT name, code FROM eidos__scripts WHERE type = 'udf' AND enabled = 1")).forEach(w=>{const{code:N,name:Z}=w;k.set(Z,new Map);try{const ae=new Function("kv","return "+N),Ae={name:Z,xFunc:ae(k.get(Z)),deterministic:!0};u.createFunction(Ae)}catch(ae){console.error(ae)}})}return new Ks({db:m,activeUndoManager:!!(o&&h.experiment.undoRedo),dbName:t,sqlite3:this.sqlite3,draftDb:o,createUDF:g,context:{setInterval}})}}let Ls=null;const Jl=new wS;let Vi;const Nh=async(s,e,t)=>{if(!Jl.sqlite3)throw new Error("sqlite3 not initialized");const{method:n,params:a=[]}=s,r=s.dbName||s.space;Sl.currentCallUserId=s.userId,(!Ls||r&&r!==Ls.dbName)&&(Ls=await Ap(r));let o=()=>{};if(n.includes(".")){let h=Ls;const g=n.split(".");for(const u of g.slice(0,-1))if(u.includes("(")&&u.includes(")")){const[k,O]=u.split("("),w=h[k].bind(h),N=O.slice(0,-1).split(",");h=await w(...N)}else h=h[u];o=h[g[g.length-1]].bind(h)}else o=Ls[n].bind(Ls);const m=await o(...a);t.postMessage({id:e,data:{result:m},type:_n.QueryResp})},xS=async s=>`/spaces/${s}/db.sqlite3`;async function Ap(s){const e=await xS(s);if((Ls==null?void 0:Ls.db.filename)===e)return Ls;const t=await Jl.draftDb();return await Jl.db({path:e,flags:"c",name:s,draftDb:t})}async function $S(){await Jl.init();const s=await Sd("config-api"),{url:e,enabled:t}=s.apiAgentConfig;t?setTimeout(()=>{Ud(Nh,e,n=>{Vi=n})},1e3):Vi==null||Vi.close(),postMessage("init")}onmessage=async s=>{const{type:e,data:t,id:n}=s.data;switch(e){case _n.CallFunction:await Nh(t,n,s.ports[0]);break;case _n.SwitchDatabase:Ls=await Ap(t.databaseName),ms.info(`switch to database[${t.databaseName}]`),postMessage({id:n,data:{msg:"switchDatabase success",dbName:t.databaseName}});return;case _n.CreateSpace:await Ap(t.spaceName),ms.info(`create database[${t.spaceName}]`),s.ports[0].postMessage({id:n,data:{msg:"createSpace success",space:t.spaceName}});return;case _n.Syscall:Vi.send(JSON.stringify({id:n,data:{method:_n.Syscall,params:[t]}}));break;default:ms.warn("unknown msg type",e);break}};ms.info(`current version: ${lv}`);$S();
